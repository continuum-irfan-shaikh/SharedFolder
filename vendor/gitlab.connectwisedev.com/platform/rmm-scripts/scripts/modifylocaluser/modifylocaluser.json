{"id":"9dee47ed-6162-49b0-8390-e0b7ddcd05b5","partnerId":"00000000-0000-0000-0000-000000000000","category":["Management"],"description":"Configure the existing local user account","engine":"powershell","engineMaxVersion":5,"expectedExecutionTimeSec":300,"failureMessage":"Executed with errors","successMessage":"The user was successfully modified","internal":false,"name":"Modify local user","tags":["Windows 7","Windows 10"],"sequence":true,"content":"JHN5c3RlbVJvbGUgPSAoR2V0LVdtaU9iamVjdCAtQ2xhc3MgV2luMzJfQ29tcHV0ZXJTeXN0ZW0pLkRvbWFpblJvbGUKaWYgKCRzeXN0ZW1Sb2xlIC1lcSA0IC1vciAkc3lzdGVtUm9sZSAtZXEgNSl7IAogICAgV3JpdGUtT3V0cHV0ICJUaGlzIFRBU0sgaXMgbm90IHN1cHBvcnRlZCBvbiBhIERvbWFpbiBDb250cm9sbGVyLiIKICAgIEV4aXQKfQokbW9kaWZpY2F0aW9ucyA9IEB7fQokYWRzaSA9IFtBRFNJXSJXaW5OVDovLyRlbnY6Y29tcHV0ZXJuYW1lIgokZXhpc3RpbmcgPSAkYWRzaS5DaGlsZHJlbiB8IHdoZXJlIHskXy5TY2hlbWFDbGFzc05hbWUgLWVxICd1c2VyJyAtYW5kICRfLk5hbWUgLWVxICRhY2NvdW50TmFtZSB9CmlmICgkZXhpc3RpbmcpewogICAgaWYgKCRuZXdBY2NvdW50TmFtZSl7CiAgICAgICAgJHVzZXIgPSBnZXQtd21pT2JqZWN0IHdpbjMyX3VzZXJBY2NvdW50IC1maWx0ZXIgIk5hbWU9JyRhY2NvdW50TmFtZSciCiAgICAgICAgJHVzZXIuUmVuYW1lKCRuZXdBY2NvdW50TmFtZSkgPiAkbnVsbAogICAgICAgICRhY2NvdW50TmFtZSA9ICRuZXdBY2NvdW50TmFtZQogICAgICAgICRtb2RpZmljYXRpb25zLmFkZCgiQWNjb3VudCBuYW1lIGNoYW5nZWQgdG8iLCAkbmV3QWNjb3VudE5hbWUgKQogICAgfQogICAgaWYgKCRuZXdQYXNzd29yZCl7CiAgICAgICAgbmV0IHVzZXIgJGFjY291bnROYW1lICRuZXdQYXNzd29yZCA+ICRudWxsCiAgICAgICAgJG1vZGlmaWNhdGlvbnMuYWRkKCJQYXNzd29yZCBjaGFuZ2VkIiwgIlllcyIpCiAgICB9CiAgICBpZiAoJGFjdGl2ZSl7CiAgICAgICAgbmV0IHVzZXIgJGFjY291bnROYW1lIC9hY3RpdmU6InllcyIgPiAkbnVsbAogICAgICAgICRtb2RpZmljYXRpb25zLmFkZCgiQWNjb3VudCBpcyIsICJBY3RpdmUiKQogICAgfSBlbHNlIHsKICAgICAgICBuZXQgdXNlciAkYWNjb3VudE5hbWUgL2FjdGl2ZToibm8iID4gJG51bGwKICAgICAgICAkbW9kaWZpY2F0aW9ucy5hZGQoIkFjY291bnQgaXMgIiwgIkRpc2FibGVkIikKICAgIH0KICAgIGlmICgkdHlwZSl7CiAgICAgICAgJHVzZXIgPSAoR2V0LVdtaU9iamVjdCAtQ2xhc3MgV2luMzJfVXNlckFjY291bnQgfCB3aGVyZS1vYmplY3QgeyRfLk5hbWUgLWVxICIkYWNjb3VudE5hbWUifSkKICAgICAgICAkbWF0Y2hlZGdyb3VwID0gKChHZXQtV21pT2JqZWN0IC1DbGFzcyBXaW4zMl9Hcm91cCB8IHdoZXJlLW9iamVjdCB7JF8uTmFtZSAtZXEgIkFkbWluaXN0cmF0b3JzIn0pLkNhcHRpb24pCiAgICAgICAgJHVzZXIgfCBmb3JlYWNoIHsKICAgICAgICAgICAgJHF1ZXJ5ID0gIkFzc29jaWF0b3JzIE9mIHtXaW4zMl9Vc2VyQWNjb3VudC5Eb21haW49JyIgYAogICAgICAgICAgICArICRfLkRvbWFpbiArICInLE5hbWU9JyIgKyAkXy5OYW1lIGAKICAgICAgICAgICAgKyAiJ30gV0hFUkUgQXNzb2NDbGFzcz1XaW4zMl9Hcm91cFVzZXIiCiAgICAgICAgfQogICAgICAgICRtZW1iZXJPZiA9IEdldC1XbWlPYmplY3QgLVF1ZXJ5ICRxdWVyeSB8IHNlbGVjdCAtRXhwYW5kUHJvcGVydHkgQ2FwdGlvbgogICAgICAgIGlmICgkdHlwZSAtZXEgIkFkbWluaXN0cmF0b3JzIil7CiAgICAgICAgICAgIGlmICgkbWVtYmVyT2YgLW5vdGNvbnRhaW5zICRtYXRjaGVkZ3JvdXApewogICAgICAgICAgICB0cnkgeyAKICAgICAgICAgICAgICAgbmV0IGxvY2FsZ3JvdXAgJHR5cGUgJGFjY291bnROYW1lIC9hZGQgPiAkbnVsbH1jYXRjaHtXcml0ZS1Ib3N0ICJFcnJvciA6ICRfLkV4Y2VwdGlvbi5NZXNzYWdlIn0KICAgICAgICAgICAgICAgJG1vZGlmaWNhdGlvbnMuYWRkKCJNZW1iZXIgb2YgZ3JvdXAiLCAkdHlwZSApCiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2VpZiAoJG1lbWJlck9mIC1jb250YWlucyAkbWF0Y2hlZGdyb3VwKXsKICAgICAgICAgICAgbmV0IGxvY2FsZ3JvdXAgIkFkbWluaXN0cmF0b3JzIiAkYWNjb3VudE5hbWUgL2RlbGV0ZSA+ICRudWxsCiAgICAgICAgICAgICRtb2RpZmljYXRpb25zLmFkZCgiTWVtYmVyIG9mIGdyb3VwIiwgIkFkbWluaXN0cmF0b3JzIikKICAgICAgICB9CiAgICB9CiAgICBpZiAoJGV4cGlyZSl7CiAgICAgICAgbmV0IHVzZXIgJGFjY291bnROYW1lIC9leHBpcmVzOiIkZXhwaXJlIiA+ICRudWxsCiAgICAgICAgJG1vZGlmaWNhdGlvbnMuYWRkKCJBY2NvdW50IGV4cGlyZXMiLCAkZXhwaXJlKQogICAgfQogICAgaWYgKCRwYXNzd29yZGNoZyl7CiAgICAgICAgbmV0IHVzZXIgJGFjY291bnROYW1lIC9wYXNzd29yZGNoZzoiWWVzIiA+ICRudWxsCgogICAgICAgICRBY2NvdW50T2JqID0gR2V0LVdtaU9iamVjdCB3aW4zMl9VU0VSQUNDT1VOVCB8IFdoZXJlLU9iamVjdCB7JF8uTkFNRSAtZXEgJGFjY291bnROYW1lIH0KICAgICAgICAkQWNjb3VudE9iai5QYXNzd29yZEV4cGlyZXMgPSAkVHJ1ZQogICAgICAgICRBY2NvdW50T2JqLlB1dCgpIHwgT3V0LU51bGwKCiAgICAgICAgJHN0ckNvbXB1dGVyPSRlbnY6Q09NUFVURVJOQU1FCiAgICAgICAgJHVzZXI9IFtBRFNJXSJXaW5OVDovLyRzdHJDb21wdXRlci8kYWNjb3VudE5hbWUsdXNlciIKICAgICAgICAkdXNlci5QdXQoIlBhc3N3b3JkRXhwaXJlZCIsIDEpCiAgICAgICAgJHVzZXIuU2V0SW5mbygpCiAgICAgICAgJG1vZGlmaWNhdGlvbnMuYWRkKCJVc2VyIG11c3QgY2hhbmdlIHBhc3N3b3JkIGF0IG5leHQgbG9nb24iLCAiVHJ1ZSIpCiAgIH0gCgp9IGVsc2UgewogICAgV3JpdGUtRXJyb3IgIkFjY291bnQgbmFtZSAkYWNjb3VudE5hbWUgZG9lcyBub3QgZXhpc3QhIgogICAgRXhpdAp9CiRyZXN1bHQgPSBOZXctT2JqZWN0IC1UeXBlTmFtZSBwc29iamVjdCAtUHJvcGVydHkgJG1vZGlmaWNhdGlvbnMKV3JpdGUtT3V0cHV0ICJGb2xsb3dpbmcgcHJvcGVydGllcyBtb2RpZmllZCBmb3IgdGhlIGFjY291bnQgJGFjY291bnROYW1lIiAgCiRyZXN1bHQgfCBmbAoK","jsonSchema":{"additionalProperties":false,"properties":{"accountName":{"title":"User name","type":"string"},"active":{"title":"Active","type":"boolean"},"expire":{"id":"expire","title":"Expires","type":"string"},"newAccountName":{"title":"New user name","type":"string"},"newPassword":{"title":"New password","type":"string"},"passwordConfirmation":{"title":"Password confirmation","type":"string"},"passwordchg":{"title":"Change password at next logon","type":"boolean"},"type":{"enum":["administrators","users"],"enumNames":["Administrators","Users"],"title":"Type","type":"string"}},"required":["accountName"],"type":"object"},"uiSchema":{"accountName":{"classNames":"col-sm-12","ui:autofocus":true},"active":{"classNames":"col-sm-6"},"expire":{"classNames":"col-sm-6","ui:widget":"customDate","validationSchema":{"date":"expire","type":"dateShouldBeInFuture"}},"newAccountName":{"classNames":"col-sm-12"},"newPassword":{"classNames":"col-sm-6","ui:widget":"password","validationSchema":{"fields":["newPassword","passwordConfirmation"],"type":"shouldBeEqual"}},"passwordConfirmation":{"classNames":"col-sm-6","includeInResult":false,"ui:widget":"password"},"passwordchg":{"classNames":"col-sm-6"},"type":{"classNames":"col-sm-6","ui:placeholder":"Select type"},"ui:order":["accountName","newAccountName","newPassword","passwordConfirmation","type","expire","active","passwordchg"]}}
