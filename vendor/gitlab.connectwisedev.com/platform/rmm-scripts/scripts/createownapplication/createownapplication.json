{"id":"382dff6b-7722-11e9-a590-00155d130b01","partnerId":"00000000-0000-0000-0000-000000000000","category":["Application"],"description":"Installs or uninstalls a partner-defined application on Windows desktops and servers","engine":"powershell","engineMaxVersion":5,"expectedExecutionTimeSec":3600,"failureMessage":"Executed with errors","successMessage":"Excecuted successfully","internal":false,"name":"Create own application","tags":["Windows 7","Windows 10"],"sequence":true,"content":"I3JlZ2lvbiBVc2VySW5wdXQKCiMgJFR5cGVPZkluc3RhbGxlciA9ICdJbnN0YWxsZXInICMgc3RyaW5nIFttYW5kYXRvcnldCiMgJFBhY2thZ2VOYW1lID0gJ2Fkb2JlZmxhc2guZXhlJyAjIHN0cmluZyBbbWFuZGF0b3J5XQojICRUeXBlT2ZBcHBsaWNhdGlvbiA9ICdleGUnICMgc3RyaW5nIFttYW5kYXRvcnldCiMgJExvY2F0aW9uVHlwZSA9ICduZXR3b3JrJyAjIHN0cmluZyBbbWFuZGF0b3J5XQoKIyAkaHR0cCA9ICJkY21kd2xkLml0c3VwcG9ydDI0Ny5uZXQvRmlsZVppbGxhXzMuOC4wX3NldHVwLmV4ZSIgICMgc3RyaW5nIFttYW5kYXRvcnldCiMgJG5ldHdvcmsgPSAiXFwxMC4yLjE5LjI1XGUkXEFudGl2aXJ1cyBTZXR1cHNcUHJhdGVlayIgICMgc3RyaW5nIFttYW5kYXRvcnldCiMgJGxvY2FsID0gImM6XFVzZXJzXEFkbWluXEFwcERhdGFcTG9jYWxcVGVtcFwiICAjIHN0cmluZyBbbWFuZGF0b3J5XQojICRVbmluc3RhbGxhdGlvblBhdGggPSAiQzpcUHJvZ3JhbSBGaWxlc1xHb29nbGVcQ2hyb21lXEFwcGxpY2F0aW9uXDc0LjAuMzcyOS4xMzFcSW5zdGFsbGVyXHNldHVwLmV4ZSIgCiMgJFVuaW5zdGFsbGF0aW9uUGF0aCA9ICJDOlxVc2Vyc1xBZG1pblxBcHBEYXRhXExvY2FsXFRlbXBcYWRvYmVmbGFzaC5leGUiICAjIHN0cmluZyBbbWFuZGF0b3J5XQojICRVbmluc3RhbGxhdGlvblBhcmFtZXRlciA9ICdNc2lFeGVjLmV4ZSAvcW4gL3F1aWV0IC9Ye0MxOTdCQzA4LTNEODItNDY1MS04ODg2LUU2OEMyMTU3OEEzOH0nCiMgJFVuaW5zdGFsbGF0aW9uUGFyYW1ldGVyID0gJy11bmluc3RhbGwnCiMgJFVzZXJuYW1lID0gImFkbWluaXN0cmF0b3IiICAjIHN0cmluZyBbbWFuZGF0b3J5XQojICRQYXNzd29yZCA9ICJHcnRAMjAxOCIgICMgc3RyaW5nIFttYW5kYXRvcnldCiMgJE1ENUNoZWNrU3VtID0gJzYwRjUzMzg5QTk5Qjk0RTU0NzEzNkVFOTNCNUM5Mzc4JyAjIHN0cmluZwojICRJbnN0YWxsYXRpb25QYXJhbWV0ZXIgPSAnLWluc3RhbGwnICMgc3RyaW5nCgojICRQZXJmb3JtUHJlQ2hlY2sgPSAkdHJ1ZSAgICMgQm9vbGVhbgojICRQcmVDaGVja1R5cGUgPSAnQ2hlY2sgaWYgZmlsZSBleGlzdHMnICAgIyBTdHJpbmcKIyAkUHJlQ2hlY2tBY3Rpb24gPSAnSWYgZmlsZSBleGlzdHMgdGhlbiBDb250aW51ZScgICAjIFN0cmluZwojICRQcmVDaGVja0ZpbGVOYW1lID0gJ0M6XHRlbXBcQ2FwdHVyZVNjcmVlbnNob3QucHMxJyAgICMgU3RyaW5nCiMgJFByZUNoZWNrVmVyc2lvbiA9ICc3LjAuNC4zJyAgICMgU3RyaW5nCiMgJFByZUNoZWNrS2V5ID0gJ0hLRVlfTE9DQUxfTUFDSElORVxTT0ZUV0FSRVxNaWNyb3NvZnRcV2luZG93c1xDdXJyZW50VmVyc2lvblxVbmluc3RhbGxcREIgQnJvd3NlciBmb3IgU1FMaXRlJyAgICMgU3RyaW5nCiMgJFByZUNoZWNrVmFsdWUgPSAnbm9tb2RpZnknICAgIyBTdHJpbmcKIyAkUHJlQ2hlY2tEYXRhID0gJzEnICAgIyBTdHJpbmcKIyAkUHJlQ2hlY2tQcm9ncmFtID0gJ0dvb2dsZSBDaHJvbWUnICMgc3RyaW5nCgojICRQZXJmb3JtUG9zdENoZWNrID0gJHRydWUgICAjIEJvb2xlYW4KIyAkUG9zdENoZWNrVHlwZSA9ICdDaGVjayBpZiBBZGQgLyBSZW1vdmUgcHJvZ3JhbSBleGlzdHMnICAgIyBTdHJpbmcKIyAkUG9zdENoZWNrQWN0aW9uID0gJ0lmIHRoZSBwcm9ncmFtIGV4aXN0cyB0aGVuIG1hcmsgc3VjY2VzcycgICAjIFN0cmluZwojICRQb3N0Q2hlY2tGaWxlTmFtZSA9ICdDOlxwcmF0ZWVrXEZUUERvd24yXGNzZXR1cC5leGUnICAgIyBTdHJpbmcKIyAkUG9zdENoZWNrVmVyc2lvbiA9ICc3LjAuNC4zJyAgICMgU3RyaW5nCiMgJFBvc3RDaGVja0tleSA9ICdIS0VZX0xPQ0FMX01BQ0hJTkVcU09GVFdBUkVcTWljcm9zb2Z0XFdpbmRvd3NcQ3VycmVudFZlcnNpb25cVW5pbnN0YWxsXERCIEJyb3dzZXIgZm9yIFNRTGl0ZScgICAjIFN0cmluZwojICRQb3N0Q2hlY2tWYWx1ZSA9ICdub21vZGlmeScgICAjIFN0cmluZwojICRQb3N0Q2hlY2tEYXRhID0gJzEnICAgIyBTdHJpbmcKIyAkUG9zdENoZWNrUHJvZ3JhbSA9ICdBZG9iZSBGbGFzaCBQbGF5ZXIgMTEgUGx1Z2luJyAjIHN0cmluZwoKI2VuZHJlZ2lvbiBVc2VySW5wdXQgIAoKaWYgKCRlbnY6UFJPQ0VTU09SX0FSQ0hJVEVXNjQzMiAtZXEgIkFNRDY0IikgewogICAgaWYgKCRteUludm9jYXRpb24uTGluZSkgewogICAgICAgICYiJGVudjpzeXN0ZW1yb290XHN5c25hdGl2ZVx3aW5kb3dzcG93ZXJzaGVsbFx2MS4wXHBvd2Vyc2hlbGwuZXhlIiAtTm9uSW50ZXJhY3RpdmUgLU5vUHJvZmlsZSAkbXlJbnZvY2F0aW9uLkxpbmUKICAgIH0KICAgIGVsc2UgewogICAgICAgICYiJGVudjpzeXN0ZW1yb290XHN5c25hdGl2ZVx3aW5kb3dzcG93ZXJzaGVsbFx2MS4wXHBvd2Vyc2hlbGwuZXhlIiAtTm9uSW50ZXJhY3RpdmUgLU5vUHJvZmlsZSAtZmlsZSAiJCgkbXlJbnZvY2F0aW9uLkludm9jYXRpb25OYW1lKSIgJGFyZ3MKICAgIH0KICAgIGV4aXQgJGxhc3RleGl0Y29kZQp9ICAKCiNyZWdpb24gRnVuY3Rpb25zCmZ1bmN0aW9uIEdldC1NRDVIYXNoICgkcGF0aCkgewogICAgJG1kNSA9IE5ldy1PYmplY3QgLVR5cGVOYW1lIFN5c3RlbS5TZWN1cml0eS5DcnlwdG9ncmFwaHkuTUQ1Q3J5cHRvU2VydmljZVByb3ZpZGVyCiAgICByZXR1cm4gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkbWQ1LkNvbXB1dGVIYXNoKFtTeXN0ZW0uSU8uRmlsZV06OlJlYWRBbGxCeXRlcygkcGF0aCkpKSAtcmVwbGFjZSAnLScsICcnCn0KCmZ1bmN0aW9uIERvd25sb2FkLUZyb21VUkwgKCRVUkwsICRMb2NhbEZpbGVQYXRoKSB7CiAgICB0cnkgewogICAgICAgICMgV3JpdGUtSG9zdCAiRG93bmxvYWRpbmc6ICRVUkwiCiAgICAgICAgJFdlYkNsaWVudCA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5XZWJDbGllbnQKICAgICAgICAkV2ViQ2xpZW50LkRvd25sb2FkRmlsZSgkVVJMLCAkTG9jYWxGaWxlUGF0aCkKICAgICAgICBpZiAoLW5vdChUZXN0LVBhdGggJExvY2FsRmlsZVBhdGgpKSB7IFdyaXRlLUVycm9yICJVbmFibGUgdG8gZG93bmxvYWQgdGhlIGZpbGUgZnJvbSBVUkw6ICRVUkwiIH0KICAgIH0KICAgIGNhdGNoIHsKICAgICAgICBXcml0ZS1FcnJvciAiVW5hYmxlIHRvIGRvd25sb2FkIHRoZSBmaWxlIGZyb20gVVJMOiAkVVJMYG4kKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKSIKICAgIH0KfQoKZnVuY3Rpb24gRG93bmxvYWQtRnJvbUZUUCAoJFJlbW90ZUZUUEZpbGVQYXRoLCAkTG9jYWxGaWxlUGF0aCwgJFVzZXJOYW1lLCAkUGFzc3dvcmQpIHsKICAgIHRyeSB7CiAgICAgICAgIyBXcml0ZS1Ib3N0ICJEb3dubG9hZGluZzogJFJlbW90ZUZUUEZpbGVQYXRoIgogICAgICAgICRmdHByZXF1ZXN0ID0gW1N5c3RlbS5OZXQuRnRwV2ViUmVxdWVzdF06OmNyZWF0ZSgkUmVtb3RlRlRQRmlsZVBhdGgpCiAgICAgICAgJGZ0cHJlcXVlc3QuQ3JlZGVudGlhbHMgPSBOZXctT2JqZWN0IFN5c3RlbS5OZXQuTmV0d29ya0NyZWRlbnRpYWwoJHVzZXJuYW1lLCAkcGFzc3dvcmQpICAKICAgICAgICAkZnRwcmVxdWVzdC5NZXRob2QgPSBbU3lzdGVtLk5ldC5XZWJSZXF1ZXN0TWV0aG9kcytGdHBdOjpEb3dubG9hZEZpbGUgIAogICAgICAgICRmdHByZXF1ZXN0LlVzZUJpbmFyeSA9ICR0cnVlICAKICAgICAgICAkZnRwcmVxdWVzdC5LZWVwQWxpdmUgPSAkZmFsc2UgICAKICAgICAgICAkZnRwcmVzcG9uc2UgPSAkZnRwcmVxdWVzdC5HZXRSZXNwb25zZSgpICAKICAgICAgICAkcmVzcG9uc2VzdHJlYW0gPSAkZnRwcmVzcG9uc2UuR2V0UmVzcG9uc2VTdHJlYW0oKSAgCiAgICAgICAgJHRhcmdldGZpbGUgPSBOZXctT2JqZWN0IElPLkZpbGVTdHJlYW0gKCRMb2NhbEZpbGVQYXRoLCBbSU8uRmlsZU1vZGVdOjpDcmVhdGUpICAKICAgICAgICBbYnl0ZVtdXSRyZWFkYnVmZmVyID0gTmV3LU9iamVjdCBieXRlW10gMTAyNCAgCiAgICAKICAgICAgICBkbyB7ICAKICAgICAgICAgICAgJHJlYWRsZW5ndGggPSAkcmVzcG9uc2VzdHJlYW0uUmVhZCgkcmVhZGJ1ZmZlciwgMCwgMTAyNCkgIAogICAgICAgICAgICAkdGFyZ2V0ZmlsZS5Xcml0ZSgkcmVhZGJ1ZmZlciwgMCwgJHJlYWRsZW5ndGgpICAKICAgICAgICB9ICAKICAgICAgICB3aGlsZSAoJHJlYWRsZW5ndGggLW5lIDApICAKICAgICAgICAkdGFyZ2V0ZmlsZS5jbG9zZSgpCiAgICAgICAgICAKICAgICAgICBpZiAoLW5vdCAoVGVzdC1QYXRoICRMb2NhbEZpbGVQYXRoKSkgeyBXcml0ZS1FcnJvciAiVW5hYmxlIHRvIGRvd25sb2FkIHRoZSBmaWxlIGZyb20gRlRQIGxvY2F0aW9uOiAkUmVtb3RlRlRQRmlsZVBhdGgiIH0KICAgIAogICAgfQogICAgY2F0Y2ggewogICAgICAgIFdyaXRlLUVycm9yICJVbmFibGUgdG8gZG93bmxvYWQgdGhlIGZpbGUgZnJvbSBGVFAgbG9jYXRpb246ICRSZW1vdGVGVFBGaWxlUGF0aGBuJCgkXy5FeGNlcHRpb24uTWVzc2FnZSkiCiAgICB9Cn0KCmZ1bmN0aW9uIERvd25sb2FkLUZyb21VTkMgKCRSZW1vdGVVTkNGaWxlUGF0aCwgJFBhY2thZ2VOYW1lLCAkTG9jYWxGaWxlUGF0aCwgJFVzZXJOYW1lLCAkUGFzc3dvcmQpIHsKICAgIHRyeSB7CiAgICAgICAgIyBXcml0ZS1Ib3N0ICJEb3dubG9hZGluZzogJChKb2luLVBhdGggJFJlbW90ZVVOQ0ZpbGVQYXRoICRQYWNrYWdlTmFtZSkiCiAgICAgICAgJEZyZWVEcml2ZUxldHRlciA9IEdldC1SYW5kb21GcmVlRHJpdmVMZXR0ZXIKICAgICAgICBNYXBOZXR3b3JrRHJpdmUgLURyaXZlTGV0dGVyICRGcmVlRHJpdmVMZXR0ZXIgLURpcmVjdG9yeSAkUmVtb3RlVU5DRmlsZVBhdGggLVBlcnNpc3RlbnQgJGZhbHNlIC1Vc2VybmFtZSAkVXNlck5hbWUgLVBhc3N3b3JkICRQYXNzd29yZAogICAgICAgIENvcHktSXRlbSAkKEpvaW4tUGF0aCAkRnJlZURyaXZlTGV0dGVyICRQYWNrYWdlTmFtZSkgLURlc3RpbmF0aW9uICRMb2NhbEZpbGVQYXRoCiAgICAgICAgaWYgKC1ub3QgKFRlc3QtUGF0aCAkTG9jYWxGaWxlUGF0aCkpIHsgV3JpdGUtRXJyb3IgIlVuYWJsZSB0byBkb3dubG9hZCB0aGUgZmlsZSBmcm9tIE5ldHdvcmsgbG9jYXRpb246ICRSZW1vdGVVTkNGaWxlUGF0aCIgfQogICAgfQogICAgY2F0Y2ggewogICAgICAgIFdyaXRlLUVycm9yICJVbmFibGUgdG8gZG93bmxvYWQgdGhlIGZpbGUgZnJvbSBOZXR3b3JrIGxvY2F0aW9uOiAkUmVtb3RlVU5DRmlsZVBhdGhgbiQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpIgogICAgfQogICAgZmluYWxseSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJE5ldHdvcmsgPSBOZXctT2JqZWN0IC1Db21PYmplY3QgV1NjcmlwdC5OZXR3b3JrCiAgICAgICAgICAgICROZXR3b3JrLlJlbW92ZU5ldHdvcmtEcml2ZSgkRnJlZURyaXZlTGV0dGVyLCAkVHJ1ZSkKICAgICAgICB9CiAgICAgICAgY2F0Y2ggewogICAgICAgICAgICAjIG5vIGFjdGlvbiAKICAgICAgICB9CiAgICB9Cn0KCkZ1bmN0aW9uIE1hcE5ldHdvcmtEcml2ZSgkRHJpdmVMZXR0ZXIsICREaXJlY3RvcnksICRQZXJzaXN0ZW50LCAkVXNlcm5hbWUsICRQYXNzd29yZCkgewogICAgdHJ5IHsKICAgICAgICBpZiAoVGVzdC1QYXRoICREcml2ZUxldHRlcikgewogICAgICAgICAgICAjIFdyaXRlLU91dHB1dCAiYG5bTWFwIE5ldHdvcmsgRHJpdmVdIEZhaWxlZCB0byBNYXAgdGhlIG5ldHdvcmsgZHJpdmU6IGAnJERyaXZlTGV0dGVyYCcgYmVjYXVzZSBpdCBhbHJlYWR5IGV4aXN0cy4iCiAgICAgICAgICAgIFdyaXRlLUVycm9yICJGYWlsZWQgdG8gTWFwIHRoZSBuZXR3b3JrIGRyaXZlOiBgJyREcml2ZUxldHRlcmAnIGJlY2F1c2UgaXQgYWxyZWFkeSBleGlzdHMuIgogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgJE5ldHdvcmsgPSBOZXctT2JqZWN0IC1Db21PYmplY3QgV1NjcmlwdC5OZXR3b3JrCiAgICAgICAgICAgICROZXR3b3JrLk1hcE5ldHdvcmtEcml2ZSgkRHJpdmVMZXR0ZXIsICIkRGlyZWN0b3J5IiwgJFBlcnNpc3RlbnQsICRVc2VyTmFtZSwgJFBhc3N3b3JkKQogICAgICAgIH0KICAgIH0KICAgIGNhdGNoIHsKICAgICAgICBXcml0ZS1FcnJvciAiRmFpbGVkIHRvIE1hcCB0aGUgbmV0d29yayBkcml2ZS5gbiQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpIgogICAgfQp9CgpmdW5jdGlvbiBKb2luLVVSTFBhcnRzIHsKICAgIHBhcmFtIChbc3RyaW5nW11dICRQYXJ0cywgW3N0cmluZ10gJFNlcGVyYXRvciA9ICcnKQogICAgJHNlYXJjaCA9ICcoPzwhOiknICsgW3JlZ2V4XTo6RXNjYXBlKCRTZXBlcmF0b3IpICsgJysnICAjUmVwbGFjZSBtdWx0aXBsZXMgZXhjZXB0IGluIGZyb250IG9mIGEgY29sb24gZm9yIFVSTHMuCiAgICAkcmVwbGFjZSA9ICRTZXBlcmF0b3IKICAgICgkUGFydHMgfCBXaGVyZS1PYmplY3QgeyAkXyAtYW5kICRfLlRyaW0oKS5MZW5ndGggfSkgLWpvaW4gJFNlcGVyYXRvciAtcmVwbGFjZSAkc2VhcmNoLCAkcmVwbGFjZQp9CgpmdW5jdGlvbiBHZXQtUmFuZG9tRnJlZURyaXZlTGV0dGVyIHsKICAgIEdldC1DaGlsZEl0ZW0gZnVuY3Rpb246W2Qtel06IC1uIHwgV2hlcmUtT2JqZWN0IHsgISh0ZXN0LXBhdGggJF8pIH0gfCBHZXQtUmFuZG9tCn0KCgpmdW5jdGlvbiBXcml0ZS1TdWNjZXNzT3JGYWlsIChbU3lzdGVtLkRpYWdub3N0aWNzLlByb2Nlc3NdJFByb2Nlc3MsICRQYWNrYWdlTmFtZSwgJEFjdGlvbikgewogICAgSWYgKCRwcm9jZXNzLmV4aXRjb2RlIC1lcSAwKSB7CiAgICAgICAgV3JpdGUtT3V0cHV0ICJgbiRBY3Rpb24gb2YgJyRQYWNrYWdlTmFtZScgU3VjY2Vzc2Z1bC4iCiAgICB9CiAgICBlbHNlIHsKICAgICAgICBXcml0ZS1PdXRwdXQgImBuJEFjdGlvbiBvZiAnJFBhY2thZ2VOYW1lJyBGYWlsZWQuIEV4aXRjb2RlOiAkKCRwcm9jZXNzLmV4aXRjb2RlKSIgICAgICAgIAogICAgfSAKfQoKZnVuY3Rpb24gVGVzdC1SZWdpc3RyeSAoJEtleSwgJFZhbHVlLCAkRGF0YSkgewogICAgJFBhdGggPSAiUkVHSVNUUlk6OiRrZXkiCiAgICAkS2V5RXhpc3RzID0gVGVzdC1QYXRoICRQYXRoCiAgICAkUmVzdWx0ID0gR2V0LUl0ZW1Qcm9wZXJ0eSAiUkVHSVNUUlk6OiRrZXkiIC1OYW1lICRWYWx1ZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZQogICAgJFZhbHVlRXhpc3RzID0gW2Jvb2xdKCgkUmVzdWx0KS4kdmFsdWUpCiAgICAkRGF0YU1hdGNoZXMgPSAkZGF0YSAtZXEgKCRSZXN1bHQpLiR2YWx1ZQoKICAgIHJldHVybiAkS2V5RXhpc3RzLCAkVmFsdWVFeGlzdHMsICREYXRhTWF0Y2hlcwp9CgpmdW5jdGlvbiBUZXN0LUZpbGVWZXJzaW9uICgkUGF0aCwgW1N5c3RlbS5WZXJzaW9uXSRVc2VyU3BlY2lmaWVkVmVyc2lvbikgeyAKICAgICRGaWxlRXhpc3RzID0gVGVzdC1QYXRoICRQYXRoCiAgICAkRmlsZVZlcnNpb24gPSAoR2V0LUl0ZW0gJFBhdGggLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUpLnZlcnNpb25pbmZvLmZpbGV2ZXJzaW9ucmF3CiAgICAkRmlsZVZlcnNpb25NYXRjaGVzID0gJEZpbGVWZXJzaW9uIC1lcSAkVXNlclNwZWNpZmllZFZlcnNpb24KICAgICRGaWxlVmVyc2lvbkdyZWF0ZXIgPSAkRmlsZVZlcnNpb24gLWd0ICRVc2VyU3BlY2lmaWVkVmVyc2lvbgogICAgJEZpbGVWZXJzaW9uTG93ZXIgPSAkRmlsZVZlcnNpb24gLWx0ICRVc2VyU3BlY2lmaWVkVmVyc2lvbgoKICAgICRGaWxlRXhpc3RzLCAkRmlsZVZlcnNpb25NYXRjaGVzLCAkRmlsZVZlcnNpb25HcmVhdGVyLCAkRmlsZVZlcnNpb25Mb3dlcgp9CgpGdW5jdGlvbiBUZXN0LUFkZFJlbW92ZVByb2dyYW0gKCRQcm9ncmFtKSB7CiAgICAkUmVnaXN0cnkgPSAnSEtMTTpcU09GVFdBUkVcV293NjQzMk5vZGVcTWljcm9zb2Z0XFdpbmRvd3NcQ3VycmVudFZlcnNpb25cVW5pbnN0YWxsJywgJ0hLTE06XFNPRlRXQVJFXE1pY3Jvc29mdFxXaW5kb3dzXEN1cnJlbnRWZXJzaW9uXFVuaW5zdGFsbCcKICAgICRwcm9kdWN0ID0gR2V0LUNoaWxkSXRlbSAkUmVnaXN0cnkgLUVycm9yQWN0aW9uICdTaWxlbnRseUNvbnRpbnVlJyB8IEdldC1JdGVtUHJvcGVydHkgfCBXaGVyZS1PYmplY3QgRGlzcGxheW5hbWUgLWVxICRQcm9ncmFtCiAgICByZXR1cm4gW2Jvb2xdICRwcm9kdWN0Cn0KI2VuZHJlZ2lvbiBGdW5jdGlvbnMKCiNyZWdpb24gTWFpbgokRXJyb3JBY3Rpb25QcmVmZXJlbmNlID0gJ1N0b3AnCgp0cnkgewogICAgI3JlZ2lvbiBQcmVDaGVjawogICAgaWYgKCRQZXJmb3JtUHJlQ2hlY2spIHsKICAgICAgICAkTmFtZSA9ICdQcmUtQ2hlY2snCiAgICAgICAgU3dpdGNoICgkUHJlQ2hlY2tUeXBlKSB7CiAgICAgICAgICAgICdDaGVjayBpZiBmaWxlIGV4aXN0cycgewogICAgICAgICAgICAgICAgJEZpbGVFeGlzdHMgPSBUZXN0LVBhdGggJFByZUNoZWNrRmlsZU5hbWUKICAgICAgICAgICAgICAgIFN3aXRjaCAoJFByZUNoZWNrQWN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgJ0lmIGZpbGUgZXhpc3RzIHRoZW4gQ29udGludWUnIHsgaWYgKCRGaWxlRXhpc3RzKSB7IGNvbnRpbnVlIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG5vdCBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgZmlsZSBkb2VzIG5vdCBleGlzdHMgdGhlbiBDb250aW51ZScgeyBpZiAoLW5vdCAkRmlsZUV4aXN0cykgeyBjb250aW51ZSB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBub3QgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIGZpbGUgZXhpc3RzIHRoZW4gQWJvcnQnIHsgaWYgKCRGaWxlRXhpc3RzKSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gZWxzZSB7IGNvbnRpbnVlIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiBmaWxlIGRvZXMgbm90IGV4aXN0cyB0aGVuIEFib3J0JyB7IGlmICgtbm90ICRGaWxlRXhpc3RzKSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gZWxzZSB7IGNvbnRpbnVlIH0gfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJ0NoZWNrIGlmIHJlZ2lzdHJ5IGluZm9ybWF0aW9uIGV4aXN0cycgewogICAgICAgICAgICAgICAgJEtleUV4aXN0cywgJFZhbHVlTWF0Y2hlcywgJERhdGFNYXRjaGVzID0gVGVzdC1SZWdpc3RyeSAtS2V5ICRQcmVDaGVja0tleSAtVmFsdWUgJFByZUNoZWNrVmFsdWUgLURhdGEgJFByZUNoZWNrRGF0YQogICAgICAgICAgICAgICAgU3dpdGNoICgkUHJlQ2hlY2tBY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAnSWYga2V5IGV4aXN0cyB0aGVuIENvbnRpbnVlJyB7IGlmICgkS2V5RXhpc3RzKSB7IGNvbnRpbnVlIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG5vdCBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYga2V5IGRvZXMgbm90IGV4aXN0cyB0aGVuIENvbnRpbnVlJyB7IGlmICgtbm90ICRLZXlFeGlzdHMpIHsgY29udGludWUgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbm90IG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiBrZXkgZXhpc3RzIHRoZW4gQWJvcnQnIHsgaWYgKCRLZXlFeGlzdHMpIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSBlbHNlIHsgY29udGludWUgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIGtleSBub3QgZXhpc3RzIHRoZW4gQWJvcnQnIHsgaWYgKC1ub3QgJEtleUV4aXN0cykgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IGVsc2UgeyBjb250aW51ZSB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYga2V5IGV4aXN0cyBhbmQgdmFsdWUgbWF0Y2hlcyB0aGVuIENvbnRpbnVlJyB7IGlmICgkS2V5RXhpc3RzIC1hbmQgJFZhbHVlTWF0Y2hlcykgeyBjb250aW51ZSB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBub3QgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIGtleSBleGlzdHMgYW5kIHZhbHVlIGRvZXMgbm90IG1hdGNoZXMgdGhlbiBDb250aW51ZScgeyBpZiAoJEtleUV4aXN0cyAtYW5kICgtbm90ICRWYWx1ZU1hdGNoZXMpKSB7IGNvbnRpbnVlIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG5vdCBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYga2V5IGV4aXN0cyBhbmQgdmFsdWUgbWF0Y2hlcyB0aGVuIEFib3J0JyB7IGlmICgkS2V5RXhpc3RzIC1hbmQgJFZhbHVlTWF0Y2hlcykgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IGVsc2UgeyBjb250aW51ZSB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYga2V5IGV4aXN0cyBhbmQgdmFsdWUgZG9lcyBub3QgbWF0Y2hlcyB0aGVuIEFib3J0JyB7IGlmICgkS2V5RXhpc3RzIC1hbmQgKC1ub3QgJFZhbHVlTWF0Y2hlcykpIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSBlbHNlIHsgY29udGludWUgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIGtleSBleGlzdHMgYW5kIHZhbHVlIGV4aXN0cyBhbmQgZGF0YSBtYXRjaGVzIHRoZW4gQ29udGludWUnIHsgaWYgKCRLZXlFeGlzdHMgLWFuZCAkZGF0YW1hdGNoZXMpIHsgY29udGludWUgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbm90IG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiBrZXkgZXhpc3RzIGFuZCB2YWx1ZSBleGlzdHMgYW5kIGRhdGEgZG9lcyBub3QgbWF0Y2hlcyB0aGVuIENvbnRpbnVlJyB7IGlmICgkS2V5RXhpc3RzIC1hbmQgJFZhbHVlTWF0Y2hlcyAtYW5kICgtbm90ICRkYXRhbWF0Y2hlcykpIHsgY29udGludWUgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbm90IG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiBrZXkgZXhpc3RzIGFuZCB2YWx1ZSBleGlzdHMgYW5kIGRhdGEgbWF0Y2hlcyB0aGVuIEFib3J0JyB7IGlmICgkS2V5RXhpc3RzIC1hbmQgJFZhbHVlTWF0Y2hlcyAtYW5kICRkYXRhbWF0Y2hlcykgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IGVsc2UgeyBjb250aW51ZSB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYga2V5IGV4aXN0cyBhbmQgdmFsdWUgZXhpc3RzIGFuZCBkYXRhIGRvZXMgbm90IG1hdGNoZXMgdGhlbiBBYm9ydCcgeyBpZiAoJEtleUV4aXN0cyAtYW5kICRWYWx1ZU1hdGNoZXMgLWFuZCAoLW5vdCAkZGF0YW1hdGNoZXMpKSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gZWxzZSB7IGNvbnRpbnVlIH0gfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJ0NoZWNrIGZvciBmaWxlIHZlcnNpb24nIHsKICAgICAgICAgICAgICAgICRGaWxlRXhpc3RzLCAkRmlsZVZlcnNpb25NYXRjaGVzLCAkRmlsZVZlcnNpb25HcmVhdGVyLCAkRmlsZVZlcnNpb25Mb3dlciA9IFRlc3QtRmlsZVZlcnNpb24gLVBhdGggJFByZUNoZWNrRmlsZU5hbWUgLVVzZXJTcGVjaWZpZWRWZXJzaW9uICRQcmVDaGVja1ZlcnNpb24KICAgICAgICAgICAgICAgIFN3aXRjaCAoJFByZUNoZWNrQWN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgJ0lmIGZpbGUgZXhpc3RzIGFuZCB2ZXJzaW9uIGVxdWFsIHRvIHNwZWNpZmllZCB0aGVuIENvbnRpbnVlJyB7IGlmICgkRmlsZUV4aXN0cyAtYW5kICRGaWxlVmVyc2lvbk1hdGNoZXMpIHsgY29udGludWUgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbm90IG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiBmaWxlIGV4aXN0cyBhbmQgdmVyc2lvbiBub3QgZXF1YWwgdG8gc3BlY2lmaWVkIHRoZW4gQ29udGludWUnIHsgaWYgKCRGaWxlRXhpc3RzIC1hbmQgKC1ub3QgJEZpbGVWZXJzaW9uTWF0Y2hlcykpIHsgY29udGludWUgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbm90IG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiBmaWxlIGV4aXN0cyBhbmQgdmVyc2lvbiBoaWdoZXIgdG8gc3BlY2lmaWVkIHRoZW4gQ29udGludWUnIHsgaWYgKCRGaWxlRXhpc3RzIC1hbmQgJEZpbGVWZXJzaW9uR3JlYXRlcikgeyBjb250aW51ZSB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBub3QgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIGZpbGUgZXhpc3RzIGFuZCB2ZXJzaW9uIGxvd2VyIHRvIHNwZWNpZmllZCB0aGVuIENvbnRpbnVlJyB7IGlmICgkRmlsZUV4aXN0cyAtYW5kICRGaWxlVmVyc2lvbkxvd2VyKSB7IGNvbnRpbnVlIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG5vdCBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgZmlsZSBleGlzdHMgYW5kIHZlcnNpb24gZXF1YWwgdG8gc3BlY2lmaWVkIHRoZW4gQWJvcnQnIHsgaWYgKCRGaWxlRXhpc3RzIC1hbmQgJEZpbGVWZXJzaW9uTWF0Y2hlcykgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IGVsc2UgeyBjb250aW51ZSB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgZmlsZSBleGlzdHMgYW5kIHZlcnNpb24gbm90IGVxdWFsIHRvIHNwZWNpZmllZCB0aGVuIEFib3J0JyB7IGlmICgkRmlsZUV4aXN0cyAtYW5kICgtbm90ICRGaWxlVmVyc2lvbk1hdGNoZXMpKSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gZWxzZSB7IGNvbnRpbnVlIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiBmaWxlIGV4aXN0cyBhbmQgdmVyc2lvbiBoaWdoZXIgdG8gc3BlY2lmaWVkIHRoZW4gQWJvcnQnIHsgaWYgKCRGaWxlRXhpc3RzIC1hbmQgJEZpbGVWZXJzaW9uR3JlYXRlcikgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IGVsc2UgeyBjb250aW51ZSB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgZmlsZSBleGlzdHMgYW5kIHZlcnNpb24gbG93ZXIgdG8gc3BlY2lmaWVkIHRoZW4gQWJvcnQnIHsgaWYgKCRGaWxlRXhpc3RzIC1hbmQgJEZpbGVWZXJzaW9uTG93ZXIpIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSBlbHNlIHsgY29udGludWUgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIGZpbGUgZG9lcyBub3QgZXhpc3RzIHRoZW4gQWJvcnQnIHsgaWYgKC1ub3QgJEZpbGVFeGlzdHMpIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSBlbHNlIHsgY29udGludWUgfSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICAnQ2hlY2sgaWYgQWRkIC8gUmVtb3ZlIHByb2dyYW0gZXhpc3RzJyB7CiAgICAgICAgICAgICAgICAkUHJvZ3JhbUV4aXN0cyA9IFRlc3QtQWRkUmVtb3ZlUHJvZ3JhbSAtUHJvZ3JhbSAkUHJlQ2hlY2tQcm9ncmFtCiAgICAgICAgICAgICAgICBTd2l0Y2ggKCRQcmVDaGVja0FjdGlvbikgewogICAgICAgICAgICAgICAgICAgICdJZiB0aGUgcHJvZ3JhbSBleGlzdHMgdGhlbiBtYXJrIGNvbnRpbnVlJyB7IGlmICgkUHJvZ3JhbUV4aXN0cykgeyBjb250aW51ZSB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBub3QgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIHRoZSBwcm9ncmFtIGRvZXMgbm90IGV4aXN0cyB0aGVuIG1hcmsgY29udGludWUnIHsgaWYgKCEkUHJvZ3JhbUV4aXN0cykgeyBjb250aW51ZSB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBub3QgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIHRoZSBwcm9ncmFtIGV4aXN0cyB0aGVuIG1hcmsgYWJvcnQnIHsgaWYgKCRQcm9ncmFtRXhpc3RzKSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gZWxzZSB7IGNvbnRpbnVlIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUgcHJvZ3JhbSBkb2VzIG5vdCBleGlzdHMgdGhlbiBtYXJrIGFib3J0JyB7IGlmICghJFByb2dyYW1FeGlzdHMpIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSBlbHNlIHsgY29udGludWUgfSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgICNlbmRyZWdpb24gUHJlY2hlY2sKCiAgICAjcmVnaW9uIE1haW4KICAgIFN3aXRjaCAoJFR5cGVPZkluc3RhbGxlcikgewogICAgICAgICdJbnN0YWxsZXInIHsKICAgICAgICAgICAgJFBhY2thZ2VMb2NhbFBhdGggPSBKb2luLVBhdGggJGVudjpURU1QICRQYWNrYWdlTmFtZQoKICAgICAgICAgICAgI3JlZ2lvbiBJbnB1dFZhbGlkYXRpb24KICAgICAgICAgICAgc3dpdGNoICgkTG9jYXRpb25UeXBlKSB7CiAgICAgICAgICAgICAgICAnZnRwJyB7IAogICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbiA9ICRmdHAKICAgICAgICAgICAgICAgICAgICAkU2NoZW1lID0gKFt1cmldJExvY2F0aW9uKS5zY2hlbWUKICAgICAgICAgICAgICAgICAgICBpZiAoJFNjaGVtZSAtYW5kICgkU2NoZW1lIC1uZSAnZnRwJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkludmFsaWQgYCckTG9jYXRpb25UeXBlYCcgVVJMOiAkTG9jYXRpb24iCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoISgkTG9jYXRpb24uU3RhcnRzV2l0aCgiZnRwOi8vIikpKSB7IAogICAgICAgICAgICAgICAgICAgICAgICAkTG9jYXRpb24gPSAiZnRwOi8vIiArICRMb2NhdGlvbiAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAnaHR0cCcgeyAKICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24gPSAkaHR0cAogICAgICAgICAgICAgICAgICAgICRTY2hlbWUgPSAoW3VyaV0kTG9jYXRpb24pLnNjaGVtZQogICAgICAgICAgICAgICAgICAgIGlmICgkU2NoZW1lIC1hbmQgKCRTY2hlbWUgLW5lICdodHRwJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkludmFsaWQgYCckTG9jYXRpb25UeXBlYCcgVVJMOiAkTG9jYXRpb24iCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoISgkTG9jYXRpb24uU3RhcnRzV2l0aCgiaHR0cDovLyIpKSkgeyAKICAgICAgICAgICAgICAgICAgICAgICAgJExvY2F0aW9uID0gImh0dHA6Ly8iICsgJExvY2F0aW9uIAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICdodHRwcycgeyAKICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24gPSAkaHR0cHMKICAgICAgICAgICAgICAgICAgICAkU2NoZW1lID0gKFt1cmldJExvY2F0aW9uKS5zY2hlbWUKICAgICAgICAgICAgICAgICAgICBpZiAoJFNjaGVtZSAtYW5kICgkU2NoZW1lIC1uZSAnaHR0cHMnKSkgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1FcnJvciAiSW52YWxpZCBgJyRMb2NhdGlvblR5cGVgJyBVUkw6ICRMb2NhdGlvbiIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICghKCRMb2NhdGlvbi5TdGFydHNXaXRoKCJodHRwczovLyIpKSkgeyAKICAgICAgICAgICAgICAgICAgICAgICAgJExvY2F0aW9uID0gImh0dHBzOi8vIiArICRMb2NhdGlvbiAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAnbmV0d29yaycgeyAKICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24gPSAkbmV0d29yawogICAgICAgICAgICAgICAgICAgICRTY2hlbWUgPSAoW3VyaV0kTG9jYXRpb24pLnNjaGVtZQogICAgICAgICAgICAgICAgICAgICRpc1VOQyA9IChbdXJpXSRMb2NhdGlvbikuaXNVTkMKCiAgICAgICAgICAgICAgICAgICAgaWYgKCRTY2hlbWUgLWFuZCAoJFNjaGVtZSAtbmUgJ2ZpbGUnKSkgewogICAgICAgICAgICAgICAgICAgICAgICAjIGNvbmRpdGlvbiB0byBjaGVjayB3cm9uZyBzY2hlbWUsIGxpa2UgJ2h0dHAnIGluIGNhc2Ugb2YgJ2Z0cCcKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkludmFsaWQgYCckTG9jYXRpb25UeXBlYCcgUGF0aDogJExvY2F0aW9uIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKCRTY2hlbWUgLWFuZCAoJFNjaGVtZSAtZXEgJ2ZpbGUnKSAtYW5kICEkaXNVTkMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgIyBoYXMgdGhlIGNvcnJlY3Qgc2NoZW1lLCBidXQgYSBsb2NhbCBwYXRoCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICJJbnZhbGlkIGAnJExvY2F0aW9uVHlwZWAnIFBhdGg6ICRMb2NhdGlvbiIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICghKCRMb2NhdGlvbi5TdGFydHNXaXRoKCJcXCIpKSkgeyAKICAgICAgICAgICAgICAgICAgICAgICAgJExvY2F0aW9uID0gIlxcIiArICRMb2NhdGlvbiAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAnbG9jYWwnIHsgCiAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uID0gJGxvY2FsCgogICAgICAgICAgICAgICAgICAgICRTY2hlbWUgPSAoW3VyaV0kTG9jYXRpb24pLnNjaGVtZQogICAgICAgICAgICAgICAgICAgICRpc1VOQyA9IChbdXJpXSRMb2NhdGlvbikuaXNVTkMKCiAgICAgICAgICAgICAgICAgICAgaWYgKCRTY2hlbWUgLWFuZCAoJFNjaGVtZSAtbmUgJ2ZpbGUnKSkgewogICAgICAgICAgICAgICAgICAgICAgICAjIGNvbmRpdGlvbiB0byBjaGVjayB3cm9uZyBzY2hlbWUsIGxpa2UgJ2h0dHAnIGluIGNhc2Ugb2YgJ2Z0cCcKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkludmFsaWQgYCckTG9jYXRpb25UeXBlYCcgUGF0aDogJExvY2F0aW9uIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKCRTY2hlbWUgLWFuZCAoJFNjaGVtZSAtZXEgJ2ZpbGUnKSAtYW5kICRpc1VOQykgewogICAgICAgICAgICAgICAgICAgICAgICAjIGhhcyB0aGUgY29ycmVjdCBzY2hlbWUsIGJ1dCBhIG5ldHdvcmsgcGF0aAogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1FcnJvciAiSW52YWxpZCBgJyRMb2NhdGlvblR5cGVgJyBQYXRoOiAkTG9jYXRpb24iCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmICghKFRlc3QtUGF0aCAkKEpvaW4tUGF0aCAkTG9jYXRpb24gJFBhY2thZ2VOYW1lKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkxvY2FsIHBhdGggbm90IGZvdW5kOiAkKEpvaW4tUGF0aCAkTG9jYXRpb24gJFBhY2thZ2VOYW1lKSIKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgICNlbmRyZWdpb24gSW5wdXRWYWxpZGF0aW9uCgogICAgICAgICAgICAjcmVnaW9uIERvd25sb2FkUGFja2FnZQogICAgICAgICAgICBzd2l0Y2ggKChbdXJpXSRMb2NhdGlvbikuc2NoZW1lKSB7CiAgICAgICAgICAgICAgICAnZnRwJyB7ICAgCiAgICAgICAgICAgICAgICAgICAgJFJlbW90ZUZUUEZpbGVQYXRoID0gSm9pbi1VUkxQYXJ0cyAoJExvY2F0aW9uLCAkUGFja2FnZU5hbWUpIC1TZXBlcmF0b3IgJy8nCiAgICAgICAgICAgICAgICAgICAgRG93bmxvYWQtRnJvbUZUUCAkUmVtb3RlRlRQRmlsZVBhdGggJFBhY2thZ2VMb2NhbFBhdGggJFVzZXJuYW1lICRQYXNzd29yZAogICAgICAgICAgICAgICAgICAgIEJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJ2h0dHAnIHsgRG93bmxvYWQtRnJvbVVSTCAkTG9jYXRpb24gJFBhY2thZ2VMb2NhbFBhdGggOyBCcmVhazsgfQogICAgICAgICAgICAgICAgJ2h0dHBzJyB7IAogICAgICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICAgICAgW1N5c3RlbS5OZXQuU2VydmljZVBvaW50TWFuYWdlcl06OlNlY3VyaXR5UHJvdG9jb2wgPSBbU3lzdGVtLk5ldC5TZWN1cml0eVByb3RvY29sVHlwZV0gJ1NzbDMsIFRscywgVGxzMTEsIFRsczEyJwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjYXRjaCB7CiAgICAgICAgICAgICAgICAgICAgICAgICRUTFNFbmZvcmNlID0gJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICAgICAgRG93bmxvYWQtRnJvbVVSTCAkTG9jYXRpb24gJFBhY2thZ2VMb2NhbFBhdGggOyBCcmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggewogICAgICAgICAgICAgICAgICAgICAgICBpZighJFRMU0VuZm9yY2UpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJEb3dubG9hZCBmcm9tIHRoZSBVUkwgaGFzIGZhaWxlZC4gSXQgbWlnaHQgYmUgYW4gaXNzdWUgd2hpbGUgZXN0YWJsaXNoaW5nIFNTTFxUTFMgc2VjdXJlIGNoYW5uZWwgYmV0d2VlbiBjbGllbnQgYW5kIHRoZSBzZXJ2ZXIsIGFzIHRoaXMgbWFjaGluZSBvbmx5IHN1cHBvcnRzIGZvbGxvd2luZyB2ZXJzaW9uIG9mIHNlY3VyZSBwcm90b2NvbHM6ICQoW2VudW1dOjpHZXROYW1lcyhbU3lzdGVtLk5ldC5TZWN1cml0eVByb3RvY29sVHlwZV0pIC1qb2luICcsICcpIHRocm91Z2ggdGhlIFRhc2suIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJXb3JrYXJvdW5kOiBUcnkgZG93bmxvYWRpbmcgdGhlIGZpbGUgZnJvbSBIVFRQIHZhcmlhbnQgb2YgdGhlIFVSTCwgaWYgaXQgZXhpc3RzLiBPciBjb3B5IHRoZSBleGVcbXNpIG9uIGEgVU5DIChOZXR3b3JrIFNoYXJlKSBwYXRoIGFuZCB0aGVuIGV4ZWN1dGUgdGhlIHNldHVwIHVzaW5nIHRoaXMgc2NyaXB0IgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgJF8uRXhjZXB0aW9uLk1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gICAgCiAgICAgICAgICAgICAgICAnZmlsZScgeyAKICAgICAgICAgICAgICAgICAgICBpZiAoKFt1cmldJExvY2F0aW9uKS5Jc1VuYykgewogICAgICAgICAgICAgICAgICAgICAgICAjIGlmIHRoZSBsb2NhdGlvbiBpcyBhIHNoYXJlZCBVTkMgcGF0aAogICAgICAgICAgICAgICAgICAgICAgICBEb3dubG9hZC1Gcm9tVU5DICRMb2NhdGlvbiAkUGFja2FnZU5hbWUgJFBhY2thZ2VMb2NhbFBhdGggJFVzZXJOYW1lICRQYXNzd29yZAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgIyBpZiB0aGUgbG9jYXRpb24gaXMgYSBsb2NhbCBzeXN0ZW0gcGF0aAogICAgICAgICAgICAgICAgICAgICAgICAkUGFja2FnZUxvY2FsUGF0aCA9IEpvaW4tUGF0aCAkTG9jYXRpb24gJFBhY2thZ2VOYW1lCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIEJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZGVmYXVsdCB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJGYWlsZWQuIE5vdCBhIHZhbGlkIHVzZXIgaW5wdXQgZm9yIHBhY2thZ2UgJ0xvY2F0aW9uJywgcGxlYXNlIHZhbGlkYXRlIHRoZSBpbnB1dCBhbmQgdHJ5IGFnYWluLiIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAjZW5kcmVnaW9uIERvd25sb2FkUGFja2FnZQoKICAgICAgICAgICAgIyB2YWxpZGF0ZSBjaGVja3N1bSBvZiBkb253bG9hZGVkIGZpbGUKICAgICAgICAgICAgaWYgKCRNRDVDaGVja1N1bSAtYW5kICQoR2V0LU1ENUhhc2ggJFBhY2thZ2VMb2NhbFBhdGgpIC1uZSAkTUQ1Q2hlY2tTdW0pIHsKICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICJNRDUgQ2hlY2tzdW06ICckTUQ1Q2hlY2tTdW0nIGRpZCBub3QgbWF0Y2ggd2l0aCB0aGUgTUQ1IENoZWNrc3VtIG9mIFBhY2thZ2U6JyRQYWNrYWdlTmFtZSciCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICNyZWdpb24gSW5zdGFsbCAgICAgICAgCiAgICAgICAgICAgIHN3aXRjaCAoJFR5cGVPZkFwcGxpY2F0aW9uKSB7CiAgICAgICAgICAgICAgICAnZXhlJyB7CiAgICAgICAgICAgICAgICAgICAgIyBXcml0ZS1Ib3N0ICJJbnN0YWxsaW5nOiAkUGFja2FnZUxvY2FsUGF0aCAkSW5zdGFsbGF0aW9uUGFyYW1ldGVyIgogICAgICAgICAgICAgICAgICAgIGlmICghW3N0cmluZ106OklzTnVsbE9yRW1wdHkoJEluc3RhbGxhdGlvblBhcmFtZXRlcikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJEluc3RhbGxhdGlvblBhcmFtZXRlciA9ICRJbnN0YWxsYXRpb25QYXJhbWV0ZXIudHJpbSgpCiAgICAgICAgICAgICAgICAgICAgICAgICRQcm9jZXNzID0gU3RhcnQtUHJvY2VzcyAtRmlsZVBhdGggJFBhY2thZ2VMb2NhbFBhdGggLUFyZ3VtZW50TGlzdCAkSW5zdGFsbGF0aW9uUGFyYW1ldGVyIC1XYWl0IC1QYXNzVGhydQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgJFByb2Nlc3MgPSBTdGFydC1Qcm9jZXNzIC1GaWxlUGF0aCAkUGFja2FnZUxvY2FsUGF0aCAtV2FpdCAtUGFzc1RocnUKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICghJFBlcmZvcm1Qb3N0Q2hlY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtU3VjY2Vzc09yRmFpbCAtUHJvY2VzcyAkUHJvY2VzcyAtUGFja2FnZU5hbWUgJFBhY2thZ2VOYW1lIC1BY3Rpb24gJ0luc3RhbGxhdGlvbicKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAnbXNpJyB7CiAgICAgICAgICAgICAgICAgICAgIyBXcml0ZS1Ib3N0ICJJbnN0YWxsaW5nOiAkZW52OnN5c3RlbXJvb3Rcc3lzdGVtMzJcbXNpZXhlYy5leGUgL2kgJFBhY2thZ2VMb2NhbFBhdGggJEluc3RhbGxhdGlvblBhcmFtZXRlciIKICAgICAgICAgICAgICAgICAgICBpZiAoIVtzdHJpbmddOjpJc051bGxPckVtcHR5KCRJbnN0YWxsYXRpb25QYXJhbWV0ZXIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRNU0lBcmdzID0gQCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIvaSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRQYWNrYWdlTG9jYWxQYXRoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkSW5zdGFsbGF0aW9uUGFyYW1ldGVyLlNwbGl0KCIgIikgfCBGb3JFYWNoLU9iamVjdCB7JF8udHJpbSgpfQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAkTVNJQXJncyA9IEAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiL2kiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUGFja2FnZUxvY2FsUGF0aAogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgIAoKICAgICAgICAgICAgICAgICAgICAkUHJvY2VzcyA9IFN0YXJ0LVByb2Nlc3MgLUZpbGVQYXRoICIkZW52OnN5c3RlbXJvb3Rcc3lzdGVtMzJcbXNpZXhlYy5leGUiIC1Bcmd1bWVudExpc3QgJE1TSUFyZ3MgLVdhaXQgLVBhc3NUaHJ1CgogICAgICAgICAgICAgICAgICAgIGlmICghJFBlcmZvcm1Qb3N0Q2hlY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtU3VjY2Vzc09yRmFpbCAtUHJvY2VzcyAkUHJvY2VzcyAtUGFja2FnZU5hbWUgJFBhY2thZ2VOYW1lIC1BY3Rpb24gJ0luc3RhbGxhdGlvbicKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgI2VuZHJlZ2lvbiBJbnN0YWxsCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAnVW5JbnN0YWxsZXInIHsKICAgICAgICAgICAgI3JlZ2lvbiBVbkluc3RhbGwKICAgICAgICAgICAgc3dpdGNoICgkVHlwZU9mQXBwbGljYXRpb24pIHsKICAgICAgICAgICAgICAgICdleGUnIHsKICAgICAgICAgICAgICAgICAgICAjIFdyaXRlLUhvc3QgIlVuSW5zdGFsbGluZzogJFVuaW5zdGFsbGF0aW9uUGF0aCAkVW5JbnN0YWxsYXRpb25QYXJhbWV0ZXIiCiAgICAgICAgICAgICAgICAgICAgaWYgKCRVbkluc3RhbGxhdGlvblBhcmFtZXRlcikgewogICAgICAgICAgICAgICAgICAgICAgICAkUHJvY2VzcyA9IFN0YXJ0LVByb2Nlc3MgLUZpbGVQYXRoICRVbmluc3RhbGxhdGlvblBhdGggLUFyZ3VtZW50TGlzdCAiJFVuSW5zdGFsbGF0aW9uUGFyYW1ldGVyIiAtV2FpdCAtUGFzc1RocnUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRQcm9jZXNzID0gU3RhcnQtUHJvY2VzcyAtRmlsZVBhdGggJFVuaW5zdGFsbGF0aW9uUGF0aCAtV2FpdCAtUGFzc1RocnUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCEkUGVyZm9ybVBvc3RDaGVjaykgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1TdWNjZXNzT3JGYWlsIC1Qcm9jZXNzICRQcm9jZXNzIC1QYWNrYWdlTmFtZSAkVW5pbnN0YWxsYXRpb25QYXRoIC1BY3Rpb24gJ1VuSW5zdGFsbGF0aW9uJwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICdtc2knIHsKICAgICAgICAgICAgICAgICAgICAkTXNnID0gJFVuaW5zdGFsbGF0aW9uUGFyYW1ldGVyCiAgICAgICAgICAgICAgICAgICAgJE1TSUFyZ3MgPSAoJFVuaW5zdGFsbGF0aW9uUGFyYW1ldGVyIC1SZXBsYWNlICJtc2lleGVjLmV4ZSIsICIiIC1yZXBsYWNlICJtc2lleGVjIiwgIiIpLnRyaW0oKQogICAgICAgICAgICAgICAgICAgICMgV3JpdGUtSG9zdCAiVW5JbnN0YWxsaW5nOiAkZW52OnN5c3RlbXJvb3Rcc3lzdGVtMzJcbXNpZXhlYy5leGUgL2kgJFVuSW5zdGFsbGF0aW9uUGFyYW1ldGVyIgoKICAgICAgICAgICAgICAgICAgICAkUHJvY2VzcyA9IFN0YXJ0LVByb2Nlc3MgLUZpbGVQYXRoICIkZW52OnN5c3RlbXJvb3Rcc3lzdGVtMzJcbXNpZXhlYy5leGUiIC1Bcmd1bWVudExpc3QgJE1TSUFyZ3MgLVdhaXQgLVBhc3NUaHJ1CiAgICAgICAgICAgICAgICAgICAgaWYgKCEkUGVyZm9ybVBvc3RDaGVjaykgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1TdWNjZXNzT3JGYWlsIC1Qcm9jZXNzICRQcm9jZXNzIC1QYWNrYWdlTmFtZSAkTXNnIC1BY3Rpb24gJ1VuSW5zdGFsbGF0aW9uJwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAjZW5kcmVnaW9uIFVuSW5zdGFsbAogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9CiAgICAjZW5kcmVnaW9uIE1haW4KCiAgICAjcmVnaW9uIFBvc3RDaGVjawogICAgaWYgKCRQZXJmb3JtUG9zdENoZWNrKSB7CiAgICAgICAgJE5hbWUgPSAnUG9zdC1DaGVjaycKICAgICAgICBTd2l0Y2ggKCRQb3N0Q2hlY2tUeXBlKSB7CiAgICAgICAgICAgICdDaGVjayBpZiBmaWxlIGV4aXN0cycgewogICAgICAgICAgICAgICAgJEZpbGVFeGlzdHMgPSBUZXN0LVBhdGggJFBvc3RDaGVja0ZpbGVOYW1lCiAgICAgICAgICAgICAgICBTd2l0Y2ggKCRQb3N0Q2hlY2tBY3Rpb24pIHsgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGZpbGUgZXhpc3RzIHRoZW4gbWFyayBTdWNjZXNzJyB7IGlmICgkRmlsZUV4aXN0cykgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGZpbGUgZG9lcyBub3QgZXhpc3RzIHRoZW4gbWFyayBTdWNjZXNzJyB7IGlmICgtbm90ICRGaWxlRXhpc3RzKSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUgZmlsZSBleGlzdHMgdGhlbiBtYXJrIEZhaWwnIHsgaWYgKCRGaWxlRXhpc3RzKSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUgZmlsZSBkb2VzIG5vdCBleGlzdHMgdGhlbiBtYXJrIEZhaWwnIHsgaWYgKC1ub3QgJEZpbGVFeGlzdHMpIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSB9ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICAnQ2hlY2sgaWYgcmVnaXN0cnkgaW5mb3JtYXRpb24gZXhpc3RzJyB7CiAgICAgICAgICAgICAgICAkS2V5RXhpc3RzLCAkVmFsdWVNYXRjaGVzLCAkRGF0YU1hdGNoZXMgPSBUZXN0LVJlZ2lzdHJ5IC1LZXkgJFBvc3RDaGVja0tleSAtVmFsdWUgJFBvc3RDaGVja1ZhbHVlIC1EYXRhICRQb3N0Q2hlY2tEYXRhCiAgICAgICAgICAgICAgICBTd2l0Y2ggKCRQb3N0Q2hlY2tBY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGtleSBleGlzdHMgdGhlbiBtYXJrIHN1Y2Nlc3MnIHsgaWYgKCRLZXlFeGlzdHMpIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIHRoZSBrZXkgZG9lcyBub3QgZXhpc3RzIHRoZW4gbWFyayBzdWNjZXNzJyB7IGlmICgtbm90ICRLZXlFeGlzdHMpIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIHRoZSBrZXkgZXhpc3RzIHRoZW4gbWFyayBmYWlsJyB7IGlmICgkS2V5RXhpc3RzKSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUga2V5IG5vdCBleGlzdHMgdGhlbiBtYXJrIGZhaWwnIHsgaWYgKC1ub3QgJEtleUV4aXN0cykgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGtleSBleGlzdHMgYW5kIHZhbHVlIG1hdGNoZXMgdGhlbiBtYXJrIHN1Y2Nlc3MnIHsgaWYgKCRLZXlFeGlzdHMgLWFuZCAkVmFsdWVNYXRjaGVzKSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUga2V5IGV4aXN0cyBhbmQgdmFsdWUgZG9lcyBub3QgbWF0Y2ggdGhlbiBtYXJrIHN1Y2Nlc3MnIHsgaWYgKCRLZXlFeGlzdHMgLWFuZCAoLW5vdCAkVmFsdWVNYXRjaGVzKSkgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGtleSBleGlzdHMgYW5kIHZhbHVlIG1hdGNoZXMgdGhlbiBtYXJrIGZhaWwnIHsgaWYgKCRLZXlFeGlzdHMgLWFuZCAkVmFsdWVNYXRjaGVzKSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUga2V5IGV4aXN0cyBhbmQgdmFsdWUgZG9lcyBub3QgbWF0Y2ggdGhlbiBtYXJrIGZhaWwnIHsgaWYgKCRLZXlFeGlzdHMgLWFuZCAoLW5vdCAkVmFsdWVNYXRjaGVzKSkgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGtleSBleGlzdHMgYW5kIHZhbHVlIGV4aXN0cyBhbmQgZGF0YSBtYXRjaGVzIHRoZW4gbWFyayBzdWNjZXNzJyB7IGlmICgkS2V5RXhpc3RzIC1hbmQgJFZhbHVlTWF0Y2hlcyAtYW5kICREYXRhTWF0Y2hlcykgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGtleSBleGlzdHMgYW5kIHZhbHVlIGV4aXN0cyBhbmQgZGF0YSBkb2VzIG5vdCBtYXRjaCB0aGVuIG1hcmsgc3VjY2VzcycgeyBpZiAoJEtleUV4aXN0cyAtYW5kICRWYWx1ZU1hdGNoZXMgLWFuZCAoLW5vdCAkRGF0YU1hdGNoZXMpKSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUga2V5IGV4aXN0cyBhbmQgdmFsdWUgZXhpc3RzIGFuZCBkYXRhIG1hdGNoZXMgdGhlbiBtYXJrIGZhaWwnIHsgaWYgKCRLZXlFeGlzdHMgLWFuZCAkVmFsdWVNYXRjaGVzIC1hbmQgJERhdGFNYXRjaGVzKSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUga2V5IGV4aXN0cyBhbmQgdmFsdWUgZXhpc3RzIGFuZCBkYXRhIGRvZXMgbm90IG1hdGNoIHRoZW4gbWFyayBmYWlsJyB7IGlmICgkS2V5RXhpc3RzIC1hbmQgJFZhbHVlTWF0Y2hlcyAtYW5kICgtbm90ICREYXRhTWF0Y2hlcykpIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICAnQ2hlY2sgZm9yIGZpbGUgdmVyc2lvbicgewogICAgICAgICAgICAgICAgJEZpbGVFeGlzdHMsICRGaWxlVmVyc2lvbk1hdGNoZXMsICRGaWxlVmVyc2lvbkdyZWF0ZXIsICRGaWxlVmVyc2lvbkxvd2VyID0gVGVzdC1GaWxlVmVyc2lvbiAtUGF0aCAkUG9zdENoZWNrRmlsZU5hbWUgLVVzZXJTcGVjaWZpZWRWZXJzaW9uICRQb3N0Q2hlY2tWZXJzaW9uCiAgICAgICAgICAgICAgICBTd2l0Y2ggKCRQb3N0Q2hlY2tBY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGZpbGUgZXhpc3RzIGFuZCB0aGUgdmVyc2lvbiBtYXRjaGVzIHRoZW4gbWFyayBzdWNjZXNzJyB7IGlmICgkRmlsZUV4aXN0cyAtYW5kICRGaWxlVmVyc2lvbk1hdGNoZXMpIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIHRoZSBmaWxlIGV4aXN0cyBhbmQgdmVyc2lvbiBkb2VzIG5vdCBtYXRjaCB0aGVuIG1hcmsgc3VjY2VzcycgeyBpZiAoJEZpbGVFeGlzdHMgLWFuZCAoLW5vdCAkRmlsZVZlcnNpb25NYXRjaGVzKSkgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGZpbGUgZXhpc3RzIGFuZCB2ZXJzaW9uIGlzIGdyZWF0ZXIgdGhhbiBzcGVjaWZpZWQgdGhlbiBtYXJrIHN1Y2Nlc3MnIHsgaWYgKCRGaWxlRXhpc3RzIC1hbmQgJEZpbGVWZXJzaW9uR3JlYXRlcikgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGZpbGUgZXhpc3RzIGFuZCB2ZXJzaW9uIGlzIGxvd2VyIHRoYW4gc3BlY2lmaWVkIHRoZW4gbWFyayBzdWNjZXNzJyB7IGlmICgkRmlsZUV4aXN0cyAtYW5kICRGaWxlVmVyc2lvbkxvd2VyKSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUgZmlsZSBleGlzdHMgYW5kIHRoZSB2ZXJzaW9uIGlzIG1hdGNoZXMgdGhlbiBtYXJrIGZhaWwnIHsgaWYgKCRGaWxlRXhpc3RzIC1hbmQgJEZpbGVWZXJzaW9uTWF0Y2hlcykgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGZpbGUgZXhpc3RzIGFuZCB2ZXJzaW9uIGRvZXMgbm90IG1hdGNoIHRoZW4gbWFyayBmYWlsJyB7IGlmICgkRmlsZUV4aXN0cyAtYW5kICgtbm90ICRGaWxlVmVyc2lvbk1hdGNoZXMpKSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUgZmlsZSBleGlzdHMgYW5kIHZlcnNpb24gaXMgZ3JlYXRlciB0aGFuIHNwZWNpZmllZCB0aGVuIG1hcmsgZmFpbCcgeyBpZiAoJEZpbGVFeGlzdHMgLWFuZCAkRmlsZVZlcnNpb25HcmVhdGVyKSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUgZmlsZSBleGlzdHMgYW5kIHZlcnNpb24gaXMgbG93ZXIgdGhhbiBzcGVjaWZpZWQgdGhlbiBtYXJrIGZhaWwnIHsgaWYgKCRGaWxlRXhpc3RzIC1hbmQgJEZpbGVWZXJzaW9uTG93ZXIpIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIHRoZSBmaWxlIGRvZXMgbm90IGV4aXN0cyB0aGVuIG1hcmsgZmFpbCcgeyBpZiAoLW5vdCAkRmlsZUV4aXN0cykgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgICdDaGVjayBpZiBBZGQgLyBSZW1vdmUgcHJvZ3JhbSBleGlzdHMnIHsKICAgICAgICAgICAgICAgICRQcm9ncmFtRXhpc3RzID0gVGVzdC1BZGRSZW1vdmVQcm9ncmFtIC1Qcm9ncmFtICRQb3N0Q2hlY2tQcm9ncmFtCiAgICAgICAgICAgICAgICBTd2l0Y2ggKCRQb3N0Q2hlY2tBY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIHByb2dyYW0gZXhpc3RzIHRoZW4gbWFyayBzdWNjZXNzJyB7IGlmICgkUHJvZ3JhbUV4aXN0cykgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIHByb2dyYW0gZG9lcyBub3QgZXhpc3RzIHRoZW4gbWFyayBzdWNjZXNzJyB7IGlmICgtbm90ICRQcm9ncmFtRXhpc3RzKSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUgcHJvZ3JhbSBleGlzdHMgdGhlbiBtYXJrIGZhaWwnIHsgaWYgKCRQcm9ncmFtRXhpc3RzKSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUgcHJvZ3JhbSBkb2VzIG5vdCBleGlzdHMgdGhlbiBtYXJrIGZhaWwnIHsgaWYgKC1ub3QgJFByb2dyYW1FeGlzdHMpIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgICNlbmRyZWdpb24gUG9zdGNoZWNrCn0KY2F0Y2ggewogICAgV3JpdGUtRXJyb3IgJF8uZXhjZXB0aW9uLm1lc3NhZ2UKfQpmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgICAgIyB0byByZW1vdmUgZG9ud2xvYWRlZCBmaWxlcyBmcm9tIGxvY2FsIG1hY2hpbmUgaWYgcmVxdWlyZWQKICAgICAgICAjIFJlbW92ZS1JdGVtICRQYWNrYWdlTG9jYWxQYXRoCiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgIyBubyBhY3Rpb24KICAgIH0KfQo=","jsonSchema":{"additionalproperties":false,"dependencies":{"PerformPostCheck":{"oneOf":[{"dependencies":{"PostCheckType":{"oneOf":[{"properties":{"PostCheckAction":{"enum":["If file exists then continue","If file does not exists then Continue","If file exists then Abort","If file does not exists then Abort"],"title":"Action","type":"string"},"PostCheckFileName":{"title":"File Name","type":"string"},"PostCheckType":{"enum":["Check if file exists"]}}},{"properties":{"PostCheckAction":{"enum":["If key exists then Continue","If key does not exists then Continue","If key exists then Abort","If key not exists then Abort","If key exists and value matches then Continue","If key exists and value does not matches then Continue","If key exists and value matches then Abort","If key exists and value does not matches then Abort","If key exists and value exists and data matches then Continue","If key exists and value exists and data does not matches then Continue","If key exists and value exists and data matches then Abort","If key exists and value exists and data does not matches then Abort"],"title":"Action","type":"string"},"PostCheckData":{"title":"Data","type":"string"},"PostCheckKey":{"title":"Key","type":"string"},"PostCheckType":{"enum":["Check if registry information exists"]},"PostCheckValue":{"title":"Value","type":"string"}}},{"properties":{"PostCheckAction":{"enum":["If the program exists then continue","If the program does not exists then continue","If the program exists then abort","If the program does not exists then abort"],"title":"Action","type":"string"},"PostCheckProgram":{"title":"Program","type":"string"},"PostCheckType":{"enum":["Check if Add / Remove program exists"]}}},{"properties":{"PostCheckAction":{"enum":["If the file exists and the version matches then mark success","If the file exists and version does not match then mark success","If the file exists and version is greater than specified then mark success","If the file exists and version is lower than specified then mark success","If the file exists and the version is matches then mark fail","If the file exists and version does not match then mark fail","If the file exists and version is greater than specified then mark fail","If the file exists and version is lower than specified then mark fail","If the file does not exists then mark fail"],"title":"Action","type":"string"},"PostCheckFileName":{"title":"File Name","type":"string"},"PostCheckType":{"enum":["Check for file version"]},"PostCheckVersion":{"title":"Version","type":"string"}}}]}},"properties":{"PerformPostCheck":{"enum":[true]},"PostCheckType":{"enum":["Check if file exists","Check if registry information exists","Check if Add / Remove program exists","Check for file version"],"title":"Check Type","type":"string"}}},{"properties":{"PerformPostCheck":{"enum":[false]}}}]},"PerformPreCheck":{"oneOf":[{"dependencies":{"PreCheckType":{"oneOf":[{"properties":{"PreCheckAction":{"enum":["If file exists then continue","If file does not exists then Continue","If file exists then Abort","If file does not exists then Abort"],"title":"Action","type":"string"},"PreCheckFileName":{"title":"Enter File Name","type":"string"},"PreCheckType":{"enum":["Check if file exists"]}}},{"properties":{"PreCheckAction":{"enum":["If key exists then Continue","If key does not exists then Continue","If key exists then Abort","If key not exists then Abort","If key exists and value matches then Continue","If key exists and value does not matches then Continue","If key exists and value matches then Abort","If key exists and value does not matches then Abort","If key exists and value exists and data matches then Continue","If key exists and value exists and data does not matches then Continue","If key exists and value exists and data matches then Abort","If key exists and value exists and data does not matches then Abort"],"title":"Action","type":"string"},"PreCheckData":{"title":"Data","type":"string"},"PreCheckKey":{"title":"Key","type":"string"},"PreCheckType":{"enum":["Check if registry information exists"]},"PreCheckValue":{"title":"Value","type":"string"}}},{"properties":{"PreCheckAction":{"enum":["If the program exists then continue","If the program does not exists then continue","If the program exists then abort","If the program does not exists then abort"],"title":"Action","type":"string"},"PreCheckProgram":{"title":"Program","type":"string"},"PreCheckType":{"enum":["Check if Add / Remove program exists"]}}},{"properties":{"PreCheckAction":{"enum":["If the file exists and the version matches then mark success","If the file exists and version does not match then mark success","If the file exists and version is greater than specified then mark success","If the file exists and version is lower than specified then mark success","If the file exists and the version is matches then mark fail","If the file exists and version does not match then mark fail","If the file exists and version is greater than specified then mark fail","If the file exists and version is lower than specified then mark fail","If the file does not exists then mark fail"],"title":"Action","type":"string"},"PreCheckFileName":{"title":"File Name","type":"string"},"PreCheckType":{"enum":["Check for file version"]},"PreCheckVersion":{"title":"Version","type":"string"}}}]}},"properties":{"PerformPreCheck":{"enum":[true]},"PreCheckType":{"enum":["Check if file exists","Check if registry information exists","Check if Add / Remove program exists","Check for file version"],"title":"Check Type","type":"string"}}},{"properties":{"PerformPreCheck":{"enum":[false]}}}]},"TypeOfInstaller":{"oneOf":[{"dependencies":{"LocationType":{"oneOf":[{"properties":{"LocationType":{"enum":["ftp"]},"ftp":{"title":"FTP:","type":"string"},"password":{"title":"Password","type":"string"},"userName":{"title":"User Name","type":"string"}}},{"properties":{"LocationType":{"enum":["http"]},"http":{"title":"HTTP:","type":"string"}}},{"properties":{"LocationType":{"enum":["https"]},"https":{"title":"HTTPS:","type":"string"}}},{"properties":{"LocationType":{"enum":["network"]},"network":{"title":"Network:","type":"string"},"password":{"title":"Password","type":"string"},"userName":{"title":"User Name","type":"string"}}},{"properties":{"LocationType":{"enum":["local"]},"local":{"title":"Local","type":"string"}}}]}},"properties":{"InstallationParameter":{"title":"Installation Parameter","type":"string"},"LocationType":{"enum":["ftp","http","https","local","network"],"enumNames":["FTP","HTTP","HTTPS","LOCAL","NETWORK"],"title":"Download Location","type":"string"},"MD5CheckSum":{"title":"MD5 Checksum","type":"string"},"PackageName":{"title":"Package/Exe name","type":"string"},"TypeOfApplication":{"enum":["exe","msi"],"enumNames":["Regular Setup Executables(Exe)","MSI Package"],"title":"Type Of Application","type":"string"},"TypeOfInstaller":{"enum":["Installer"]}}},{"dependencies":{"TypeOfApplication":{"oneOf":[{"properties":{"TypeOfApplication":{"enum":["exe"]},"UninstallationParameter":{"title":"Uninstallation Parameter","type":"string"},"UninstallationPath":{"title":"Uninstallation Path","type":"string"}}},{"properties":{"TypeOfApplication":{"enum":["msi"]},"UninstallationParameter":{"title":"Uninstallation Parameter","type":"string"}}}]}},"properties":{"TypeOfApplication":{"enum":["exe","msi"],"enumNames":["Regular Setup Executables(Exe)","MSI Package"],"title":"Type Of Application","type":"string"},"TypeOfInstaller":{"enum":["UnInstaller"]}}}]}},"patternproperties":{"^InstallationParameter$":{},"^MD5CheckSum$":{},"^PostCheckAction$":{},"^PostCheckData$":{},"^PostCheckFileName$":{},"^PostCheckKey$":{},"^PostCheckProgram$":{},"^PostCheckType$":{},"^PostCheckValue$":{},"^PostCheckVersion$":{},"^PreCheckAction$":{},"^PreCheckData$":{},"^PreCheckFileName$":{},"^PreCheckKey$":{},"^PreCheckProgram$":{},"^PreCheckType$":{},"^PreCheckValue$":{},"^PreCheckVersion$":{},"^UninstallationParameter$":{},"^UninstallationPath$":{},"^ftp$":{},"^http$":{},"^https$":{},"^local$":{},"^network$":{},"^password$":{},"^userName$":{}},"properties":{"PerformPostCheck":{"title":"Perform post check","type":"boolean"},"PerformPreCheck":{"title":"Perform pre check","type":"boolean"},"TypeOfInstaller":{"default":"Installer","enum":["Installer","UnInstaller"],"enumNames":["Installer","Uninstaller"],"title":"Type Of Installer","type":"string"}},"type":"object"},"uiSchema":{"ApplicationDetails":{"classNames":"col-sm-12"},"InstallationParameter":{"classNames":"col-sm-8"},"LocationType":{"classNames":"col-sm-4","ui:autofocus":true,"ui:placeholder":"Select"},"MD5CheckSum":{"classNames":"col-sm-8"},"PackageName":{"classNames":"col-sm-8","ui:help":"Eg: setup.exe or setup.msi"},"PerformPostCheck":{"classNames":"col-sm-12"},"PerformPreCheck":{"classNames":"col-sm-12"},"PostCheckAction":{"classNames":"col-sm-8","ui:placeholder":"Select"},"PostCheckData":{"classNames":"col-sm-7"},"PostCheckFileName":{"classNames":"col-sm-7"},"PostCheckKey":{"classNames":"col-sm-7"},"PostCheckProgram":{"classNames":"col-sm-7"},"PostCheckType":{"classNames":"col-sm-6","ui:placeholder":"Select"},"PostCheckValue":{"classNames":"col-sm-7"},"PostCheckVersion":{"classNames":"col-sm-7"},"PreCheckAction":{"classNames":"col-sm-8","ui:placeholder":"Select"},"PreCheckData":{"classNames":"col-sm-7"},"PreCheckFileName":{"classNames":"col-sm-7"},"PreCheckKey":{"classNames":"col-sm-7"},"PreCheckProgram":{"classNames":"col-sm-7"},"PreCheckType":{"classNames":"col-sm-6","ui:placeholder":"Select"},"PreCheckValue":{"classNames":"col-sm-7"},"PreCheckVersion":{"classNames":"col-sm-7"},"TypeOfApplication":{"classNames":"col-sm-12","ui:options":{"inline":true},"ui:widget":"radio"},"TypeOfInstaller":{"classNames":"col-sm-12","ui:options":{"inline":true},"ui:widget":"radio"},"UninstallationParameter":{"classNames":"col-sm-8","ui:help":"Eg. for EXE : /SILENT  and for MSI : msiexec.exe /X {58D379F7-62BC-4748-8237-FE071ECE797C}"},"UninstallationPath":{"classNames":"col-sm-8"},"ftp":{"classNames":"col-sm-8","ui:autofocus":true,"ui:placeholder":"FTP://mysite.com/Mysetup"},"http":{"classNames":"col-sm-8","ui:autofocus":true,"ui:placeholder":"HTTP://mysite.com/Mysetup"},"https":{"classNames":"col-sm-8","ui:autofocus":true,"ui:placeholder":"HTTPS://mysite.com/Mysetup"},"local":{"classNames":"col-sm-8","ui:autofocus":true,"ui:placeholder":"C:\\package\\setup"},"network":{"classNames":"col-sm-8","ui:autofocus":true,"ui:placeholder":"\\\\host\\\\sharename\\\\package"},"password":{"classNames":"col-sm-6","ui:widget":"password"},"ui:order":["TypeOfInstaller","LocationType","ftp","http","https","network","local","userName","password","TypeOfApplication","PackageName","InstallationParameter","MD5CheckSum","UninstallationPath","UninstallationParameter","PerformPreCheck","PreCheckType","PreCheckFileName","PreCheckKey","PreCheckValue","PreCheckData","PreCheckProgram","PreCheckVersion","PreCheckAction","PerformPostCheck","PostCheckType","PostCheckFileName","PostCheckKey","PostCheckValue","PostCheckData","PostCheckProgram","PostCheckVersion","PostCheckAction"],"userName":{"classNames":"col-sm-6","validationSchema":{"notEmpty":"userName","required":["password"],"type":"requiredFieldsIfNotEmpty"}}},"isHDScript":false}
