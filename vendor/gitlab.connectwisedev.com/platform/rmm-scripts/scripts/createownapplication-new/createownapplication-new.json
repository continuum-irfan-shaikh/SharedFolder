{"id":"0863398d-385d-11ea-982d-00155d130b01","partnerId":"00000000-0000-0000-0000-000000000000","category":["Application"],"description":"Installs a partner-defined application on Windows desktops and servers","engine":"powershell","engineMaxVersion":5,"expectedExecutionTimeSec":14400,"failureMessage":"Executed with errors","successMessage":"Executed successfully","internal":false,"name":"Create own application (new)","tags":["Windows 7","Windows 10"],"sequence":true,"content":"aWYgKCRlbnY6UFJPQ0VTU09SX0FSQ0hJVEVXNjQzMiAtZXEgIkFNRDY0IikgewogICAgaWYgKCRteUludm9jYXRpb24uTGluZSkgewogICAgICAgICYiJGVudjpzeXN0ZW1yb290XHN5c25hdGl2ZVx3aW5kb3dzcG93ZXJzaGVsbFx2MS4wXHBvd2Vyc2hlbGwuZXhlIiAtTm9uSW50ZXJhY3RpdmUgLU5vUHJvZmlsZSAkbXlJbnZvY2F0aW9uLkxpbmUKICAgIH0KICAgIGVsc2UgewogICAgICAgICYiJGVudjpzeXN0ZW1yb290XHN5c25hdGl2ZVx3aW5kb3dzcG93ZXJzaGVsbFx2MS4wXHBvd2Vyc2hlbGwuZXhlIiAtTm9uSW50ZXJhY3RpdmUgLU5vUHJvZmlsZSAtZmlsZSAiJCgkbXlJbnZvY2F0aW9uLkludm9jYXRpb25OYW1lKSIgJGFyZ3MKICAgIH0KICAgIGV4aXQgJGxhc3RleGl0Y29kZQp9CgojcmVnaW9uIEZ1bmN0aW9ucwpmdW5jdGlvbiBHZXQtTUQ1SGFzaCAoJHBhdGgpIHsKICAgICRtZDUgPSBOZXctT2JqZWN0IC1UeXBlTmFtZSBTeXN0ZW0uU2VjdXJpdHkuQ3J5cHRvZ3JhcGh5Lk1ENUNyeXB0b1NlcnZpY2VQcm92aWRlcgogICAgcmV0dXJuIFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJG1kNS5Db21wdXRlSGFzaChbU3lzdGVtLklPLkZpbGVdOjpSZWFkQWxsQnl0ZXMoJHBhdGgpKSkgLXJlcGxhY2UgJy0nLCAnJwp9CgpmdW5jdGlvbiBEb3dubG9hZC1Gcm9tVVJMICgkVVJMLCAkTG9jYWxGaWxlUGF0aCkgewogICAgdHJ5IHsKICAgICAgICAjIFdyaXRlLUhvc3QgIkRvd25sb2FkaW5nOiAkVVJMIgogICAgICAgICRXZWJDbGllbnQgPSBOZXctT2JqZWN0IFN5c3RlbS5OZXQuV2ViQ2xpZW50CiAgICAgICAgJFdlYkNsaWVudC5Eb3dubG9hZEZpbGUoJFVSTCwgJExvY2FsRmlsZVBhdGgpCiAgICAgICAgaWYgKC1ub3QoVGVzdC1QYXRoICRMb2NhbEZpbGVQYXRoKSkgeyBXcml0ZS1FcnJvciAiVW5hYmxlIHRvIGRvd25sb2FkIHRoZSBmaWxlIGZyb20gVVJMOiAkVVJMIiB9CiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgV3JpdGUtRXJyb3IgIlVuYWJsZSB0byBkb3dubG9hZCB0aGUgZmlsZSBmcm9tIFVSTDogJFVSTGBuJCgkXy5FeGNlcHRpb24uTWVzc2FnZSkiCiAgICB9Cn0KCmZ1bmN0aW9uIERvd25sb2FkLUZyb21GVFAgKCRSZW1vdGVGVFBGaWxlUGF0aCwgJExvY2FsRmlsZVBhdGgsICRVc2VyTmFtZSwgJFBhc3N3b3JkKSB7CiAgICB0cnkgewogICAgICAgICMgV3JpdGUtSG9zdCAiRG93bmxvYWRpbmc6ICRSZW1vdGVGVFBGaWxlUGF0aCIKICAgICAgICAkZnRwcmVxdWVzdCA9IFtTeXN0ZW0uTmV0LkZ0cFdlYlJlcXVlc3RdOjpjcmVhdGUoJFJlbW90ZUZUUEZpbGVQYXRoKQogICAgICAgICRmdHByZXF1ZXN0LkNyZWRlbnRpYWxzID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0Lk5ldHdvcmtDcmVkZW50aWFsKCR1c2VybmFtZSwgJHBhc3N3b3JkKQogICAgICAgICRmdHByZXF1ZXN0Lk1ldGhvZCA9IFtTeXN0ZW0uTmV0LldlYlJlcXVlc3RNZXRob2RzK0Z0cF06OkRvd25sb2FkRmlsZQogICAgICAgICRmdHByZXF1ZXN0LlVzZUJpbmFyeSA9ICR0cnVlCiAgICAgICAgJGZ0cHJlcXVlc3QuS2VlcEFsaXZlID0gJGZhbHNlCiAgICAgICAgJGZ0cHJlc3BvbnNlID0gJGZ0cHJlcXVlc3QuR2V0UmVzcG9uc2UoKQogICAgICAgICRyZXNwb25zZXN0cmVhbSA9ICRmdHByZXNwb25zZS5HZXRSZXNwb25zZVN0cmVhbSgpCiAgICAgICAgJHRhcmdldGZpbGUgPSBOZXctT2JqZWN0IElPLkZpbGVTdHJlYW0gKCRMb2NhbEZpbGVQYXRoLCBbSU8uRmlsZU1vZGVdOjpDcmVhdGUpCiAgICAgICAgW2J5dGVbXV0kcmVhZGJ1ZmZlciA9IE5ldy1PYmplY3QgYnl0ZVtdIDEwMjQKCiAgICAgICAgZG8gewogICAgICAgICAgICAkcmVhZGxlbmd0aCA9ICRyZXNwb25zZXN0cmVhbS5SZWFkKCRyZWFkYnVmZmVyLCAwLCAxMDI0KQogICAgICAgICAgICAkdGFyZ2V0ZmlsZS5Xcml0ZSgkcmVhZGJ1ZmZlciwgMCwgJHJlYWRsZW5ndGgpCiAgICAgICAgfQogICAgICAgIHdoaWxlICgkcmVhZGxlbmd0aCAtbmUgMCkKICAgICAgICAkdGFyZ2V0ZmlsZS5jbG9zZSgpCgogICAgICAgIGlmICgtbm90IChUZXN0LVBhdGggJExvY2FsRmlsZVBhdGgpKSB7IFdyaXRlLUVycm9yICJVbmFibGUgdG8gZG93bmxvYWQgdGhlIGZpbGUgZnJvbSBGVFAgbG9jYXRpb246ICRSZW1vdGVGVFBGaWxlUGF0aCIgfQoKICAgIH0KICAgIGNhdGNoIHsKICAgICAgICBXcml0ZS1FcnJvciAiVW5hYmxlIHRvIGRvd25sb2FkIHRoZSBmaWxlIGZyb20gRlRQIGxvY2F0aW9uOiAkUmVtb3RlRlRQRmlsZVBhdGhgbiQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpIgogICAgfQp9CgpmdW5jdGlvbiBEb3dubG9hZC1Gcm9tVU5DICgkUmVtb3RlVU5DRmlsZVBhdGgsICRQYWNrYWdlTmFtZSwgJExvY2FsRmlsZVBhdGgsICRVc2VyTmFtZSwgJFBhc3N3b3JkKSB7CiAgICB0cnkgewogICAgICAgICMgV3JpdGUtSG9zdCAiRG93bmxvYWRpbmc6ICQoSm9pbi1QYXRoICRSZW1vdGVVTkNGaWxlUGF0aCAkUGFja2FnZU5hbWUpIgogICAgICAgICRGcmVlRHJpdmVMZXR0ZXIgPSBHZXQtUmFuZG9tRnJlZURyaXZlTGV0dGVyCiAgICAgICAgTWFwTmV0d29ya0RyaXZlIC1Ecml2ZUxldHRlciAkRnJlZURyaXZlTGV0dGVyIC1EaXJlY3RvcnkgJFJlbW90ZVVOQ0ZpbGVQYXRoIC1QZXJzaXN0ZW50ICRmYWxzZSAtVXNlcm5hbWUgJFVzZXJOYW1lIC1QYXNzd29yZCAkUGFzc3dvcmQKICAgICAgICBDb3B5LUl0ZW0gJChKb2luLVBhdGggJEZyZWVEcml2ZUxldHRlciAkUGFja2FnZU5hbWUpIC1EZXN0aW5hdGlvbiAkTG9jYWxGaWxlUGF0aAogICAgICAgIGlmICgtbm90IChUZXN0LVBhdGggJExvY2FsRmlsZVBhdGgpKSB7IFdyaXRlLUVycm9yICJVbmFibGUgdG8gZG93bmxvYWQgdGhlIGZpbGUgZnJvbSBOZXR3b3JrIGxvY2F0aW9uOiAkUmVtb3RlVU5DRmlsZVBhdGgiIH0KICAgIH0KICAgIGNhdGNoIHsKICAgICAgICBXcml0ZS1FcnJvciAiVW5hYmxlIHRvIGRvd25sb2FkIHRoZSBmaWxlIGZyb20gTmV0d29yayBsb2NhdGlvbjogJFJlbW90ZVVOQ0ZpbGVQYXRoYG4kKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKSIKICAgIH0KICAgIGZpbmFsbHkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgICROZXR3b3JrID0gTmV3LU9iamVjdCAtQ29tT2JqZWN0IFdTY3JpcHQuTmV0d29yawogICAgICAgICAgICAkTmV0d29yay5SZW1vdmVOZXR3b3JrRHJpdmUoJEZyZWVEcml2ZUxldHRlciwgJFRydWUpCiAgICAgICAgfQogICAgICAgIGNhdGNoIHsKICAgICAgICAgICAgIyBubyBhY3Rpb24KICAgICAgICB9CiAgICB9Cn0KCkZ1bmN0aW9uIE1hcE5ldHdvcmtEcml2ZSgkRHJpdmVMZXR0ZXIsICREaXJlY3RvcnksICRQZXJzaXN0ZW50LCAkVXNlcm5hbWUsICRQYXNzd29yZCkgewogICAgdHJ5IHsKICAgICAgICBpZiAoVGVzdC1QYXRoICREcml2ZUxldHRlcikgewogICAgICAgICAgICAjIFdyaXRlLU91dHB1dCAiYG5bTWFwIE5ldHdvcmsgRHJpdmVdIEZhaWxlZCB0byBNYXAgdGhlIG5ldHdvcmsgZHJpdmU6IGAnJERyaXZlTGV0dGVyYCcgYmVjYXVzZSBpdCBhbHJlYWR5IGV4aXN0cy4iCiAgICAgICAgICAgIFdyaXRlLUVycm9yICJGYWlsZWQgdG8gTWFwIHRoZSBuZXR3b3JrIGRyaXZlOiBgJyREcml2ZUxldHRlcmAnIGJlY2F1c2UgaXQgYWxyZWFkeSBleGlzdHMuIgogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgJE5ldHdvcmsgPSBOZXctT2JqZWN0IC1Db21PYmplY3QgV1NjcmlwdC5OZXR3b3JrCiAgICAgICAgICAgICROZXR3b3JrLk1hcE5ldHdvcmtEcml2ZSgkRHJpdmVMZXR0ZXIsICIkRGlyZWN0b3J5IiwgJFBlcnNpc3RlbnQsICRVc2VyTmFtZSwgJFBhc3N3b3JkKQogICAgICAgIH0KICAgIH0KICAgIGNhdGNoIHsKICAgICAgICBXcml0ZS1FcnJvciAiRmFpbGVkIHRvIE1hcCB0aGUgbmV0d29yayBkcml2ZS5gbiQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpIgogICAgfQp9CgpmdW5jdGlvbiBKb2luLVVSTFBhcnRzIHsKICAgIHBhcmFtIChbc3RyaW5nW11dICRQYXJ0cywgW3N0cmluZ10gJFNlcGVyYXRvciA9ICcnKQogICAgJHNlYXJjaCA9ICcoPzwhOiknICsgW3JlZ2V4XTo6RXNjYXBlKCRTZXBlcmF0b3IpICsgJysnICAjUmVwbGFjZSBtdWx0aXBsZXMgZXhjZXB0IGluIGZyb250IG9mIGEgY29sb24gZm9yIFVSTHMuCiAgICAkcmVwbGFjZSA9ICRTZXBlcmF0b3IKICAgICgkUGFydHMgfCBXaGVyZS1PYmplY3QgeyAkXyAtYW5kICRfLlRyaW0oKS5MZW5ndGggfSkgLWpvaW4gJFNlcGVyYXRvciAtcmVwbGFjZSAkc2VhcmNoLCAkcmVwbGFjZQp9CgpmdW5jdGlvbiBHZXQtUmFuZG9tRnJlZURyaXZlTGV0dGVyIHsKICAgIEdldC1DaGlsZEl0ZW0gZnVuY3Rpb246W2Qtel06IC1uIHwgV2hlcmUtT2JqZWN0IHsgISh0ZXN0LXBhdGggJF8pIH0gfCBHZXQtUmFuZG9tCn0KCgpmdW5jdGlvbiBXcml0ZS1TdWNjZXNzT3JGYWlsIChbU3lzdGVtLkRpYWdub3N0aWNzLlByb2Nlc3NdJFByb2Nlc3MsICRQYWNrYWdlTmFtZSwgJEFjdGlvbikgewogICAgSWYgKCRwcm9jZXNzLmV4aXRjb2RlIC1lcSAwKSB7CiAgICAgICAgV3JpdGUtT3V0cHV0ICJgbiRBY3Rpb24gb2YgJyRQYWNrYWdlTmFtZScgU3VjY2Vzc2Z1bC4iCiAgICB9CiAgICBlbHNlIHsKICAgICAgICBXcml0ZS1PdXRwdXQgImBuJEFjdGlvbiBvZiAnJFBhY2thZ2VOYW1lJyBGYWlsZWQuIEV4aXRjb2RlOiAkKCRwcm9jZXNzLmV4aXRjb2RlKSIKICAgIH0KfQoKZnVuY3Rpb24gVGVzdC1SZWdpc3RyeSAoJEtleSwgJFZhbHVlLCAkRGF0YSkgewogICAgJFBhdGggPSAiUkVHSVNUUlk6OiRrZXkiCiAgICAkS2V5RXhpc3RzID0gVGVzdC1QYXRoICRQYXRoCiAgICAkUmVzdWx0ID0gR2V0LUl0ZW1Qcm9wZXJ0eSAiUkVHSVNUUlk6OiRrZXkiIC1OYW1lICRWYWx1ZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZQogICAgJFZhbHVlRXhpc3RzID0gW2Jvb2xdKCgkUmVzdWx0KS4kdmFsdWUpCiAgICAkRGF0YU1hdGNoZXMgPSAkZGF0YSAtZXEgKCRSZXN1bHQpLiR2YWx1ZQoKICAgIHJldHVybiAkS2V5RXhpc3RzLCAkVmFsdWVFeGlzdHMsICREYXRhTWF0Y2hlcwp9CgpmdW5jdGlvbiBUZXN0LUZpbGVWZXJzaW9uICgkUGF0aCwgW1N5c3RlbS5WZXJzaW9uXSRVc2VyU3BlY2lmaWVkVmVyc2lvbikgewogICAgJEZpbGVFeGlzdHMgPSBUZXN0LVBhdGggJFBhdGgKICAgICR2ZXJzaW9uaW5mbyA9IChHZXQtSXRlbSAkcGF0aCAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSkudmVyc2lvbmluZm8KICAgICRGaWxlVmVyc2lvbiA9IFtTeXN0ZW0uVmVyc2lvbl0gKCJ7MH0uezF9LnsyfS57M30iIC1mICR2ZXJzaW9uaW5mby5GaWxlTWFqb3JQYXJ0LCAkdmVyc2lvbmluZm8uRmlsZU1pbm9yUGFydCwgJHZlcnNpb25pbmZvLkZpbGVCdWlsZFBhcnQsICR2ZXJzaW9uaW5mby5GaWxlUHJpdmF0ZVBhcnQpCiAgICAkRmlsZVZlcnNpb25NYXRjaGVzID0gJEZpbGVWZXJzaW9uIC1lcSAkVXNlclNwZWNpZmllZFZlcnNpb24KICAgICRGaWxlVmVyc2lvbkdyZWF0ZXIgPSAkRmlsZVZlcnNpb24gLWd0ICRVc2VyU3BlY2lmaWVkVmVyc2lvbgogICAgJEZpbGVWZXJzaW9uTG93ZXIgPSAkRmlsZVZlcnNpb24gLWx0ICRVc2VyU3BlY2lmaWVkVmVyc2lvbgoKICAgICRGaWxlRXhpc3RzLCAkRmlsZVZlcnNpb25NYXRjaGVzLCAkRmlsZVZlcnNpb25HcmVhdGVyLCAkRmlsZVZlcnNpb25Mb3dlcgp9CgpGdW5jdGlvbiBUZXN0LUFkZFJlbW92ZVByb2dyYW0gKCRQcm9ncmFtKSB7CiAgICAkUmVnaXN0cnkgPSAnSEtMTTpcU09GVFdBUkVcV293NjQzMk5vZGVcTWljcm9zb2Z0XFdpbmRvd3NcQ3VycmVudFZlcnNpb25cVW5pbnN0YWxsJywgJ0hLTE06XFNPRlRXQVJFXE1pY3Jvc29mdFxXaW5kb3dzXEN1cnJlbnRWZXJzaW9uXFVuaW5zdGFsbCcKICAgICRwcm9kdWN0ID0gR2V0LUNoaWxkSXRlbSAkUmVnaXN0cnkgLUVycm9yQWN0aW9uICdTaWxlbnRseUNvbnRpbnVlJyB8IEdldC1JdGVtUHJvcGVydHkgfCBXaGVyZS1PYmplY3QgeyAkXy5EaXNwbGF5bmFtZSAtZXEgJHByb2dyYW0gfQogICAgcmV0dXJuIFtib29sXSAkcHJvZHVjdAp9CiNlbmRyZWdpb24gRnVuY3Rpb25zCgojcmVnaW9uIE1haW4KJEVycm9yQWN0aW9uUHJlZmVyZW5jZSA9ICdTdG9wJwoKdHJ5IHsKICAgICNyZWdpb24gUHJlQ2hlY2sKICAgIGlmICgkUGVyZm9ybVByZUNoZWNrKSB7CiAgICAgICAgJE5hbWUgPSAnUHJlLUNoZWNrJwogICAgICAgIFN3aXRjaCAoJFByZUNoZWNrVHlwZSkgewogICAgICAgICAgICAnQ2hlY2sgaWYgZmlsZSBleGlzdHMnIHsKICAgICAgICAgICAgICAgICRGaWxlRXhpc3RzID0gVGVzdC1QYXRoICRQcmVDaGVja0ZpbGVOYW1lCiAgICAgICAgICAgICAgICAkUHJlQ2hlY2tBY3Rpb24gPSAkUHJlQ2hlY2tBY3Rpb25fZm9yX1ByZUNoZWNrVHlwZV8xICAjIGhhbmRsZSBOYXJheWFuJ3MgcmVxdWVzdCB0byBoYXZlIG11bHRpcGxlICRQcmVDaGVja0FjdGlvbl9mb3JfUHJlQ2hlY2tUeXBlX1tuXSB2YXJpYWJsZXMgc3Vic3RpdHV0ZWQgdGhyb3VnaCBKU09OCiAgICAgICAgICAgICAgICBTd2l0Y2ggKCRQcmVDaGVja0FjdGlvbikgewogICAgICAgICAgICAgICAgICAgICdJZiBmaWxlIGV4aXN0cyB0aGVuIENvbnRpbnVlJyB7IGlmICgkRmlsZUV4aXN0cykgeyBjb250aW51ZSB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBub3QgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIGZpbGUgZG9lcyBub3QgZXhpc3RzIHRoZW4gQ29udGludWUnIHsgaWYgKC1ub3QgJEZpbGVFeGlzdHMpIHsgY29udGludWUgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbm90IG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiBmaWxlIGV4aXN0cyB0aGVuIEFib3J0JyB7IGlmICgkRmlsZUV4aXN0cykgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IGVsc2UgeyBjb250aW51ZSB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgZmlsZSBkb2VzIG5vdCBleGlzdHMgdGhlbiBBYm9ydCcgeyBpZiAoLW5vdCAkRmlsZUV4aXN0cykgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IGVsc2UgeyBjb250aW51ZSB9IH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgICdDaGVjayBpZiByZWdpc3RyeSBpbmZvcm1hdGlvbiBleGlzdHMnIHsKICAgICAgICAgICAgICAgICRLZXlFeGlzdHMsICRWYWx1ZU1hdGNoZXMsICREYXRhTWF0Y2hlcyA9IFRlc3QtUmVnaXN0cnkgLUtleSAkUHJlQ2hlY2tLZXkgLVZhbHVlICRQcmVDaGVja1ZhbHVlIC1EYXRhICRQcmVDaGVja0RhdGEKICAgICAgICAgICAgICAgICRQcmVDaGVja0FjdGlvbiA9ICRQcmVDaGVja0FjdGlvbl9mb3JfUHJlQ2hlY2tUeXBlXzIgIyBoYW5kbGUgTmFyYXlhbidzIHJlcXVlc3QgdG8gaGF2ZSBtdWx0aXBsZSAkUHJlQ2hlY2tBY3Rpb25fZm9yX1ByZUNoZWNrVHlwZV9bbl0gdmFyaWFibGVzIHN1YnN0aXR1dGVkIHRocm91Z2ggSlNPTgogICAgICAgICAgICAgICAgU3dpdGNoICgkUHJlQ2hlY2tBY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAnSWYga2V5IGV4aXN0cyB0aGVuIENvbnRpbnVlJyB7IGlmICgkS2V5RXhpc3RzKSB7IGNvbnRpbnVlIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG5vdCBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYga2V5IGRvZXMgbm90IGV4aXN0cyB0aGVuIENvbnRpbnVlJyB7IGlmICgtbm90ICRLZXlFeGlzdHMpIHsgY29udGludWUgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbm90IG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiBrZXkgZXhpc3RzIHRoZW4gQWJvcnQnIHsgaWYgKCRLZXlFeGlzdHMpIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSBlbHNlIHsgY29udGludWUgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIGtleSBub3QgZXhpc3RzIHRoZW4gQWJvcnQnIHsgaWYgKC1ub3QgJEtleUV4aXN0cykgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IGVsc2UgeyBjb250aW51ZSB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYga2V5IGV4aXN0cyBhbmQgdmFsdWUgbWF0Y2hlcyB0aGVuIENvbnRpbnVlJyB7IGlmICgkS2V5RXhpc3RzIC1hbmQgJFZhbHVlTWF0Y2hlcykgeyBjb250aW51ZSB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBub3QgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIGtleSBleGlzdHMgYW5kIHZhbHVlIGRvZXMgbm90IG1hdGNoZXMgdGhlbiBDb250aW51ZScgeyBpZiAoJEtleUV4aXN0cyAtYW5kICgtbm90ICRWYWx1ZU1hdGNoZXMpKSB7IGNvbnRpbnVlIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG5vdCBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYga2V5IGV4aXN0cyBhbmQgdmFsdWUgbWF0Y2hlcyB0aGVuIEFib3J0JyB7IGlmICgkS2V5RXhpc3RzIC1hbmQgJFZhbHVlTWF0Y2hlcykgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IGVsc2UgeyBjb250aW51ZSB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYga2V5IGV4aXN0cyBhbmQgdmFsdWUgZG9lcyBub3QgbWF0Y2hlcyB0aGVuIEFib3J0JyB7IGlmICgkS2V5RXhpc3RzIC1hbmQgKC1ub3QgJFZhbHVlTWF0Y2hlcykpIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSBlbHNlIHsgY29udGludWUgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIGtleSBleGlzdHMgYW5kIHZhbHVlIGV4aXN0cyBhbmQgZGF0YSBtYXRjaGVzIHRoZW4gQ29udGludWUnIHsgaWYgKCRLZXlFeGlzdHMgLWFuZCAkZGF0YW1hdGNoZXMpIHsgY29udGludWUgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbm90IG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiBrZXkgZXhpc3RzIGFuZCB2YWx1ZSBleGlzdHMgYW5kIGRhdGEgZG9lcyBub3QgbWF0Y2hlcyB0aGVuIENvbnRpbnVlJyB7IGlmICgkS2V5RXhpc3RzIC1hbmQgJFZhbHVlTWF0Y2hlcyAtYW5kICgtbm90ICRkYXRhbWF0Y2hlcykpIHsgY29udGludWUgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbm90IG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiBrZXkgZXhpc3RzIGFuZCB2YWx1ZSBleGlzdHMgYW5kIGRhdGEgbWF0Y2hlcyB0aGVuIEFib3J0JyB7IGlmICgkS2V5RXhpc3RzIC1hbmQgJFZhbHVlTWF0Y2hlcyAtYW5kICRkYXRhbWF0Y2hlcykgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IGVsc2UgeyBjb250aW51ZSB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYga2V5IGV4aXN0cyBhbmQgdmFsdWUgZXhpc3RzIGFuZCBkYXRhIGRvZXMgbm90IG1hdGNoZXMgdGhlbiBBYm9ydCcgeyBpZiAoJEtleUV4aXN0cyAtYW5kICRWYWx1ZU1hdGNoZXMgLWFuZCAoLW5vdCAkZGF0YW1hdGNoZXMpKSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gZWxzZSB7IGNvbnRpbnVlIH0gfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJ0NoZWNrIGlmIEFkZCAvIFJlbW92ZSBwcm9ncmFtIGV4aXN0cycgewogICAgICAgICAgICAgICAgJFByb2dyYW1FeGlzdHMgPSBUZXN0LUFkZFJlbW92ZVByb2dyYW0gLVByb2dyYW0gJFByZUNoZWNrUHJvZ3JhbQogICAgICAgICAgICAgICAgJFByZUNoZWNrQWN0aW9uID0gJFByZUNoZWNrQWN0aW9uX2Zvcl9QcmVDaGVja1R5cGVfMyAjIGhhbmRsZSBOYXJheWFuJ3MgcmVxdWVzdCB0byBoYXZlIG11bHRpcGxlICRQcmVDaGVja0FjdGlvbl9mb3JfUHJlQ2hlY2tUeXBlX1tuXSB2YXJpYWJsZXMgc3Vic3RpdHV0ZWQgdGhyb3VnaCBKU09OCgogICAgICAgICAgICAgICAgU3dpdGNoICgkUHJlQ2hlY2tBY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIHByb2dyYW0gZXhpc3RzIHRoZW4gY29udGludWUnIHsgaWYgKCRQcm9ncmFtRXhpc3RzKSB7IGNvbnRpbnVlIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG5vdCBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIHByb2dyYW0gZG9lcyBub3QgZXhpc3RzIHRoZW4gY29udGludWUnIHsgaWYgKCEkUHJvZ3JhbUV4aXN0cykgeyBjb250aW51ZSB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBub3QgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIHRoZSBwcm9ncmFtIGV4aXN0cyB0aGVuIGFib3J0JyB7IGlmICgkUHJvZ3JhbUV4aXN0cykgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IGVsc2UgeyBjb250aW51ZSB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIHByb2dyYW0gZG9lcyBub3QgZXhpc3RzIHRoZW4gYWJvcnQnIHsgaWYgKCEkUHJvZ3JhbUV4aXN0cykgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IGVsc2UgeyBjb250aW51ZSB9IH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgICdDaGVjayBmb3IgZmlsZSB2ZXJzaW9uJyB7CiAgICAgICAgICAgICAgICAkRmlsZUV4aXN0cywgJEZpbGVWZXJzaW9uTWF0Y2hlcywgJEZpbGVWZXJzaW9uR3JlYXRlciwgJEZpbGVWZXJzaW9uTG93ZXIgPSBUZXN0LUZpbGVWZXJzaW9uIC1QYXRoICRQcmVDaGVja0ZpbGVOYW1lIC1Vc2VyU3BlY2lmaWVkVmVyc2lvbiAkUHJlQ2hlY2tWZXJzaW9uCiAgICAgICAgICAgICAgICAkUHJlQ2hlY2tBY3Rpb24gPSAkUHJlQ2hlY2tBY3Rpb25fZm9yX1ByZUNoZWNrVHlwZV80ICMgaGFuZGxlIE5hcmF5YW4ncyByZXF1ZXN0IHRvIGhhdmUgbXVsdGlwbGUgJFByZUNoZWNrQWN0aW9uX2Zvcl9QcmVDaGVja1R5cGVfW25dIHZhcmlhYmxlcyBzdWJzdGl0dXRlZCB0aHJvdWdoIEpTT04KCiAgICAgICAgICAgICAgICBTd2l0Y2ggKCRQcmVDaGVja0FjdGlvbikgewogICAgICAgICAgICAgICAgICAgICdJZiBmaWxlIGV4aXN0cyBhbmQgdmVyc2lvbiBlcXVhbCB0byBzcGVjaWZpZWQgdGhlbiBDb250aW51ZScgeyBpZiAoJEZpbGVFeGlzdHMgLWFuZCAkRmlsZVZlcnNpb25NYXRjaGVzKSB7IGNvbnRpbnVlIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG5vdCBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgZmlsZSBleGlzdHMgYW5kIHZlcnNpb24gbm90IGVxdWFsIHRvIHNwZWNpZmllZCB0aGVuIENvbnRpbnVlJyB7IGlmICgkRmlsZUV4aXN0cyAtYW5kICgtbm90ICRGaWxlVmVyc2lvbk1hdGNoZXMpKSB7IGNvbnRpbnVlIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG5vdCBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgZmlsZSBleGlzdHMgYW5kIHZlcnNpb24gaGlnaGVyIHRvIHNwZWNpZmllZCB0aGVuIENvbnRpbnVlJyB7IGlmICgkRmlsZUV4aXN0cyAtYW5kICRGaWxlVmVyc2lvbkdyZWF0ZXIpIHsgY29udGludWUgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbm90IG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiBmaWxlIGV4aXN0cyBhbmQgdmVyc2lvbiBsb3dlciB0byBzcGVjaWZpZWQgdGhlbiBDb250aW51ZScgeyBpZiAoJEZpbGVFeGlzdHMgLWFuZCAkRmlsZVZlcnNpb25Mb3dlcikgeyBjb250aW51ZSB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBub3QgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIGZpbGUgZXhpc3RzIGFuZCB2ZXJzaW9uIGVxdWFsIHRvIHNwZWNpZmllZCB0aGVuIEFib3J0JyB7IGlmICgkRmlsZUV4aXN0cyAtYW5kICRGaWxlVmVyc2lvbk1hdGNoZXMpIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSBlbHNlIHsgY29udGludWUgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIGZpbGUgZXhpc3RzIGFuZCB2ZXJzaW9uIG5vdCBlcXVhbCB0byBzcGVjaWZpZWQgdGhlbiBBYm9ydCcgeyBpZiAoJEZpbGVFeGlzdHMgLWFuZCAoLW5vdCAkRmlsZVZlcnNpb25NYXRjaGVzKSkgeyBXcml0ZS1PdXRwdXQgIkFib3J0aW5nIGJlY2F1c2UgJE5hbWUgY29uZGl0aW9uIHdhcyBtZXQgYCckUHJlQ2hlY2tBY3Rpb25gJyI7IHJldHVybiB9IGVsc2UgeyBjb250aW51ZSB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgZmlsZSBleGlzdHMgYW5kIHZlcnNpb24gaGlnaGVyIHRvIHNwZWNpZmllZCB0aGVuIEFib3J0JyB7IGlmICgkRmlsZUV4aXN0cyAtYW5kICRGaWxlVmVyc2lvbkdyZWF0ZXIpIHsgV3JpdGUtT3V0cHV0ICJBYm9ydGluZyBiZWNhdXNlICROYW1lIGNvbmRpdGlvbiB3YXMgbWV0IGAnJFByZUNoZWNrQWN0aW9uYCciOyByZXR1cm4gfSBlbHNlIHsgY29udGludWUgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIGZpbGUgZXhpc3RzIGFuZCB2ZXJzaW9uIGxvd2VyIHRvIHNwZWNpZmllZCB0aGVuIEFib3J0JyB7IGlmICgkRmlsZUV4aXN0cyAtYW5kICRGaWxlVmVyc2lvbkxvd2VyKSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gZWxzZSB7IGNvbnRpbnVlIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiBmaWxlIGRvZXMgbm90IGV4aXN0cyB0aGVuIEFib3J0JyB7IGlmICgtbm90ICRGaWxlRXhpc3RzKSB7IFdyaXRlLU91dHB1dCAiQWJvcnRpbmcgYmVjYXVzZSAkTmFtZSBjb25kaXRpb24gd2FzIG1ldCBgJyRQcmVDaGVja0FjdGlvbmAnIjsgcmV0dXJuIH0gZWxzZSB7IGNvbnRpbnVlIH0gfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAjZW5kcmVnaW9uIFByZWNoZWNrCgogICAgI3JlZ2lvbiBNYWluCiAgICBTd2l0Y2ggKCRUeXBlT2ZJbnN0YWxsZXIpIHsKICAgICAgICAnSW5zdGFsbGVyJyB7CiAgICAgICAgICAgICRQYWNrYWdlTG9jYWxQYXRoID0gSm9pbi1QYXRoICRlbnY6VEVNUCAkUGFja2FnZU5hbWUKCiAgICAgICAgICAgICNyZWdpb24gSW5wdXRWYWxpZGF0aW9uCiAgICAgICAgICAgIHN3aXRjaCAoJExvY2F0aW9uVHlwZSkgewogICAgICAgICAgICAgICAgJ2Z0cCcgewogICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbiA9ICRmdHBQYXRoICsgIi8iICsgJFBhY2thZ2VOYW1lCiAgICAgICAgICAgICAgICAgICAgJFNjaGVtZSA9IChbdXJpXSRMb2NhdGlvbikuc2NoZW1lCiAgICAgICAgICAgICAgICAgICAgaWYgKCRTY2hlbWUgLWFuZCAoJFNjaGVtZSAtbmUgJ2Z0cCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICJJbnZhbGlkIGAnJExvY2F0aW9uVHlwZWAnIFVSTDogJExvY2F0aW9uIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKCEoJExvY2F0aW9uLlN0YXJ0c1dpdGgoImZ0cDovLyIpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAkTG9jYXRpb24gPSAiZnRwOi8vIiArICRMb2NhdGlvbgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICdodHRwJyB7CiAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uID0gJGh0dHBQYXRoICsgIi8iICsgJFBhY2thZ2VOYW1lCiAgICAgICAgICAgICAgICAgICAgJFNjaGVtZSA9IChbdXJpXSRMb2NhdGlvbikuc2NoZW1lCiAgICAgICAgICAgICAgICAgICAgaWYgKCRTY2hlbWUgLWFuZCAoJFNjaGVtZSAtbmUgJ2h0dHAnKSkgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1FcnJvciAiSW52YWxpZCBgJyRMb2NhdGlvblR5cGVgJyBVUkw6ICRMb2NhdGlvbiIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICghKCRMb2NhdGlvbi5TdGFydHNXaXRoKCJodHRwOi8vIikpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRMb2NhdGlvbiA9ICJodHRwOi8vIiArICRMb2NhdGlvbgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICdodHRwcycgewogICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbiA9ICRodHRwc1BhdGggKyAiLyIgKyAkUGFja2FnZU5hbWUKICAgICAgICAgICAgICAgICAgICAkU2NoZW1lID0gKFt1cmldJExvY2F0aW9uKS5zY2hlbWUKICAgICAgICAgICAgICAgICAgICBpZiAoJFNjaGVtZSAtYW5kICgkU2NoZW1lIC1uZSAnaHR0cHMnKSkgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1FcnJvciAiSW52YWxpZCBgJyRMb2NhdGlvblR5cGVgJyBVUkw6ICRMb2NhdGlvbiIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICghKCRMb2NhdGlvbi5TdGFydHNXaXRoKCJodHRwczovLyIpKSkgewogICAgICAgICAgICAgICAgICAgICAgICAkTG9jYXRpb24gPSAiaHR0cHM6Ly8iICsgJExvY2F0aW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJ25ldHdvcmsnIHsKICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24gPSAkbmV0d29ya1BhdGggKyAiLyIgKyAkUGFja2FnZU5hbWUKICAgICAgICAgICAgICAgICAgICAkU2NoZW1lID0gKFt1cmldJExvY2F0aW9uKS5zY2hlbWUKICAgICAgICAgICAgICAgICAgICAkaXNVTkMgPSAoW3VyaV0kTG9jYXRpb24pLmlzVU5DCgogICAgICAgICAgICAgICAgICAgIGlmICgkU2NoZW1lIC1hbmQgKCRTY2hlbWUgLW5lICdmaWxlJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgIyBjb25kaXRpb24gdG8gY2hlY2sgd3Jvbmcgc2NoZW1lLCBsaWtlICdodHRwJyBpbiBjYXNlIG9mICdmdHAnCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICJJbnZhbGlkIGAnJExvY2F0aW9uVHlwZWAnIFBhdGg6ICRMb2NhdGlvbiIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICgkU2NoZW1lIC1hbmQgKCRTY2hlbWUgLWVxICdmaWxlJykgLWFuZCAhJGlzVU5DKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICMgaGFzIHRoZSBjb3JyZWN0IHNjaGVtZSwgYnV0IGEgbG9jYWwgcGF0aAogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1FcnJvciAiSW52YWxpZCBgJyRMb2NhdGlvblR5cGVgJyBQYXRoOiAkTG9jYXRpb24iCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoISgkTG9jYXRpb24uU3RhcnRzV2l0aCgiXFwiKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJExvY2F0aW9uID0gIlxcIiArICRMb2NhdGlvbgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICdsb2NhbCcgewogICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbiA9ICRsb2NhbFBhdGgKCiAgICAgICAgICAgICAgICAgICAgJFNjaGVtZSA9IChbdXJpXSRMb2NhdGlvbikuc2NoZW1lCiAgICAgICAgICAgICAgICAgICAgJGlzVU5DID0gKFt1cmldJExvY2F0aW9uKS5pc1VOQwoKICAgICAgICAgICAgICAgICAgICBpZiAoJFNjaGVtZSAtYW5kICgkU2NoZW1lIC1uZSAnZmlsZScpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICMgY29uZGl0aW9uIHRvIGNoZWNrIHdyb25nIHNjaGVtZSwgbGlrZSAnaHR0cCcgaW4gY2FzZSBvZiAnZnRwJwogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1FcnJvciAiSW52YWxpZCBgJyRMb2NhdGlvblR5cGVgJyBQYXRoOiAkTG9jYXRpb24iCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoJFNjaGVtZSAtYW5kICgkU2NoZW1lIC1lcSAnZmlsZScpIC1hbmQgJGlzVU5DKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICMgaGFzIHRoZSBjb3JyZWN0IHNjaGVtZSwgYnV0IGEgbmV0d29yayBwYXRoCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICJJbnZhbGlkIGAnJExvY2F0aW9uVHlwZWAnIFBhdGg6ICRMb2NhdGlvbiIKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmICghKFRlc3QtUGF0aCAkKEpvaW4tUGF0aCAkTG9jYXRpb24gJFBhY2thZ2VOYW1lKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkxvY2FsIHBhdGggbm90IGZvdW5kOiAkKEpvaW4tUGF0aCAkTG9jYXRpb24gJFBhY2thZ2VOYW1lKSIKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgICNlbmRyZWdpb24gSW5wdXRWYWxpZGF0aW9uCgogICAgICAgICAgICAjcmVnaW9uIERvd25sb2FkUGFja2FnZQogICAgICAgICAgICBzd2l0Y2ggKChbdXJpXSRMb2NhdGlvbikuc2NoZW1lKSB7CiAgICAgICAgICAgICAgICAnZnRwJyB7CiAgICAgICAgICAgICAgICAgICAgJFJlbW90ZUZUUEZpbGVQYXRoID0gSm9pbi1VUkxQYXJ0cyAoJExvY2F0aW9uLCAkUGFja2FnZU5hbWUpIC1TZXBlcmF0b3IgJy8nCiAgICAgICAgICAgICAgICAgICAgRG93bmxvYWQtRnJvbUZUUCAkUmVtb3RlRlRQRmlsZVBhdGggJFBhY2thZ2VMb2NhbFBhdGggJFVzZXJuYW1lICRQYXNzd29yZAogICAgICAgICAgICAgICAgICAgIEJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJ2h0dHAnIHsgRG93bmxvYWQtRnJvbVVSTCAkTG9jYXRpb24gJFBhY2thZ2VMb2NhbFBhdGggOyBCcmVhazsgfQogICAgICAgICAgICAgICAgJ2h0dHBzJyB7CiAgICAgICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgICAgICBbU3lzdGVtLk5ldC5TZXJ2aWNlUG9pbnRNYW5hZ2VyXTo6U2VjdXJpdHlQcm90b2NvbCA9IFtTeXN0ZW0uTmV0LlNlY3VyaXR5UHJvdG9jb2xUeXBlXSAnU3NsMywgVGxzLCBUbHMxMSwgVGxzMTInCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNhdGNoIHsKICAgICAgICAgICAgICAgICAgICAgICAgJFRMU0VuZm9yY2UgPSAkZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgICAgICAgICBEb3dubG9hZC1Gcm9tVVJMICRMb2NhdGlvbiAkUGFja2FnZUxvY2FsUGF0aCA7IEJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjYXRjaCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkVExTRW5mb3JjZSl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgIkRvd25sb2FkIGZyb20gdGhlIFVSTCBoYXMgZmFpbGVkLiBJdCBtaWdodCBiZSBhbiBpc3N1ZSB3aGlsZSBlc3RhYmxpc2hpbmcgU1NMXFRMUyBzZWN1cmUgY2hhbm5lbCBiZXR3ZWVuIGNsaWVudCBhbmQgdGhlIHNlcnZlciwgYXMgdGhpcyBtYWNoaW5lIG9ubHkgc3VwcG9ydHMgZm9sbG93aW5nIHZlcnNpb24gb2Ygc2VjdXJlIHByb3RvY29sczogJChbZW51bV06OkdldE5hbWVzKFtTeXN0ZW0uTmV0LlNlY3VyaXR5UHJvdG9jb2xUeXBlXSkgLWpvaW4gJywgJykgdGhyb3VnaCB0aGUgVGFzay4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgIldvcmthcm91bmQ6IFRyeSBkb3dubG9hZGluZyB0aGUgZmlsZSBmcm9tIEhUVFAgdmFyaWFudCBvZiB0aGUgVVJMLCBpZiBpdCBleGlzdHMuIE9yIGNvcHkgdGhlIGV4ZVxtc2kgb24gYSBVTkMgKE5ldHdvcmsgU2hhcmUpIHBhdGggYW5kIHRoZW4gZXhlY3V0ZSB0aGUgc2V0dXAgdXNpbmcgdGhpcyBzY3JpcHQiCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1FcnJvciAkXy5FeGNlcHRpb24uTWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJ2ZpbGUnIHsKICAgICAgICAgICAgICAgICAgICBpZiAoKFt1cmldJExvY2F0aW9uKS5Jc1VuYykgewogICAgICAgICAgICAgICAgICAgICAgICAjIGlmIHRoZSBsb2NhdGlvbiBpcyBhIHNoYXJlZCBVTkMgcGF0aAogICAgICAgICAgICAgICAgICAgICAgICBEb3dubG9hZC1Gcm9tVU5DICRMb2NhdGlvbiAkUGFja2FnZU5hbWUgJFBhY2thZ2VMb2NhbFBhdGggJFVzZXJOYW1lICRQYXNzd29yZAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgIyBpZiB0aGUgbG9jYXRpb24gaXMgYSBsb2NhbCBzeXN0ZW0gcGF0aAogICAgICAgICAgICAgICAgICAgICAgICAkUGFja2FnZUxvY2FsUGF0aCA9IEpvaW4tUGF0aCAkTG9jYXRpb24gJFBhY2thZ2VOYW1lCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIEJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZGVmYXVsdCB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJGYWlsZWQuIE5vdCBhIHZhbGlkIHVzZXIgaW5wdXQgZm9yIHBhY2thZ2UgJ0xvY2F0aW9uJywgcGxlYXNlIHZhbGlkYXRlIHRoZSBpbnB1dCBhbmQgdHJ5IGFnYWluLiIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAjZW5kcmVnaW9uIERvd25sb2FkUGFja2FnZQoKICAgICAgICAgICAgIyB2YWxpZGF0ZSBjaGVja3N1bSBvZiBkb253bG9hZGVkIGZpbGUKICAgICAgICAgICAgaWYgKCRNRDVDaGVja1N1bSAtYW5kICQoR2V0LU1ENUhhc2ggJFBhY2thZ2VMb2NhbFBhdGgpIC1uZSAkTUQ1Q2hlY2tTdW0pIHsKICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICJNRDUgQ2hlY2tzdW06ICckTUQ1Q2hlY2tTdW0nIGRpZCBub3QgbWF0Y2ggd2l0aCB0aGUgTUQ1IENoZWNrc3VtIG9mIFBhY2thZ2U6JyRQYWNrYWdlTmFtZSciCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICNyZWdpb24gSW5zdGFsbAoKICAgICAgICAgICAgJEluc3RhbGxFeGVjdXRlTW9kZSA9ICJJbnN0YWxsIiAjIGFzIHBlciBOYXJheWFuJ3MgcmVxdWVzdCBoYXJkY29kZWQgdGhpcyB2YWx1ZSBmb3Igbm93LCBhbmQgd2lsbCBpbXBsZW1lbnQgb3RoZXJzIG9uY2Ugd2UgaGF2ZSBhIGNsYXJpdHkgb24gdGhpcwogICAgICAgICAgICBTd2l0Y2ggKCRJbnN0YWxsRXhlY3V0ZU1vZGUpewogICAgICAgICAgICAgICAgJ0luc3RhbGwnIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCRUeXBlT2ZBcHBsaWNhdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAnZXhlJyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIFdyaXRlLUhvc3QgIkluc3RhbGxpbmc6ICRQYWNrYWdlTG9jYWxQYXRoICRJbnN0YWxsYXRpb25QYXJhbWV0ZXIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVtzdHJpbmddOjpJc051bGxPckVtcHR5KCRJbnN0YWxsYXRpb25QYXJhbWV0ZXIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJEluc3RhbGxhdGlvblBhcmFtZXRlciA9ICRJbnN0YWxsYXRpb25QYXJhbWV0ZXIudHJpbSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFByb2Nlc3MgPSBTdGFydC1Qcm9jZXNzIC1GaWxlUGF0aCAkUGFja2FnZUxvY2FsUGF0aCAtQXJndW1lbnRMaXN0ICRJbnN0YWxsYXRpb25QYXJhbWV0ZXIgLVdhaXQgLVBhc3NUaHJ1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUHJvY2VzcyA9IFN0YXJ0LVByb2Nlc3MgLUZpbGVQYXRoICRQYWNrYWdlTG9jYWxQYXRoIC1XYWl0IC1QYXNzVGhydQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJFBlcmZvcm1Qb3N0Q2hlY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1TdWNjZXNzT3JGYWlsIC1Qcm9jZXNzICRQcm9jZXNzIC1QYWNrYWdlTmFtZSAkUGFja2FnZU5hbWUgLUFjdGlvbiAnSW5zdGFsbGF0aW9uJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICdtc2knIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgV3JpdGUtSG9zdCAiSW5zdGFsbGluZzogJGVudjpzeXN0ZW1yb290XHN5c3RlbTMyXG1zaWV4ZWMuZXhlIC9pICRQYWNrYWdlTG9jYWxQYXRoICRJbnN0YWxsYXRpb25QYXJhbWV0ZXIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIVtzdHJpbmddOjpJc051bGxPckVtcHR5KCRJbnN0YWxsYXRpb25QYXJhbWV0ZXIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJE1TSUFyZ3MgPSBAKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiL2kiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRQYWNrYWdlTG9jYWxQYXRoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRJbnN0YWxsYXRpb25QYXJhbWV0ZXIuU3BsaXQoIiAiKSB8IEZvckVhY2gtT2JqZWN0IHskXy50cmltKCl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJE1TSUFyZ3MgPSBAKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiL2kiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRQYWNrYWdlTG9jYWxQYXRoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRQcm9jZXNzID0gU3RhcnQtUHJvY2VzcyAtRmlsZVBhdGggIiRlbnY6c3lzdGVtcm9vdFxzeXN0ZW0zMlxtc2lleGVjLmV4ZSIgLUFyZ3VtZW50TGlzdCAkTVNJQXJncyAtV2FpdCAtUGFzc1RocnUKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISRQZXJmb3JtUG9zdENoZWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtU3VjY2Vzc09yRmFpbCAtUHJvY2VzcyAkUHJvY2VzcyAtUGFja2FnZU5hbWUgJFBhY2thZ2VOYW1lIC1BY3Rpb24gJ0luc3RhbGxhdGlvbicKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICdJbnN0YWxsIEZyb20gR2F0ZXdheScgewogICAgICAgICAgICAgICAgICAgICMgbm8gYWN0aW9uIGRlZmluZWQgZm9yIG5vdwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJ0Rvd25sb2FkIHRvIEdhdGV3YXknIHsKICAgICAgICAgICAgICAgICAgICAjIG5vIGFjdGlvbiBkZWZpbmVkIGZvciBub3cKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgI2VuZHJlZ2lvbiBJbnN0YWxsCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgJ1VuSW5zdGFsbGVyJyB7CiAgICAgICAgICAgICNyZWdpb24gVW5JbnN0YWxsCiAgICAgICAgICAgICRVbmluc3RhbGxFeGVjdXRlTW9kZSA9ICJVbmluc3RhbGwiICMgYXMgcGVyIE5hcmF5YW4ncyByZXF1ZXN0IGhhcmRjb2RlZCB0aGlzIHZhbHVlIGZvciBub3csIGFuZCB3aWxsIGltcGxlbWVudCBvdGhlcnMgb25jZSB3ZSBoYXZlIGEgY2xhcml0eSBvbiB0aGlzCiAgICAgICAgICAgIFN3aXRjaCAoJFVuaW5zdGFsbEV4ZWN1dGVNb2RlKXsKICAgICAgICAgICAgICAgICdVbmluc3RhbGwnIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCRUeXBlT2ZBcHBsaWNhdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAnZXhlJyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIFdyaXRlLUhvc3QgIlVuSW5zdGFsbGluZzogJFVuaW5zdGFsbGF0aW9uUGF0aCAkVW5JbnN0YWxsYXRpb25QYXJhbWV0ZXIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJFVuSW5zdGFsbGF0aW9uUGFyYW1ldGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFByb2Nlc3MgPSBTdGFydC1Qcm9jZXNzIC1GaWxlUGF0aCAkVW5pbnN0YWxsYXRpb25QYXRoIC1Bcmd1bWVudExpc3QgIiRVbkluc3RhbGxhdGlvblBhcmFtZXRlciIgLVdhaXQgLVBhc3NUaHJ1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUHJvY2VzcyA9IFN0YXJ0LVByb2Nlc3MgLUZpbGVQYXRoICRVbmluc3RhbGxhdGlvblBhdGggLVdhaXQgLVBhc3NUaHJ1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISRQZXJmb3JtUG9zdENoZWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtU3VjY2Vzc09yRmFpbCAtUHJvY2VzcyAkUHJvY2VzcyAtUGFja2FnZU5hbWUgJFVuaW5zdGFsbGF0aW9uUGF0aCAtQWN0aW9uICdVbkluc3RhbGxhdGlvbicKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAnbXNpJyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTXNnID0gJFVuaW5zdGFsbGF0aW9uUGFyYW1ldGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTVNJQXJncyA9ICgkVW5pbnN0YWxsYXRpb25QYXJhbWV0ZXIgLVJlcGxhY2UgIm1zaWV4ZWMuZXhlIiwgIiIgLXJlcGxhY2UgIm1zaWV4ZWMiLCAiIikudHJpbSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIFdyaXRlLUhvc3QgIlVuSW5zdGFsbGluZzogJGVudjpzeXN0ZW1yb290XHN5c3RlbTMyXG1zaWV4ZWMuZXhlIC9pICRVbkluc3RhbGxhdGlvblBhcmFtZXRlciIKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUHJvY2VzcyA9IFN0YXJ0LVByb2Nlc3MgLUZpbGVQYXRoICIkZW52OnN5c3RlbXJvb3Rcc3lzdGVtMzJcbXNpZXhlYy5leGUiIC1Bcmd1bWVudExpc3QgJE1TSUFyZ3MgLVdhaXQgLVBhc3NUaHJ1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISRQZXJmb3JtUG9zdENoZWNrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtU3VjY2Vzc09yRmFpbCAtUHJvY2VzcyAkUHJvY2VzcyAtUGFja2FnZU5hbWUgJE1zZyAtQWN0aW9uICdVbkluc3RhbGxhdGlvbicKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgI2VuZHJlZ2lvbiBVbkluc3RhbGwKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgfQogICAgI2VuZHJlZ2lvbiBNYWluCgogICAgI3JlZ2lvbiBQb3N0Q2hlY2sKICAgIGlmICgkUGVyZm9ybVBvc3RDaGVjaykgewogICAgICAgICROYW1lID0gJ1Bvc3QtQ2hlY2snCiAgICAgICAgU3dpdGNoICgkUG9zdENoZWNrVHlwZSkgewogICAgICAgICAgICAnQ2hlY2sgaWYgZmlsZSBleGlzdHMnIHsKICAgICAgICAgICAgICAgICRGaWxlRXhpc3RzID0gVGVzdC1QYXRoICRQb3N0Q2hlY2tGaWxlTmFtZQogICAgICAgICAgICAgICAgJFBvc3RDaGVja0FjdGlvbiA9ICRQb3N0Q2hlY2tBY3Rpb25fZm9yX1Bvc3RDaGVja1R5cGVfMSAgIyBoYW5kbGUgTmFyYXlhbidzIHJlcXVlc3QgdG8gaGF2ZSBtdWx0aXBsZSAkUG9zdENoZWNrQWN0aW9uX2Zvcl9Qb3N0Q2hlY2tUeXBlX1tuXSB2YXJpYWJsZXMgc3Vic3RpdHV0ZWQgdGhyb3VnaCBKU09OCiAgICAgICAgICAgICAgICBTd2l0Y2ggKCRQb3N0Q2hlY2tBY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGZpbGUgZXhpc3RzIHRoZW4gbWFyayBTdWNjZXNzJyB7IGlmICgkRmlsZUV4aXN0cykgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGZpbGUgZG9lcyBub3QgZXhpc3RzIHRoZW4gbWFyayBTdWNjZXNzJyB7IGlmICgtbm90ICRGaWxlRXhpc3RzKSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUgZmlsZSBleGlzdHMgdGhlbiBtYXJrIEZhaWwnIHsgaWYgKCRGaWxlRXhpc3RzKSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUgZmlsZSBkb2VzIG5vdCBleGlzdHMgdGhlbiBtYXJrIEZhaWwnIHsgaWYgKC1ub3QgJEZpbGVFeGlzdHMpIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICAnQ2hlY2sgaWYgcmVnaXN0cnkgaW5mb3JtYXRpb24gZXhpc3RzJyB7CiAgICAgICAgICAgICAgICAkS2V5RXhpc3RzLCAkVmFsdWVNYXRjaGVzLCAkRGF0YU1hdGNoZXMgPSBUZXN0LVJlZ2lzdHJ5IC1LZXkgJFBvc3RDaGVja0tleSAtVmFsdWUgJFBvc3RDaGVja1ZhbHVlIC1EYXRhICRQb3N0Q2hlY2tEYXRhCiAgICAgICAgICAgICAgICAkUG9zdENoZWNrQWN0aW9uID0gJFBvc3RDaGVja0FjdGlvbl9mb3JfUG9zdENoZWNrVHlwZV8yICAjIGhhbmRsZSBOYXJheWFuJ3MgcmVxdWVzdCB0byBoYXZlIG11bHRpcGxlICRQb3N0Q2hlY2tBY3Rpb25fZm9yX1Bvc3RDaGVja1R5cGVfW25dIHZhcmlhYmxlcyBzdWJzdGl0dXRlZCB0aHJvdWdoIEpTT04KCiAgICAgICAgICAgICAgICBTd2l0Y2ggKCRQb3N0Q2hlY2tBY3Rpb24pIHsKICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGtleSBleGlzdHMgdGhlbiBtYXJrIHN1Y2Nlc3MnIHsgaWYgKCRLZXlFeGlzdHMpIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIHRoZSBrZXkgZG9lcyBub3QgZXhpc3RzIHRoZW4gbWFyayBzdWNjZXNzJyB7IGlmICgtbm90ICRLZXlFeGlzdHMpIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIHRoZSBrZXkgZXhpc3RzIHRoZW4gbWFyayBmYWlsJyB7IGlmICgkS2V5RXhpc3RzKSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUga2V5IG5vdCBleGlzdHMgdGhlbiBtYXJrIGZhaWwnIHsgaWYgKC1ub3QgJEtleUV4aXN0cykgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGtleSBleGlzdHMgYW5kIHZhbHVlIG1hdGNoZXMgdGhlbiBtYXJrIHN1Y2Nlc3MnIHsgaWYgKCRLZXlFeGlzdHMgLWFuZCAkVmFsdWVNYXRjaGVzKSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUga2V5IGV4aXN0cyBhbmQgdmFsdWUgZG9lcyBub3QgbWF0Y2ggdGhlbiBtYXJrIHN1Y2Nlc3MnIHsgaWYgKCRLZXlFeGlzdHMgLWFuZCAoLW5vdCAkVmFsdWVNYXRjaGVzKSkgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGtleSBleGlzdHMgYW5kIHZhbHVlIG1hdGNoZXMgdGhlbiBtYXJrIGZhaWwnIHsgaWYgKCRLZXlFeGlzdHMgLWFuZCAkVmFsdWVNYXRjaGVzKSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUga2V5IGV4aXN0cyBhbmQgdmFsdWUgZG9lcyBub3QgbWF0Y2ggdGhlbiBtYXJrIGZhaWwnIHsgaWYgKCRLZXlFeGlzdHMgLWFuZCAoLW5vdCAkVmFsdWVNYXRjaGVzKSkgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGtleSBleGlzdHMgYW5kIHZhbHVlIGV4aXN0cyBhbmQgZGF0YSBtYXRjaGVzIHRoZW4gbWFyayBzdWNjZXNzJyB7IGlmICgkS2V5RXhpc3RzIC1hbmQgJFZhbHVlTWF0Y2hlcyAtYW5kICREYXRhTWF0Y2hlcykgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGtleSBleGlzdHMgYW5kIHZhbHVlIGV4aXN0cyBhbmQgZGF0YSBkb2VzIG5vdCBtYXRjaCB0aGVuIG1hcmsgc3VjY2VzcycgeyBpZiAoJEtleUV4aXN0cyAtYW5kICRWYWx1ZU1hdGNoZXMgLWFuZCAoLW5vdCAkRGF0YU1hdGNoZXMpKSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUga2V5IGV4aXN0cyBhbmQgdmFsdWUgZXhpc3RzIGFuZCBkYXRhIG1hdGNoZXMgdGhlbiBtYXJrIGZhaWwnIHsgaWYgKCRLZXlFeGlzdHMgLWFuZCAkVmFsdWVNYXRjaGVzIC1hbmQgJERhdGFNYXRjaGVzKSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUga2V5IGV4aXN0cyBhbmQgdmFsdWUgZXhpc3RzIGFuZCBkYXRhIGRvZXMgbm90IG1hdGNoIHRoZW4gbWFyayBmYWlsJyB7IGlmICgkS2V5RXhpc3RzIC1hbmQgJFZhbHVlTWF0Y2hlcyAtYW5kICgtbm90ICREYXRhTWF0Y2hlcykpIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICAnQ2hlY2sgaWYgQWRkIC8gUmVtb3ZlIHByb2dyYW0gZXhpc3RzJyB7CiAgICAgICAgICAgICAgICAkUHJvZ3JhbUV4aXN0cyA9IFRlc3QtQWRkUmVtb3ZlUHJvZ3JhbSAtUHJvZ3JhbSAkUG9zdENoZWNrUHJvZ3JhbQogICAgICAgICAgICAgICAgJFBvc3RDaGVja0FjdGlvbiA9ICRQb3N0Q2hlY2tBY3Rpb25fZm9yX1Bvc3RDaGVja1R5cGVfMyAgIyBoYW5kbGUgTmFyYXlhbidzIHJlcXVlc3QgdG8gaGF2ZSBtdWx0aXBsZSAkUG9zdENoZWNrQWN0aW9uX2Zvcl9Qb3N0Q2hlY2tUeXBlX1tuXSB2YXJpYWJsZXMgc3Vic3RpdHV0ZWQgdGhyb3VnaCBKU09OCgogICAgICAgICAgICAgICAgU3dpdGNoICgkUG9zdENoZWNrQWN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgJ0lmIHRoZSBwcm9ncmFtIGV4aXN0cyB0aGVuIG1hcmsgc3VjY2VzcycgeyBpZiAoJFByb2dyYW1FeGlzdHMpIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIHRoZSBwcm9ncmFtIGRvZXMgbm90IGV4aXN0cyB0aGVuIG1hcmsgc3VjY2VzcycgeyBpZiAoLW5vdCAkUHJvZ3JhbUV4aXN0cykgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIHByb2dyYW0gZXhpc3RzIHRoZW4gbWFyayBmYWlsJyB7IGlmICgkUHJvZ3JhbUV4aXN0cykgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIHByb2dyYW0gZG9lcyBub3QgZXhpc3RzIHRoZW4gbWFyayBmYWlsJyB7IGlmICgtbm90ICRQcm9ncmFtRXhpc3RzKSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJ0NoZWNrIGZvciBmaWxlIHZlcnNpb24nIHsKICAgICAgICAgICAgICAgICRGaWxlRXhpc3RzLCAkRmlsZVZlcnNpb25NYXRjaGVzLCAkRmlsZVZlcnNpb25HcmVhdGVyLCAkRmlsZVZlcnNpb25Mb3dlciA9IFRlc3QtRmlsZVZlcnNpb24gLVBhdGggJFBvc3RDaGVja0ZpbGVOYW1lIC1Vc2VyU3BlY2lmaWVkVmVyc2lvbiAkUG9zdENoZWNrVmVyc2lvbgogICAgICAgICAgICAgICAgJFBvc3RDaGVja0FjdGlvbiA9ICRQb3N0Q2hlY2tBY3Rpb25fZm9yX1Bvc3RDaGVja1R5cGVfNCAgIyBoYW5kbGUgTmFyYXlhbidzIHJlcXVlc3QgdG8gaGF2ZSBtdWx0aXBsZSAkUG9zdENoZWNrQWN0aW9uX2Zvcl9Qb3N0Q2hlY2tUeXBlX1tuXSB2YXJpYWJsZXMgc3Vic3RpdHV0ZWQgdGhyb3VnaCBKU09OCgogICAgICAgICAgICAgICAgU3dpdGNoICgkUG9zdENoZWNrQWN0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgJ0lmIHRoZSBmaWxlIGV4aXN0cyBhbmQgdGhlIHZlcnNpb24gbWF0Y2hlcyB0aGVuIG1hcmsgc3VjY2VzcycgeyBpZiAoJEZpbGVFeGlzdHMgLWFuZCAkRmlsZVZlcnNpb25NYXRjaGVzKSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUgZmlsZSBleGlzdHMgYW5kIHZlcnNpb24gZG9lcyBub3QgbWF0Y2ggdGhlbiBtYXJrIHN1Y2Nlc3MnIHsgaWYgKCRGaWxlRXhpc3RzIC1hbmQgKC1ub3QgJEZpbGVWZXJzaW9uTWF0Y2hlcykpIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIHRoZSBmaWxlIGV4aXN0cyBhbmQgdmVyc2lvbiBpcyBncmVhdGVyIHRoYW4gc3BlY2lmaWVkIHRoZW4gbWFyayBzdWNjZXNzJyB7IGlmICgkRmlsZUV4aXN0cyAtYW5kICRGaWxlVmVyc2lvbkdyZWF0ZXIpIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIHRoZSBmaWxlIGV4aXN0cyBhbmQgdmVyc2lvbiBpcyBsb3dlciB0aGFuIHNwZWNpZmllZCB0aGVuIG1hcmsgc3VjY2VzcycgeyBpZiAoJEZpbGVFeGlzdHMgLWFuZCAkRmlsZVZlcnNpb25Mb3dlcikgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGZpbGUgZXhpc3RzIGFuZCB0aGUgdmVyc2lvbiBpcyBtYXRjaGVzIHRoZW4gbWFyayBmYWlsJyB7IGlmICgkRmlsZUV4aXN0cyAtYW5kICRGaWxlVmVyc2lvbk1hdGNoZXMpIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSB9CiAgICAgICAgICAgICAgICAgICAgJ0lmIHRoZSBmaWxlIGV4aXN0cyBhbmQgdmVyc2lvbiBkb2VzIG5vdCBtYXRjaCB0aGVuIG1hcmsgZmFpbCcgeyBpZiAoJEZpbGVFeGlzdHMgLWFuZCAoLW5vdCAkRmlsZVZlcnNpb25NYXRjaGVzKSkgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGZpbGUgZXhpc3RzIGFuZCB2ZXJzaW9uIGlzIGdyZWF0ZXIgdGhhbiBzcGVjaWZpZWQgdGhlbiBtYXJrIGZhaWwnIHsgaWYgKCRGaWxlRXhpc3RzIC1hbmQgJEZpbGVWZXJzaW9uR3JlYXRlcikgeyBXcml0ZS1PdXRwdXQgIkZhaWxlZCIgfSBlbHNlIHsgV3JpdGUtT3V0cHV0ICJTdWNjZXNzIiB9IH0KICAgICAgICAgICAgICAgICAgICAnSWYgdGhlIGZpbGUgZXhpc3RzIGFuZCB2ZXJzaW9uIGlzIGxvd2VyIHRoYW4gc3BlY2lmaWVkIHRoZW4gbWFyayBmYWlsJyB7IGlmICgkRmlsZUV4aXN0cyAtYW5kICRGaWxlVmVyc2lvbkxvd2VyKSB7IFdyaXRlLU91dHB1dCAiRmFpbGVkIiB9IGVsc2UgeyBXcml0ZS1PdXRwdXQgIlN1Y2Nlc3MiIH0gfQogICAgICAgICAgICAgICAgICAgICdJZiB0aGUgZmlsZSBkb2VzIG5vdCBleGlzdHMgdGhlbiBtYXJrIGZhaWwnIHsgaWYgKC1ub3QgJEZpbGVFeGlzdHMpIHsgV3JpdGUtT3V0cHV0ICJGYWlsZWQiIH0gZWxzZSB7IFdyaXRlLU91dHB1dCAiU3VjY2VzcyIgfSB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgICNlbmRyZWdpb24gUG9zdGNoZWNrCn0KY2F0Y2ggewogICAgV3JpdGUtRXJyb3IgJF8uZXhjZXB0aW9uLm1lc3NhZ2UKfQpmaW5hbGx5IHsKICAgIHRyeSB7CiAgICAgICAgIyB0byByZW1vdmUgZG9ud2xvYWRlZCBmaWxlcyBmcm9tIGxvY2FsIG1hY2hpbmUgaWYgcmVxdWlyZWQKICAgICAgICBSZW1vdmUtSXRlbSAkUGFja2FnZUxvY2FsUGF0aCAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZQogICAgfQogICAgY2F0Y2ggewogICAgICAgICMgbm8gYWN0aW9uCiAgICB9Cn0KCg==","jsonSchema":{"additionalproperties":false,"definitions":{"download_location":{"dependencies":{"LocationType":{"oneOf":[{"properties":{"LocationType":{"enum":["ftp"]},"ftpPath":{"title":"FTP","type":"string"},"password":{"title":"Password","type":"string"},"userName":{"title":"User Name","type":"string"}},"required":["ftpPath"]},{"properties":{"LocationType":{"enum":["http"]},"httpPath":{"title":"HTTP","type":"string"}},"required":["httpPath"]},{"properties":{"LocationType":{"enum":["https"]},"httpsPath":{"title":"HTTPS","type":"string"}},"required":["httpsPath"]},{"properties":{"LocationType":{"enum":["network"]},"networkPath":{"title":"Network","type":"string"},"password":{"title":"Password","type":"string"},"userName":{"title":"User Name","type":"string"}},"required":["networkPath"]},{"properties":{"LocationType":{"enum":["local"]},"localPath":{"title":"Local","type":"string"}},"required":["localPath"]}]}},"properties":{"LocationType":{"default":"ftp","enum":["ftp","http","https","local","network"],"enumNames":["FTP","HTTP","HTTPS","LOCAL","NETWORK"],"title":"Location","type":"string"}},"type":"object"},"installer_application_details":{"properties":{"InstallExecuteMode":{"default":"Install","enum":["Install"],"title":"Execute Mode","type":"string"},"InstallationParameter":{"title":"Installation Parameter","type":"string"},"MD5CheckSum":{"title":"MD5 Checksum","type":"string"},"PackageName":{"title":"Package/Exe name","type":"string"},"TypeOfApplication":{"$ref":"#/definitions/type_of_application"}},"required":["PackageName"],"type":"object"},"post_and_pre_check_type":{"default":"Check if file exists","enum":["Check if file exists","Check if registry information exists","Check if Add / Remove program exists","Check for file version"],"title":"Type","type":"string"},"type_of_application":{"default":"exe","enum":["exe","msi"],"enumNames":["Regular Setup Executables(Exe)","MSI Package"],"title":"Type Of Application","type":"string"},"uninstaller_application_details":{"dependencies":{"TypeOfApplication":{"oneOf":[{"properties":{"TypeOfApplication":{"enum":["exe"]},"UninstallExecuteMode":{"default":"Uninstall","enum":["Uninstall"],"title":"Execute Mode","type":"string"},"UninstallationParameter":{"title":"Uninstallation Parameter","type":"string"},"UninstallationPath":{"title":"Uninstallation Path","type":"string"}},"required":["UninstallationPath"]},{"properties":{"TypeOfApplication":{"enum":["msi"]},"UninstallExecuteMode":{"default":"Uninstall","enum":["Uninstall"],"title":"Execute Mode","type":"string"},"UninstallationParameter":{"title":"Uninstallation Parameter","type":"string"}}}]}},"properties":{"TypeOfApplication":{"$ref":"#/definitions/type_of_application"}},"type":"object"}},"dependencies":{"PerformPostCheck":{"oneOf":[{"dependencies":{"PostCheckType":{"oneOf":[{"properties":{"PostCheckAction_for_PostCheckType_1":{"default":"If the file exists then mark success","enum":["If the file exists then mark success","If the file does not exists then mark success","If the file exists then mark Fail","If the file does not exists then mark Fail"],"title":"Action","type":"string"},"PostCheckFileName":{"title":"File Name","type":"string"},"PostCheckType":{"enum":["Check if file exists"]}},"required":["PostCheckFileName"]},{"properties":{"PostCheckAction_for_PostCheckType_2":{"default":"If the key exists then mark success","enum":["If the key exists then mark success","If the key does not exists then mark success","If the key exists then mark fail","If the key not exists then mark fail","If the key exists and value matches then mark success","If the key exists and value does not match then mark success","If the key exists and value matches then mark fail","If the key exists and value does not match then mark fail","If the key exists and value exists and data matches then mark success","If the key exists and value exists and data does not match then mark success","If the key exists and value exists and data matches then mark fail","If the key exists and value exists and data does not match then mark fail"],"title":"Action","type":"string"},"PostCheckData":{"title":"Data","type":"string"},"PostCheckKey":{"title":"Key","type":"string"},"PostCheckType":{"enum":["Check if registry information exists"]},"PostCheckValue":{"title":"Value","type":"string"}},"required":["PostCheckKey"]},{"properties":{"PostCheckAction_for_PostCheckType_3":{"default":"If the program exists then mark success","enum":["If the program exists then mark success","If the program does not exists then mark success","If the program exists then mark fail","If the program does not exists then mark fail"],"title":"Action","type":"string"},"PostCheckProgram":{"title":"Program","type":"string"},"PostCheckType":{"enum":["Check if Add / Remove program exists"]}},"required":["PostCheckProgram"]},{"properties":{"PostCheckAction_for_PostCheckType_4":{"default":"If the file exists and the version matches then mark success","enum":["If the file exists and the version matches then mark success","If the file exists and version does not match then mark success","If the file exists and version is greater than specified then mark success","If the file exists and version is lower than specified then mark success","If the file exists and the version is matches then mark fail","If the file exists and version does not match then mark fail","If the file exists and version is greater than specified then mark fail","If the file exists and version is lower than specified then mark fail","If the file does not exists then mark fail"],"title":"Action","type":"string"},"PostCheckFileName":{"title":"File Name","type":"string"},"PostCheckType":{"enum":["Check for file version"]},"PostCheckVersion":{"title":"Version","type":"string"}},"required":["PostCheckFileName"]}]}},"properties":{"PerformPostCheck":{"enum":[true]},"PostCheckType":{"$ref":"#/definitions/post_and_pre_check_type"}}},{"properties":{"PerformPostCheck":{"enum":[false]}}}]},"PerformPreCheck":{"oneOf":[{"dependencies":{"PreCheckType":{"oneOf":[{"properties":{"PreCheckAction_for_PreCheckType_1":{"default":"If file exists then continue","enum":["If file exists then continue","If file does not exists then continue","If file exists then abort","If file does not exists then abort"],"title":"Action","type":"string"},"PreCheckFileName":{"title":"File Name","type":"string"},"PreCheckType":{"enum":["Check if file exists"]}},"required":["PreCheckFileName"]},{"properties":{"PreCheckAction_for_PreCheckType_2":{"default":"If key exists then continue","enum":["If key exists then continue","If key does not exists then continue","If key exists then abort","If key not exists then abort","If key exists and value matches then continue","If key exists and value does not matches then continue","If key exists and value matches then abort","If key exists and value does not matches then abort","If key exists and value exists and data matches then continue","If key exists and value exists and data does not matches then continue","If key exists and value exists and data matches then abort","If key exists and value exists and data does not matches then abort"],"title":"Action","type":"string"},"PreCheckData":{"title":"Data","type":"string"},"PreCheckKey":{"title":"Key","type":"string"},"PreCheckType":{"enum":["Check if registry information exists"]},"PreCheckValue":{"title":"Value","type":"string"}},"required":["PreCheckKey"]},{"properties":{"PreCheckAction_for_PreCheckType_3":{"default":"If the program exists then continue","enum":["If the program exists then continue","If the program does not exists then continue","If the program exists then abort","If the program does not exists then abort"],"title":"Action","type":"string"},"PreCheckProgram":{"title":"Program","type":"string"},"PreCheckType":{"enum":["Check if Add / Remove program exists"]}},"required":["PreCheckProgram"]},{"properties":{"PreCheckAction_for_PreCheckType_4":{"default":"If file exists and version equal to specified then continue","enum":["If file exists and version equal to specified then continue","If file exists and version not equal to specified then continue","If file exists and version higher to specified then continue","If file exists and version lower to specified then continue","If file exists and version equal to specified then abort","If file exists and version not equal to specified then abort","If file exists and version higher to specified then abort","If file exists and version lower to specified then abort","If file does not exists then abort"],"title":"Action","type":"string"},"PreCheckFileName":{"title":"File Name","type":"string"},"PreCheckType":{"enum":["Check for file version"]},"PreCheckVersion":{"title":"Version","type":"string"}},"required":["PreCheckFileName"]}]}},"properties":{"PerformPreCheck":{"enum":[true]},"PreCheckType":{"$ref":"#/definitions/post_and_pre_check_type"}}},{"properties":{"PerformPreCheck":{"enum":[false]}}}]},"TypeOfInstaller":{"oneOf":[{"properties":{"Download_Location":{"$ref":"#/definitions/download_location","title":"Download Details"},"Installer_Application_Details":{"$ref":"#/definitions/installer_application_details","title":"Application Details"},"TypeOfInstaller":{"enum":["Installer"]}}},{"properties":{"TypeOfInstaller":{"enum":["UnInstaller"]},"Uninstaller_Application_Details":{"$ref":"#/definitions/uninstaller_application_details","title":"Application Details"}}}]}},"properties":{"PerformPostCheck":{"title":"Perform post check","type":"boolean"},"PerformPreCheck":{"title":"Perform pre check","type":"boolean"},"TypeOfInstaller":{"default":"Installer","enum":["Installer","UnInstaller"],"title":"Type Of Installer","type":"string"}},"type":"object"},"uiSchema":{"Download_Location":{"LocationType":{"classNames":"col-sm-4"},"classNames":"col-sm-12","ftpPath":{"classNames":"col-sm-8","ui:placeholder":"ftp://mysite.com/Mysetup"},"httpPath":{"classNames":"col-sm-7","ui:placeholder":"http://mysite.com/Mysetup"},"httpsPath":{"classNames":"col-sm-7","ui:placeholder":"https://mysite.com/Mysetup"},"localPath":{"classNames":"col-sm-7","ui:placeholder":"C:\\package\\setup"},"networkPath":{"classNames":"col-sm-8","ui:placeholder":"\\\\host\\\\sharename\\\\package"},"password":{"classNames":"col-sm-6","ui:widget":"password"},"ui:order":["LocationType","ftpPath","httpPath","httpsPath","localPath","networkPath","userName","password"],"userName":{"classNames":"col-sm-6","validationSchema":{"notEmpty":"userName","required":["password"],"type":"requiredFieldsIfNotEmpty"}}},"Installer_Application_Details":{"InstallExecuteMode":{"classNames":"col-sm-5"},"InstallationParameter":{"classNames":"col-sm-6"},"MD5CheckSum":{"classNames":"col-sm-7"},"PackageName":{"classNames":"col-sm-6","ui:placeholder":"Eg: setup.exe or setup.msi"},"TypeOfApplication":{"classNames":"col-sm-12","ui:options":{"inline":true},"ui:widget":"radio"},"classNames":"col-sm-12","ui:order":["TypeOfApplication","PackageName","InstallationParameter","MD5CheckSum","InstallExecuteMode"]},"PerformPostCheck":{"classNames":"col-sm-12"},"PerformPreCheck":{"classNames":"col-sm-12"},"PostCheckAction_for_PostCheckType_1":{"classNames":"col-sm-8"},"PostCheckAction_for_PostCheckType_2":{"classNames":"col-sm-8"},"PostCheckAction_for_PostCheckType_3":{"classNames":"col-sm-8"},"PostCheckAction_for_PostCheckType_4":{"classNames":"col-sm-8"},"PostCheckData":{"classNames":"col-sm-7"},"PostCheckFileName":{"classNames":"col-sm-7"},"PostCheckKey":{"classNames":"col-sm-7"},"PostCheckProgram":{"classNames":"col-sm-7"},"PostCheckType":{"classNames":"col-sm-6"},"PostCheckValue":{"classNames":"col-sm-7"},"PostCheckVersion":{"classNames":"col-sm-7"},"PreCheckAction_for_PreCheckType_1":{"classNames":"col-sm-8"},"PreCheckAction_for_PreCheckType_2":{"classNames":"col-sm-8"},"PreCheckAction_for_PreCheckType_3":{"classNames":"col-sm-8"},"PreCheckAction_for_PreCheckType_4":{"classNames":"col-sm-8"},"PreCheckData":{"classNames":"col-sm-7"},"PreCheckFileName":{"classNames":"col-sm-7"},"PreCheckKey":{"classNames":"col-sm-7"},"PreCheckProgram":{"classNames":"col-sm-7"},"PreCheckType":{"classNames":"col-sm-6"},"PreCheckValue":{"classNames":"col-sm-7"},"PreCheckVersion":{"classNames":"col-sm-7"},"TypeOfInstaller":{"classNames":"col-sm-12","ui:options":{"inline":true},"ui:widget":"radio"},"UninstallationParameter":{"classNames":"col-sm-8","ui:help":"Eg. for EXE : /SILENT  and for MSI : msiexec.exe /X {58D379F7-62BC-4748-8237-FE071ECE797C}"},"UninstallationPath":{"classNames":"col-sm-8"},"Uninstaller_Application_Details":{"TypeOfApplication":{"classNames":"col-sm-12","ui:options":{"inline":true},"ui:widget":"radio"},"UninstallExecuteMode":{"classNames":"col-sm-4 col-sm-offset-right-8"},"UninstallationParameter":{"classNames":"col-sm-6"},"UninstallationPath":{"classNames":"col-sm-6"},"classNames":"col-sm-12","ui:order":["TypeOfApplication","UninstallationPath","UninstallationParameter","UninstallExecuteMode"]},"ui:order":["TypeOfInstaller","Download_Location","Installer_Application_Details","Uninstaller_Application_Details","PerformPreCheck","PreCheckType","PreCheckFileName","PreCheckKey","PreCheckValue","PreCheckData","PreCheckProgram","PreCheckVersion","PreCheckAction_for_PreCheckType_1","PreCheckAction_for_PreCheckType_2","PreCheckAction_for_PreCheckType_3","PreCheckAction_for_PreCheckType_4","PerformPostCheck","PostCheckType","PostCheckFileName","PostCheckKey","PostCheckValue","PostCheckData","PostCheckProgram","PostCheckVersion","PostCheckAction_for_PostCheckType_1","PostCheckAction_for_PostCheckType_2","PostCheckAction_for_PostCheckType_3","PostCheckAction_for_PostCheckType_4"]},"isHDScript":false}