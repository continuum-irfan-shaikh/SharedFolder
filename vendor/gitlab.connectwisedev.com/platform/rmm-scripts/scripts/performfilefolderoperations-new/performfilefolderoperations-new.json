{"id":"48868539-6535-11ea-bd78-00155d130b01","partnerId":"00000000-0000-0000-0000-000000000000","category":["Maintenance"],"description":"Perform actions on files and folders. Copy a File – copy source files to given destination file Copy File(s) to a Folder – copy source files to given destination folder Copy a Folder – copy source folder to destination folder Rename a File – Rename a given file name Move a File – Move a source file to destination file Rename a Folder – Rename a given folder Move a Folder – Move a source folder to destination folder Delete a File – Delete a given file Delete a Folder – Delete a given folder Delete Files – Delete a given file Create Folder - Create a folder on given path.","engine":"powershell","engineMaxVersion":5,"expectedExecutionTimeSec":28800,"failureMessage":"Executed with errors","successMessage":"Executed successfully","internal":false,"name":"Perform file/folder operations(new)","tags":["Windows 7","Windows 10"],"sequence":true,"content":"IyBNb3ZlIE9wZXJhdGlvbiBPbiBFcnJvciBFeGl0LCBJZ25vcmUgQXR0cmlidXRlIGNyaXRlcmlhCgo8IwogICAgIC5TY3JpcHRuYW1lIAogICAgIFBlcmZvcm0gRmlsZSBmb2xkZXIgb3BlcmF0aW9uCiAgICAgLkF1dGhvcgogICAgIE5pcmF2IFNhY2hvcmEKICAgICAuRGVzY3JpcHRpb24KICAgICBTY3JpcHQgd2lsbCBwZXJmb3JtIGZpbGUgZm9sZGVyIG9wZXJhdGlvbiBhcyBtZW50aW9uZWQgaW4gYmVsb3cgcGFyYW1ldGVycy4KICAgICBTY3JpcHQgY2FuIHBlcmZvcm0gZmlsZSBmb2xkZXIgb3BlcmF0aW9uIG92ZXIgdGhlIG5ldHdvcmsgYXMgd2VsbCwgdG8gcGVyZm9ybSBvdmVyIG5ldHdvcmsgdXNlciBoYXMgdG8gcHJvdmlkZSB2YWxpZCBzaGFyZSBuYW1lIGFuZCB1c2VybmFtZSxwYXNzd29yZC4KICAgICAuUmVxdWlyZW1lbnQKICAgICBTY3JpcHQgc2hvdWxkIHJ1biB3aXRoIGhpZ2hlc3QgcHJpdmlsZWdlcy4KIz4KCjwjCiRmaWxlQWN0aW9uID0gImRlbGV0ZWZpbGVzIgogICAgImNvcHlhZmlsZQogICAgY29weWFmb2xkZXIKICAgIHJlbmFtZWFmaWxlCiAgICBtb3ZlYWZpbGUKICAgIHJlbmFtZWFmb2xkZXIKICAgIG1vdmVmb2xkZXIKICAgIHJlbmFtZWFmb2xkZXIKICAgIGRlbGV0ZWFmaWxlCiAgICBkZWxldGVmaWxlcwogICAgZGVsZXRlYWZvbGRlcgogICAgY3JlYXRlZm9sZGVyIgokc291cmNlcGF0aCA9ICJOZXR3b3JrIgokc291cmNlZmlsZSA9ICJcXDEwLjIuMTkuMTI3XE5pcmF2XFRlc3RcYWJjLnR4dCxcXDEwLjIuMTkuMTI3XE5pcmF2XFRlc3RccHFyLnR4dCxcXDEwLjIuMTkuMTI3XE5pcmF2XFRlc3RceHl6LnR4dCIjXGFiYy50eHQsRDpcTmlyYXZccHFyLnR4dCIKJGRlc3RpbmF0aW9ucGF0aCA9ICJMb2NhbCIKJGRlc3RpbmF0aW9uZmlsZSA9ICJFOlxEZXN0aW5hdGlvblxNb3ZlIiNcXDEwLjIuMTMwLjgxXFNoYXJlZCBGaWxlc1xQU1Rvb2xzIiAjb3IgXFwxOTIuMTY4LjIuMVxzaGFyZW5hbWVcZm9sZGVyXGZpbGUudHh0CiRuZXduYW1lID0gInBxci50eHQiCiR1c2VybmFtZSA9ICJhZG1pbiIKJHBhc3N3b3JkID0gIldlbGNvbWVAMTIzIgokaW5jbHVkZXN1YiA9ICJmYWxzZSIKJGluY2x1ZGVTeXN0ZW1GaWxlID0gJGZhbHNlCiRpbmNsdWRlUmVhZE9ubHlGaWxlID0gJGZhbHNlCiRpbmNsdWRlSGlkZGVuRmlsZSA9ICR0cnVlCiRPdmVyd3JpdGUgPSAkdHJ1ZQokQ3JlYXRlRGVzdERpcmVjdG9yeSA9ICR0cnVlCiAgICAKJGNvbnRpbnVlb25lcnJvciA9ICJmYWxzZSIKJGZpbGVNb2RpZmljYXRpb24gPSAibGFzdEFjY2Vzc2VkYmVmb3JlIgokbW9kaWZpY2F0aW9uRGF0ZSA9ICIwOS8yNS8yMDE5IgokbW9kaWZpY2F0aW9uRGF5cyA9IC0xCiRzdGFydERhdGUgPSAiMDgvMDEvMjAxOSIKJGVuZERhdGUgPSAiMDgvMzEvMjAxOSIKPCNtb2RpZmllZEJlZm9yZSAgICAgICAgICAgICAgICAgbW9kaWZpY2F0aW9uRGF0ZSAgICAgICAgIAogICAgbW9kaWZpZWRBZnRlciAgICAgICAgICAgICAgICAgIG1vZGlmaWNhdGlvbkRhdGUgIAogICAgbW9kaWZpZWRPbiAgICAgICAgICAgICAgICAgICAgIG1vZGlmaWNhdGlvbkRhdGUgIAogICAgbW9kaWZpZWRCZXR3ZWVuICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZSAgICBlbmREYXRlCiAgICBtb2RpZmllZE9sZGVydGhhblhkYXlzICAgICAgICAgbW9kaWZpY2F0aW9uRGF5cwogICAgbGFzdEFjY2Vzc2VkQmVmb3JlICAgICAgICAgICAgIG1vZGlmaWNhdGlvbkRhdGUKICAgIGxhc3RBY2Nlc3NlZEFmdGVyICAgICAgICAgICAgICBtb2RpZmljYXRpb25EYXRlIAogICAgbGFzdEFjY2Vzc2VkT24gICAgICAgICAgICAgICAgIG1vZGlmaWNhdGlvbkRhdGUgIAogICAgbGFzdEFjY2Vzc2VkQmV0d2VlbiAgICAgICAgICAgIHN0YXJ0RGF0ZSAgICBlbmREYXRlCiAgICBjcmVhdGVkT2xkZXJ0aGFuWGRheXMgICAgICAgICAgbW9kaWZpY2F0aW9uRGF5cwogICM+ICAKPCMgICAKICAgIGlmICgkZW52OlBST0NFU1NPUl9BUkNISVRFVzY0MzIgLWVxICJBTUQ2NCIpIHsKICAgICAgICBpZiAoJG15SW52b2NhdGlvbi5MaW5lKSB7CiAgICAgICAgICAgICYiJGVudjpzeXN0ZW1yb290XHN5c25hdGl2ZVx3aW5kb3dzcG93ZXJzaGVsbFx2MS4wXHBvd2Vyc2hlbGwuZXhlIiAtTm9uSW50ZXJhY3RpdmUgLU5vUHJvZmlsZSAkbXlJbnZvY2F0aW9uLkxpbmUKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICYiJGVudjpzeXN0ZW1yb290XHN5c25hdGl2ZVx3aW5kb3dzcG93ZXJzaGVsbFx2MS4wXHBvd2Vyc2hlbGwuZXhlIiAtTm9uSW50ZXJhY3RpdmUgLU5vUHJvZmlsZSAtZmlsZSAiJCgkbXlJbnZvY2F0aW9uLkludm9jYXRpb25OYW1lKSIgJGFyZ3MKICAgICAgICB9CiAgICAgICAgZXhpdCAkbGFzdGV4aXRjb2RlCiAgICB9CiAjPiAjPgogCgppZiAoJGVudjpQUk9DRVNTT1JfQVJDSElURVc2NDMyIC1lcSAiQU1ENjQiKSB7CiAgICBpZiAoJG15SW52b2NhdGlvbi5MaW5lKSB7CiAgICAgICAgJiIkZW52OnN5c3RlbXJvb3Rcc3lzbmF0aXZlXHdpbmRvd3Nwb3dlcnNoZWxsXHYxLjBccG93ZXJzaGVsbC5leGUiIC1Ob25JbnRlcmFjdGl2ZSAtTm9Qcm9maWxlICRteUludm9jYXRpb24uTGluZQogICAgfQogICAgZWxzZSB7CiAgICAgICAgJiIkZW52OnN5c3RlbXJvb3Rcc3lzbmF0aXZlXHdpbmRvd3Nwb3dlcnNoZWxsXHYxLjBccG93ZXJzaGVsbC5leGUiIC1Ob25JbnRlcmFjdGl2ZSAtTm9Qcm9maWxlIC1maWxlICIkKCRteUludm9jYXRpb24uSW52b2NhdGlvbk5hbWUpIiAkYXJncwogICAgfQogICAgZXhpdCAkbGFzdGV4aXRjb2RlCn0gCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjRnVuY3Rpb24gdG8gbWFwIG5ldHdvcmsgZHJpdmUjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKJGdsb2JhbDpuZXdkcml2ZSB8IE91dC1OdWxsCiRnbG9iYWw6b2dkcml2ZWRldGFpbHMgfCBvdXQtTnVsbApmdW5jdGlvbiBNYXBfbmV0d29ya2RyaXZlKCRhY3Rpb24sICREcml2ZSkgewogICAgJE5ldCA9IE5ldy1PYmplY3QgLUNvbU9iamVjdCBXU2NyaXB0Lk5ldHdvcmsKICAgICREcml2ZUxldHRlciA9IEdldC1DaGlsZEl0ZW0gZnVuY3Rpb246W2ctel06IC1uIHwgV2hlcmUtT2JqZWN0IHsgIShUZXN0LVBhdGggJF8pIH0gfCByYW5kb20gCiAgICAKICAgIGlmICgkYWN0aW9uIC1lcSAiQ3JlYXRlIikgewogICAgICAgIGlmICgoJHNvdXJjZXBhdGggLWVxICdOZXR3b3JrJykgLWFuZCAoKCRmaWxlQWN0aW9uIC1lcSAiY29weWZpbGVzdG9hZm9sZGVyIikgLW9yICgkZmlsZUFjdGlvbiAtZXEgImRlbGV0ZWZpbGVzIikpKSB7CiAgICAgICAgICAgICREcml2ZURldGFpbHMgPSAoKFtyZWdleF06Ok1hdGNoKCRzb3VyY2VmaWxlWzBdLCAiXFxcXFtcU1xzXSo/XFxbXFNcc10qP1xcIikpLlZhbHVlKS5UcmltRW5kKCJcXCIpCiAgICAgICAgICAgICRFcnJvckFjdGlvbnByZWZlcmVuY2UgPSAiU2lsZW50bHlDb250aW51ZSIKICAgICAgICAgICAgJE5ldC5NYXBOZXR3b3JrRHJpdmUoJERyaXZlTGV0dGVyLCAiJERyaXZlRGV0YWlscyIsICRmYWxzZSwgJFVzZXJOYW1lLCAkUGFzc3dvcmQpCiAgICAgICAgICAgICRnbG9iYWw6b2dkcml2ZWRldGFpbHMgPSAkRHJpdmVEZXRhaWxzCiAgICAgICAgICAgICRFcnJvckFjdGlvbnByZWZlcmVuY2UgPSAiQ29udGludWUiCiAgICAgICAgICAgIGlmIChHZXQtV21pT2JqZWN0IC1DbGFzcyBXaW4zMl9NYXBwZWRMb2dpY2FsRGlzayB8IFdoZXJlLU9iamVjdCB7ICRfLm5hbWUgLWVxICIkRHJpdmVMZXR0ZXIiIH0pIHsKICAgICAgICAgICAgICAgICR1cGRhdGVkc291cmNlZmlsZSA9IGZvcmVhY2ggKCRmaWxlIGluICRzb3VyY2VmaWxlKSB7CiAgICAgICAgICAgICAgICAgICAgLWpvaW4gKCREcml2ZUxldHRlciwgIlwiLCAoJGZpbGUuUmVwbGFjZSgkRHJpdmVEZXRhaWxzLCAiIikuVHJpbVN0YXJ0KCJcXCIpKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRnbG9iYWw6bmV3ZHJpdmUgPSAkRHJpdmVMZXR0ZXIKICAgICAgICAgICAgICAgIHJldHVybiAkdXBkYXRlZHNvdXJjZWZpbGUKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICItIiAqIDMwICsgImBuRHJpdmUgbWFwcGluZyBmYWlsZWRgblVzZXJuYW1lIG9yIHBhc3N3b3JkIGlzIGluY29ycmVjdCBvciByZW1vdGUgc3lzdGVtIGlzIG5vdCBhY2Nlc3NpYmxlIG92ZXIgbmV0d29ya2BuIiArICItIiAqIDMwCiAgICAgICAgICAgICAgICBFeGl0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAgZWxzZWlmICgkc291cmNlcGF0aCAtZXEgJ05ldHdvcmsnKSB7CiAgICAgICAgICAgICREcml2ZURldGFpbHMgPSAoKFtyZWdleF06Ok1hdGNoKCRzb3VyY2VmaWxlLCAiXFxcXFtcU1xzXSo/XFxbXFNcc10qP1xcIikpLlZhbHVlKS5UcmltRW5kKCJcXCIpCiAgICAgICAgICAgICMkRXJyb3JBY3Rpb25wcmVmZXJlbmNlID0gIlNpbGVudGx5Q29udGludWUiCiAgICAgICAgICAgICROZXQuTWFwTmV0d29ya0RyaXZlKCREcml2ZUxldHRlciwgIiREcml2ZURldGFpbHMiLCAkZmFsc2UsICRVc2VyTmFtZSwgJFBhc3N3b3JkKQogICAgICAgICAgICAjJEVycm9yQWN0aW9ucHJlZmVyZW5jZSA9ICJDb250aW51ZSIKICAgICAgICAgICAgaWYgKEdldC1XbWlPYmplY3QgLUNsYXNzIFdpbjMyX01hcHBlZExvZ2ljYWxEaXNrIHwgV2hlcmUtT2JqZWN0IHsgJF8ubmFtZSAtZXEgIiREcml2ZUxldHRlciIgfSkgewogICAgICAgICAgICAgICAgJHVwZGF0ZWRzb3VyY2VmaWxlID0gLWpvaW4gKCREcml2ZUxldHRlciwgIlwiLCAoJHNvdXJjZWZpbGUuUmVwbGFjZSgkRHJpdmVEZXRhaWxzLCAiIikuVHJpbVN0YXJ0KCJcXCIpKSkKICAgICAgICAgICAgICAgICRnbG9iYWw6b2dkcml2ZWRldGFpbHMgPSAkRHJpdmVEZXRhaWxzCiAgICAgICAgICAgICAgICAkZ2xvYmFsOm5ld2RyaXZlID0gJERyaXZlTGV0dGVyCiAgICAgICAgICAgICAgICByZXR1cm4gJHVwZGF0ZWRzb3VyY2VmaWxlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAiLSIgKiAzMCArICJgbkRyaXZlIG1hcHBpbmcgZmFpbGVkYG5Vc2VybmFtZSBvciBwYXNzd29yZCBpcyBpbmNvcnJlY3Qgb3IgcmVtb3RlIHN5c3RlbSBpcyBub3QgYWNjZXNzaWJsZSBvdmVyIG5ldHdvcmtgbiIgKyAiLSIgKiAzMAogICAgICAgICAgICAgICAgRXhpdDsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAgZWxzZWlmICgkZGVzdGluYXRpb25wYXRoIC1lcSAnTmV0d29yaycpIHsKICAgICAgICAgICAgCiAgICAgICAgICAgICREcml2ZURldGFpbHMgPSAoKFtyZWdleF06Ok1hdGNoKCRkZXN0aW5hdGlvbmZpbGUsICJcXFxcW1xTXHNdKj9cXFtcU1xzXSo/XFwiKSkuVmFsdWUpLlRyaW1FbmQoIlxcIikKICAgICAgICAgICAgaWYgKCEkRHJpdmVEZXRhaWxzKSB7ICREcml2ZURldGFpbHMgPSAkZGVzdGluYXRpb25maWxlIH0KICAgICAgICAgICAgJEVycm9yQWN0aW9ucHJlZmVyZW5jZSA9ICJTaWxlbnRseUNvbnRpbnVlIgogICAgICAgICAgICAkTmV0Lk1hcE5ldHdvcmtEcml2ZSgkRHJpdmVMZXR0ZXIsICIkRHJpdmVEZXRhaWxzIiwgJGZhbHNlLCAkVXNlck5hbWUsICRQYXNzd29yZCkKICAgICAgICAgICAgJEVycm9yQWN0aW9ucHJlZmVyZW5jZSA9ICJDb250aW51ZSIKICAgICAgICAgICAgaWYgKEdldC1XbWlPYmplY3QgLUNsYXNzIFdpbjMyX01hcHBlZExvZ2ljYWxEaXNrIHwgV2hlcmUtT2JqZWN0IHsgJF8ubmFtZSAtZXEgIiREcml2ZUxldHRlciIgfSkgewogICAgICAgICAgICAgICAgJHVwZGF0ZWRkZXN0aW5hdGlvbmZpbGUgPSAtam9pbiAoJERyaXZlTGV0dGVyLCAiXCIsICgkZGVzdGluYXRpb25maWxlLlJlcGxhY2UoJERyaXZlRGV0YWlscywgIiIpLlRyaW1TdGFydCgiXFwiKSksICJcIikKICAgICAgICAgICAgICAgICRnbG9iYWw6bmV3ZHJpdmUgPSAkRHJpdmVMZXR0ZXIKICAgICAgICAgICAgICAgIHJldHVybiAkdXBkYXRlZGRlc3RpbmF0aW9uZmlsZQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgIi0iICogMzAgKyAiYG5Ecml2ZSBtYXBwaW5nIGZhaWxlZGBuVXNlcm5hbWUgb3IgcGFzc3dvcmQgaXMgaW5jb3JyZWN0IG9yIHJlbW90ZSBzeXN0ZW0gaXMgbm90IGFjY2Vzc2libGUgb3ZlciBuZXR3b3JrYG4iICsgIi0iICogMzAKICAgICAgICAgICAgICAgIEV4aXQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgfQogICAKICAgIH0KICAgIGVsc2VpZiAoJGFjdGlvbiAtZXEgIlJlbW92ZSIpIHsKICAgICAgICAkRXJyb3JBY3Rpb25wcmVmZXJlbmNlID0gIlN0b3AiCiAgICAgICAgaWYgKCgkc291cmNlcGF0aCAtZXEgIkxvY2FsIikgLWFuZCAoJGRlc3RpbmF0aW9ucGF0aCAtZXEgIkxvY2FsIikpIHsgcmV0dXJuIH0KICAgICAgICBpZiAoKCRzb3VyY2VwYXRoIC1lcSAiTG9jYWwiKSAtYW5kICEoJGRlc3RpbmF0aW9ucGF0aCkpIHsgcmV0dXJuIH0KICAgICAgICB0cnkgewogICAgICAgICAgICAkTmV0LlJlbW92ZU5ldHdvcmtEcml2ZSgkRHJpdmUpIAogICAgICAgIH0KICAgICAgICBjYXRjaCB7CiAgICAgICAgICAgICRfLkV4Y2VwdGlvbi5NZXNzYWdlCiAgICAgICAgfQogICAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNGdW5jdGlvbiB0byBjaGVjayBhdHRyaWJ1dGVzIGJhc2VkIG9uIGlucHV0IHBhcmFtZXRlcnMgZ2l2ZW4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyAKICAgIApmdW5jdGlvbiB2ZXJpZnlfQXR0cmlidXRlcygkc291cmNlcGF0aCwgJHJlYWRvbmx5LCAkaGlkZGVucywgJHN5c3RlbSkgewogICAgJGZpbGVhdHRyaWJ1dGVzID0gKChHZXQtSXRlbSAkc291cmNlcGF0aCAtRm9yY2UpLkF0dHJpYnV0ZXMpIC1zcGxpdCAiLCAiCiAgICBpZiAoKCRyZWFkb25seSAtZXEgJGZhbHNlKSAtYW5kICgkaGlkZGVucyAtZXEgJGZhbHNlKSAtYW5kICgkc3lzdGVtIC1lcSAkZmFsc2UpKSB7ICRhdHRyaWJ1dGVzID0gIjAwMCIgfQogICAgZWxzZWlmICgoJHJlYWRvbmx5IC1lcSAkdHJ1ZSkgLWFuZCAoJGhpZGRlbnMgLWVxICRmYWxzZSkgLWFuZCAoJHN5c3RlbSAtZXEgJGZhbHNlKSkgeyAkYXR0cmlidXRlcyA9ICIxMDAiIH0KICAgIGVsc2VpZiAoKCRyZWFkb25seSAtZXEgJGZhbHNlKSAtYW5kICgkaGlkZGVucyAtZXEgJHRydWUpIC1hbmQgKCRzeXN0ZW0gLWVxICRmYWxzZSkpIHsgJGF0dHJpYnV0ZXMgPSAiMDEwIiB9CiAgICBlbHNlaWYgKCgkcmVhZG9ubHkgLWVxICRmYWxzZSkgLWFuZCAoJGhpZGRlbnMgLWVxICRmYWxzZSkgLWFuZCAoJHN5c3RlbSAtZXEgJHRydWUpKSB7ICRhdHRyaWJ1dGVzID0gIjAwMSIgfQogICAgZWxzZWlmICgoJHJlYWRvbmx5IC1lcSAkdHJ1ZSkgLWFuZCAoJGhpZGRlbnMgLWVxICR0cnVlKSAtYW5kICgkc3lzdGVtIC1lcSAkZmFsc2UpKSB7ICRhdHRyaWJ1dGVzID0gIjExMCIgfQogICAgZWxzZWlmICgoJHJlYWRvbmx5IC1lcSAkZmFsc2UpIC1hbmQgKCRoaWRkZW5zIC1lcSAkdHJ1ZSkgLWFuZCAoJHN5c3RlbSAtZXEgJHRydWUpKSB7ICRhdHRyaWJ1dGVzID0gIjAxMSIgfQogICAgZWxzZWlmICgoJHJlYWRvbmx5IC1lcSAkdHJ1ZSkgLWFuZCAoJGhpZGRlbnMgLWVxICRmYWxzZSkgLWFuZCAoJHN5c3RlbSAtZXEgJHRydWUpKSB7ICRhdHRyaWJ1dGVzID0gIjEwMSIgfQogICAgZWxzZWlmICgoJHJlYWRvbmx5IC1lcSAkdHJ1ZSkgLWFuZCAoJGhpZGRlbnMgLWVxICR0cnVlKSAtYW5kICgkc3lzdGVtIC1lcSAkdHJ1ZSkpIHsgJGF0dHJpYnV0ZXMgPSAiMTExIiB9CiAgICAgICAgCiAgICBzd2l0Y2ggKCRhdHRyaWJ1dGVzKSB7CiAgICAgICAgIjAwMCIgewogICAgICAgICAgICBpZiAoKCRmaWxlYXR0cmlidXRlcyAtY29udGFpbnMgIlJlYWRPbmx5IikgLW9yICgkZmlsZWF0dHJpYnV0ZXMgLWNvbnRhaW5zICJIaWRkZW4iKSAtb3IgKCRmaWxlYXR0cmlidXRlcyAtY29udGFpbnMgIlN5c3RlbSIpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7IHJldHVybiAkdHJ1ZSB9CiAgICAgICAgfQogICAgICAgICIxMDAiIHsKICAgICAgICAgICAgaWYgKCgkZmlsZWF0dHJpYnV0ZXMgLWNvbnRhaW5zICJIaWRkZW4iKSAtb3IgKCRmaWxlYXR0cmlidXRlcyAtY29udGFpbnMgIlN5c3RlbSIpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJGZhbHNlIAogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgeyByZXR1cm4gJHRydWUgfQogICAgICAgIH0KICAgICAgICAiMDEwIiB7CiAgICAgICAgICAgIGlmICgoJGZpbGVhdHRyaWJ1dGVzIC1jb250YWlucyAiUmVhZE9ubHkiKSAtb3IgKCRmaWxlYXR0cmlidXRlcyAtY29udGFpbnMgIlN5c3RlbSIpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJGZhbHNlICAgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7IHJldHVybiAkdHJ1ZSB9CiAgICAgICAgfQogICAgICAgICIwMDEiIHsKICAgICAgICAgICAgaWYgKCgkZmlsZWF0dHJpYnV0ZXMgLWNvbnRhaW5zICJSZWFkT25seSIpIC1vciAoJGZpbGVhdHRyaWJ1dGVzIC1jb250YWlucyAiSGlkZGVuIikpIHsKICAgICAgICAgICAgICAgIHJldHVybiAkZmFsc2UgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7IHJldHVybiAkdHJ1ZSB9CiAgICAgICAgfQogICAgICAgICIxMTAiIHsKICAgICAgICAgICAgaWYgKCRmaWxlYXR0cmlidXRlcyAtY29udGFpbnMgIlN5c3RlbSIpIHsKICAgICAgICAgICAgICAgIHJldHVybiAkZmFsc2UgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7IHJldHVybiAkdHJ1ZSB9CiAgICAgICAgfQogICAgICAgICIwMTEiIHsKICAgICAgICAgICAgaWYgKCRmaWxlYXR0cmlidXRlcyAtY29udGFpbnMgIlJlYWRPbmx5IikgewogICAgICAgICAgICAgICAgcmV0dXJuICRmYWxzZSAKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsgcmV0dXJuICR0cnVlIH0KICAgICAgICB9CiAgICAgICAgIjEwMSIgewogICAgICAgICAgICBpZiAoJGZpbGVhdHRyaWJ1dGVzIC1jb250YWlucyAiSGlkZGVuIikgewogICAgICAgICAgICAgICAgcmV0dXJuICRmYWxzZSAKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsgcmV0dXJuICR0cnVlIH0KICAgICAgICB9CiAgICAgICAgIjExMSIgewogICAgICAgICAgICByZXR1cm4gJGZhbHNlIAogICAgICAgIH0KICAgICAgICAKICAgIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNGdW5jdGlvbiB0byBjaGVjayBtb2RpZmljYXRpb24gYmFzZWQgb24gY3JpdGVyaWEgcHJvdmlkZWQjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAKZnVuY3Rpb24gZmlsZW1vZGlmaWNhdGlvbl9jaGVjaygkZmZjX3NvdXJjZXBhdGgsICRmZmNfY3JpdGVyaWEsICRmZmNfbW9kaWZpY2F0aW9uZGF0ZSwgJGZmY19tb2RpZmljYXRpb25kYXlzLCAkZmZjX3N0YXJ0ZGF0ZSwgJGZmY19lbmRkYXRlKSB7CiAgICAgICAgCiAgICBpZiAoJGZmY19tb2RpZmljYXRpb25kYXRlIC1uZSAkbnVsbCkgeyAkbW9kaWZpY2F0aW9uZGF0ZSA9IGdldC1kYXRlIC1kYXRlICRmZmNfbW9kaWZpY2F0aW9uZGF0ZSB9CiAgICBpZiAoJGZmY19zdGFydGRhdGUgLW5lICRudWxsKSB7ICRzdGFydGRhdGUgPSBnZXQtZGF0ZSAtZGF0ZSAkZmZjX3N0YXJ0ZGF0ZSB9CiAgICBpZiAoJGZmY19lbmRkYXRlIC1uZSAkbnVsbCkgeyAkZW5kZGF0ZSA9IGdldC1kYXRlIC1kYXRlICRmZmNfZW5kZGF0ZSB9CiAgICAKICAgIHN3aXRjaCAoJGZmY19jcml0ZXJpYSkgewogICAgICAgICJtb2RpZmllZEJlZm9yZSIgewogICAgICAgICAgICBpZiAoKGdldC1pdGVtICRmZmNfc291cmNlcGF0aCAtRm9yY2UpLkxhc3RXcml0ZVRpbWUgLWx0ICRtb2RpZmljYXRpb25kYXRlKSB7IHJldHVybiAkdHJ1ZSB9ZWxzZSB7IHJldHVybiAkZmFsc2UgfQogICAgICAgIH0KICAgICAgICAibW9kaWZpZWRBZnRlciIgewogICAgICAgICAgICBpZiAoKGdldC1pdGVtICRmZmNfc291cmNlcGF0aCAtRm9yY2UpLkxhc3RXcml0ZVRpbWUgLWd0ICRtb2RpZmljYXRpb25kYXRlKSB7IHJldHVybiAkdHJ1ZSB9ZWxzZSB7IHJldHVybiAkZmFsc2UgfQogICAgICAgIH0KICAgICAgICAibW9kaWZpZWRPbiIgewogICAgICAgICAgICBpZiAoKCgoZ2V0LWl0ZW0gJGZmY19zb3VyY2VwYXRoIC1Gb3JjZSkuTGFzdFdyaXRlVGltZSB8IEdldC1EYXRlKS5EYXRlKSAtZXEgKCgkbW9kaWZpY2F0aW9uZGF0ZSB8IEdldC1EYXRlKS5EYXRlKSkgeyByZXR1cm4gJHRydWUgfWVsc2UgeyByZXR1cm4gJGZhbHNlIH0KICAgICAgICB9CiAgICAgICAgIm1vZGlmaWVkQmV0d2VlbiIgewogICAgICAgICAgICBpZiAoKChnZXQtaXRlbSAkZmZjX3NvdXJjZXBhdGggLUZvcmNlKS5MYXN0V3JpdGVUaW1lIC1ndCAkc3RhcnRkYXRlKSAtYW5kICgoZ2V0LWl0ZW0gJGZmY19zb3VyY2VwYXRoIC1Gb3JjZSkuTGFzdFdyaXRlVGltZSAtbHQgJGVuZGRhdGUpKSB7IHJldHVybiAkdHJ1ZSB9ZWxzZSB7IHJldHVybiAkZmFsc2UgfQogICAgICAgIH0KICAgICAgICAibW9kaWZpZWRPbGRlcnRoYW5YZGF5cyIgewogICAgICAgICAgICAkbGFzdHdyaXRldGltZSA9IGdldC1kYXRlIC1kYXRlIChHZXQtSXRlbSAkZmZjX3NvdXJjZXBhdGggLUZvcmNlKS5MYXN0V3JpdGVUaW1lCiAgICAgICAgICAgICRjdXJyZW50ZGF0ZSA9IEdldC1EYXRlCiAgICAgICAgICAgICRkYXlzID0gJGN1cnJlbnRkYXRlIC0gJGxhc3R3cml0ZXRpbWUKICAgICAgICAgICAgaWYgKCRkYXlzLkRheXMgLWd0ICRmZmNfbW9kaWZpY2F0aW9uZGF5cykgewogICAgICAgICAgICAgICAgcmV0dXJuICR0cnVlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7IHJldHVybiAkZmFsc2UgfQogICAgICAgIH0KICAgICAgICAibGFzdEFjY2Vzc2VkQmVmb3JlIiB7CiAgICAgICAgICAgIGlmICgoZ2V0LWl0ZW0gJGZmY19zb3VyY2VwYXRoIC1Gb3JjZSkuTGFzdEFjY2Vzc1RpbWUgLWx0ICRtb2RpZmljYXRpb25kYXRlKSB7IHJldHVybiAkdHJ1ZSB9ZWxzZSB7IHJldHVybiAkZmFsc2UgfQogICAgICAgIH0KICAgICAgICAibGFzdEFjY2Vzc2VkQWZ0ZXIiIHsKICAgICAgICAgICAgaWYgKChnZXQtaXRlbSAkZmZjX3NvdXJjZXBhdGggLUZvcmNlKS5MYXN0QWNjZXNzVGltZSAtZ3QgJG1vZGlmaWNhdGlvbmRhdGUpIHsgcmV0dXJuICR0cnVlIH1lbHNlIHsgcmV0dXJuICRmYWxzZSB9CiAgICAgICAgfQogICAgICAgICJsYXN0QWNjZXNzZWRPbiIgewogICAgICAgICAgICBpZiAoKCgoZ2V0LWl0ZW0gJGZmY19zb3VyY2VwYXRoIC1Gb3JjZSkuTGFzdEFjY2Vzc1RpbWUgfCBHZXQtRGF0ZSkuRGF0ZSkgLWVxICgoJG1vZGlmaWNhdGlvbmRhdGUgfCBHZXQtRGF0ZSkuRGF0ZSkpIHsgcmV0dXJuICR0cnVlIH1lbHNlIHsgcmV0dXJuICRmYWxzZSB9CiAgICAgICAgfQogICAgICAgICJsYXN0QWNjZXNzZWRCZXR3ZWVuIiB7CiAgICAgICAgICAgIGlmICgoKGdldC1pdGVtICRmZmNfc291cmNlcGF0aCAtRm9yY2UpLkxhc3RBY2Nlc3NUaW1lIC1ndCAkc3RhcnRkYXRlKSAtYW5kICgoZ2V0LWl0ZW0gJGZmY19zb3VyY2VwYXRoIC1Gb3JjZSkuTGFzdEFjY2Vzc1RpbWUgLWx0ICRlbmRkYXRlKSkgeyByZXR1cm4gJHRydWUgfWVsc2UgeyByZXR1cm4gJGZhbHNlIH0KICAgICAgICB9CiAgICAgICAgImNyZWF0ZWRPbGRlcnRoYW5YZGF5cyIgewogICAgICAgICAgICAkbGFzdGFjY2Vzc3RpbWUgPSBnZXQtZGF0ZSAtZGF0ZSAoR2V0LUl0ZW0gJGZmY19zb3VyY2VwYXRoIC1Gb3JjZSkuQ3JlYXRpb25UaW1lCiAgICAgICAgICAgICRjdXJyZW50ZGF0ZSA9IEdldC1EYXRlCiAgICAgICAgICAgICRkYXlzID0gJGN1cnJlbnRkYXRlIC0gJGxhc3RhY2Nlc3N0aW1lCiAgICAgICAgICAgIGlmICgkZGF5cy5EYXlzIC1ndCAkZmZjX21vZGlmaWNhdGlvbmRheXMpIHsKICAgICAgICAgICAgICAgIHJldHVybiAkdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgeyByZXR1cm4gJGZhbHNlIH0KICAgICAgICB9CiAgICB9Cn0KIAojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIFByZWNoZWNrICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgppZiAoKCRzb3VyY2VwYXRoIC1lcSAiTmV0d29yayIpIC1hbmQgKCRkZXN0aW5hdGlvbnBhdGggLWVxICJOZXR3b3JrIikpIHsKICAgIFdyaXRlLUVycm9yICJJbnB1dCBFcnJvcjpTb3VyY2UgYW5kIGRlc3RpbmF0aW9uIHBhdGggY2FuJ3QgYmUgbmV0d29yayIKICAgIEV4aXQ7Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgUHJlY2hlY2sgTXVsdGlwbGUgZmlsZXMgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmlmICgoJGZpbGVBY3Rpb24gLWVxICJjb3B5ZmlsZXN0b2Fmb2xkZXIiKSAtb3IgKCRmaWxlQWN0aW9uIC1lcSAiZGVsZXRlZmlsZXMiKSkgewogICAgJHNvdXJjZWZpbGUgPSAkc291cmNlZmlsZSAtc3BsaXQgIiwiCgogICAgaWYgKC1ub3QoJHNvdXJjZWZpbGUuR2V0dHlwZSgpLk5hbWUgLWVxICJTdHJpbmdbXSIpKSB7CiAgICAgICAgV3JpdGUtRXJyb3IgIkVycm9yOiBVbmtub3duIEVycm9yIgogICAgICAgIEV4aXQKICAgIH0KCiAgICBpZiAoJHNvdXJjZXBhdGggLWVxICJOZXR3b3JrIikgewogICAgICAgICRzb3VyY2VmaWxlID0gTWFwX25ldHdvcmtkcml2ZSAtQWN0aW9uICJDcmVhdGUiCiAgICB9CgogICAgaWYgKCRkZXN0aW5hdGlvbnBhdGggLWVxICJOZXR3b3JrIikgewogICAgICAgICRkZXN0aW5hdGlvbmZpbGUgPSBNYXBfbmV0d29ya2RyaXZlIC1BY3Rpb24gIkNyZWF0ZSIKICAgIH0KCiAgICAjIyMjIyMjIyMjIyMjIyMjQ2hlY2sgd2hldGhlciBzb3VyY2VmaWxlcyBuYW1lIGlzIHN1Y2Nlc3NmdWxseSBjb252ZXJ0ZWQgdG8gYW4gYXJyYXkjIyMjIyMjIyMjIyMjCgogICAgJHZlcmlmaWVkcGF0aCA9IEAoKQogICAgJGRpc2NhcmRlZHdoaWxlc291cmNlY2hlY2sgPSBAKCkKICAgIGZvcmVhY2ggKCR2YWxpZGF0ZXBhdGggaW4gJHNvdXJjZWZpbGUpIHsKICAgICAgICAKICAgICAgICBpZiAoKChUZXN0LXBhdGggJHZhbGlkYXRlcGF0aCAtSXNWYWxpZCkgLWVxICR0cnVlKSAtQW5kICgoVGVzdC1wYXRoICR2YWxpZGF0ZXBhdGgpIC1lcSAkdHJ1ZSkpIHsgICAgCiAgICAgICAgICAgICR2ZXJpZmllZHBhdGggKz0gJHZhbGlkYXRlcGF0aAogICAgICAgIH0KICAgICAgICBlbHNlIHsgJGRpc2NhcmRlZHdoaWxlc291cmNlY2hlY2sgKz0gJHZhbGlkYXRlcGF0aCB9CiAgICB9CgogICAgJHNvdXJjZWZpbGUgPSAkdmVyaWZpZWRwYXRoCgogICAgCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNDb21wbGV0ZWQgU291cmNlZmlsZXMgY2hlY2sjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI0NoZWNrIHZhbGlkIGZpbGUjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICRpc3ZhbGlkZmlsZW5hbWUgPSBAKCkKICAgICRpc25vdHZhbGlkZmlsZW5hbWUgPSBAKCkKCiAgICBmb3JlYWNoICgkZmlsZSBpbiAkc291cmNlZmlsZSkgewoKICAgICAgICBpZiAoKChHZXQtSXRlbSAkZmlsZSAtRm9yY2UpLkF0dHJpYnV0ZXMpIC1uZSAiRGlyZWN0b3J5IikgewogICAgCiAgICAgICAgICAgICRpc3ZhbGlkZmlsZW5hbWUgKz0gJGZpbGUKICAgIAogICAgICAgIH0KICAgICAgICBlbHNlIHsgJGlzbm90dmFsaWRmaWxlbmFtZSArPSAkZmlsZSB9CgogICAgfQoKICAgICRzb3VyY2VmaWxlID0gJGlzdmFsaWRmaWxlbmFtZQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiAgICBpZiAoKCRmaWxlQWN0aW9uIC1lcSAiY29weWZpbGVzdG9hZm9sZGVyIikgLWFuZCAoISRPdmVyd3JpdGUpIC1hbmQgKC1ub3QoISRzb3VyY2VmaWxlKSkpIHsKICAgICAgICAkZmlsZXRvYmVjb3BpZWQgPSBAKCkKICAgICAgICAkZmlsZW5vdHRvYmVjb3BpZWQgPSBAKCkKICAgICAgICBmb3JlYWNoICgkZmlsZSBpbiAkc291cmNlZmlsZSkgewogICAgICAgICAgICAkZmlsZW5hbWUgPSBTcGxpdC1QYXRoICRmaWxlIC1MZWFmCiAgICAgICAgICAgICR0ZW1wcGF0aCA9ICIkZGVzdGluYXRpb25maWxlIiArICJcIiArICIkZmlsZW5hbWUiCiAgICAgICAgICAgIGlmICghKFRlc3QtcGF0aCAkdGVtcHBhdGgpKSB7ICRmaWxldG9iZWNvcGllZCArPSAkZmlsZSB9ZWxzZSB7ICRmaWxlbm90dG9iZWNvcGllZCArPSAkZmlsZSB9CiAgICAgICAgfQogICAgICAgICRzb3VyY2VmaWxlID0gJGZpbGV0b2JlY29waWVkCiAgICB9CgogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIAogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyNDaGVja2luZyBBdHRyaWJ1dGUgY3JpdGVyaWEgZm9yIGVhY2ggZmlsZSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgCiAgICBpZiAoKCghJGluY2x1ZGVTeXN0ZW1GaWxlKSAtb3IgKCEkaW5jbHVkZVJlYWRPbmx5RmlsZSkgLW9yICghJGluY2x1ZGVIaWRkZW5GaWxlKSkgLWFuZCAoLW5vdCghJHNvdXJjZWZpbGUpKSkgewogICAgICAgICRhdHRyaWJ1dGV2ZXJpZmllZGZpbGVzID0gQCgpCiAgICAgICAgJGF0dHJpYnV0ZW5vdHZlcmlmaWVkZmlsZXMgPSBAKCkKICAgICAgICBmb3JlYWNoICgkdmVyaWZ5ZmlsZSBpbiAkc291cmNlZmlsZSkgewogICAgCiAgICAgICAgICAgIGlmICh2ZXJpZnlfQXR0cmlidXRlcyAtc291cmNlcGF0aCAkdmVyaWZ5ZmlsZSAtcmVhZG9ubHkgJGluY2x1ZGVSZWFkT25seUZpbGUgLWhpZGRlbnMgJGluY2x1ZGVIaWRkZW5GaWxlIC1zeXN0ZW0gJGluY2x1ZGVTeXN0ZW1GaWxlKSB7CiAgICAKICAgICAgICAgICAgICAgICRhdHRyaWJ1dGV2ZXJpZmllZGZpbGVzICs9ICR2ZXJpZnlmaWxlCiAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsgJGF0dHJpYnV0ZW5vdHZlcmlmaWVkZmlsZXMgKz0gJHZlcmlmeWZpbGUgfQogICAgICAgIH0KICAgICAgICAkc291cmNlZmlsZSA9ICRhdHRyaWJ1dGV2ZXJpZmllZGZpbGVzCiAgICB9CgogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjI0NoZWNraW5nIE1vZGlmaWNhdGlvbiBjcml0ZXJpYSBmb3IgZWFjaCBmaWxlIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKICAgIGlmICgoJGZpbGVNb2RpZmljYXRpb24pIC1hbmQgKC1ub3QoISRzb3VyY2VmaWxlKSkpIHsKICAgICAgICAkZmlsZW1vZGlmaWNhdGlvbnZlcmlmaWVkZmlsZXMgPSBAKCkKICAgICAgICAkZmlsZW1vZGlmaWNhdGlvbm5vdHZlcmlmaWVkZmlsZXMgPSBAKCkKICAgICAgICBmb3JlYWNoICgkdmVyaWZ5ZmlsZSBpbiAkc291cmNlZmlsZSkgewogICAgCiAgICAgICAgICAgIGlmIChmaWxlbW9kaWZpY2F0aW9uX2NoZWNrIC1mZmNfc291cmNlcGF0aCAkdmVyaWZ5ZmlsZSAtZmZjX2NyaXRlcmlhICRmaWxlTW9kaWZpY2F0aW9uIC1mZmNfbW9kaWZpY2F0aW9uZGF0ZSAkbW9kaWZpY2F0aW9uRGF0ZSAtZmZjX21vZGlmaWNhdGlvbmRheXMgJG1vZGlmaWNhdGlvbkRheXMgLWZmY19zdGFydGRhdGUgJHN0YXJ0RGF0ZSAtZmZjX2VuZGRhdGUgJGVuZERhdGUpIHsKICAgIAogICAgICAgICAgICAgICAgJGZpbGVtb2RpZmljYXRpb252ZXJpZmllZGZpbGVzICs9ICR2ZXJpZnlmaWxlCiAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgIAogICAgICAgICAgICAgICAgJGZpbGVtb2RpZmljYXRpb25ub3R2ZXJpZmllZGZpbGVzICs9ICR2ZXJpZnlmaWxlCgogICAgICAgICAgICB9CgogICAgICAgIH0KICAgICAgICAkc291cmNlZmlsZSA9ICRmaWxlbW9kaWZpY2F0aW9udmVyaWZpZWRmaWxlcwogICAgfQogCgogICAgaWYgKCEkc291cmNlZmlsZSkgewoKICAgICAgICBXcml0ZS1FcnJvciAiQ29uZGl0aW9uIG1pc21hdGNoZWQgZm9yIGFsbCB0aGUgZmlsZXMiCiAgICAgICAgaWYgKCRzb3VyY2VwYXRoIC1lcSAiTmV0d29yayIpIHsgTWFwX25ldHdvcmtkcml2ZSAtQWN0aW9uICJSZW1vdmUiIC1Ecml2ZSAkZ2xvYmFsOm5ld2RyaXZlIH0KICAgICAgICBpZiAoJGRlc3RpbmF0aW9ucGF0aCAtZXEgIk5ldHdvcmsiKSB7IE1hcF9uZXR3b3JrZHJpdmUgLUFjdGlvbiAiUmVtb3ZlIiAtRHJpdmUgJGdsb2JhbDpuZXdkcml2ZSB9CiAgICAgICAgRXhpdDsKICAgIAogICAgfQogICAgZWxzZSB7CiAgICAKICAgICAgICBmdW5jdGlvbiByb2xsYmFja19zb3VyY2UoJGZpbGVzdG91cGRhdGUpIHsKICAgIAogICAgICAgICAgICAkcm9sbGJhY2tlZCA9IGZvcmVhY2ggKCRmaWxlIGluICRmaWxlc3RvdXBkYXRlKSB7CiAgICAgICAgICAgICAgICBKb2luLVBhdGggJGdsb2JhbDpvZ2RyaXZlZGV0YWlscyAoc3BsaXQtcGF0aCAkZmlsZSAtTm9RdWFsaWZpZXIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICRyb2xsYmFja2VkCgogICAgICAgIH0KCiAgICAgICAgaWYgKCRkaXNjYXJkZWR3aGlsZXNvdXJjZWNoZWNrKSB7CiAgICAgICAgICAgIGlmICgkc291cmNlcGF0aCAtZXEgIk5ldHdvcmsiKSB7CiAgICAgICAgICAgICAgICAkR2xvYmFsOmRpc2NhcmRlZHdoaWxlc291cmNlY2hlY2sgPSByb2xsYmFja19zb3VyY2UgLWZpbGVzdG91cGRhdGUgJGRpc2NhcmRlZHdoaWxlc291cmNlY2hlY2sKICAgICAgICAgICAgfQogICAgICAgICAgICAgCiAgICAgICAgfQogICAgICAgIGlmICgkaXNub3R2YWxpZGZpbGVuYW1lKSB7CiAgICAgICAgICAgIGlmICgkc291cmNlcGF0aCAtZXEgIk5ldHdvcmsiKSB7CiAgICAgICAgICAgICAgICAkZ2xvYmFsOmlzbm90dmFsaWRmaWxlbmFtZSA9IHJvbGxiYWNrX3NvdXJjZSAtZmlsZXN0b3VwZGF0ZSAkaXNub3R2YWxpZGZpbGVuYW1lCiAgICAgICAgICAgIH0KICAgICAgICAgICAgIAogICAgICAgIH0KICAgICAgICBpZiAoJGF0dHJpYnV0ZW5vdHZlcmlmaWVkZmlsZXMpIHsgCiAgICAgICAgICAgIGlmICgkc291cmNlcGF0aCAtZXEgIk5ldHdvcmsiKSB7CiAgICAgICAgICAgICAgICAkZ2xvYmFsOmF0dHJpYnV0ZW5vdHZlcmlmaWVkZmlsZXMgPSByb2xsYmFja19zb3VyY2UgLWZpbGVzdG91cGRhdGUgJGF0dHJpYnV0ZW5vdHZlcmlmaWVkZmlsZXMKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAgaWYgKCRmaWxlbW9kaWZpY2F0aW9ubm90dmVyaWZpZWRmaWxlcykgeyAKICAgICAgICAgICAgaWYgKCRzb3VyY2VwYXRoIC1lcSAiTmV0d29yayIpIHsKICAgICAgICAgICAgICAgICRnbG9iYWw6ZmlsZW1vZGlmaWNhdGlvbm5vdHZlcmlmaWVkZmlsZXMgPSByb2xsYmFja19zb3VyY2UgLWZpbGVzdG91cGRhdGUgJGZpbGVtb2RpZmljYXRpb25ub3R2ZXJpZmllZGZpbGVzCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgfQogICAgICAgIGlmICgkZmlsZW5vdHRvYmVjb3BpZWQgLWFuZCAhKCRmaWxlYWN0aW9uIC1lcSAiZGVsZXRlZmlsZXMiKSkgewogICAgICAgICAgICBpZiAoJHNvdXJjZXBhdGggLWVxICJOZXR3b3JrIikgewogICAgICAgICAgICAgICAgJGdsb2JhbDpmaWxlbm90dG9iZWNvcGllZCA9IHJvbGxiYWNrX3NvdXJjZSAtZmlsZXN0b3VwZGF0ZSAkZmlsZW5vdHRvYmVjb3BpZWQKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICB9CiAgICB9IAoKfQplbHNlaWYgKCgkZmlsZUFjdGlvbiAtZXEgImNvcHlhZmlsZSIpIC1vciAoJGZpbGVBY3Rpb24gLWVxICJtb3ZlYWZpbGUiKSAtb3IgKCRmaWxlQWN0aW9uIC1lcSAiZGVsZXRlYWZpbGUiKSAtb3IgKCRmaWxlQWN0aW9uIC1lcSAicmVuYW1lYWZpbGUiKSkgewogICAgCiAgICBmdW5jdGlvbiByb2xsYmFja19zb3VyY2UxKCRmaWxldG91cGRhdGUpIHsgIAogICAgICAgIHJldHVybiAgKEpvaW4tUGF0aCAkZ2xvYmFsOm9nZHJpdmVkZXRhaWxzIChzcGxpdC1wYXRoICRmaWxldG91cGRhdGUgLU5vUXVhbGlmaWVyKSkKICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVfbmV0X2RyaXZlIHsKICAgICAgICBpZiAoJHNvdXJjZXBhdGggLWVxICJOZXR3b3JrIikgeyAkdGVtcGRyaXZlID0gU3BsaXQtcGF0aCAkc291cmNlZmlsZSAtUXVhbGlmaWVyOyBNYXBfbmV0d29ya2RyaXZlIC1BY3Rpb24gIlJlbW92ZSIgLURyaXZlICR0ZW1wZHJpdmUgfQogICAgICAgIGlmICgkZGVzdGluYXRpb25wYXRoIC1lcSAiTmV0d29yayIpIHsgJHRlbXBkcml2ZSA9IFNwbGl0LXBhdGggJGRlc3RpbmF0aW9uZmlsZSAtUXVhbGlmaWVyOyBNYXBfbmV0d29ya2RyaXZlIC1BY3Rpb24gIlJlbW92ZSIgLURyaXZlICR0ZW1wZHJpdmUgfQogICAgfQoKICAgIGlmICgkc291cmNlcGF0aCAtZXEgIk5ldHdvcmsiKSB7CiAgICAgICAgJHNvdXJjZWZpbGUgPSBNYXBfbmV0d29ya2RyaXZlIC1BY3Rpb24gIkNyZWF0ZSIKICAgIH0KICAgIAogICAgaWYgKCRkZXN0aW5hdGlvbnBhdGggLWVxICJOZXR3b3JrIikgewogICAgICAgICRkZXN0aW5hdGlvbmZpbGUgPSBNYXBfbmV0d29ya2RyaXZlIC1BY3Rpb24gIkNyZWF0ZSIKICAgIH0KICAgIGlmICghKCgoVGVzdC1wYXRoICRzb3VyY2VmaWxlIC1Jc1ZhbGlkKSAtZXEgJHRydWUpIC1BbmQgKChUZXN0LXBhdGggJHNvdXJjZWZpbGUpIC1lcSAkdHJ1ZSkpKSB7CiAgICAgICAgcmVtb3ZlX25ldF9kcml2ZQogICAgICAgIGlmICgkc291cmNlcGF0aCAtZXEgIk5ldHdvcmsiKSB7CiAgICAgICAgICAgICRzb3VyY2VmaWxlID0gcm9sbGJhY2tfc291cmNlMSAtZmlsZXRvdXBkYXRlICRzb3VyY2VmaWxlCiAgICAgICAgfSAgICAKICAgICAgICBXcml0ZS1FcnJvciAiU291cmNlIEZpbGUgbm90IGZvdW5kIiAKICAgICAgICBFeGl0CiAgICB9CiAgICAKICAgIGlmICgoKEdldC1JdGVtICRzb3VyY2VmaWxlIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlKS5BdHRyaWJ1dGVzKSAtZXEgIkRpcmVjdG9yeSIpIHsKICAgICAgICByZW1vdmVfbmV0X2RyaXZlCiAgICAgICAgaWYgKCRzb3VyY2VwYXRoIC1lcSAiTmV0d29yayIpIHsKICAgICAgICAgICAgJHNvdXJjZWZpbGUgPSByb2xsYmFja19zb3VyY2UxIC1maWxldG91cGRhdGUgJHNvdXJjZWZpbGUKICAgICAgICB9CiAgICAgICAgV3JpdGUtRXJyb3IgIkludmFsaWQgZmlsZSIKICAgICAgICBFeGl0OwogICAgfQogICAgCiAgICBpZiAoKCgkZmlsZUFjdGlvbiAtZXEgImNvcHlhZmlsZSIpIC1vciAoJGZpbGVBY3Rpb24gLWVxICJtb3ZlYWZpbGUiKSkgLUFuZCAoISRPdmVyd3JpdGUpKSB7CiAgICAgICAgJGZpbGVuYW1lID0gU3BsaXQtUGF0aCAkc291cmNlZmlsZSAtTGVhZgogICAgICAgICR0ZW1wcGF0aCA9ICIkZGVzdGluYXRpb25maWxlIiArICJcIiArICIkZmlsZW5hbWUiCiAgICAgICAgaWYgKFRlc3QtcGF0aCAkdGVtcHBhdGgpIHsKICAgICAgICAgICAgcmVtb3ZlX25ldF9kcml2ZSAKICAgICAgICAgICAgaWYgKCRzb3VyY2VwYXRoIC1lcSAiTmV0d29yayIpIHsKICAgICAgICAgICAgICAgICRzb3VyY2VmaWxlID0gcm9sbGJhY2tfc291cmNlMSAtZmlsZXRvdXBkYXRlICRzb3VyY2VmaWxlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkZpbGUgYWxyZWFkeSBwcmVzZW50IGF0IGRlc3RpbmF0aW9uIHBhdGgiIAogICAgICAgICAgICBFeGl0OyAKICAgICAgICB9CiAgICB9CiAgICAKICAgIAogICAgCiAgICBpZiAoJGZpbGVNb2RpZmljYXRpb24pIHsKICAgICAgICBpZiAoIShmaWxlbW9kaWZpY2F0aW9uX2NoZWNrIC1mZmNfc291cmNlcGF0aCAkc291cmNlZmlsZSAtZmZjX2NyaXRlcmlhICRmaWxlTW9kaWZpY2F0aW9uIC1mZmNfbW9kaWZpY2F0aW9uZGF0ZSAkbW9kaWZpY2F0aW9uRGF0ZSAtZmZjX21vZGlmaWNhdGlvbmRheXMgJG1vZGlmaWNhdGlvbkRheXMgLWZmY19zdGFydGRhdGUgJHN0YXJ0RGF0ZSAtZmZjX2VuZGRhdGUgJGVuZERhdGUpKSB7CiAgICAgICAgICAgIHJlbW92ZV9uZXRfZHJpdmUKICAgICAgICAgICAgaWYgKCRzb3VyY2VwYXRoIC1lcSAiTmV0d29yayIpIHsKICAgICAgICAgICAgICAgICRzb3VyY2VmaWxlID0gcm9sbGJhY2tfc291cmNlMSAtZmlsZXRvdXBkYXRlICRzb3VyY2VmaWxlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkZpbGUgbW9kaWZpY2F0aW9uIGNyaXRlcmlhIG1pc21hdGNoZWQiCiAgICAgICAgICAgIEV4aXQ7CiAgICAgICAgfQogICAgfQogICAgCiAgICBpZiAoKCghJGluY2x1ZGVTeXN0ZW1GaWxlKSAtb3IgKCEkaW5jbHVkZVJlYWRPbmx5RmlsZSkgLW9yICghJGluY2x1ZGVIaWRkZW5GaWxlKSkgLWFuZCAoJGZpbGVBY3Rpb24gLW5lICJyZW5hbWVhZmlsZSIpKSB7CiAgICAgICAgaWYgKCEodmVyaWZ5X0F0dHJpYnV0ZXMgLXNvdXJjZXBhdGggJHNvdXJjZWZpbGUgLXJlYWRvbmx5ICRpbmNsdWRlUmVhZE9ubHlGaWxlIC1oaWRkZW5zICRpbmNsdWRlSGlkZGVuRmlsZSAtc3lzdGVtICRpbmNsdWRlU3lzdGVtRmlsZSkpIHsgCiAgICAgICAgICAgIHJlbW92ZV9uZXRfZHJpdmUKICAgICAgICAgICAgaWYgKCRzb3VyY2VwYXRoIC1lcSAiTmV0d29yayIpIHsKICAgICAgICAgICAgICAgICRzb3VyY2VmaWxlID0gcm9sbGJhY2tfc291cmNlMSAtZmlsZXRvdXBkYXRlICRzb3VyY2VmaWxlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkF0dHJpYnV0ZSBjcml0ZXJpYSBtaXNtYXRjaGVkIgogICAgICAgICAgICBFeGl0OyAKICAgICAgICB9CiAgICB9CiAgICAKICAgIAp9CgplbHNlaWYgKCgkZmlsZUFjdGlvbiAtZXEgImNvcHlhZm9sZGVyIikgLW9yICgkZmlsZUFjdGlvbiAtZXEgIm1vdmVmb2xkZXIiKSAtb3IgKCRmaWxlQWN0aW9uIC1lcSAicmVuYW1lYWZvbGRlciIpIC1vciAoJGZpbGVBY3Rpb24gLWVxICJkZWxldGVhZm9sZGVyIikpIHsKICAgIAogICAgZnVuY3Rpb24gcm9sbGJhY2tfc291cmNlMigkZm9sZGVydG91cGRhdGUpIHsgIAogICAgICAgIHJldHVybiAgKEpvaW4tUGF0aCAkZ2xvYmFsOm9nZHJpdmVkZXRhaWxzIChzcGxpdC1wYXRoICRmb2xkZXJ0b3VwZGF0ZSAtTm9RdWFsaWZpZXIpKQogICAgfQoKICAgIGlmICgoJGZpbGVBY3Rpb24gLWVxICJtb3ZlZm9sZGVyIikgLWFuZCAoKCRzb3VyY2VwYXRoIC1lcSAiTmV0d29yayIpIC1vciAoJGRlc3RpbmF0aW9ucGF0aCAtZXEgIk5ldHdvcmsiKSkpIHsKICAgICAgICBXcml0ZS1FcnJvciAiTW92ZSBGb2xkZXIgb3BlcmF0aW9uIGlzIG5vdCBhbGxvd2VkIG92ZXIgdGhlIG5ldHdvcmsuIgogICAgICAgIEV4aXQ7CiAgICB9CgogICAgZnVuY3Rpb24gcmVtb3ZlX25ldF9kcml2ZSB7CiAgICAgICAgaWYgKCRzb3VyY2VwYXRoIC1lcSAiTmV0d29yayIpIHsgJHRlbXBkcml2ZSA9IFNwbGl0LXBhdGggJHNvdXJjZWZpbGUgLVF1YWxpZmllcjsgTWFwX25ldHdvcmtkcml2ZSAtQWN0aW9uICJSZW1vdmUiIC1Ecml2ZSAkdGVtcGRyaXZlIH0KICAgICAgICBpZiAoJGRlc3RpbmF0aW9ucGF0aCAtZXEgIk5ldHdvcmsiKSB7ICR0ZW1wZHJpdmUgPSBTcGxpdC1wYXRoICRkZXN0aW5hdGlvbmZpbGUgLVF1YWxpZmllcjsgTWFwX25ldHdvcmtkcml2ZSAtQWN0aW9uICJSZW1vdmUiIC1Ecml2ZSAkdGVtcGRyaXZlIH0KICAgIH0KCiAgICBpZiAoJHNvdXJjZXBhdGggLWVxICJOZXR3b3JrIikgewogICAgICAgICRzb3VyY2VmaWxlID0gTWFwX25ldHdvcmtkcml2ZSAtQWN0aW9uICJDcmVhdGUiCiAgICB9CiAgICAKICAgIGlmICgkZGVzdGluYXRpb25wYXRoIC1lcSAiTmV0d29yayIpIHsKICAgICAgICAkZGVzdGluYXRpb25maWxlID0gTWFwX25ldHdvcmtkcml2ZSAtQWN0aW9uICJDcmVhdGUiCiAgICB9CgogICAgaWYgKCEoKChUZXN0LXBhdGggJHNvdXJjZWZpbGUgLUlzVmFsaWQpIC1lcSAkdHJ1ZSkgLUFuZCAoKFRlc3QtcGF0aCAkc291cmNlZmlsZSkgLWVxICR0cnVlKSkpIHsgCiAgICAgICAgcmVtb3ZlX25ldF9kcml2ZQogICAgICAgIGlmICgkc291cmNlcGF0aCAtZXEgIk5ldHdvcmsiKSB7CiAgICAgICAgICAgICRzb3VyY2VmaWxlID0gcm9sbGJhY2tfc291cmNlMiAtZm9sZGVydG91cGRhdGUgJHNvdXJjZWZpbGUKICAgICAgICB9ICAgCiAgICAgICAgV3JpdGUtRXJyb3IgIlNvdXJjZWZvbGRlciBub3QgZm91bmQiICAgICAKICAgICAgICBFeGl0CiAgICB9CgogICAgaWYgKCgoR2V0LUl0ZW0gJHNvdXJjZWZpbGUpLkF0dHJpYnV0ZXMpIC1ub3RsaWtlICJEaXJlY3RvcnkqIikgewogICAgICAgIHJlbW92ZV9uZXRfZHJpdmUKICAgICAgICBpZiAoJHNvdXJjZXBhdGggLWVxICJOZXR3b3JrIikgewogICAgICAgICAgICAkc291cmNlZmlsZSA9IHJvbGxiYWNrX3NvdXJjZTIgLWZvbGRlcnRvdXBkYXRlICRzb3VyY2VmaWxlCiAgICAgICAgfSAKICAgICAgICBXcml0ZS1FcnJvciAiSW52YWxpZCBGb2xkZXIiCiAgICAgICAgRXhpdDsKICAgIH0KCgogICAgaWYgKCRmaWxlTW9kaWZpY2F0aW9uKSB7CiAgICAgICAgaWYgKCEoZmlsZW1vZGlmaWNhdGlvbl9jaGVjayAtZmZjX3NvdXJjZXBhdGggJHNvdXJjZWZpbGUgLWZmY19jcml0ZXJpYSAkZmlsZU1vZGlmaWNhdGlvbiAtZmZjX21vZGlmaWNhdGlvbmRhdGUgJG1vZGlmaWNhdGlvbkRhdGUgLWZmY19tb2RpZmljYXRpb25kYXlzICRtb2RpZmljYXRpb25EYXlzIC1mZmNfc3RhcnRkYXRlICRzdGFydERhdGUgLWZmY19lbmRkYXRlICRlbmREYXRlKSkgewogICAgICAgICAgICByZW1vdmVfbmV0X2RyaXZlCiAgICAgICAgICAgIGlmICgkc291cmNlcGF0aCAtZXEgIk5ldHdvcmsiKSB7CiAgICAgICAgICAgICAgICAkc291cmNlZmlsZSA9IHJvbGxiYWNrX3NvdXJjZTIgLWZvbGRlcnRvdXBkYXRlICRzb3VyY2VmaWxlCiAgICAgICAgICAgIH0gCiAgICAgICAgICAgIFdyaXRlLUVycm9yICJGb2xkZXIgbW9kaWZpY2F0aW9uIGNyaXRlcmlhIG1pc21hdGNoZWQiCiAgICAgICAgICAgIEV4aXQ7CiAgICAgICAgfQogICAgfQp9CgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1ByZWNoZWNrIGNvbXBsZXRlZCBtdWx0aXBsZSBmaWxlcyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1N0YW5kYXJkIEZ1bmN0aW9uIHRvIGNyZWF0ZSBkZXN0aW5hdGlvbiBwYXRoIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmZ1bmN0aW9uIENyZWF0ZV9EZXN0aW5hdGlvbnBhdGgoJGRlc3RpbmF0aW9ucGF0aCkgewogICAgJEVycm9yQWN0aW9uUHJlZmVyZW5jZSA9ICJTaWxlbnRseUNvbnRpbnVlIgogICAgTmV3LUl0ZW0gJGRlc3RpbmF0aW9ucGF0aCAtSXRlbVR5cGUgRGlyZWN0b3J5IHwgT3V0LU51bGwKICAgICRFcnJvckFjdGlvblByZWZlcmVuY2UgPSAiQ29udGludWUiCiAgICBpZiAoVGVzdC1wYXRoICRkZXN0aW5hdGlvbnBhdGgpIHsKICAgICAgICByZXR1cm4gJHRydWUKICAgIH0KICAgIGVsc2UgewogICAgICAgIFdyaXRlLUVycm9yICJGYWlsZWQgdG8gY3JlYXRlIGRlc3RpbmF0aW9uIHBhdGg7IgogICAgICAgIEV4aXQ7CiAgICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNDb3B5IGZpbGVzIHRvIGZvbGRlciAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgo8IyAKICAgQ2FsbGluZyBhIGZ1bmN0aW9uIHJlcXVpcmVzIDQgcGFyYW1ldGVyCiAgIDEuICRzb3VyY2VmaWxlc3BhdGggOiAgICAgICAkc291cmNlZmlsZQogICAyLiAkZGVzdGluYXRpb25mb2xkZXJwYXRoIDogJGRlc3RpbmF0aW9uZmlsZQogICAzLiAkY2ZfY29udGludWVvbmVycm9yOiAgICAgJGNvbnRpbnVlb25lcnJvcgogICA0LiAkY2ZfZGVzdGluYXRpb25kaXJlY3Rvcnk6ICRDcmVhdGVEZXN0RGlyZWN0b3J5CgogIz4gICAgICAgCmZ1bmN0aW9uIGNvcHlmaWxlc3RvYWZvbGRlcigkc291cmNlZmlsZXNwYXRoLCAkZGVzdGluYXRpb25mb2xkZXJwYXRoLCAkY2ZfY29udGludWVvbmVycm9yLCAkY2ZfZGVzdGluYXRpb25kaXJlY3RvcnkpIHsKICAgICRjb3B5c3VjY2Vzc2Z1bCA9IEAoKQogICAgJGNvcHlmYWlsZWQgPSBAKCkgCiAgICBpZiAoKFRlc3QtcGF0aCAkZGVzdGluYXRpb25mb2xkZXJwYXRoKSAtZXEgJGZhbHNlKSB7CiAgICAgICAgI2l0IHdpbGwgY2hlY2sgZm9yIGRlc3RpbmF0aW9uIHBhdGggaWYgaXQgZG9lcyBub3QgZXhpc3QuCiAgICAgICAgaWYgKCgkY2ZfZGVzdGluYXRpb25kaXJlY3RvcnkgLWVxICRmYWxzZSkpIHsKICAgICAgICAgICAgIyBhbmQgY3JlYXRlIGRlc3RpbmF0aW9uIGRpcmVjdG9yeSBpcyB0cnVlIHRoYW4gbmV3IGRpcmVjdG9yeSB3aWxsIGJlIGNyZWF0ZWQuCiAgICAgICAgICAgIFdyaXRlLUVycm9yICJEZXN0aW5hdGlvbiBwYXRoIHByb3ZpZGVkIGRvZXMgbm90IGV4aXN0IgogICAgICAgICAgICBFeGl0OwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgQ3JlYXRlX0Rlc3RpbmF0aW9ucGF0aCAtZGVzdGluYXRpb25wYXRoICRkZXN0aW5hdGlvbmZvbGRlcnBhdGggfCBPdXQtTnVsbAogICAgICAgIH0KICAgIH0KICAgICAgIAogICAgZm9yZWFjaCAoJHBhdGggaW4gJHNvdXJjZWZpbGVzcGF0aCkgewogICAgICAgIENvcHktaXRlbSAkcGF0aCAtRGVzdGluYXRpb24gJGRlc3RpbmF0aW9uZm9sZGVycGF0aCAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSB8IG91dC1udWxsCiAgICAgICAgJGRlc3RpbmF0aW9ucGF0aDEgPSBKb2luLXBhdGggJGRlc3RpbmF0aW9uZm9sZGVycGF0aCAoc3BsaXQtcGF0aCAkcGF0aCAtTGVhZikKICAgICAgICBpZiAoVGVzdC1wYXRoICRkZXN0aW5hdGlvbnBhdGgxKSB7CiAgICAgICAgICAgICRjb3B5c3VjY2Vzc2Z1bCArPSAkcGF0aAogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgJGNvcHlmYWlsZWQgKz0gJHBhdGgKICAgICAgICB9CiAgICB9CgogICAgaWYgKCRzb3VyY2VwYXRoIC1lcSAiTmV0d29yayIgLWFuZCAkY29weXN1Y2Nlc3NmdWwubGVuZ3RoIC1ndCAwKSB7CiAgICAgICAgJG9wX3N1Y2Nlc3MgPSBAKCkKICAgICAgICBmb3JlYWNoICgkZmlsZSBpbiAkY29weXN1Y2Nlc3NmdWwpIHsKICAgICAgICAgICAgJG9wX3N1Y2Nlc3MgKz0gSm9pbi1QYXRoICRnbG9iYWw6b2dkcml2ZWRldGFpbHMgKHNwbGl0LXBhdGggJGZpbGUgLU5vUXVhbGlmaWVyKQogICAgICAgIH0KICAgICAgICAiYG5Db3B5IFN1Y2Nlc3NmdWw6IjsgIi0iICogMzA7ICRvcF9zdWNjZXNzOyAiLSIgKiAzMAogICAgfQoKICAgIGlmICgkc291cmNlcGF0aCAtZXEgIk5ldHdvcmsiIC1hbmQgJGNvcHlmYWlsZWQubGVuZ3RoIC1ndCAwKSB7CiAgICAgICAgJG9wX2ZhaWxlZCA9IEAoKQogICAgICAgIGZvcmVhY2ggKCRmaWxlIGluICRjb3B5ZmFpbGVkKSB7CiAgICAgICAgICAgICRvcF9mYWlsZWQgKz0gSm9pbi1QYXRoICRnbG9iYWw6b2dkcml2ZWRldGFpbHMgKHNwbGl0LXBhdGggJGZpbGUgLU5vUXVhbGlmaWVyKQogICAgICAgIH0KICAgICAgICBXcml0ZS1FcnJvciAiYG5Db3B5IEZhaWxlZDpgbiRvcF9mYWlsZWQiCiAgICB9CiAgICAKICAgIGlmICgkc291cmNlcGF0aCAtZXEgIkxvY2FsIikgewogICAgICAgIGlmICgkY29weXN1Y2Nlc3NmdWwubGVuZ3RoIC1ndCAwKSB7CiAgICAgICAgICAgICJgbkNvcHkgU3VjY2Vzc2Z1bDoiOyAiLSIgKiAzMDsgJGNvcHlzdWNjZXNzZnVsOyAiLSIgKiAzMAogICAgICAgIH0KICAgICAgICBpZiAoJGNvcHlmYWlsZWQubGVuZ3RoIC1ndCAwKSB7CiAgICAgICAgICAgIFdyaXRlLUVycm9yICJgbkNvcHkgRmFpbGVkOmBuJGNvcHlmYWlsZWQiCiAgICAgICAgfQogICAgfQp9CgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZnVuY3Rpb24gY29weWZpbGV0b2Fmb2xkZXIoJHNvdXJjZWZpbGVzcGF0aCwgJGRlc3RpbmF0aW9uZm9sZGVycGF0aCwgJGNmX2Rlc3RpbmF0aW9uZGlyZWN0b3J5KSB7CiAgIAogICAgaWYgKChUZXN0LXBhdGggJGRlc3RpbmF0aW9uZm9sZGVycGF0aCkgLWVxICRmYWxzZSkgewogICAgICAgICNpdCB3aWxsIGNoZWNrIGZvciBkZXN0aW5hdGlvbiBwYXRoIGlmIGl0IGRvZXMgbm90IGV4aXN0LgogICAgICAgIGlmICgoJGNmX2Rlc3RpbmF0aW9uZGlyZWN0b3J5IC1lcSAkZmFsc2UpKSB7CiAgICAgICAgICAgICMgYW5kIGNyZWF0ZSBkZXN0aW5hdGlvbiBkaXJlY3RvcnkgaXMgdHJ1ZSB0aGFuIG5ldyBkaXJlY3Rvcnkgd2lsbCBiZSBjcmVhdGVkLgogICAgICAgICAgICBXcml0ZS1FcnJvciAiRGVzdGluYXRpb24gcGF0aCBwcm92aWRlZCBkb2VzIG5vdCBleGlzdCIKICAgICAgICAgICAgRXhpdDsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIENyZWF0ZV9EZXN0aW5hdGlvbnBhdGggLWRlc3RpbmF0aW9ucGF0aCAkZGVzdGluYXRpb25mb2xkZXJwYXRoIHwgT3V0LU51bGwKICAgICAgICB9CiAgICB9CgogICAgQ29weS1pdGVtICRzb3VyY2VmaWxlc3BhdGggLURlc3RpbmF0aW9uICRkZXN0aW5hdGlvbmZvbGRlcnBhdGggfCBvdXQtbnVsbAogICAgJGRlc3RpX3BhdGggPSBKb2luLXBhdGggJGRlc3RpbmF0aW9uZm9sZGVycGF0aCAoc3BsaXQtcGF0aCAkc291cmNlZmlsZXNwYXRoIC1MZWFmKQogICAgaWYgKFRlc3QtcGF0aCAkZGVzdGlfcGF0aCkgewogICAgICAgIGlmICgkc291cmNlcGF0aCAtZXEgIk5ldHdvcmsiKSB7CiAgICAgICAgICAgICRzb3VyY2VmaWxlc3BhdGggPSBKb2luLVBhdGggJGdsb2JhbDpvZ2RyaXZlZGV0YWlscyAoc3BsaXQtcGF0aCAkc291cmNlZmlsZXNwYXRoIC1Ob1F1YWxpZmllcikgCiAgICAgICAgfQogICAgICAgICJgbkNvcHkgU3VjY2Vzc2Z1bDoiOyAiLSIgKiAzMDsgJHNvdXJjZWZpbGVzcGF0aDsgIi0iICogMzAKICAgIH0KICAgIGVsc2UgewogICAgICAgIGlmICgkc291cmNlcGF0aCAtZXEgIk5ldHdvcmsiKSB7CiAgICAgICAgICAgICRzb3VyY2VmaWxlc3BhdGggPSBKb2luLVBhdGggJGdsb2JhbDpvZ2RyaXZlZGV0YWlscyAoc3BsaXQtcGF0aCAkc291cmNlZmlsZXNwYXRoIC1Ob1F1YWxpZmllcikgCiAgICAgICAgfQogICAgICAgIFdyaXRlLUVycm9yICJDb3B5IG9wZXJhdGlvbiBmYWlsZWQuIgogICAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpmdW5jdGlvbiBtb3ZlZmlsZXRvYWZvbGRlcigkc291cmNlZmlsZXNwYXRoLCAkZGVzdGluYXRpb25mb2xkZXJwYXRoLCAkY2ZfZGVzdGluYXRpb25kaXJlY3RvcnkpIHsKICAgCiAgICBpZiAoKFRlc3QtcGF0aCAkZGVzdGluYXRpb25mb2xkZXJwYXRoKSAtZXEgJGZhbHNlKSB7CiAgICAgICAgI2l0IHdpbGwgY2hlY2sgZm9yIGRlc3RpbmF0aW9uIHBhdGggaWYgaXQgZG9lcyBub3QgZXhpc3QuCiAgICAgICAgaWYgKCgkY2ZfZGVzdGluYXRpb25kaXJlY3RvcnkgLWVxICRmYWxzZSkpIHsKICAgICAgICAgICAgIyBhbmQgY3JlYXRlIGRlc3RpbmF0aW9uIGRpcmVjdG9yeSBpcyB0cnVlIHRoYW4gbmV3IGRpcmVjdG9yeSB3aWxsIGJlIGNyZWF0ZWQuCiAgICAgICAgICAgIFdyaXRlLUVycm9yICJEZXN0aW5hdGlvbiBwYXRoIHByb3ZpZGVkIGRvZXMgbm90IGV4aXN0LiIKICAgICAgICAgICAgRXhpdDsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIENyZWF0ZV9EZXN0aW5hdGlvbnBhdGggLWRlc3RpbmF0aW9ucGF0aCAkZGVzdGluYXRpb25mb2xkZXJwYXRoIHwgT3V0LU51bGwKICAgICAgICB9CiAgICB9CgogICAgbW92ZS1pdGVtICRzb3VyY2VmaWxlc3BhdGggLURlc3RpbmF0aW9uICRkZXN0aW5hdGlvbmZvbGRlcnBhdGggLUZvcmNlIHwgb3V0LW51bGwKICAgICMkZGVzdGlfcGF0aCA9IEpvaW4tcGF0aCAkZGVzdGluYXRpb25mb2xkZXJwYXRoIChzcGxpdC1wYXRoICRzb3VyY2VmaWxlc3BhdGggLUxlYWYpCiAgICBpZiAoJD8pIHsKICAgICAgICBpZiAoJHNvdXJjZXBhdGggLWVxICJOZXR3b3JrIikgewogICAgICAgICAgICAkc291cmNlZmlsZXNwYXRoID0gSm9pbi1QYXRoICRnbG9iYWw6b2dkcml2ZWRldGFpbHMgKHNwbGl0LXBhdGggJHNvdXJjZWZpbGVzcGF0aCAtTm9RdWFsaWZpZXIpIAogICAgICAgIH0KICAgICAgICAiYG5Nb3ZlIFN1Y2Nlc3NmdWw6IjsgIi0iICogMzA7ICRzb3VyY2VmaWxlc3BhdGg7ICItIiAqIDMwCiAgICB9CiAgICBlbHNlIHsKICAgICAgICBpZiAoJHNvdXJjZXBhdGggLWVxICJOZXR3b3JrIikgewogICAgICAgICAgICAkc291cmNlZmlsZXNwYXRoID0gSm9pbi1QYXRoICRnbG9iYWw6b2dkcml2ZWRldGFpbHMgKHNwbGl0LXBhdGggJHNvdXJjZWZpbGVzcGF0aCAtTm9RdWFsaWZpZXIpIAogICAgICAgIH0KICAgICAgICBXcml0ZS1FcnJvciAiTW92ZSBvcGVyYXRpb24gRmFpbGVkIgogICAgfQp9ICAgIAogICAgCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgCiAgIApGdW5jdGlvbiBSZW5hbWVfZmlsZSgkcmVuYW1lcGF0aCwgJG5ld25hbWUpIHsKICAgIGlmICgoJG5ld25hbWUgLW5vdGxpa2UgIiouKiIpIC1hbmQgKCRmaWxlQWN0aW9uIC1lcSAicmVuYW1lYWZpbGUiKSkgewogICAgICAgIFdyaXRlLUVycm9yICJQbGVhc2UgcHJvdmlkZSBmaWxlIGV4dGVuc2lvbiB3aXRoIGZpbGVuYW1lLiIKICAgICAgICBFeGl0OwogICAgfQogICAgIAogICAgUmVuYW1lLUl0ZW0gLVBhdGggJHJlbmFtZXBhdGggLU5ld05hbWUgJG5ld25hbWUKICAgIGlmICgkPykgewoKICAgICAgICBpZiAoJHNvdXJjZXBhdGggLWVxICJOZXR3b3JrIikgewogICAgICAgICAgICAkcmVuYW1lcGF0aCA9IEpvaW4tUGF0aCAkZ2xvYmFsOm9nZHJpdmVkZXRhaWxzIChzcGxpdC1wYXRoICRyZW5hbWVwYXRoIC1Ob1F1YWxpZmllcikKICAgICAgICB9CgogICAgICAgICJgblJlbmFtZSBTdWNjZXNzZnVsOiI7ICItIiAqIDMwOyAkcmVuYW1lcGF0aDsgIi0iICogMzAKICAgIH0gICAgICAgICAKfQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAKZnVuY3Rpb24gRGVsZXRlX2ZpbGVzKCRzb3VyY2VmaWxlcGF0aCwgJGNvbnRfZXJyb3IpIHsKCiAgICAkZmlsZWRlbGV0ZWQgPSBAKCkKICAgICRmYWlsZWR0b2RlbGV0ZSA9IEAoKQogICAgJGRpc3BsYXlfb3AgPSBAKCkKICAgICRkaXNwbGF5X29wZmFpbCA9IEAoKQoKICAgIGZvcmVhY2ggKCRmaWxlIGluICRzb3VyY2VmaWxlcGF0aCkgewoKICAgICAgICBHZXQtaXRlbSAkZmlsZSAtRm9yY2UgfCBSZW1vdmUtSXRlbSAtRm9yY2UgLUVycm9yQWN0aW9uIFN0b3AKICAgICAgICAKICAgICAgICBpZiAoKFRlc3QtcGF0aCAkZmlsZSkgLWVxICRmYWxzZSkgewogICAgICAgICAgICAkZmlsZWRlbGV0ZWQgKz0gJGZpbGUgICAgICAgICAgCiAgICAgICAgfSAgICAKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgJGZhaWxlZHRvZGVsZXRlICs9ICRmaWxlICAgICAgICAKICAgICAgICB9CiAgICB9CgogICAgaWYgKCRzb3VyY2VwYXRoIC1lcSAiTmV0d29yayIpIHsKICAgICAgICBmb3JlYWNoICgkZmlsZSBpbiAkZmlsZWRlbGV0ZWQpIHsgICAgIAogICAgICAgICAgICAkZGlzcGxheV9vcCArPSBKb2luLVBhdGggJGdsb2JhbDpvZ2RyaXZlZGV0YWlscyAoc3BsaXQtcGF0aCAkZmlsZSAtTm9RdWFsaWZpZXIpCiAgICAgICAgfQogICAgICAgIGZvcmVhY2ggKCRmaWxlIGluICRmYWlsZWR0b2RlbGV0ZSkgeyAgICAgCiAgICAgICAgICAgICRkaXNwbGF5X29wZmFpbCArPSBKb2luLVBhdGggJGdsb2JhbDpvZ2RyaXZlZGV0YWlscyAoc3BsaXQtcGF0aCAkZmlsZSAtTm9RdWFsaWZpZXIpCiAgICAgICAgfQogICAgICAgIGlmICgkZGlzcGxheV9vcC5sZW5ndGggLWd0IDApIHsKICAgICAgICAgICAgImBuRGVsZXRpb24gU3VjY2Vzc2Z1bDoiOyAiLSIgKiAzMDsgJGRpc3BsYXlfb3A7ICItIiAqIDMwCiAgICAgICAgfQogICAgICAgIGlmICgkZGlzcGxheV9vcGZhaWwubGVuZ3RoIC1ndCAwKSB7CiAgICAgICAgICAgIFdyaXRlLUVycm9yICJgbkRlbGV0aW9uIEZhaWxlZDogJGRpc3BsYXlfb3BmYWlsIgogICAgICAgIH0KCiAgICB9CiAgICBlbHNlIHsKCiAgICAgICAgaWYgKCRmaWxlZGVsZXRlZC5sZW5ndGggLWd0IDApIHsKICAgICAgICAgICAgImBuRGVsZXRpb24gU3VjY2Vzc2Z1bDoiOyAiLSIgKiAzMDsgJGZpbGVkZWxldGVkOyAiLSIgKiAzMAogICAgICAgIH0KICAgICAgICBpZiAoJGZhaWxlZHRvZGVsZXRlLmxlbmd0aCAtZ3QgMCkgewogICAgICAgICAgICBXcml0ZS1FcnJvciAiYG5EZWxldGlvbiBGYWlsZWQ6ICRmYWlsZWR0b2RlbGV0ZSIKICAgICAgICB9CiAgICB9Cn0KICAKZnVuY3Rpb24gRGVsZXRlX2ZpbGUoJHNvdXJjZWZpbGVwYXRoKSB7CgogICAgR2V0LWl0ZW0gJHNvdXJjZWZpbGVwYXRoIC1Gb3JjZSB8IFJlbW92ZS1JdGVtIC1Gb3JjZSAtRXJyb3JBY3Rpb24gU3RvcAoKICAgIGlmICgkc291cmNlcGF0aCAtZXEgIk5ldHdvcmsiKSB7CiAgICAgICAgJHNvdXJjZWZpbGVwYXRoID0gSm9pbi1QYXRoICRnbG9iYWw6b2dkcml2ZWRldGFpbHMgKHNwbGl0LXBhdGggJHNvdXJjZWZpbGVwYXRoIC1Ob1F1YWxpZmllcikKICAgIH0KICAgICAgICAKICAgIGlmICgoVGVzdC1wYXRoICRzb3VyY2VmaWxlcGF0aCkgLWVxICRmYWxzZSkgewogICAgICAgICItIiAqIDMwICsgImBuRmlsZSBkZWxldGVkIHN1Y2Nlc3NmdWxseSA6ICRzb3VyY2VmaWxlcGF0aGBuIiArICItIiAqIDMwCiAgICAgICAgICAgIAogICAgfSAKICAgIAogICAgZWxzZSB7CiAgICAgICAgV3JpdGUtRXJyb3IgIkVycm9yIHdoaWxlIGRlbGV0aW5nIGZpbGUgJHNvdXJjZWZpbGVwYXRoLiIKICAgICAgICAKICAgIH0KfSAgIApmdW5jdGlvbiBEZWxldGVfZm9sZGVyKCRzb3VyY2Vmb2xkZXJwYXRoKSB7CiAgICAgICAgCiAgICB0cnkgewogICAgICAgIEdldC1pdGVtICRzb3VyY2Vmb2xkZXJwYXRoIC1Gb3JjZSB8IFJlbW92ZS1JdGVtIC1mb3JjZSAtUmVjdXJzZSAtRXJyb3JBY3Rpb24gU3RvcAoKICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgaWYgKChUZXN0LXBhdGggJHNvdXJjZWZvbGRlcnBhdGgpIC1lcSAkZmFsc2UpIHsKICAgICAgICAgICAgaWYgKCRzb3VyY2VwYXRoIC1lcSAiTmV0d29yayIpIHsKICAgICAgICAgICAgICAgICRzb3VyY2Vmb2xkZXJwYXRoID0gSm9pbi1QYXRoICRnbG9iYWw6b2dkcml2ZWRldGFpbHMgKHNwbGl0LXBhdGggJHNvdXJjZWZvbGRlcnBhdGggLU5vUXVhbGlmaWVyKQogICAgICAgICAgICB9CiAgICAgICAgICAgICJgbkZvbGRlciBEZWxldGVkOiI7ICItIiAqIDMwOyAkc291cmNlZm9sZGVycGF0aDsgIi0iICogMzAKICAgICAgICB9IAogICAgfQogICAgY2F0Y2ggewogICAgICAgICRFcnJvckFjdGlvblByZWZlcmVuY2UgPSAiQ29udGludWUiCiAgICAgICAgV3JpdGUtRXJyb3IgIkZhaWxlZCB0byBkZWxldGUgZm9sZGVyLiIKICAgIH0KfQogICAgICAgIApmdW5jdGlvbiBDb3B5X2ZvbGRlcnRvZm9sZGVyKCRzb3VyY2Vmb2xkZXJwYXRoLCAkZGVzdGluYXRpb25mb2xkZXJwYXRoLCAkY3JlYXRlZGVzdCkgewogICAgJGZvbGRlcm5hbWUgPSBzcGxpdC1wYXRoICRzb3VyY2Vmb2xkZXJwYXRoIC1sZWFmCiAgICAkdGVtcHBhdGggPSAiJGRlc3RpbmF0aW9uZm9sZGVycGF0aCIgKyAiXCIgKyAiJGZvbGRlcm5hbWUiCiAgICAkUmVzdWx0dGVzdHBhdGggPSBUZXN0LVBhdGggJHRlbXBwYXRoCiAgICBpZigoJFJlc3VsdHRlc3RwYXRoKSAtYW5kICEoJE92ZXJ3cml0ZSkpewogICAgICAgICRFcnJvckFjdGlvblByZWZlcmVuY2UgPSAiQ29udGludWUiCiAgICAgICAgV3JpdGUtRXJyb3IgIkRlc3RpbmF0aW9uIGZvbGRlciBhbHJlYWR5IGV4aXN0LiIKICAgICAgICBFeGl0OwogICAgfQogICAgaWYgKChUZXN0LXBhdGggJGRlc3RpbmF0aW9uZm9sZGVycGF0aCkgLWVxICRmYWxzZSkgewogICAgICAgICNpdCB3aWxsIGNoZWNrIGZvciBkZXN0aW5hdGlvbiBwYXRoIGlmIGl0IGRvZXMgbm90IGV4aXN0LgogICAgICAgIGlmICgoJGNyZWF0ZWRlc3QgLWVxICRmYWxzZSkpIHsKICAgICAgICAgICAgIyBhbmQgY3JlYXRlIGRlc3RpbmF0aW9uIGRpcmVjdG9yeSBpcyB0cnVlIHRoYW4gbmV3IGRpcmVjdG9yeSB3aWxsIGJlIGNyZWF0ZWQuCiAgICAgICAgICAgIFdyaXRlLUVycm9yICJEZXN0aW5hdGlvbiBwYXRoIHByb3ZpZGVkIGRvZXMgbm90IGV4aXN0LiIKICAgICAgICAgICAgRXhpdDsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIENyZWF0ZV9EZXN0aW5hdGlvbnBhdGggLWRlc3RpbmF0aW9ucGF0aCAkZGVzdGluYXRpb25mb2xkZXJwYXRoIHwgT3V0LU51bGwKICAgICAgICB9CiAgICB9CiAgICBpZiAoJGluY2x1ZGVzdWIgLWVxICR0cnVlKSB7CiAgICAgICAgaWYgKCEoJGluY2x1ZGVTeXN0ZW1GaWxlKSAtb3IgISgkaW5jbHVkZVJlYWRPbmx5RmlsZSkgLW9yICEoJGluY2x1ZGVIaWRkZW5GaWxlKSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgJEVycm9yQWN0aW9uUHJlZmVyZW5jZSA9ICJTdG9wIgogICAgICAgICAgICAgICAgJFNvdXJjZUZvbGRlck5hbWUgPSBTcGxpdC1QYXRoICRzb3VyY2Vmb2xkZXJwYXRoIC1MZWFmCiAgICAgICAgICAgICAgICAkTmV3Rm9sZGVyUGF0aCA9ICIkZGVzdGluYXRpb25maWxlIiArICJcIiArICIkU291cmNlRm9sZGVyTmFtZSIKICAgICAgICAgICAgICAgIGlmKCEoJFJlc3VsdHRlc3RwYXRoKSl7TmV3LUl0ZW0gJE5ld0ZvbGRlclBhdGggLUl0ZW1UeXBlIERpcmVjdG9yeSB8IE91dC1OdWxsfQogICAgICAgICAgICAgICAgR2V0LUNoaWxkSXRlbSAkc291cmNlZm9sZGVycGF0aCB8ID8geyAkXy5QU0lTQ29udGFpbmVyIC1lcSAkdHJ1ZSB9IHwgU2VsZWN0IC1FeHBhbmRQcm9wZXJ0eSBGdWxsTmFtZSB8IENvcHktSXRlbSAgLURlc3RpbmF0aW9uICROZXdGb2xkZXJQYXRoIC1SZWN1cnNlIHwgT3V0LU51bGwgCiAgICAgICAgICAgICAgICAkRmlsZXNUb0NoZWNrID0gR2V0LUNoaWxkSXRlbSAkc291cmNlZm9sZGVycGF0aCB8IHdoZXJlIHsgISAkXy5QU0lzQ29udGFpbmVyIH0gfCBTZWxlY3QgLUV4cGFuZFByb3BlcnR5IEZ1bGxOYW1lCiAgICAgICAgICAgICAgICBmb3JlYWNoICgkRmlsZSBpbiAkRmlsZXNUb0NoZWNrKSB7CiAgICAgICAgICAgICAgICAgICAgJEF0dENoZWNrUmVzdWx0ID0gdmVyaWZ5X0F0dHJpYnV0ZXMgLXNvdXJjZXBhdGggJGZpbGUgLXJlYWRvbmx5ICRpbmNsdWRlUmVhZE9ubHlGaWxlIC1oaWRkZW5zICRpbmNsdWRlSGlkZGVuRmlsZSAtc3lzdGVtICRpbmNsdWRlU3lzdGVtRmlsZQogICAgICAgICAgICAgICAgICAgIGlmICgkQXR0Q2hlY2tSZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgQ29weS1JdGVtICRmaWxlICROZXdGb2xkZXJQYXRoIHwgT3V0LU51bGwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggewogICAgICAgICAgICAgICAgJEVycm9yQWN0aW9uUHJlZmVyZW5jZSA9ICJTaWxlbnRseUNvbnRpbnVlIgogICAgICAgICAgICAgICAgaWYoISgkUmVzdWx0dGVzdHBhdGgpKXtSZW1vdmUtSXRlbSAkTmV3Rm9sZGVyUGF0aCAtUmVjdXJzZSB8IE91dC1OdWxsfQogICAgICAgICAgICAgICAgJF8uRXhjZXB0aW9uLk1lc3NhZ2UKICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICJPcGVyYXRpb24gRmFpbGVkIjsgCiAgICAgICAgICAgICAgICBFeGl0CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgRWxzZSB7CiAgICAgICAgICAgIENvcHktaXRlbSAkc291cmNlZm9sZGVycGF0aCAtRGVzdGluYXRpb24gJGRlc3RpbmF0aW9uZm9sZGVycGF0aCAtUmVjdXJzZSAtRm9yY2UgfCBPdXQtTnVsbAogICAgICAgIH0KICAgIH0KICAgIGVsc2UgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIENvcHktaXRlbSAkc291cmNlZm9sZGVycGF0aCAtRGVzdGluYXRpb24gJGRlc3RpbmF0aW9uZm9sZGVycGF0aCAtRXJyb3JBY3Rpb24gU3RvcCB8IE91dC1OdWxsCiAgICAgICAgICAgICRGaWxlc1RvQ2hlY2sgPSBHZXQtQ2hpbGRJdGVtICRzb3VyY2Vmb2xkZXJwYXRoIHwgd2hlcmUgeyAhICRfLlBTSXNDb250YWluZXIgfSB8IFNlbGVjdCAtRXhwYW5kUHJvcGVydHkgRnVsbE5hbWUKICAgICAgICAgICAgRnVuY3Rpb24gdG9jb3B5ZmlsZXMoJEZpbGVMaXN0KXsKICAgICAgICAgICAgICAgIGlmKCRjb250aW51ZW9uZXJyb3IgLWVxICRUcnVlKXskRXJyb3JBY3Rpb25QcmVmZXJlbmNlID0gIlNpbGVudGx5Q29udGludWUifUVsc2V7JEVycm9yQWN0aW9uUHJlZmVyZW5jZSA9ICJTdG9wIn0KICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRGaWxlIGluICRGaWxlTGlzdCkgewogICAgICAgICAgICAgICAgICAgICRBdHRDaGVja1Jlc3VsdCA9IHZlcmlmeV9BdHRyaWJ1dGVzIC1zb3VyY2VwYXRoICRmaWxlIC1yZWFkb25seSAkaW5jbHVkZVJlYWRPbmx5RmlsZSAtaGlkZGVucyAkaW5jbHVkZUhpZGRlbkZpbGUgLXN5c3RlbSAkaW5jbHVkZVN5c3RlbUZpbGUKICAgICAgICAgICAgICAgICAgICBpZiAoJEF0dENoZWNrUmVzdWx0IC1lcSAkdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBDb3B5LUl0ZW0gJGZpbGUgJHRlbXBwYXRoIHwgT3V0LU51bGwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gIAogICAgICAgICAgICB0b2NvcHlmaWxlcyAtRmlsZUxpc3QgJEZpbGVzVG9DaGVjawogICAgICAgIH0KICAgICAgICBjYXRjaCB7CiAgICAgICAgICAgIFJlbW92ZS1JdGVtICR0ZW1wcGF0aCAtUmVjdXJzZSAtRm9yY2UgfCBPdXQtTnVsbAogICAgICAgICAgICAkRXJyb3JBY3Rpb25QcmVmZXJlbmNlID0gIkNvbnRpbnVlIgogICAgICAgICAgICBXcml0ZS1FcnJvciAiRXJyb3Igd2hpbGUgY29weWluZyBmaWxlcy4iCiAgICAgICAgfQogICAgfQogICAgaWYgKCRzb3VyY2VwYXRoIC1lcSAiTmV0d29yayIpIHsKICAgICAgICAkc291cmNlZm9sZGVycGF0aCA9IEpvaW4tUGF0aCAkZ2xvYmFsOm9nZHJpdmVkZXRhaWxzIChzcGxpdC1wYXRoICRzb3VyY2Vmb2xkZXJwYXRoIC1Ob1F1YWxpZmllcikKICAgIH0KICAgIAogICAgaWYgKFRlc3QtcGF0aCAkdGVtcHBhdGgpIHsKICAgICAgICAiYG5Db3B5IFN1Y2Nlc3NmdWw6IjsgIi0iICogMzA7ICRzb3VyY2Vmb2xkZXJwYXRoOyAiLSIgKiAzMAogICAgfSAKICAgIGVsc2UgewogICAgICAgIFdyaXRlLUVycm9yICJDb3B5IG9wZXJhdGlvbiBmYWlsZWQiCiAgICB9IAp9CiAgICAKIyMjIyMjIyBJZ25vcmluZyBBdHRyaWJ1dGUgY3JpdGVyaWEgYW5kIG1vdmluZyBmb2xkZXIjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKI09uIEVycm9yIFNjcmlwdCB3aWxsIFRlcm1pbmF0ZSMKICAgCmZ1bmN0aW9uIE1vdmVfZm9sZGVydG9mb2xkZXIoJHNvdXJjZWZvbGRlcnBhdGgsICRkZXN0aW5hdGlvbmZvbGRlcnBhdGgsICRjcmVhdGVkZXN0KSB7CiAgICB0cnl7CiAgICAkRXJyb3JBY3Rpb25QcmVmZXJlbmNlID0gIlN0b3AiCiAgICAkZm9sZGVybmFtZSA9IHNwbGl0LXBhdGggJHNvdXJjZWZvbGRlcnBhdGggLWxlYWYKICAgICR0ZW1wcGF0aCA9ICIkZGVzdGluYXRpb25mb2xkZXJwYXRoIiArICJcIiArICIkZm9sZGVybmFtZSIKCiAgICBpZiAoKFRlc3QtcGF0aCAkZGVzdGluYXRpb25mb2xkZXJwYXRoKSAtZXEgJGZhbHNlKSB7CiAgICAgICAgI2l0IHdpbGwgY2hlY2sgZm9yIGRlc3RpbmF0aW9uIHBhdGggaWYgaXQgZG9lcyBub3QgZXhpc3QuCiAgICAgICAgaWYgKCgkY3JlYXRlZGVzdCAtZXEgJGZhbHNlKSkgewogICAgICAgICAgICAjIGFuZCBjcmVhdGUgZGVzdGluYXRpb24gZGlyZWN0b3J5IGlzIHRydWUgdGhhbiBuZXcgZGlyZWN0b3J5IHdpbGwgYmUgY3JlYXRlZC4KICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkRlc3RpbmF0aW9uIHBhdGggcHJvdmlkZWQgZG9lcyBub3QgZXhpc3QuIgogICAgICAgICAgICBFeGl0OwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgQ3JlYXRlX0Rlc3RpbmF0aW9ucGF0aCAtZGVzdGluYXRpb25wYXRoICRkZXN0aW5hdGlvbmZvbGRlcnBhdGggfCBPdXQtTnVsbAogICAgICAgIH0KICAgIH0KICAgIGlmKChUZXN0LVBhdGggJHRlbXBwYXRoKSAtYW5kICgkT3ZlcndyaXRlIC1lcSAkdHJ1ZSkpewogICAgICAgIHRyeXsKICAgICAgICAgICAgQ29weS1JdGVtICRzb3VyY2Vmb2xkZXJwYXRoICRkZXN0aW5hdGlvbmZvbGRlcnBhdGggLVJlY3Vyc2UgLUZvcmNlIC1FcnJvckFjdGlvbiBTdG9wIHwgT3V0LU51bGwKICAgICAgICAgICAgUmVtb3ZlLUl0ZW0gJHNvdXJjZWZvbGRlcnBhdGggLVJlY3Vyc2UgLUZvcmNlIHwgT3V0LU51bGwKICAgICAgICB9CiAgICAgICAgY2F0Y2h7CiAgICAgICAgICAgICRFcnJvckFjdGlvblByZWZlcmVuY2UgPSAiQ29udGludWUiCiAgICAgICAgICAgIFdyaXRlLUVycm9yICJNb3ZlIG9wZXJhdGlvbiBmYWlsZWQiCiAgICAgICAgfQogICAgfQogICAgZWxzZWlmKChUZXN0LVBhdGggJHRlbXBwYXRoKSAtYW5kICEoJE92ZXJ3cml0ZSkpe1dyaXRlLUVycm9yICJGb2xkZXIgQWxyZWFkeSBleGlzdC4ifQogICAgZWxzZXt0cnl7TW92ZS1pdGVtICRzb3VyY2Vmb2xkZXJwYXRoIC1EZXN0aW5hdGlvbiAkZGVzdGluYXRpb25mb2xkZXJwYXRoIC1FcnJvckFjdGlvbiBTdG9wfWNhdGNoeyRFcnJvckFjdGlvblByZWZlcmVuY2UgPSAiQ29udGludWUiO1dyaXRlLUVycm9yICJNb3ZlIG9wZXJhdGlvbiBmYWlsZWQifX0KICAgIAogICAgaWYgKCRzb3VyY2VwYXRoIC1lcSAiTmV0d29yayIpIHsKICAgICAgICAkc291cmNlZm9sZGVycGF0aCA9IEpvaW4tUGF0aCAkZ2xvYmFsOm9nZHJpdmVkZXRhaWxzIChzcGxpdC1wYXRoICRzb3VyY2Vmb2xkZXJwYXRoIC1Ob1F1YWxpZmllcikKICAgIH0KCiAgICBpZiAoVGVzdC1wYXRoICR0ZW1wcGF0aCkgewogICAgICAgICJgbk1vdmUgU3VjY2Vzc2Z1bDoiOyAiLSIgKiAzMDsgJHNvdXJjZWZvbGRlcnBhdGg7ICItIiAqIDMwCiAgICB9IAogICAgZWxzZSB7CiAgICAgICAgV3JpdGUtRXJyb3IgIk1vdmUgb3BlcmF0aW9uIGZhaWxlZC4iCiAgICB9IAogICAgfQogICAgY2F0Y2h7CiAgICAgICAgJEVycm9yQWN0aW9uUHJlZmVyZW5jZSA9ICJDb250aW51ZSIKICAgICAgICAkXy5FeGNlcHRpb24uTWVzc2FnZQogICAgICAgIFdyaXRlLUVycm9yICJFcnJvciBXaGlsZSBtb3ZpbmcgZm9sZGVyIgogICAgfQp9CkZ1bmN0aW9uIENyZWF0ZV9Gb2xkZXIgewogICAgCiAgICBpZiAoJFNvdXJjZVBhdGggLWVxICJOZXR3b3JrIikgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRFcnJvckFjdGlvblByZWZlcmVuY2UgPSAiU3RvcCIKICAgICAgICAgICAgJHNvdXJjZWZpbGUgPSBNYXBfbmV0d29ya2RyaXZlIC1BY3Rpb24gIkNyZWF0ZSIKICAgICAgICAgICAgJEVycm9yQWN0aW9uUHJlZmVyZW5jZSA9ICJDb250aW51ZSIKICAgICAgICB9CiAgICAgICAgY2F0Y2ggewogICAgICAgICAgICAkRXJyb3JBY3Rpb25QcmVmZXJlbmNlID0gIkNvbnRpbnVlIgogICAgICAgICAgICBXcml0ZS1FcnJvciAiRmFpbGVkIHRvIG1hcCBuZXR3b3JrIGRyaXZlIgogICAgICAgICAgICBFeGl0OwogICAgICAgIH0KICAgIH0KICAgICRGdWxsUGF0aCA9ICRTb3VyY2VGaWxlCiAgICB0cnkgewogICAgICAgIGlmIChUZXN0LXBhdGggKFNwbGl0LVBhdGggJFNvdXJjZUZpbGUgLVBhcmVudCkpIHsKICAgICAgICAgICAgTmV3LUl0ZW0gLVBhdGggJEZ1bGxQYXRoIC1JdGVtVHlwZSAiRGlyZWN0b3J5IiAtRXJyb3JBY3Rpb24gIlN0b3AiIHwgT3V0LU51bGwKICAgICAgICAgICAgaWYgKFRlc3QtcGF0aCAkRnVsbFBhdGgpIHsgIkZvbGRlciBDcmVhdGVkIFN1Y2Nlc3NmdWxseSIgfWVsc2UgeyBXcml0ZS1FcnJvciAiRmFpbGVkIHRvIGNyZWF0ZSBmb2xkZXIiOyBFeGl0OyB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBXcml0ZS1FcnJvciAiU291cmNlIHBhdGggZG9lcyBub3QgZXhpc3QuIgogICAgICAgICAgICBFeGl0OwogICAgICAgIH0KICAgIH0KICAgIGNhdGNoIHsKICAgICAgICBXcml0ZS1FcnJvciAiRmFpbGVkIHRvIGNyZWF0ZSBmb2xkZXIiCiAgICAgICAgRXhpdDsKICAgIH0KICAgIAp9CgpGdW5jdGlvbiBTZWxlY3RfT3BlcmF0aW9uIHsKCiAgICBzd2l0Y2ggKCRmaWxlYWN0aW9uKSB7CgogICAgICAgICJjb3B5ZmlsZXN0b2Fmb2xkZXIiIHsgY29weWZpbGVzdG9hZm9sZGVyIC1zb3VyY2VmaWxlc3BhdGggJHNvdXJjZWZpbGUgLWRlc3RpbmF0aW9uZm9sZGVycGF0aCAkZGVzdGluYXRpb25maWxlIC1jZl9jb250aW51ZW9uZXJyb3IgJGNvbnRpbnVlb25lcnJvciAtY2ZfZGVzdGluYXRpb25kaXJlY3RvcnkgJENyZWF0ZURlc3REaXJlY3RvcnkgfQogICAgICAgICJjb3B5YWZpbGUiIHsgY29weWZpbGV0b2Fmb2xkZXIgLXNvdXJjZWZpbGVzcGF0aCAkc291cmNlZmlsZSAtZGVzdGluYXRpb25mb2xkZXJwYXRoICRkZXN0aW5hdGlvbmZpbGUgLWNmX2Rlc3RpbmF0aW9uZGlyZWN0b3J5ICRDcmVhdGVEZXN0RGlyZWN0b3J5IH0KICAgICAgICAiY29weWFmb2xkZXIiIHsgQ29weV9mb2xkZXJ0b2ZvbGRlciAtc291cmNlZm9sZGVycGF0aCAkc291cmNlZmlsZSAtZGVzdGluYXRpb25mb2xkZXJwYXRoICRkZXN0aW5hdGlvbmZpbGUgLWNyZWF0ZWRlc3QgJENyZWF0ZURlc3REaXJlY3RvcnkgfQogICAgICAgICJyZW5hbWVhZmlsZSIgeyBSZW5hbWVfZmlsZSAtcmVuYW1lcGF0aCAkc291cmNlZmlsZSAtbmV3bmFtZSAkbmV3bmFtZSB9CiAgICAgICAgIm1vdmVhZmlsZSIgeyBtb3ZlZmlsZXRvYWZvbGRlciAtc291cmNlZmlsZXNwYXRoICRzb3VyY2VmaWxlIC1kZXN0aW5hdGlvbmZvbGRlcnBhdGggJGRlc3RpbmF0aW9uZmlsZSAtY2ZfZGVzdGluYXRpb25kaXJlY3RvcnkgJENyZWF0ZURlc3REaXJlY3RvcnkgfQogICAgICAgICJtb3ZlZm9sZGVyIiB7IE1vdmVfZm9sZGVydG9mb2xkZXIgLXNvdXJjZWZvbGRlcnBhdGggJHNvdXJjZWZpbGUgLWRlc3RpbmF0aW9uZm9sZGVycGF0aCAkZGVzdGluYXRpb25maWxlIC1jcmVhdGVkZXN0ICRDcmVhdGVEZXN0RGlyZWN0b3J5IH0KICAgICAgICAicmVuYW1lYWZvbGRlciIgeyBSZW5hbWVfZmlsZSAtcmVuYW1lcGF0aCAkc291cmNlZmlsZSAtbmV3bmFtZSAkbmV3bmFtZSB9CiAgICAgICAgImRlbGV0ZWFmaWxlIiB7IERlbGV0ZV9maWxlIC1zb3VyY2VmaWxlcGF0aCAkc291cmNlZmlsZSB9CiAgICAgICAgImRlbGV0ZWZpbGVzIiB7IERlbGV0ZV9maWxlcyAtc291cmNlZmlsZXBhdGggJHNvdXJjZWZpbGUgLWNvbnRfZXJyb3IgJGNvbnRpbnVlb25lcnJvciB9CiAgICAgICAgImRlbGV0ZWFmb2xkZXIiIHsgRGVsZXRlX2ZvbGRlciAtc291cmNlZm9sZGVycGF0aCAkc291cmNlZmlsZSB9CiAgICAgICAgIkNyZWF0ZUZvbGRlciJ7Q3JlYXRlX0ZvbGRlcn0KICAgIH0KCn0KICAgICAgICAgCnRyeSB7CiAgICBTZWxlY3RfT3BlcmF0aW9uCn0KY2F0Y2ggeyB9CkZpbmFsbHkgeyBNYXBfbmV0d29ya2RyaXZlIC1BY3Rpb24gIlJlbW92ZSIgLURyaXZlICRnbG9iYWw6bmV3ZHJpdmUgfQoKCgoK","jsonSchema":{"definitions":{"Create_Dest_Directory":{"default":false,"title":"Create Destination Directory if doesn't Exist","type":"boolean"},"Over_write":{"default":false,"title":"Overwrite Existing File","type":"boolean"},"continue_on_error":{"default":false,"title":"Continue on error","type":"boolean"},"dest_file":{"title":"Destination file","type":"string"},"dest_folder":{"title":"Destination folder","type":"string"},"file_Modification":{"enum":["modifiedBefore","modifiedAfter","modifiedOn","modifiedBetween","modifiedOlderthanXdays","lastAccessedBefore","lastAccessedAfter","lastAccessedOn","lastAccessedBetween","createdOlderthanXdays"],"enumNames":["Modified Before","Modified After","Modified On","Modified Between","Modified Older than X days","Last Accessed Before","Last Accessed After","Last Accessed On","Last Accessed Between","Created Older than X days"],"title":"Choose file Modification","type":"string"},"include_Hidden_File":{"default":false,"title":"Include Hidden File","type":"boolean"},"include_ReadOnly_File":{"default":false,"title":"Include Read Only File","type":"boolean"},"include_System_File":{"default":false,"title":"Include System File","type":"boolean"},"include_sub_folder":{"default":false,"title":"Include Sub Folders","type":"boolean"},"network_password":{"title":"Password","type":"string"},"network_user_name":{"title":"User Name","type":"string"},"rename_as":{"title":"Rename As","type":"string"},"source_dest_path":{"default":"local","enum":["network","local"],"enumNames":["Network","Local"],"type":"string"},"source_file":{"title":"Source file","type":"string"},"source_folder":{"title":"Source folder","type":"string"}},"dependencies":{"fileAction":{"oneOf":[{"dependencies":{"destinationpath":{"oneOf":[{"properties":{"destinationpath":{"enum":["network"]},"password":{"title":"Password","type":"string"},"username":{"title":"User Name","type":"string"}}},{"properties":{"destinationpath":{"enum":["local"]}}}]},"fileModification":{"oneOf":[{"properties":{"fileModification":{"enum":["modifiedBefore","modifiedAfter","modifiedOn","lastAccessedBefore","lastAccessedAfter","lastAccessedOn"]},"modificationDate":{"format":"date","title":"From","type":"string"}},"required":["modificationDate"]},{"properties":{"fileModification":{"enum":["modifiedOlderthanXdays","createdOlderthanXdays"]},"modificationDays":{"title":"Day(s)","type":"number"}},"required":["modificationDays"]},{"properties":{"endDate":{"format":"date","title":"To","type":"string"},"fileModification":{"enum":["lastAccessedBetween","modifiedBetween"]},"startDate":{"format":"date","title":"From","type":"string"}},"required":["startDate","endDate"]}]},"sourcepath":{"oneOf":[{"properties":{"password":{"$ref":"#/definitions/network_password"},"sourcepath":{"enum":["network"]},"username":{"$ref":"#/definitions/network_user_name"}}},{"properties":{"sourcepath":{"enum":["local"]}}}]}},"properties":{"CreateDestDirectory":{"$ref":"#/definitions/Create_Dest_Directory"},"Overwrite":{"$ref":"#/definitions/Over_write"},"destinationfile":{"$ref":"#/definitions/dest_file"},"destinationpath":{"$ref":"#/definitions/source_dest_path","title":"Destination Path"},"fileAction":{"enum":["copyafile"]},"fileModification":{"$ref":"#/definitions/file_Modification"},"includeHiddenFile":{"$ref":"#/definitions/include_Hidden_File"},"includeReadOnlyFile":{"$ref":"#/definitions/include_ReadOnly_File"},"includeSystemFile":{"$ref":"#/definitions/include_System_File"},"sourcefile":{"$ref":"#/definitions/source_file"},"sourcepath":{"$ref":"#/definitions/source_dest_path","title":"Source Path"}}},{"dependencies":{"destinationpath":{"oneOf":[{"properties":{"destinationpath":{"enum":["network"]},"password":{"title":"Password","type":"string"},"username":{"title":"User Name","type":"string"}}},{"properties":{"destinationpath":{"enum":["local"]}}}]},"fileModification":{"oneOf":[{"properties":{"fileModification":{"enum":["modifiedBefore","modifiedAfter","modifiedOn","lastAccessedBefore","lastAccessedAfter","lastAccessedOn"]},"modificationDate":{"format":"date","title":"From","type":"string"}},"required":["modificationDate"]},{"properties":{"fileModification":{"enum":["modifiedOlderthanXdays","createdOlderthanXdays"]},"modificationDays":{"title":"Day(s)","type":"number"}},"required":["modificationDays"]},{"properties":{"endDate":{"format":"date","title":"To","type":"string"},"fileModification":{"enum":["lastAccessedBetween","modifiedBetween"]},"startDate":{"format":"date","title":"From","type":"string"}},"required":["startDate","endDate"]}]},"sourcepath":{"oneOf":[{"properties":{"password":{"$ref":"#/definitions/network_password"},"sourcepath":{"enum":["network"]},"username":{"$ref":"#/definitions/network_user_name"}}},{"properties":{"sourcepath":{"enum":["local"]}}}]}},"properties":{"CreateDestDirectory":{"$ref":"#/definitions/Create_Dest_Directory"},"Overwrite":{"$ref":"#/definitions/Over_write"},"continueonerror":{"$ref":"#/definitions/continue_on_error"},"destinationfile":{"$ref":"#/definitions/dest_folder"},"destinationpath":{"$ref":"#/definitions/source_dest_path","title":"Destination Path"},"fileAction":{"enum":["copyfilestoafolder"]},"fileModification":{"$ref":"#/definitions/file_Modification"},"includeHiddenFile":{"$ref":"#/definitions/include_Hidden_File"},"includeReadOnlyFile":{"$ref":"#/definitions/include_ReadOnly_File"},"includeSystemFile":{"$ref":"#/definitions/include_System_File"},"sourcefile":{"$ref":"#/definitions/source_file"},"sourcepath":{"$ref":"#/definitions/source_dest_path","title":"Source Path"}}},{"dependencies":{"destinationpath":{"oneOf":[{"properties":{"destinationpath":{"enum":["network"]},"password":{"title":"Password","type":"string"},"username":{"title":"User Name","type":"string"}}},{"properties":{"destinationpath":{"enum":["local"]}}}]},"fileModification":{"oneOf":[{"properties":{"fileModification":{"enum":["modifiedBefore","modifiedAfter","modifiedOn","lastAccessedBefore","lastAccessedAfter","lastAccessedOn"]},"modificationDate":{"format":"date","title":"From","type":"string"}},"required":["modificationDate"]},{"properties":{"fileModification":{"enum":["modifiedOlderthanXdays","createdOlderthanXdays"]},"modificationDays":{"title":"Day(s)","type":"number"}},"required":["modificationDays"]},{"properties":{"endDate":{"format":"date","title":"To","type":"string"},"fileModification":{"enum":["lastAccessedBetween","modifiedBetween"]},"startDate":{"format":"date","title":"From","type":"string"}},"required":["startDate","endDate"]}]},"sourcepath":{"oneOf":[{"properties":{"password":{"$ref":"#/definitions/network_password"},"sourcepath":{"enum":["network"]},"username":{"$ref":"#/definitions/network_user_name"}}},{"properties":{"sourcepath":{"enum":["local"]}}}]}},"properties":{"CreateDestDirectory":{"$ref":"#/definitions/Create_Dest_Directory"},"Overwrite":{"$ref":"#/definitions/Over_write"},"continueonerror":{"$ref":"#/definitions/continue_on_error"},"destinationfile":{"$ref":"#/definitions/dest_folder"},"destinationpath":{"$ref":"#/definitions/source_dest_path","title":"Destination Path"},"fileAction":{"enum":["copyafolder"]},"fileModification":{"$ref":"#/definitions/file_Modification"},"includeHiddenFile":{"$ref":"#/definitions/include_Hidden_File"},"includeReadOnlyFile":{"$ref":"#/definitions/include_ReadOnly_File"},"includeSystemFile":{"$ref":"#/definitions/include_System_File"},"includesub":{"$ref":"#/definitions/include_sub_folder"},"sourcefile":{"$ref":"#/definitions/source_folder"},"sourcepath":{"$ref":"#/definitions/source_dest_path","title":"Source Path"}}},{"dependencies":{"fileModification":{"oneOf":[{"properties":{"fileModification":{"enum":["modifiedBefore","modifiedAfter","modifiedOn","lastAccessedBefore","lastAccessedAfter","lastAccessedOn"]},"modificationDate":{"format":"date","title":"From","type":"string"}},"required":["modificationDate"]},{"properties":{"fileModification":{"enum":["modifiedOlderthanXdays","createdOlderthanXdays"]},"modificationDays":{"title":"Day(s)","type":"number"}},"required":["modificationDays"]},{"properties":{"endDate":{"format":"date","title":"To","type":"string"},"fileModification":{"enum":["lastAccessedBetween","modifiedBetween"]},"startDate":{"format":"date","title":"From","type":"string"}},"required":["startDate","endDate"]}]},"sourcepath":{"oneOf":[{"properties":{"password":{"$ref":"#/definitions/network_password"},"sourcepath":{"enum":["network"]},"username":{"$ref":"#/definitions/network_user_name"}}},{"properties":{"sourcepath":{"enum":["local"]}}}]}},"properties":{"fileAction":{"enum":["renameafile"]},"fileModification":{"$ref":"#/definitions/file_Modification"},"newname":{"$ref":"#/definitions/rename_as"},"sourcefile":{"$ref":"#/definitions/source_file"},"sourcepath":{"$ref":"#/definitions/source_dest_path","title":"Source Path"}}},{"dependencies":{"destinationpath":{"oneOf":[{"properties":{"destinationpath":{"enum":["network"]},"password":{"title":"Password","type":"string"},"username":{"title":"User Name","type":"string"}}},{"properties":{"destinationpath":{"enum":["local"]}}}]},"fileModification":{"oneOf":[{"properties":{"fileModification":{"enum":["modifiedBefore","modifiedAfter","modifiedOn","lastAccessedBefore","lastAccessedAfter","lastAccessedOn"]},"modificationDate":{"format":"date","title":"From","type":"string"}},"required":["modificationDate"]},{"properties":{"fileModification":{"enum":["modifiedOlderthanXdays","createdOlderthanXdays"]},"modificationDays":{"title":"Day(s)","type":"number"}},"required":["modificationDays"]},{"properties":{"endDate":{"format":"date","title":"To","type":"string"},"fileModification":{"enum":["lastAccessedBetween","modifiedBetween"]},"startDate":{"format":"date","title":"From","type":"string"}},"required":["startDate","endDate"]}]},"sourcepath":{"oneOf":[{"properties":{"password":{"$ref":"#/definitions/network_password"},"sourcepath":{"enum":["network"]},"username":{"$ref":"#/definitions/network_user_name"}}},{"properties":{"sourcepath":{"enum":["local"]}}}]}},"properties":{"CreateDestDirectory":{"$ref":"#/definitions/Create_Dest_Directory"},"Overwrite":{"$ref":"#/definitions/Over_write"},"continueonerror":{"$ref":"#/definitions/continue_on_error"},"destinationfile":{"$ref":"#/definitions/dest_file"},"destinationpath":{"$ref":"#/definitions/source_dest_path","title":"Destination Path"},"fileAction":{"enum":["moveafile"]},"fileModification":{"$ref":"#/definitions/file_Modification"},"includeHiddenFile":{"$ref":"#/definitions/include_Hidden_File"},"includeReadOnlyFile":{"$ref":"#/definitions/include_ReadOnly_File"},"includeSystemFile":{"$ref":"#/definitions/include_System_File"},"sourcefile":{"$ref":"#/definitions/source_file"},"sourcepath":{"$ref":"#/definitions/source_dest_path","title":"Source Path"}}},{"dependencies":{"fileModification":{"oneOf":[{"properties":{"fileModification":{"enum":["modifiedBefore","modifiedAfter","modifiedOn","lastAccessedBefore","lastAccessedAfter","lastAccessedOn"]},"modificationDate":{"format":"date","title":"From","type":"string"}},"required":["modificationDate"]},{"properties":{"fileModification":{"enum":["modifiedOlderthanXdays","createdOlderthanXdays"]},"modificationDays":{"title":"Day(s)","type":"number"}},"required":["modificationDays"]},{"properties":{"endDate":{"format":"date","title":"To","type":"string"},"fileModification":{"enum":["lastAccessedBetween","modifiedBetween"]},"startDate":{"format":"date","title":"From","type":"string"}},"required":["startDate","endDate"]}]},"sourcepath":{"oneOf":[{"properties":{"password":{"$ref":"#/definitions/network_password"},"sourcepath":{"enum":["network"]},"username":{"$ref":"#/definitions/network_user_name"}}},{"properties":{"sourcepath":{"enum":["local"]}}}]}},"properties":{"fileAction":{"enum":["renameafolder"]},"fileModification":{"$ref":"#/definitions/file_Modification"},"newname":{"$ref":"#/definitions/rename_as"},"sourcefile":{"$ref":"#/definitions/source_folder"},"sourcepath":{"$ref":"#/definitions/source_dest_path","title":"Source Path"}}},{"dependencies":{"destinationpath":{"oneOf":[{"properties":{"destinationpath":{"enum":["network"]},"password":{"title":"Password","type":"string"},"username":{"title":"User Name","type":"string"}}},{"properties":{"destinationpath":{"enum":["local"]}}}]},"fileModification":{"oneOf":[{"properties":{"fileModification":{"enum":["modifiedBefore","modifiedAfter","modifiedOn","lastAccessedBefore","lastAccessedAfter","lastAccessedOn"]},"modificationDate":{"format":"date","title":"From","type":"string"}},"required":["modificationDate"]},{"properties":{"fileModification":{"enum":["modifiedOlderthanXdays","createdOlderthanXdays"]},"modificationDays":{"title":"Day(s)","type":"number"}},"required":["modificationDays"]},{"properties":{"endDate":{"format":"date","title":"To","type":"string"},"fileModification":{"enum":["lastAccessedBetween","modifiedBetween"]},"startDate":{"format":"date","title":"From","type":"string"}},"required":["startDate","endDate"]}]},"sourcepath":{"oneOf":[{"properties":{"password":{"$ref":"#/definitions/network_password"},"sourcepath":{"enum":["network"]},"username":{"$ref":"#/definitions/network_user_name"}}},{"properties":{"sourcepath":{"enum":["local"]}}}]}},"properties":{"CreateDestDirectory":{"$ref":"#/definitions/Create_Dest_Directory"},"Overwrite":{"$ref":"#/definitions/Over_write"},"continueonerror":{"$ref":"#/definitions/continue_on_error"},"destinationfile":{"$ref":"#/definitions/dest_folder"},"destinationpath":{"$ref":"#/definitions/source_dest_path","title":"Destination Path"},"fileAction":{"enum":["movefolder"]},"fileModification":{"$ref":"#/definitions/file_Modification"},"includeHiddenFile":{"$ref":"#/definitions/include_Hidden_File"},"includeReadOnlyFile":{"$ref":"#/definitions/include_ReadOnly_File"},"includeSystemFile":{"$ref":"#/definitions/include_System_File"},"sourcefile":{"$ref":"#/definitions/source_folder"},"sourcepath":{"$ref":"#/definitions/source_dest_path","title":"Source Path"}}},{"dependencies":{"fileModification":{"oneOf":[{"properties":{"fileModification":{"enum":["modifiedBefore","modifiedAfter","modifiedOn","lastAccessedBefore","lastAccessedAfter","lastAccessedOn"]},"modificationDate":{"format":"date","title":"From","type":"string"}},"required":["modificationDate"]},{"properties":{"fileModification":{"enum":["modifiedOlderthanXdays","createdOlderthanXdays"]},"modificationDays":{"title":"Day(s)","type":"number"}},"required":["modificationDays"]},{"properties":{"endDate":{"format":"date","title":"To","type":"string"},"fileModification":{"enum":["lastAccessedBetween","modifiedBetween"]},"startDate":{"format":"date","title":"From","type":"string"}},"required":["startDate","endDate"]}]},"sourcepath":{"oneOf":[{"properties":{"password":{"$ref":"#/definitions/network_password"},"sourcepath":{"enum":["network"]},"username":{"$ref":"#/definitions/network_user_name"}}},{"properties":{"sourcepath":{"enum":["local"]}}}]}},"properties":{"fileAction":{"enum":["deleteafile"]},"fileModification":{"$ref":"#/definitions/file_Modification"},"includeHiddenFile":{"$ref":"#/definitions/include_Hidden_File"},"includeReadOnlyFile":{"$ref":"#/definitions/include_ReadOnly_File"},"includeSystemFile":{"$ref":"#/definitions/include_System_File"},"sourcefile":{"$ref":"#/definitions/source_file"},"sourcepath":{"$ref":"#/definitions/source_dest_path","title":"Source Path"}}},{"dependencies":{"fileModification":{"oneOf":[{"properties":{"fileModification":{"enum":["modifiedBefore","modifiedAfter","modifiedOn","lastAccessedBefore","lastAccessedAfter","lastAccessedOn"]},"modificationDate":{"format":"date","title":"From","type":"string"}},"required":["modificationDate"]},{"properties":{"fileModification":{"enum":["modifiedOlderthanXdays","createdOlderthanXdays"]},"modificationDays":{"title":"Day(s)","type":"number"}},"required":["modificationDays"]},{"properties":{"endDate":{"format":"date","title":"To","type":"string"},"fileModification":{"enum":["lastAccessedBetween","modifiedBetween"]},"startDate":{"format":"date","title":"From","type":"string"}},"required":["startDate","endDate"]}]},"sourcepath":{"oneOf":[{"properties":{"password":{"$ref":"#/definitions/network_password"},"sourcepath":{"enum":["network"]},"username":{"$ref":"#/definitions/network_user_name"}}},{"properties":{"sourcepath":{"enum":["local"]}}}]}},"properties":{"continueonerror":{"$ref":"#/definitions/continue_on_error"},"fileAction":{"enum":["deletefiles"]},"fileModification":{"$ref":"#/definitions/file_Modification"},"includeHiddenFile":{"$ref":"#/definitions/include_Hidden_File"},"includeReadOnlyFile":{"$ref":"#/definitions/include_ReadOnly_File"},"includeSystemFile":{"$ref":"#/definitions/include_System_File"},"sourcefile":{"$ref":"#/definitions/source_file"},"sourcepath":{"$ref":"#/definitions/source_dest_path","title":"Source Path"}}},{"dependencies":{"fileModification":{"oneOf":[{"properties":{"fileModification":{"enum":["modifiedBefore","modifiedAfter","modifiedOn","lastAccessedBefore","lastAccessedAfter","lastAccessedOn"]},"modificationDate":{"format":"date","title":"From","type":"string"}},"required":["modificationDate"]},{"properties":{"fileModification":{"enum":["modifiedOlderthanXdays","createdOlderthanXdays"]},"modificationDays":{"title":"Day(s)","type":"number"}},"required":["modificationDays"]},{"properties":{"endDate":{"format":"date","title":"To","type":"string"},"fileModification":{"enum":["lastAccessedBetween","modifiedBetween"]},"startDate":{"format":"date","title":"From","type":"string"}},"required":["startDate","endDate"]}]},"sourcepath":{"oneOf":[{"properties":{"password":{"$ref":"#/definitions/network_password"},"sourcepath":{"enum":["network"]},"username":{"$ref":"#/definitions/network_user_name"}}},{"properties":{"sourcepath":{"enum":["local"]}}}]}},"properties":{"fileAction":{"enum":["deleteafolder"]},"fileModification":{"$ref":"#/definitions/file_Modification"},"includeHiddenFile":{"$ref":"#/definitions/include_Hidden_File"},"includeReadOnlyFile":{"$ref":"#/definitions/include_ReadOnly_File"},"includeSystemFile":{"$ref":"#/definitions/include_System_File"},"includesub":{"$ref":"#/definitions/include_sub_folder"},"sourcefile":{"$ref":"#/definitions/source_folder"},"sourcepath":{"$ref":"#/definitions/source_dest_path","title":"Source Path"}}},{"dependencies":{"sourcepath":{"oneOf":[{"properties":{"password":{"$ref":"#/definitions/network_password"},"sourcepath":{"enum":["network"]},"username":{"$ref":"#/definitions/network_user_name"}}},{"properties":{"sourcepath":{"enum":["local"]}}}]}},"properties":{"fileAction":{"enum":["createfolder"]},"sourcefile":{"$ref":"#/definitions/source_folder"},"sourcepath":{"$ref":"#/definitions/source_dest_path","title":"Source Path"}}}]}},"properties":{"fileAction":{"default":"copyafile","enum":["copyafile","copyfilestoafolder","copyafolder","renameafile","moveafile","renameafolder","movefolder","deleteafile","deletefiles","deleteafolder","createfolder"],"enumNames":["Copy a file","Copy file(s) to a folder","Copya folder","Rename a file","Move a file","Rename a folder","Move folder","Delete a file","Delete files","Delete a folder","Create Folder"],"title":"File Action Type","type":"string"}},"type":"object"},"uiSchema":{"CreateDestDirectory":{"classNames":"col-sm-4","ui:autofocus":true},"Overwrite":{"classNames":"col-sm-4","ui:autofocus":true},"continueonerror":{"classNames":"col-sm-4","ui:autofocus":true},"destinationfile":{"classNames":"col-sm-9","ui:autofocus":true,"ui:help":"Example : Local Path = C:\\folder\\... Network Path = \\\\computername\\\\folder\\"},"destinationpath":{"classNames":"col-sm-3","ui:autofocus":true,"ui:placeholder":"Select path"},"endDate":{"classNames":"col-sm-3","ui:autofocus":true},"fileAction":{"classNames":"col-sm-12","ui:autofocus":true,"ui:placeholder":"Select Operation"},"fileModification":{"classNames":"col-sm-6 col-sm-offset-right-6","ui:autofocus":true,"ui:placeholder":"Select"},"includeHiddenFile":{"classNames":"col-sm-4","ui:autofocus":true},"includeReadOnlyFile":{"classNames":"col-sm-4","ui:autofocus":true},"includeSystemFile":{"classNames":"col-sm-4"},"includesub":{"classNames":"col-sm-4","ui:autofocus":true},"modificationDate":{"classNames":"col-sm-4","ui:autofocus":true},"modificationDays":{"classNames":"col-sm-4","ui:autofocus":true},"newname":{"classNames":"col-sm-9 col-sm-offset-3","ui:autofocus":true},"password":{"classNames":"col-sm-4","ui:widget":"password"},"sourcefile":{"classNames":"col-sm-9","ui:autofocus":true,"ui:help":"Example : Local Path = C:\\folder\\... Network Path = \\\\computername\\\\folder\\... and for multiple file \u0026 folder separate it by comma(,)"},"sourcepath":{"classNames":"col-sm-3","ui:autofocus":true,"ui:placeholder":"Select path"},"startDate":{"classNames":"col-sm-3","ui:autofocus":true},"ui:order":["fileAction","sourcepath","destinationpath","username","password","sourcefile","destinationfile","newname","includesub","includeSystemFile","includeReadOnlyFile","includeHiddenFile","Overwrite","continueonerror","CreateDestDirectory","fileModification","modificationDate","modificationDays","startDate","endDate"],"username":{"classNames":"col-sm-5","validationSchema":{"notEmpty":"username","required":["password"],"type":"requiredFieldsIfNotEmpty"}}},"isHDScript":false}