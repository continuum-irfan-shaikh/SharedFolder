{"id":"9a1d382b-882d-11e9-a929-00155d130b89","partnerId":"00000000-0000-0000-0000-000000000000","category":["HD Automation"],"description":"O365 password reset","engine":"powershell","engineMaxVersion":5,"expectedExecutionTimeSec":300,"failureMessage":"Executed with errors","successMessage":"Executed Successfully","internal":false,"name":"PasswordReset","tags":["Windows 7","Windows 10"],"sequence":true,"content":"Q2xlYXItSG9zdA0KDQo8Iw0KW3N0cmluZ10kVXNlcklEID0gImphbmV0QEluZmluaXRlTG9jYWwub25taWNyb3NvZnQuY29tIg0KW3N0cmluZ10kTmV3UGFzc3dvcmQgPSAiamFuIzEyMzQ2Ig0KDQokQWRtaW5JRCA9ICJIZWxwZGVza0BJbmZpbml0ZUxvY2FsLm9ubWljcm9zb2Z0LmNvbSINCiRBZG1pblBhc3N3b3JkID0gIkhvbmV5amFpbjE5ODIiDQojPg0KDQokQWRtaW5QYXNzd29yZCA9ICRBZG1pblBhc3N3b3JkIHwgQ29udmVydFRvLVNlY3VyZVN0cmluZyAtYXNQbGFpblRleHQgLUZvcmNlIA0KJEFkbWluQ3JlZGVudGlhbCA9IE5ldy1PYmplY3QgU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5QU0NyZWRlbnRpYWwoJEFkbWluSUQsJEFkbWluUGFzc3dvcmQpIA0KDQokdGltZW91dFNlY29uZHMgPSA2MDANCg0KDQokU3VjY2Vzc09iaiA9IE5ldy1PYmplY3QgUFNPYmplY3QNCg0KZnVuY3Rpb24gRXNjYXBlLUpTT05TdHJpbmcoJHN0cil7DQogICAgaWYgKCRzdHIgLWVxICRudWxsKSB7cmV0dXJuICIifQ0KICAgICAgICAgJHN0ciA9ICRzdHIuVG9TdHJpbmcoKS5SZXBsYWNlKCciJywnXCInKS5SZXBsYWNlKCdcJywnXFwnKS5SZXBsYWNlKCJgbiIsJ1xuJykuUmVwbGFjZSgiYHIiLCdccicpLlJlcGxhY2UoImB0IiwnXHQnKQ0KICAgIHJldHVybiAkc3RyOw0KfQ0KDQoNCmZ1bmN0aW9uIENvbnZlcnRUby1KU09OUDIoJG1heERlcHRoID0gMTAsJGZvcmNlQXJyYXkgPSAkZmFsc2UpIHsNCmJlZ2luIHsNCiRkYXRhID0gQCgpDQp9DQpwcm9jZXNzew0KJGRhdGEgKz0gJF8NCn0NCmVuZHsNCmlmICgkZGF0YS5sZW5ndGggLWVxIDEgLWFuZCAkZm9yY2VBcnJheSAtZXEgJGZhbHNlKSB7DQokdmFsdWUgPSAkZGF0YVswXQ0KfSBlbHNlIHsgDQokdmFsdWUgPSAkZGF0YQ0KfQ0KDQoNCmlmICgkdmFsdWUgLWVxICRudWxsKSB7DQpyZXR1cm4gIm51bGwiDQp9DQoNCg0KDQoNCiRkYXRhVHlwZSA9ICR2YWx1ZS5HZXRUeXBlKCkuTmFtZQ0Kc3dpdGNoIC1yZWdleCAoJGRhdGFUeXBlKSB7DQogICAgICAgICAgICAnU3RyaW5nJyAgew0KcmV0dXJuICAiYCJ7MH1gIiIgLWYgKEVzY2FwZS1KU09OU3RyaW5nICR2YWx1ZSApDQp9DQogICAgICAgICAgICAnKFN5c3RlbVwuKT9EYXRlVGltZScgIHtyZXR1cm4gICJgInswOnl5eXktTU0tZGR9VHswOkhIOm1tOnNzfWAiIiAtZiAkdmFsdWV9DQogICAgICAgICAgICAnSW50MzJ8RG91YmxlJyB7cmV0dXJuICAiJHZhbHVlIn0NCidCb29sZWFuJyB7cmV0dXJuICAiJHZhbHVlIi5Ub0xvd2VyKCl9DQogICAgICAgICAgICAnKFN5c3RlbVwuKT9PYmplY3RcW1xdJyB7ICMgYXJyYXkNCmlmICgkbWF4RGVwdGggLWxlIDApe3JldHVybiAiYCIkdmFsdWVgIiJ9DQokanNvblJlc3VsdCA9ICcnDQpmb3JlYWNoKCRlbGVtIGluICR2YWx1ZSl7DQojaWYgKCRlbGVtIC1lcSAkbnVsbCkge2NvbnRpbnVlfQ0KaWYgKCRqc29uUmVzdWx0Lkxlbmd0aCAtZ3QgMCkgeyRqc29uUmVzdWx0ICs9JywgJ30gDQokanNvblJlc3VsdCArPSAoJGVsZW0gfCBDb252ZXJ0VG8tSlNPTlAyIC1tYXhEZXB0aCAoJG1heERlcHRoIC0xKSkNCn0NCnJldHVybiAiWyIgKyAkanNvblJlc3VsdCArICJdIg0KICAgICAgICAgICAgfQ0KJyhTeXN0ZW1cLik/SGFzaHRhYmxlJyB7ICMgaGFzaHRhYmxlDQokanNvblJlc3VsdCA9ICcnDQpmb3JlYWNoKCRrZXkgaW4gJHZhbHVlLktleXMpew0KaWYgKCRqc29uUmVzdWx0Lkxlbmd0aCAtZ3QgMCkgeyRqc29uUmVzdWx0ICs9JywgJ30NCiRqc29uUmVzdWx0ICs9IA0KQCINCiJ7MH0iOiB7MX0NCiJAIC1mICRrZXkgLCAoJHZhbHVlWyRrZXldIHwgQ29udmVydFRvLUpTT05QMiAtbWF4RGVwdGggKCRtYXhEZXB0aCAtMSkgKQ0KfQ0KcmV0dXJuICJ7IiArICRqc29uUmVzdWx0ICsgIn0iDQp9DQogICAgICAgICAgICBkZWZhdWx0IHsgI29iamVjdA0KaWYgKCRtYXhEZXB0aCAtbGUgMCl7cmV0dXJuICAiYCJ7MH1gIiIgLWYgKEVzY2FwZS1KU09OU3RyaW5nICR2YWx1ZSl9DQpyZXR1cm4gInsiICsNCigoJHZhbHVlIHwgR2V0LU1lbWJlciAtTWVtYmVyVHlwZSAqcHJvcGVydHkgfCAlIHsgDQpAIg0KInswfSI6IHsxfQ0KIkAgLWYgJF8uTmFtZSAsICgkdmFsdWUuKCRfLk5hbWUpIHwgQ29udmVydFRvLUpTT05QMiAtbWF4RGVwdGggKCRtYXhEZXB0aCAtMSkgKSANCn0pIC1qb2luICcsICcpICsgIn0iDQogICAgfQ0KfQ0KfQ0KfQ0KDQpGdW5jdGlvbiBDaGVjay1QcmVDb25kaXRpb257ICAgDQogICANCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICAgIA0KICAgICMgQ2hlY2sgaWYgaXQgaGFzIHRoZSBjb3JyZWN0IFBTIFZlcnNpb24NCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCiAgICBpZigtTk9UKCRQU1ZlcnNpb25UYWJsZS5QU1ZlcnNpb24uTWFqb3IgLWdlIDIpKXsgICANCiAgICAgICAgICAgDQogICAgICAgcmV0dXJuICJFcnJvcjpQb3dlcnNoZWxsIHZlcnNpb24gYmVsb3cgMi4wIGlzIG5vdCBzdXBwb3J0ZWQsIFBsZWFzZSB1cGFkZXQgcG93ZXJzaGVsbCINCg0KICAgIH1lbHNleyB9DQogICAgDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgIyBWZXJpZnkgd2hldGhlciBNU29ubGluZSBpcyBpbnN0YWxsZWQNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KICAgIGlmKC1OT1QoR2V0LU1vZHVsZSAtTGlzdEF2YWlsYWJsZSAtTmFtZSAiTXNvbmxpbmUiKSl7DQoNCiAgICAgICBEb3dubG9hZFBvd2VyU2hlbGxNb2R1bGUgLU1vZHVsZU5hbWUgJ01TT25saW5lJyAkRmFsc2UNCiAgICAgIA0KICAgICAgfWVsc2V7IH0gICAgICAgIA0KICAgICAgDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICANCiAgICAjIFZlcmlmeSB3aGV0aGVyIEF6dXJlQUQgaXMgaW5zdGFsbGVkDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCiAgICAgaWYoLU5PVChHZXQtTW9kdWxlIC1MaXN0QXZhaWxhYmxlIC1OYW1lICJBenVyZUFEIikpew0KDQogICAgICAgRG93bmxvYWRQb3dlclNoZWxsTW9kdWxlIC1Nb2R1bGVOYW1lICdBenVyZUFEJyAkRmFsc2UNCiAgICAgIA0KICAgICAgfWVsc2V7ICB9DQogICAgDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICANCiAgICAjIFZlcmlmeSB3aGV0aGVyIEF6dXJlclJNLnByb2ZpbGUgaXMgaW5zdGFsbGVkDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgDQogICAgIGlmKC1OT1QoR2V0LU1vZHVsZSAtTGlzdEF2YWlsYWJsZSAtTmFtZSAiQXp1cmVSTS5wcm9maWxlIikpew0KDQogICAgICAgRG93bmxvYWRQb3dlclNoZWxsTW9kdWxlIC1Nb2R1bGVOYW1lICdBenVyZVJNLnByb2ZpbGUnICRGYWxzZQ0KICAgICAgDQogICAgICB9ZWxzZXsgfQ0KICAgICAgICAgDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjICAgDQogICAgIyBDaGVjayBBZG1pbiBJbnB1dHMNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgIA0KDQogICAgaWYoKFtzdHJpbmddOjpJc051bGxPckVtcHR5KCRBZG1pbklEKSkgLWFuZCAtbm90KFtzdHJpbmddOjpJc051bGxPckVtcHR5KCRBZG1pblBhc3N3b3JkKSkpDQogICAgeyAgICAgICANCiAgICAgICAgcmV0dXJuICJFcnJvcjpQbGVhc2UgcHJvdmlkZSBhZG1pbiBsb2dpbiBpZCIgDQoNCiAgICB9ZWxzZWlmKC1ub3QoW3N0cmluZ106OklzTnVsbE9yRW1wdHkoJEFkbWluSUQpKSAtYW5kIChbc3RyaW5nXTo6SXNOdWxsT3JFbXB0eSgkQWRtaW5QYXNzd29yZCkpKXsNCg0KICAgICAgICByZXR1cm4gIkVycm9yOlBsZWFzZSBwcm92aWRlIGFkbWluIGxvZ2luIHBhc3N3b3JkIiANCg0KICAgIH1lbHNlaWYoKFtzdHJpbmddOjpJc051bGxPckVtcHR5KCRBZG1pbklEKSkgLWFuZCAoW3N0cmluZ106OklzTnVsbE9yRW1wdHkoJEFkbWluUGFzc3dvcmQpKSl7DQoNCiAgICAgICAgcmV0dXJuICJFcnJvcjpQbGVhc2UgcHJvdmlkZSBhZG1pbiBsb2dpbiBpZCBhbmQgcGFzc3dvcmQiDQogIA0KICAgIH0NCg0KICAgICAgICANCiAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyAgIA0KICAgICMgSWYgTUZBIHtNdWx0aSBGYWN0b3IgQXV0aGVudGljYXRpb259IGlzIGVuYWJsZWQNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgIA0KICAgIA0KICAgIHRyeXsgICAgDQogICAgICAgICRudWxsID0gQ29ubmVjdC1BenVyZVJtQWNjb3VudCAtQ3JlZGVudGlhbCAkQWRtaW5DcmVkZW50aWFsIC1FcnJvckFjdGlvbsKgU3RvcCAgICANCiAgICAgICAgDQogICAgIH1jYXRjaHsNCiAgICAgICAgICANCiAgICAgICAgICAgICAgIA0KICAgICAgICAgaWYoKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKS5Ub1N0cmluZygpLkNvbnRhaW5zKCJEdWUgdG8gYSBjb25maWd1cmF0aW9uIGNoYW5nZSBtYWRlIGJ5IHlvdXIgYWRtaW5pc3RyYXRvciIpKXsNCiAgICAgICAgICAgIA0KICAgICAgICAgICByZXR1cm4gIkVycm9yOkJhZCB1c2VybmFtZSBvciBwYXNzd29yZCINCiAgICAgICAgICAgIA0KICAgICAgICAgfWVsc2V7DQoNCiAgICAgICAgICAgIHJldHVybiAiRXJyb3I6JCgkXy5FeGNlcHRpb24uTWVzc2FnZSkiDQogICAgICAgICB9DQogICAgICAgIA0KICAgICB9IA0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgICANCiAgICAjIENoZWNrIGlmIE8zNjUgQWRtaW4gY3JlZGVudGlhbHMgd29yayAgDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyANCg0KICAgIHRyeQ0KICAgIHsgICANCiAgICAgICAkbnVsbCA9IENvbm5lY3QtTXNvbFNlcnZpY2UgLUNyZWRlbnRpYWwgJEFkbWluQ3JlZGVudGlhbCAtRXJyb3JBY3Rpb27CoFN0b3ANCiAgICAgICAgJHJvbGUgPSBHZXQtTXNvbFJvbGUgLVJvbGVOYW1lICJIZWxwZGVzayBBZG1pbmlzdHJhdG9yIiAtRXJyb3JBY3Rpb27CoFN0b3ANCg0KICAgICAgICBpZihHZXQtTXNvbFJvbGVNZW1iZXIgLVJvbGVPYmplY3RJZCAkcm9sZS5PYmplY3RJZCB8IFdoZXJlLU9iamVjdCB7JF8uRW1haWxBZGRyZXNzIC1lcSAkQWRtaW5JRCB9KXsNCiAgICAgICAgICANCiAgICAgICAgfWVsc2V7DQogICAgICAgICAgcmV0dXJuICJFcnJvcjpBZG1pbiBjcmVkZW50aWFscyBwcm92aWRlZCBhcmUgaW5jb3JyZWN0IGFuZCBuZWVkIHVwZGF0ZWQiDQogICAgICAgIH0NCg0KICAgIH1jYXRjaHsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgIHJldHVybiAiRXJyb3I6JCgkXy5FeGNlcHRpb24uTWVzc2FnZSkiIA0KICAgIA0KICAgIH0gICANCiAgICANCg0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyAgICANCiAgICAjIENoZWNrIGlmIGl0IGNhbiByZWFjaCBPMzY1DQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQogICAgaWYoLU5PVChHZXQtTXNvbERvbWFpbiAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSkpew0KICAgDQogICAgICAgcmV0dXJuICJFcnJvcjpPZmZpY2UgMzY1IHNlcnZpY2UgaXMgbm90IHJlYWNoYWJsZSINCg0KICAgICB9ZWxzZXsgfQ0KICAgDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgIyBpZiB1c2VyIGV4aXN0cyANCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KICAgIGlmKChbc3RyaW5nXTo6SXNOdWxsT3JFbXB0eSgkVXNlcklEKSkgLWFuZCAtbm90KFtzdHJpbmddOjpJc051bGxPckVtcHR5KCROZXdQYXNzd29yZCkpKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuICJFcnJvcjpQbGVhc2UgcHJvdmlkZSB1c2VyIG5hbWUiDQoNCiAgICB9ZWxzZWlmKC1ub3QoW3N0cmluZ106OklzTnVsbE9yRW1wdHkoJFVzZXJJRCkpIC1hbmQgKFtzdHJpbmddOjpJc051bGxPckVtcHR5KCROZXdQYXNzd29yZCkpKXsNCiAgICAgICAgICAgIA0KICAgICAgICByZXR1cm4gIkVycm9yOlBsZWFzZSBwcm92aWRlIG5ldyBwYXNzd29yZCIgDQoNCiAgICB9ZWxzZWlmKChbc3RyaW5nXTo6SXNOdWxsT3JFbXB0eSgkVXNlcklEKSkgLWFuZCAoW3N0cmluZ106OklzTnVsbE9yRW1wdHkoJE5ld1Bhc3N3b3JkKSkpew0KICAgICAgICANCiAgICAgICAgcmV0dXJuICJFcnJvcjpQbGVhc2UgcHJvdmlkZSB1c2VyIG5hbWUgYW5kIG5ldyBwYXNzd29yZCINCiAgICB9DQoNCiAgICBpZigkTmV3UGFzc3dvcmQuVG9DaGFyQXJyYXkoKS5MZW5ndGggLWx0IDgpew0KICAgICAgIHJldHVybiAiRXJyb3I6VXNlciBwYXNzd29yZCBzaG91bGQgYmUgYXQgbGVhc3Qgb2YgOCBjaGFyYWN0ZXJzIiANCiAgICB9DQogICANCiAgICA8IyBpZihHZXQtTXNvbFVzZXIgfCBXaGVyZS1PYmplY3QgeyRfLlVzZXJQcmluY2lwYWxOYW1lIC1lcSAkVXNlcklEIH0pew0KICAgICAgICAgICAgIA0KICAgICAgICAkQWxsTGljZW5zZXMgPSBHZXQtTXNvbFVzZXIgfCBXaGVyZS1PYmplY3QgeyRfLlVzZXJQcmluY2lwYWxOYW1lIC1tYXRjaCAkVXNlcklEIH0gfCBzZWxlY3QgTGljZW5zZXMgfCBPdXQtRGVmYXVsdA0KDQogICAgICAgICRTdWNjZXNzT2JqIHwgQWRkLU1lbWJlciBOb3RlcHJvcGVydHkgLU5hbWUgQWxsTGljZW5zZXMgLXZhbHVlICAkQWxsTGljZW5zZXMNCiAgICAgICAgIA0KICAgIH1lbHNleyAgICAgICAgDQogICAgIA0KICAgICAgaWYoKEdldC1Nc29sVXNlciB8IFdoZXJlLU9iamVjdCB7JF8uVXNlclByaW5jaXBhbE5hbWUgLWxpa2UgICQoJFVzZXJJRC5Ub0NoYXJBcnJheSgwLDEpKSArJyonIH0pIC1lcSAkbnVsbCl7DQogICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuICJFcnJvcjpVc2VyIG5vdCBmb3VuZCAsTm8gVXNlciBmb3VuZCBzdGFydGluZyB3aXRoICQoKCRVc2VySUQuVG9DaGFyQXJyYXkoMCwxKSlbMF0uVG9TdHJpbmcoKS5Ub1VwcGVyKCkpIiAgICAgICAgICANCg0KICAgICAgIH1lbHNlew0KICAgICAgICAgICAgDQogICAgICAgICAgICAgcmV0dXJuICJFcnJvcjE6VXNlciBub3QgZm91bmQsIFVzZXJzIGZvdW5kIHN0YXJ0aW5nIHdpdGggJCgoJFVzZXJJRC5Ub0NoYXJBcnJheSgwLDEpKVswXS5Ub1N0cmluZygpLlRvVXBwZXIoKSkiICAgICAgICAgIA0KICAgICAgICAgICAgIA0KICAgICAgICAgICAgPCMgICRrID0gU3RhcnQtSm9iIC1TY3JpcHRCbG9jayB7DQoNCiAgICAgICAgICAgICAgICAgICR1c2VyMiA9IEdldC1Nc29sVXNlciB8IFdoZXJlLU9iamVjdCB7JF8uVXNlclByaW5jaXBhbE5hbWUgLWxpa2UgICQoJFVzZXJJRC5Ub0NoYXJBcnJheSgwLDEpKSArJyonIH0NCiAgICAgICAgICAgICAgICAgICR1c2VyMiB8IHNlbGVjdCBEaXNwbGF5TmFtZSAsIFVzZXJQcmluY2lwYWxOYW1lIHwgIE91dC1EZWZhdWx0IA0KICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgV2FpdC1Kb2IgJGsgLVRpbWVvdXQgJHRpbWVvdXRTZWNvbmRzIHwgb3V0LW51bGwNCg0KICAgICAgICAgICAgICAgIGlmICgkay5TdGF0ZSAtZXEgIkNvbXBsZXRlZCIpeyANCg0KICAgICAgICAgICAgICAgICAgJHVzZXIyID0gR2V0LU1zb2xVc2VyIHwgV2hlcmUtT2JqZWN0IHskXy5Vc2VyUHJpbmNpcGFsTmFtZSAtbGlrZSAgJCgkVXNlcklELlRvQ2hhckFycmF5KDAsMSkpICsnKicgfQ0KICAgICAgICAgICAgICAgICAgJHVzZXIyIHwgc2VsZWN0IERpc3BsYXlOYW1lICwgVXNlclByaW5jaXBhbE5hbWUgfCAgT3V0LURlZmF1bHQgDQogICAgICAgICAgICAgICAgICAkRXJyb3JBcnIgKz0gJHVzZXIyIA0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2VpZiAoJGsuU3RhdGUgLWVxICJSdW5uaW5nIil7IA0KDQogICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIlN5c3RlbSB0aW1lb3V0Ig0KICAgICAgICAgICAgICAgICAgICBleGl0DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2V7DQoNCiAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiU3lzdGVtIHRpbWVvdXQiDQogICAgICAgICAgICAgICAgICAgIGV4aXQNCiAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIFJlbW92ZS1Kb2IgLWZvcmNlICRLIA0KDQogICAgICAgICAgICAgICAgIz4NCiAgICAgICAgICANCiAgICAgPCMgIH0NCg0KICAgICAgDQogICAgDQogICAgfSM+DQogICAgDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgIyBHZXQgQmxvY2sgU3RhdHVzDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCiAgICAgICAgIA0KICAgICBpZigoR2V0LU1zb2xVc2VyIC1Vc2VyUHJpbmNpcGFsTmFtZSAkVXNlcklEIHwgU2VsZWN0IFVzZXJwcmluY2lwYWxuYW1lLGJsb2NrY3JlZGVudGlhbCkuYmxvY2tjcmVkZW50aWFsKXsNCg0KICAgICAgICByZXR1cm4gIkVycm9yOkN1cnJlbnQgU3RhdHVzIC0gQmxvY2tlZCINCiAgICAgfQ0KICAgICBlbHNlIHsgDQogICAgICAgJFN1Y2Nlc3NPYmogfCBBZGQtTWVtYmVyIE5vdGVwcm9wZXJ0eSAtTmFtZSBDdXJyZW50U3RhdHVzIC12YWx1ZSAiTm90IEJsb2NrZWQiDQogICAgICB9DQogICAgDQoNCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiAgICAjIEdldCBFbmFibGUgLyBEaXNhYmxlIFN0YXR1cw0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQogICAgDQogICAgdHJ5ew0KDQogICAgICAgJG51bGwgPSBDb25uZWN0LUF6dXJlQUQgLUNyZWRlbnRpYWwgJEFkbWluQ3JlZGVudGlhbCAtRXJyb3JBY3Rpb27CoFN0b3ANCg0KICAgICAgICRudWxsID0gJEFEVXNlciA9IEdldC1BenVyZUFEVXNlciB8IFdoZXJlLU9iamVjdCB7JF8uVXNlclByaW5jaXBhbE5hbWUgLWVxICRVc2VySUQgfQ0KDQogICAgDQogICAgICAgIGlmKCRBRFVzZXIuQWNjb3VudEVuYWJsZWQpeyANCiAgICANCiAgICAgICAgICAkbnVsbCA9ICRTdWNjZXNzT2JqIHwgQWRkLU1lbWJlciBOb3RlcHJvcGVydHkgLU5hbWUgQ3VycmVudFVzZXJBY2NvdW50U3RhdHVzIC12YWx1ZSAiRW5hYmxlZCINCiAgICAgICAgDQogICAgICAgICB9DQogICAgICAgIGVsc2V7DQogICAgICAgICAgICAgICAgIA0KICAgIA0KICAgICAgICAgICAkbnVsbCA9ICRTdWNjZXNzT2JqIHwgQWRkLU1lbWJlciBOb3RlcHJvcGVydHkgLU5hbWUgQ3VycmVudFVzZXJBY2NvdW50U3RhdHVzIC12YWx1ZSAiRGlzYWJsZWQiDQogICAgICAgIA0KICAgICAgICAgfSAgDQogICAgDQogICAgfWNhdGNoew0KICAgICAgICAgICAgDQogICAgICAgICByZXR1cm4gIkVycm9yOlskKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKSINCg0KICAgIH0gICANCiAgICAgICAgDQogICAgcmV0dXJuICJTdWNjZXNzOlByZUNvbmRpdGlvbiBleGVjdXRlZCBzdWNjZXNzZnVsbHkiICANCiAgIA0KfQ0KDQoNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjLS0tLS0tRG93bmxvYWQgTVNPbmxpbmUvIEF6dXJlQUQgZnJvbSBHYWxsZXJ5IC0tLS0tLS0tLQ0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQokTnVHZXRQYWNrYWdlQ29kZSA9IEAiDQp1c2luZyBTeXN0ZW0uTmV0Ow0KDQpwdWJsaWMgY2xhc3MgR2V0TnVHZXRQYWNrYWdlIDogV2ViQ2xpZW50DQp7ICAgDQogICAgcHJvdGVjdGVkIG92ZXJyaWRlIFdlYlJlcXVlc3QgR2V0V2ViUmVxdWVzdChTeXN0ZW0uVXJpIGFkZHJlc3MpDQogICAgew0KICAgICAgICBXZWJSZXF1ZXN0IHJlcXVlc3QgPSBiYXNlLkdldFdlYlJlcXVlc3QoYWRkcmVzcyk7DQogICAgICAgIGlmIChyZXF1ZXN0ICE9IG51bGwpDQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0Ow0KICAgICAgICB9DQogICAgICAgIHJldHVybiByZXF1ZXN0Ow0KICAgIH0gICANCn0NCiJAOw0KIyBjaGVjayB0eXBlIGlmIGFscmVhZHkgYWRkZWQNCmlmICgtbm90IChbU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5QU1R5cGVOYW1lXSdHZXROdUdldFBhY2thZ2UnKS5UeXBlKQ0Kew0KICAgIEFkZC1UeXBlIC1UeXBlRGVmaW5pdGlvbiAkTnVHZXRQYWNrYWdlQ29kZSAtTGFuZ3VhZ2UgQ1NoYXJwDQp9DQoNCmZ1bmN0aW9uIElzRG90TmV0RnJhbWVXb3JrNDVPckFib3ZlDQp7DQogICAgcGFyYW0oDQogICAgICAgIFtzdHJpbmddJENvbXB1dGVyTmFtZSA9ICRlbnY6Q09NUFVURVJOQU1FDQogICAgKQ0KICAgIA0KICAgICR0ZW1wT2JqID0gTmV3LU9iamVjdCBQU09iamVjdA0KICAgICR0ZW1wT2JqIHwgQWRkLU1lbWJlciBOb3RlcHJvcGVydHkgLU5hbWUgdGVtcFZlcnNpb24gIC12YWx1ZSAiMC4wIiAgICANCiAgICANCiAgICAkZG90TmV0UmVnaXN0cnkgID0gJ1NPRlRXQVJFXE1pY3Jvc29mdFxORVQgRnJhbWV3b3JrIFNldHVwXE5EUCcNCiAgICANCiAgICAgaWYoJHJlZ0tleSA9IFtNaWNyb3NvZnQuV2luMzIuUmVnaXN0cnlLZXldOjpPcGVuUmVtb3RlQmFzZUtleSgnTG9jYWxNYWNoaW5lJywgJENvbXB1dGVyTmFtZSkpDQogICAgICB7DQogICAgICAgICBpZiAoJG5ldFJlZ0tleSA9ICRyZWdLZXkuT3BlblN1YktleSgiJGRvdE5ldFJlZ2lzdHJ5IikpDQogICAgICAgICAgew0KICAgICAgICAgICAgIGZvcmVhY2ggKCR2ZXJzaW9uS2V5TmFtZSBpbiAkbmV0UmVnS2V5LkdldFN1YktleU5hbWVzKCkpDQogICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgaWYgKCR2ZXJzaW9uS2V5TmFtZSAtbWF0Y2ggJ152WzEyM10nKSB7DQogICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgJHZlcnNpb25LZXkgPSAkbmV0UmVnS2V5Lk9wZW5TdWJLZXkoJHZlcnNpb25LZXlOYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgJHZlcnNpb24gPSBbU3lzdGVtLlZlcnNpb25dKCR2ZXJzaW9uS2V5LkdldFZhbHVlKCdWZXJzaW9uJywgJycpKQ0KICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAkRE5ldE1ham9yID0gJHZlcnNpb24uTWFqb3IuVG9TdHJpbmcoKQ0KICAgICAgICAgICAgICAgICAgICAgJEROZXRNaW5vciA9ICR2ZXJzaW9uLk1pbm9yLlRvU3RyaW5nKCkNCiAgICAgICAgICAgICAgICAgICAgICRETmV0VmVyc2lvbiA9ICRETmV0TWFqb3IgKyAnLicgKyAkRE5ldE1pbm9yDQogICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICR0ZW1wT2JqLnRlbXBWZXJzaW9uID0gW1N5c3RlbS5WZXJzaW9uXSIwLjAiDQogICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgIGlmKFtWZXJzaW9uXSRETmV0VmVyc2lvbiAtZ3QgW1ZlcnNpb25dJHRlbXBPYmoudGVtcFZlcnNpb24pew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICR0ZW1wT2JqLnRlbXBWZXJzaW9uID0gJEROZXRWZXJzaW9uDQogICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgaWYoW1ZlcnNpb25dJHRlbXBPYmoudGVtcFZlcnNpb24gLWdlIFtWZXJzaW9uXSI0LjUiKXsNCiAgICAgICAgICAgICAgICByZXR1cm4gJHRydWUNCiAgICAgICAgICAgICAgfWVsc2V7IHJldHVybiAkZmFsc2UgfQ0KICAgICAgICAgICB9ICAgICAgICAgICANCiAgICAgICAgICAgDQogICAgICB9ICANCn0NCg0KDQpmdW5jdGlvbiBVbnppcC0yMCgkemlwZmlsZSwgJGRlc3RpbmF0aW9uKQ0Kew0KICAgICRzaGVsbCA9IE5ldy1PYmplY3QgLUNvbU9iamVjdCBTaGVsbC5BcHBsaWNhdGlvbg0KICAgICR6aXAgPSAkc2hlbGwuTmFtZVNwYWNlKCR6aXBmaWxlKQ0KICAgIGZvcmVhY2goJGl0ZW0gaW4gJHppcC5pdGVtcygpKQ0KICAgIHsgICAgICAgIA0KICAgICAgICAkc2hlbGwuTmFtZXNwYWNlKCRkZXN0aW5hdGlvbikuY29weWhlcmUoJGl0ZW0pDQogICAgfQ0KfQ0KDQoNCmZ1bmN0aW9uIFVuemlwLTQ1KCR6aXBmaWxlLCAkZGVzdGluYXRpb24pDQp7DQogICAgQWRkLVR5cGUgLUFzc2VtYmx5TmFtZSBTeXN0ZW0uSU8uQ29tcHJlc3Npb24uRmlsZVN5c3RlbQ0KICAgIHBhcmFtKFtzdHJpbmddJHppcGZpbGUsIFtzdHJpbmddJGRlc3RpbmF0aW9uKQ0KICAgIFtTeXN0ZW0uSU8uQ29tcHJlc3Npb24uWmlwRmlsZV06OkV4dHJhY3RUb0RpcmVjdG9yeSgkemlwZmlsZSwgJGRlc3RpbmF0aW9uKQ0KfQ0KDQpGdW5jdGlvbiBEb3dubG9hZFBvd2VyU2hlbGxNb2R1bGUoW1N0cmluZ10gJE1vZHVsZU5hbWUsIFtib29sXSAkSXNWZXJzaW9uRm9sZGVyRXhpc3QpDQp7DQogICANCiAgICAkcGFja2FnZU9iaiA9IE5ldy1PYmplY3QgUFNPYmplY3QNCiAgICAkcGFja2FnZU9iaiB8IEFkZC1NZW1iZXIgTm90ZXByb3BlcnR5IC1OYW1lIFBhY2thZ2VBUEkgLXZhbHVlICJodHRwczovL3d3dy5wb3dlcnNoZWxsZ2FsbGVyeS5jb20vYXBpIg0KICAgICRwYWNrYWdlT2JqIHwgQWRkLU1lbWJlciBOb3RlcHJvcGVydHkgLU5hbWUgUGFja2FnZVZlciAtdmFsdWUgInYyIg0KICAgICRwYWNrYWdlT2JqIHwgQWRkLU1lbWJlciBOb3RlcHJvcGVydHkgLU5hbWUgTXNNb2R1bGUgLXZhbHVlICJNU09ubGluZS8xLjEuMTgzLjE3Ig0KICAgICRwYWNrYWdlT2JqIHwgQWRkLU1lbWJlciBOb3RlcHJvcGVydHkgLU5hbWUgQWRNb2R1bGUgLXZhbHVlICJBenVyZUFELzIuMC4yLjQiDQogICAgJHBhY2thZ2VPYmogfCBBZGQtTWVtYmVyIE5vdGVwcm9wZXJ0eSAtTmFtZSBBelJNTW9kdWxlIC12YWx1ZSAiYXp1cmVybS5wcm9maWxlLzUuOC4zIg0KICAgICRwYWNrYWdlT2JqIHwgQWRkLU1lbWJlciBOb3RlcHJvcGVydHkgLU5hbWUgRG93bmxvYWRTdHJpbmcgLXZhbHVlICIiDQoNCiAgICBpZigkTW9kdWxlTmFtZSAtZXEgIk1TT25saW5lIil7DQogICAgICAgICAgICANCiAgICAgICAgJHBhY2thZ2VPYmouRG93bmxvYWRTdHJpbmcgPSAkcGFja2FnZU9iai5QYWNrYWdlQVBJICsiLyIgKyAkcGFja2FnZU9iai5QYWNrYWdlVmVyICsiL3BhY2thZ2UvIisgJHBhY2thZ2VPYmouTXNNb2R1bGUgDQogICAgICAgIA0KICAgIH1lbHNlaWYoJE1vZHVsZU5hbWUgLWVxICJBenVyZUFEIil7ICAgICAgIA0KICAgICAgICANCiAgICAgICAgJHBhY2thZ2VPYmouRG93bmxvYWRTdHJpbmcgPSAkcGFja2FnZU9iai5QYWNrYWdlQVBJICsiLyIgKyAkcGFja2FnZU9iai5QYWNrYWdlVmVyICsiL3BhY2thZ2UvIisgJHBhY2thZ2VPYmouQWRNb2R1bGUgDQoNCiAgICB9ZWxzZWlmKCRNb2R1bGVOYW1lIC1lcSAiQXp1cmVSTS5wcm9maWxlIil7ICAgICAgIA0KICAgICAgICANCiAgICAgICAgJHBhY2thZ2VPYmouRG93bmxvYWRTdHJpbmcgPSAkcGFja2FnZU9iai5QYWNrYWdlQVBJICsiLyIgKyAkcGFja2FnZU9iai5QYWNrYWdlVmVyICsiL3BhY2thZ2UvIisgJHBhY2thZ2VPYmouQXpSTU1vZHVsZSANCiAgICAgfQ0KDQogICAgdHJ5ew0KICAgICAgIA0KICAgICAgICAkd2ViQ2xpZW50ID0gTmV3LU9iamVjdCBHZXROdUdldFBhY2thZ2UNCiAgICAgICAgJGRvd25sb2FkZWQgPSAkd2ViQ2xpZW50LmRvd25sb2FkU3RyaW5nKCRwYWNrYWdlT2JqLkRvd25sb2FkU3RyaW5nKSANCiAgICAgICAgJHRlbXBQYXRoID0gam9pbi1wYXRoICQoW1N5c3RlbS5JTy5QYXRoXTo6R2V0VGVtcFBhdGgoKSkgJCgkTW9kdWxlTmFtZSArIi56aXAiKSAgICANCiAgICAgICAgQWRkLUNvbnRlbnQgLXBhdGggJHRlbXBQYXRoIC12YWx1ZSAkZG93bmxvYWRlZA0KICAgICAgICAgICAgICANCiAgICAgICAgJHVuWmlwTW9kdWxlUGF0aCA9IGpvaW4tcGF0aCAkKFtTeXN0ZW0uSU8uUGF0aF06OkdldFRlbXBQYXRoKCkpIC1DaGlsZFBhdGggIm51Z2V0UGFja2FnZSINCiAgICAgICAgDQogICAgICAgIGlmKCEoVGVzdC1QYXRoIC1QYXRoICR1blppcE1vZHVsZVBhdGggKSl7DQogICAgICAgIA0KICAgICAgICAgICAkZGlyID0gTmV3LUl0ZW0gLUl0ZW1UeXBlIGRpcmVjdG9yeSAtUGF0aCAkdW5aaXBNb2R1bGVQYXRoDQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGlmKElzRG90TmV0RnJhbWVXb3JrNDVPckFib3ZlKXsNCiAgICAgICAgDQogICAgICAgICAgICBVbnppcC00NSAkdGVtcFBhdGggJHVuWmlwTW9kdWxlUGF0aA0KICAgICAgICANCiAgICAgICAgfWVsc2V7IA0KICAgICAgICANCiAgICAgICAgICAgIFVuemlwLTIwICR0ZW1wUGF0aCAkdW5aaXBNb2R1bGVQYXRoDQogICAgICAgIA0KICAgICAgICB9ICAgICAgICAgICAgICAgDQoNCiAgICAgICAgaWYoLW5vdCgkSXNWZXJzaW9uRm9sZGVyRXhpc3QpKQ0KICAgICAgICB7DQogICAgICAgICAgICBmb3JlYWNoKCRwYXRoIGluICRlbnY6UFNNb2R1bGVQYXRoLlNwbGl0KCc7JykgKQ0KICAgICAgICAgICAgeyAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZigkcGF0aC5jb250YWlucygic3lzdGVtMzIiKSAtb3IgJHBhdGguY29udGFpbnMoIlByb2dyYW0gRmlsZXMiKSApDQogICAgICAgICAgICAgICAgeyAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAkcHNNb2R1bGVQYXRoID0gSm9pbi1QYXRoIC1QYXRoICRwYXRoIC1DaGlsZFBhdGggJE1vZHVsZU5hbWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEoVGVzdC1QYXRoIC1QYXRoICRwc01vZHVsZVBhdGggKSl7ICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgJGRpciA9IE5ldy1JdGVtIC1JdGVtVHlwZSBkaXJlY3RvcnkgLVBhdGggJHBzTW9kdWxlUGF0aCAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICB9IA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAkc291cmNlUGF0aCA9IEpvaW4tUGF0aCAtUGF0aCAkdW5aaXBNb2R1bGVQYXRoIC1DaGlsZFBhdGggIlwqIg0KICAgICAgICAgICAgICAgICAgICAgICAgQ29weS1JdGVtIC1QYXRoICRzb3VyY2VQYXRoIC1EZXN0aW5hdGlvbiAkcHNNb2R1bGVQYXRoIC1yZWN1cnNlIC1Gb3JjZSANCiAgICAgICAgICAgICAgICAgICAgfSAgICAgDQogICAgICAgICAgICAgICAgICAgIGNhdGNoDQogICAgICAgICAgICAgICAgICAgIHsgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJFcnJvcjokKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKSINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSAgDQogICAgICAgICAgIA0KICAgICAgICAgfQ0KICAgICAgICAgZWxzZQ0KICAgICAgICAgew0KICAgICAgICAgICAgZm9yZWFjaCgkZm9sZGVyIGluIEdldC1DaGlsZEl0ZW0gLVBhdGggJHVuWmlwTW9kdWxlUGF0aCAtUmVjdXJzZSB8ID97ICRfLlBTSXNDb250YWluZXIgfSkNCiAgICAgICAgICAgIHsgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmKCRmb2xkZXIuTmFtZSAtZXEgJE1vZHVsZU5hbWUpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKCRwYXRoIGluICRlbnY6UFNNb2R1bGVQYXRoLlNwbGl0KCc7JykgKQ0KICAgICAgICAgICAgICAgICAgICB7IA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHBhdGguY29udGFpbnMoInN5c3RlbTMyIikgLW9yICRwYXRoLmNvbnRhaW5zKCJQcm9ncmFtIEZpbGVzIikgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBzTW9kdWxlUGF0aCA9IEpvaW4tUGF0aCAtUGF0aCAkcGF0aCAtQ2hpbGRQYXRoICRNb2R1bGVOYW1lDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEoVGVzdC1QYXRoIC1QYXRoICRwc01vZHVsZVBhdGggKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGRpciA9ICBOZXctSXRlbSAtSXRlbVR5cGUgZGlyZWN0b3J5IC1QYXRoICRwc01vZHVsZVBhdGggICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNvdXJjZVBhdGggPSAgSm9pbi1QYXRoIC1QYXRoICRmb2xkZXIuRnVsbE5hbWUgLUNoaWxkUGF0aCAoR2V0LUNoaWxkSXRlbSAtUGF0aCAkZm9sZGVyLkZ1bGxOYW1lKSAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNvdXJjZVBhdGhXaXRoU3ViRm9sZGVyID0gSm9pbi1QYXRoIC1QYXRoICRzb3VyY2VQYXRoIC1DaGlsZFBhdGggIlwqIg0KIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb3B5LUl0ZW0gLVBhdGggJHNvdXJjZVBhdGhXaXRoU3ViRm9sZGVyIC1EZXN0aW5hdGlvbiAkcHNNb2R1bGVQYXRoIC1yZWN1cnNlIC1Gb3JjZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIkVycm9yOiQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgUmVtb3ZlLUl0ZW0gLUxpdGVyYWxQYXRoICR0ZW1wUGF0aCAtRm9yY2UgLVJlY3Vyc2UNCiAgICAgICBSZW1vdmUtSXRlbSAtTGl0ZXJhbFBhdGggJHVuWmlwTW9kdWxlUGF0aCAtRm9yY2UgLVJlY3Vyc2UNCiAgICAgIA0KICAgICAgIHJldHVybiAiU3VjY2VzczpEb3dubG9hZGluZyAkTW9kdWxlTmFtZSBjb21wbGV0ZWQiDQogICAgICAgICAgICAgICAgDQogICAgfWNhdGNoew0KICAgICAgIA0KICAgICAgICByZXR1cm4gIkVycm9yOiQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpIg0KICAgIH0NCg0KfQ0KDQojIGNoYW5nZSB1c2VyIFBhc3N3b3JkDQpGdW5jdGlvbiBQYXNzd29yZFJlc2V0IHsNCg0KICAgICAgIA0KICAgICAgICAkUGFzc1Jlc2V0RXJyT2JqZWN0ID0gTmV3LU9iamVjdCAtVHlwZU5hbWUgcHNvYmplY3QNCiAgICAgICAgJFBhc3NSZXNldEVyck9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFRhc2tOYW1lIC1WYWx1ZSAiUGFzc3dvcmQgcmVzZXQiDQogICAgICAgICRQYXNzUmVzZXRFcnJPYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBTdGF0dXMgLVZhbHVlICJmYWlsIiANCiAgICAgICAgJFBhc3NSZXNldEVyck9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIENvZGUgLVZhbHVlIDENCiAgICAgICAgJFBhc3NSZXNldEVyck9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIHN0ZGVyciAtVmFsdWUgJG51bGwNCiAgICAgICAgJFBhc3NSZXNldEVyck9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFJlc3VsdCAtVmFsdWUgJG51bGwNCiAgICAgICAgJFBhc3NSZXNldEVyck9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIHN0ZG91dCAtVmFsdWUgJG51bGwgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIyAkU3VjY2Vzc0FyciA9IEAoKQ0KICAgICAgICAkU3VjY2Vzc091dEFyciA9IEAoKSAgICAgICAgDQogICAgICAgICRTdWNjZXNzUmVzdWx0ID0gIiIgICANCg0KICAgICAgICAkT2ZmaWNlUmVwYWlyU3VjY09iamVjdCA9IE5ldy1PYmplY3QgLVR5cGVOYW1lIHBzb2JqZWN0DQogICAgICAgICRPZmZpY2VSZXBhaXJTdWNjT2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgVGFza05hbWUgLVZhbHVlICJQYXNzd29yZCByZXNldCINCiAgICAgICAgJE9mZmljZVJlcGFpclN1Y2NPYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBTdGF0dXMgLVZhbHVlICJTdWNjZXNzIiANCiAgICAgICAgJE9mZmljZVJlcGFpclN1Y2NPYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBDb2RlIC1WYWx1ZSAwDQogICAgICAgICRPZmZpY2VSZXBhaXJTdWNjT2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUmVzdWx0IC1WYWx1ZSAkbnVsbA0KICAgICAgICAkT2ZmaWNlUmVwYWlyU3VjY09iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIHN0ZG91dCAtVmFsdWUgJG51bGwgIA0KICAgICAgICAkT2ZmaWNlUmVwYWlyU3VjY09iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIGRhdGFPYmplY3QgLVZhbHVlICRudWxsICANCg0KDQoNCiAgJFJlc3VsdCA9ICBDaGVjay1QcmVDb25kaXRpb24NCg0KICBXcml0ZS1Ib3N0ICIkUmVzdWx0Ig0KDQogIGlmKCRSZXN1bHQuU3BsaXQoJzonKVswXSAtZXEgJ0Vycm9yJyl7DQogIA0KICAgICAkU3RkQXJyID0gQCgpDQogICAgICRTdGRPdXRBcnIgPSBAKCkNCiAgICAgJFN0ZEVyckFyciA9IEAoKQ0KICAgICAkUmVzdWx0ID0gIiINCiAgIA0KICAgICRTdGRFcnJBcnIgPSAkUmVzdWx0LlNwbGl0KCc6JylbMV0NCiAgICAkUmVzdWx0ID0gIlByZWNvbmRpdGlvbiBGYWlsZWQiDQoNCiAgICAkUGFzc1Jlc2V0RXJyT2JqZWN0LnN0ZGVyciA9ICRTdGRFcnJBcnINCiAgICAkUGFzc1Jlc2V0RXJyT2JqZWN0LlJlc3VsdCA9ICRSZXN1bHQNCiAgICAkUGFzc1Jlc2V0RXJyT2JqZWN0LnN0ZG91dCA9ICRTdGRPdXRBcnINCiAgICAgICAgDQogICAgcmV0dXJuICRQYXNzUmVzZXRFcnJPYmplY3QNCiAgfQ0KDQogIGlmKCRSZXN1bHQuU3BsaXQoJzonKVswXSAtZXEgJ0Vycm9yMScpew0KIA0KICAgICRQYXNzUmVzZXRFcnJPYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBkYXRhT2JqZWN0IC1WYWx1ZSAkbnVsbCAgDQogICAgDQogICAgJFN0ZE91dEFyciA9IEAoKQ0KICAgICRTdGRFcnJBcnIgPSAkUmVzdWx0LlNwbGl0KCc6JylbMV0NCiAgICAkUmVzdWx0ID0gIlByZWNvbmRpdGlvbiBGYWlsZWQiDQoNCiAgICAkdXNlcjIgPSBHZXQtTXNvbFVzZXIgfCBXaGVyZS1PYmplY3QgeyRfLlVzZXJQcmluY2lwYWxOYW1lIC1saWtlICAkKCRVc2VySUQuVG9DaGFyQXJyYXkoMCwxKSkgKycqJyB9DQogICAgJHVzZXIyIHwgc2VsZWN0IERpc3BsYXlOYW1lICwgVXNlclByaW5jaXBhbE5hbWUgfCAgT3V0LURlZmF1bHQgDQoNCg0KICAgICRQYXNzUmVzZXRFcnJPYmplY3Quc3RkZXJyID0gJFN0ZEVyckFycg0KICAgICRQYXNzUmVzZXRFcnJPYmplY3QuUmVzdWx0ID0gJFJlc3VsdA0KICAgICRQYXNzUmVzZXRFcnJPYmplY3Quc3Rkb3V0ID0gJFN0ZE91dEFycg0KICAgICRQYXNzUmVzZXRFcnJPYmplY3QuZGF0YU9iamVjdCA9ICR1c2VyMg0KICAgICAgICANCiAgICByZXR1cm4gJFBhc3NSZXNldEVyck9iamVjdA0KICB9DQoNCiAgaWYoJFJlc3VsdC5TcGxpdCgnOicpWzBdIC1lcSAnU3VjY2Vzcycpew0KICANCiAgdHJ5ew0KICAgIA0KICAgICRDaGFuZ2VkUGFzcyA9IFNldC1Nc29sVXNlclBhc3N3b3JkIC1Vc2VyUHJpbmNpcGFsTmFtZSAkVXNlcklEIC1OZXdQYXNzd29yZCAkTmV3UGFzc3dvcmQgLUZvcmNlQ2hhbmdlUGFzc3dvcmRPbmx5ICRmYWxzZSAtRm9yY2VDaGFuZ2VQYXNzd29yZCAkZmFsc2UgLUVycm9yQWN0aW9uwqBTdG9wDQogICAgJFN1Y2Nlc3NPYmogfCBBZGQtTWVtYmVyIE5vdGVwcm9wZXJ0eSAtTmFtZSBDaGFuZ2VkUGFzc3dvcmQgLXZhbHVlICRDaGFuZ2VkUGFzcw0KICAgIA0KDQogICAgJE9mZmljZVJlcGFpclN1Y2NPYmplY3QuUmVzdWx0ID0gIkNoYW5nZWQgcGFzc3dvcmQgZm9yOiQoJFVzZXJJRCkiDQogICAgJE9mZmljZVJlcGFpclN1Y2NPYmplY3Quc3Rkb3V0ID0gICRTdWNjZXNzT2JqDQogICAgJE9mZmljZVJlcGFpclN1Y2NPYmplY3QuZGF0YU9iamVjdCA9ICRTdWNjZXNzT2JqDQogICAgICAgIA0KICAgIHJldHVybiAkT2ZmaWNlUmVwYWlyU3VjY09iamVjdA0KDQogICAgfWNhdGNoew0KICAgICAgDQogICAgICAkU3RkT3V0QXJyICs9ICJNZXNzYWdlOiAkKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKSINCg0KICAgICAgJFBhc3NSZXNldEVyck9iamVjdC5zdGRlcnIgPSAgIk1lc3NhZ2U6ICQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpIg0KICAgICAgJFBhc3NSZXNldEVyck9iamVjdC5SZXN1bHQgPSAiUGFzc3dvcmQgaXMgbm90IGNoYW5nZWQuUGxlYXNlIHRyeSBhZ2FpbiINCiAgICAgICRQYXNzUmVzZXRFcnJPYmplY3Quc3Rkb3V0ID0gJFN0ZE91dEFycg0KICAgICAgICANCiAgICAgIHJldHVybiAkUGFzc1Jlc2V0RXJyT2JqZWN0DQogICAgfQ0KICB9DQoNCiB9DQoNCiBpZigkUFNWZXJzaW9uVGFibGUuUFNWZXJzaW9uLk1ham9yIC1lcSAyKXsNCg0KICAgIFBhc3N3b3JkUmVzZXQgfCAgQ29udmVydFRvLUpTT05QMg0KDQp9ZWxzZXsNCg0KICAgIFBhc3N3b3JkUmVzZXQgfCAgQ29udmVydFRvLUpzb24gLURlcHRoIDEwDQp9",
"jsonSchema":{
"type":"object",
"properties":{
	"UserID":{
      "type":"string",
      "title":"Enter user ID",
      "minLength":1
    },
	"NewPassword":{
      "type":"String",
      "title":"Enter new password",
      "minLength":1
    },
	"AdminID":{
      "type":"string",
      "title":"Enter admin ID",
      "minLength":1
    },
	"AdminPassword":{
      "type":"String",
      "title":"Enter admin password",
      "minLength":1
    }
 },
  "required":[
  "UserID",
  "NewPassword",
  "AdminID",
  "AdminPassword"
  ],
  "additionalProperties": false
},
"uiSchema":{
"UserID":{
    "ui:autofocus":true,
    "classNames":"col-sm-12"
  },
"NewPassword":{
    "ui:autofocus":true,
    "classNames":"col-sm-12"
  },
"AdminID":{
    "ui:autofocus":true,
    "classNames":"col-sm-12"
  },
"AdminPassword":{
    "ui:autofocus":true,
    "classNames":"col-sm-12"
  },
"ui:order":["UserID", "NewPassword", "AdminID", "AdminPassword"]
},
"isHDScript":true}
