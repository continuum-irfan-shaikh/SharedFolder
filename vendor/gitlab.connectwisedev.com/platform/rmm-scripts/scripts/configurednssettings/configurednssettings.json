{"id":"fcca238a-4feb-11e9-842b-00155d130b17","partnerId":"00000000-0000-0000-0000-000000000000","category":["Setup"],"description":"Script is design to Configure DNS Settings","engine":"powershell","engineMaxVersion":5,"expectedExecutionTimeSec":300,"failureMessage":"Executed with errors","successMessage":"Script executed Successfully","internal":false,"name":"Configure DNS Settings","tags":["Windows 7","Windows 10"],"sequence":true,"content":"PCMKTmFtZSA6IENvbmZpZ3VyZSBkaXNwbGF5IHNldHRpbmdzCkNldGVnb3J5IDogU2V0dXAgCgpESVNDUklQVElPTiA9ICJTZXQgdGhlIEROUyBvZiBhIHNpdGUuIgoKJG9sZEROU0lQICAJCQk9PT0+IFR5cGU6U3RyaW5nIAk9PT0+IFRleHRCb3goTWFuZGF0b3J5KSA9PT0+IFRpdGxlOiJPbGQgRE5TIFNlcnZlciBJUCBBZGRyZXNzOiIKJGNvbmZpZ1R5cGUgCQk9PT0+IFR5cGU6U3RyaW5nIAk9PT0+IFJhZGlvIEJ1dHRvbiAoU3RhdGljIC8gRHluYW1pYykgPT09PiBUaXRsZToiSVAgQ29uZmlndXJhdGlvbjoiCiRwcmltYXJ5U2VydmVySVAgCT09PT4gVHlwZTpTdHJpbmcgCT09PT4gVGV4dEJveChNYW5kYXRvcnkpID09PT4gVGl0bGU6IlByaW1hcnkgU2VydmVyIElQIEFkZHJlc3M6IiAKJHNlY29uZGFyeVNlcnZlcklQIAk9PT0+IFR5cGU6U3RyaW5nIAk9PT0+IFRleHRCb3ggPT09PiBUaXRsZToiU2Vjb25kYXJ5IFNlcnZlciBJUCBBZGRyZXNzOiIgCiR1cGRhdGVJZlBpbmdGYWlsIAk9PT0+IFR5cGU6Qm9vbGVhbiAJPT09PiBDaGVja0JveCA9PT0+IFRpdGxlOiJVcGRhdGUgRE5TIFNldHRpbmdzIGV2ZW4gaWYgcGluZ2luZyB0aGUgSVBzIGZhaWxzIgoKIz4KCiMgRGVjbGFyZSBWYXJpYWJsZXMKCmlmICgkZW52OlBST0NFU1NPUl9BUkNISVRFVzY0MzIgLWVxICJBTUQ2NCIpIHsKICAgIHdyaXRlLXdhcm5pbmcgIkV4Y2VjdXRpbmcgdGhlIHNjcmlwdCB1bmRlciA2NCBiaXQgcG93ZXJzaGVsbCIKICAgIGlmICgkbXlJbnZvY2F0aW9uLkxpbmUpIHsKICAgICAgICAmIiRlbnY6c3lzdGVtcm9vdFxzeXNuYXRpdmVcd2luZG93c3Bvd2Vyc2hlbGxcdjEuMFxwb3dlcnNoZWxsLmV4ZSIgLU5vbkludGVyYWN0aXZlIC1Ob1Byb2ZpbGUgJG15SW52b2NhdGlvbi5MaW5lCiAgICB9ZWxzZXsKICAgICAgICAmIiRlbnY6c3lzdGVtcm9vdFxzeXNuYXRpdmVcd2luZG93c3Bvd2Vyc2hlbGxcdjEuMFxwb3dlcnNoZWxsLmV4ZSIgLU5vbkludGVyYWN0aXZlIC1Ob1Byb2ZpbGUgLWZpbGUgIiQoJG15SW52b2NhdGlvbi5JbnZvY2F0aW9uTmFtZSkiICRhcmdzCiAgICB9CmV4aXQgJGxhc3RleGl0Y29kZQp9CgoKCiMgVmFsaWRhdGlvbiBmb3IgTk9UIE5VTEwgb3IgZW1wdHkgZm9yIG1hbmRhdG9yeSBwYXJhbWV0ZXJzCmlmKCgkb2xkRE5TSVAgLWVxICROVUxMKSAtb3IgKCRvbGRETlNJUCAtZXEgJycpKQogIHsKICAgICBXcml0ZS1Ib3N0ICJPbGQgRE5TIHNlcnZlciBJUCBjYW4gbm90IGJlIGVtcHR5IiAgCiAgICAgRVhJVAogIH0KCgogICAjVmFsaWRhdGUgSVAgRm9ybWF0CiAgICR2YWxpZGF0ZU9sZEROU0lQPSRvbGRETlNJUCAtYXMgW2lwYWRkcmVzc10KICAgaWYoJHZhbGlkYXRlT2xkRE5TSVAgLWVxICROVUxMKQogICB7CiAgICAgICBXcml0ZS1Ib3N0ICJPbGQgRE5TIElQIEFkZHJlc3MgaXMgbm90IGluIGNvcnJlY3QgZm9ybWF0OiAkb2xkRE5TSVAiCiAgICAgICBFWElUCiAgIH0KICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIGlmKCRjb25maWdUeXBlIC1lcSAic3RhdGljIikKIHsKICAgW3N0cmluZ1tdXSRkbnM9QCgpCiAgICAkZG5zKz0kcHJpbWFyeVNlcnZlcklQCiAgICNDcmVhdGluZyBhcnJheSBvZiBTZWNvbmRhcnkgSVAgQWRkcmVzcyBub3QgbnVsbAogICBpZighKCgkc2Vjb25kYXJ5U2VydmVySVAgLWVxICRudWxsKSAtb3IgKCRzZWNvbmRhcnlTZXJ2ZXJJUCAtZXEgIiIpKSkgCiAgIHsKICAgICAgJGRucys9JHNlY29uZGFyeVNlcnZlcklQLlNwbGl0KCIsIikKICAgICAKICAgfQogICAKICAgI1ZhbGlkYXRpbmcgSVAgYWRkcmVzcyBmb3IgU2Vjb25kYXJ5IElQIEFkZHJlc3Nlcy4gCiAgICRmbGFnPSRmYWxzZQogICBmb3JlYWNoKCRpcCBpbiAkZG5zKQogICAgIHsKICAgICAgIFdyaXRlLUhvc3QgIklQPSRpcCIKICAgICAgICAgJHZhbGlkYXRlSVA9JGlwIC1hcyBbaXBhZGRyZXNzXQogICAgICAgICAgaWYoJHZhbGlkYXRlSVAgLWVxICROVUxMKQogICAgICAgICAgewogICAgICAgICAgJGZsYWc9JHRydWUKICAgICAgICAgICB9CiAgICAgfQogICAgaWYoJGZsYWcgLWVxICR0cnVlKQogICAgewogICAgIFdyaXRlLUhvc3QgIjEgb3IgbW9yZSBJUCBhZGRyZXNzIGlzIG5vdCBpbiBjb3JyZWN0IGZvcm1hdCBpbiBTZWNvbmRhcnkgSVAgYWRkcmVzcyIKICAgICBFWElUCiAgICB9CgogICAgI1BpbmcgSVAgYWRkcmVzcyBiZWZvcmUgY2hhbmdpbmcgdGhlIHNldHRpbmdzLCBjaGVjayB3aGVuIHVwZGF0ZUlmUGluZ0ZhaWwgPSAkRmFsc2UKICAgICAKICBpZigkdXBkYXRlSWZQaW5nRmFpbCAtZXEgJEZhbHNlKQogICAgewogICAgICAgICAkTm90UGluZ2luZ0lQcz1AKCkKICAgICAgICAgZm9yZWFjaCgkaXAgaW4gJGRucykKICAgICAgICAgewogICAgICAgICAgICAkY29ubj1UZXN0LUNvbm5lY3Rpb24gJGlwIC1Db3VudCA0IC1RdWlldAogICAgICAgICAgICBpZigkY29ubikKICAgICAgICAgICAgewogICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICB9IAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAkTm90UGluZ2luZ0lQcys9JGlwCiAgICAgICAgICAgIH0KICAgICAgICAgfQoKICAgICAgICAgaWYoJE5vdFBpbmdpbmdJUHMgLW5lICROVUxMKQogICAgICAgICAgewogICAgICAgICAgICBXcml0ZS1Ib3N0ICJVbmFibGUgdG8gdXBkYXRlIHRoZSBJUHMsIGJlbG93IElQcyBhcmUgbm90IHJlYWNoYWJsZSIKICAgICAgICAgICAgZm9yZWFjaCgkaXAgaW4gJE5vdFBpbmdpbmdJUHMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgJGlwCiAgICAgICAgICAgIH0KICAgICAgICAgICAgRVhJVAogICAgICAgICAgfQogICAgfQogICAgIAogfQogZWxzZQogewogICAkZG5zPSROVUxMCiB9IAoKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgRnVuY3Rpb24gdG8gYWRkIFN0YXRpYy9keW5hbWljIEROUyBzZXJ2ZXIgSVBzCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCkZ1bmN0aW9uIENvbmZpZ3VyZUROU1NldHRpbmdzKCRvbGRETlNJUCwkZG5zKQp7CgpUcnkKewogICAgJGFkYXB0ZXIgPSBHZXQtV21pT2JqZWN0IHdpbjMyX25ldHdvcmthZGFwdGVyY29uZmlndXJhdGlvbiAtZmlsdGVyICJpcGVuYWJsZWQgPSd0cnVlJyIgfFdoZXJlLU9iamVjdHskXy5ETlNTZXJ2ZXJTZWFyY2hPcmRlciAtbGlrZSAkb2xkRE5TSVB9CiAgICAKICAgIGlmKCRhZGFwdGVyIC1lcSAkTlVMTCkKICAgIHsKICAgICAgV3JpdGUtSG9zdCAiTmV0d29yayBhZGFwdGVyIG5vdCBmb3VuZCBmb3IgZ2l2ZW4gSVA6ICRvbGRETlNJUCIKICAgICAgRVhJVAogICAgfQogICAgaWYoJGRucyAtZXEgJE51bGwpCiAgICB7CiAgICAgICAgIyBDb25maWd1cmUgdGhlIEROUyBTZXJ2ZXJzIGF1dG9tYXRpY2FsbHkKICAgICAgICAkYWRhcHRlci5TZXRETlNTZXJ2ZXJTZWFyY2hPcmRlcigpIHwgT3V0LU51bGwKICAgICAgICAKICAgICAgICAjIEVuYWJsZSBESENQCiAgICAgICAgJGFkYXB0ZXIuRW5hYmxlREhDUCgpIHwgT3V0LU51bGwKICAgICAgICB3cml0ZS1ob3N0ICJEeW5hbWljIEROUyBzZXJ2ZXIgSVAgaGFzIGJlZW4gdXBkYXRlZCBzdWNjZXNzZnVsbHkiCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJGFkYXB0ZXIuU2V0RE5TU2VydmVyU2VhcmNoT3JkZXIoJGRucykgfCBPdXQtTnVsbDsKICAgICAgICB3cml0ZS1ob3N0ICJETlMgc2VydmVyIElQIGhhcyBiZWVuIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IgogICAgfQogfQogQ2F0Y2gKIHsKICRIb3N0LlVJLldyaXRlRXJyb3JMaW5lKCRFcnJvclswXS5FeGNlcHRpb24uTWVzc2FnZSkKIH0KfQojIyMjIyMjIyMjIEVuZCBGdW5jdGlvbiBDb25maWd1cmVETlNTZXR0aW5ncyAKCiNDYWxsaW5nIEZ1bmN0aW9uClRyeQp7CgogICBDb25maWd1cmVETlNTZXR0aW5ncyAtb2xkRE5TSVAgJG9sZEROU0lQIC1kbnMgJGRucwp9CkNhdGNoewoKICRIb3N0LlVJLldyaXRlRXJyb3JMaW5lKCRFcnJvclswXS5FeGNlcHRpb24uTWVzc2FnZSkKfQo=","jsonSchema":{"type":"object","properties":{"oldDNSIP":{"title":"Old DNS Server IP Address:","type":"string","format":"ipv4"},"configType":{"enum":["static","dynamic"],"enumNames":["Static","Dynamic"]},"updateIfPingFail":{"type":"boolean","title":"Update if ping fail"}},"required":["oldDNSIP","configType"],"addtionalProperties":false,"patternProperties":{"^primaryServerIP$":{},"^secondaryServerIP$":{}},"dependencies":{"configType":{"oneOf":[{"properties":{"configType":{"enum":["static"]},"primaryServerIP":{"type":"string","title":"Primary Server IP","format":"ipv4"},"secondaryServerIP":{"type":"string","title":"secondaryServerIP","format":"ipv4"}},"required":["primaryServerIP"]},{"properties":{"configType":{"enum":["dynamic"]}}}]}}},"uiSchema":{"oldDNSIP":{"classNames":"col-sm-4 col-sm-offset-right-8","ui:autofocus":true},"configType":{"classNames":"col-sm-4 col-sm-offset-right-8","ui:autofocus":true,"ui:placeholder":"Select"},"updateIfPingFail":{"classNames":"col-sm-12"},"primaryServerIP":{"classNames":"col-sm-4 col-sm-offset-right-8","ui:autofocus":true},"secondaryServerIP":{"classNames":"col-sm-4 col-sm-offset-right-8","ui:autofocus":true},"ui:order":["oldDNSIP","configType","primaryServerIP","secondaryServerIP","updateIfPingFail"]},"isHDScript":false}
