{"id":"fa6480c7-9149-11e9-9473-00155d130b01","partnerId":"00000000-0000-0000-0000-000000000000","category":["Maintenance"],"description":"Azure AD Sync","engine":"powershell","engineMaxVersion":5,"expectedExecutionTimeSec":300,"failureMessage":"Executed with errors","successMessage":"Script executed successfully","internal":false,"name":"Azure AD Sync","tags":["Windows 7","Windows 10"],"sequence":true,"content":"IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMtLS0tLS0tQXp1cmVBRCBTeW5jIC0tLS0tLS0tLS0tLS0tLS0tLS0tIyMjIyMjIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiMtLS0tU3luYyBUeXBlIGNhbiBiZSA6IE5vbmUsIERlbHRhU3luYywgRnVsbFN5bmMKCjwjCgpbc3RyaW5nXSR1c2VybmFtZSA9ICJBZG1pbmlzdHJhdG9yIgpbc3RyaW5nXSRQYXNzID0gIkFiY2RAMTIzNCIKW3N0cmluZ10kU3luY1R5cGUgPSAiRGVsdGFTeW5jIgoKIz4KCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIy0tLS0tLVZhcmlhYmxlIERlY2xhcmF0aW9uLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKJHRpbWVvdXRTZWNvbmRzID0gMzAKCiRSZXN1bHRPYmplY3QgPSBOZXctT2JqZWN0IC1UeXBlTmFtZSBwc29iamVjdAokUmVzdWx0T2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ1Rhc2sgTmFtZScgLVZhbHVlICJBenVyZUFEIFN5bmMiIAoKJFN1Y2Nlc3NPYmplY3QgPSBOZXctT2JqZWN0IC1UeXBlTmFtZSBwc29iamVjdAoKJENvbXBueUluZm9ybWF0aW9uT2JqZWN0ID0gTmV3LU9iamVjdCAtVHlwZU5hbWUgcHNvYmplY3QKCiRnbG9iYWw6Q29kZSA9IDAKJGdsb2JhbDpFcnJvck1lc3NhZ2VBcnJheT0gQCgpCiRnbG9iYWw6U3VjY2Vzc01lc3NhZ2VBcnJheT0gQCgpCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIy0tLS0tLUNoZWNraW5nIFByZSBDb25kaXRpb24tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKRnVuY3Rpb24gQ2hlY2stUHJlQ29uZGl0aW9uewoKICAgICRJc0NvbnRpbnVlZCA9ICR0cnVlCgogICAgV3JpdGUtSG9zdCAiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSIKICAgIFdyaXRlLUhvc3QgIkNoZWNraW5nIFByZWNvbmRpdGlvbnMiCiAgICBXcml0ZS1Ib3N0ICIiIAogICAKCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAjIFZlcmlmeSBQb3dlclNoZWxsIFZlcnNpb24KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiAgICB3cml0ZS1ob3N0IC1Gb3JlZ3JvdW5kQ29sb3IgMTAgImB0IFBvd2VyU2hlbGwgVmVyc2lvbiA6ICQoJFBTVmVyc2lvblRhYmxlLlBTVmVyc2lvbi5NYWpvcikiIAoKICAgIGlmKC1OT1QoJFBTVmVyc2lvblRhYmxlLlBTVmVyc2lvbi5NYWpvciAtZ2UgMikpCiAgICB7CiAgICAgICAgJGdsb2JhbDpDb2RlID0gMQogICAgICAgICRnbG9iYWw6RXJyb3JNZXNzYWdlQXJyYXkgKz0gIlBvd2VyU2hlbGwgdmVyc2lvbiBiZWxvdyAyLjAgaXMgbm90IHN1cHBvcnRlZCIKCiAgICAgICAgJElzQ29udGludWVkID0gJGZhbHNlCiAgICB9CgogICAgCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgICAgIAogICAgIyBWZXJpZnkgb3BlYXJhdGluZyBzeXN0ZW0gVmVyc2lvbgogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgogICAgd3JpdGUtaG9zdCAtRm9yZWdyb3VuZENvbG9yIDEwICJgdCBPcGVyYXRpbmcgU3lzdGVtIFZlcnNpb24gOiAkKFtTeXN0ZW0uRW52aXJvbm1lbnRdOjpPU1ZlcnNpb24uVmVyc2lvbi5tYWpvcikiIAogICAgaWYoLW5vdChbU3lzdGVtLkVudmlyb25tZW50XTo6T1NWZXJzaW9uLlZlcnNpb24ubWFqb3IgLWdlIDYpKQogICAgewogICAgICAgICRnbG9iYWw6Q29kZSA9IDEKICAgICAgICAkZ2xvYmFsOkVycm9yTWVzc2FnZUFycmF5ICs9ICJQb3dlclNoZWxsIFNjcmlwdCBzdXBwb3J0cyBXaW5kb3cgNywgV2luZG93IDIwMDhSMiBhbmQgaGlnaGVyIHZlcnNpb24gb3BlcmF0aW5nIHN5c3RlbSIKCiAgICAgICAgJElzQ29udGludWVkID0gJGZhbHNlCiAgICB9CiAgICAKICAgIAogICAgV3JpdGUtSG9zdCAiIgogICAgV3JpdGUtSG9zdCAtRm9yZWdyb3VuZENvbG9yIDggImB0IENoZWNraW5nIFByZWNvbmRpdGlvbiBDb21wbGV0ZWQiCiAgICBXcml0ZS1Ib3N0ICIiCgogICAgcmV0dXJuICRJc0NvbnRpbnVlZAp9CgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMtLS0tLS1WZXJpZnktTmV3QXp1cmUtU2VydmljZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCkZ1bmN0aW9uIFZlcmlmeS1BenVyZS1TZXJ2aWNlCnsKICAgICRJc0NvbnRpbnVlZCA9ICRmYWxzZQoKICAgIGlmKENoZWNrQW5kU3RhcnRTZXJ2aWNlIC1TZXJ2aWNlTmFtZSAnQURTeW5jJyAtU2VydmljZURpc3BsYXlOYW1lICdNaWNyb3NvZnQgQXp1cmUgQUQgU3luYycpCiAgICB7CiAgICAgICAgJElzQ29udGludWVkID0gJHRydWUKICAgIH0KCiAgICByZXR1cm4gJElzQ29udGludWVkCn0KCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIy0tLS0tLUNoZWNrIGFuZCBydW4gU2VydmljZS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKRnVuY3Rpb24gQ2hlY2tBbmRTdGFydFNlcnZpY2UoW1N0cmluZ10gJFNlcnZpY2VOYW1lICwgJFNlcnZpY2VEaXNwbGF5TmFtZSkKewogICAgQ2hlY2tTZXJ2aWNlU3RhdHVzIC1TZXJ2aWNlTmFtZSAkU2VydmljZU5hbWUKCiAgICAkSXNDb250aW51ZWQgPSAkZmFsc2UKCiAgICBXcml0ZS1Ib3N0ICItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIgogICAgV3JpdGUtSG9zdCAiQ2hlY2tpbmcgJFNlcnZpY2VEaXNwbGF5TmFtZSBTZXJ2aWNlIgogICAgV3JpdGUtSG9zdCAiICAgICIgCgogICAgdHJ5CiAgICB7CiAgICAgICAgaWYoR2V0LVNlcnZpY2UgJFNlcnZpY2VOYW1lIC1FcnJvckFjdGlvbiBTdG9wKQogICAgICAgIHsKICAgICAgICAgICAgaWYoIC1ub3QoKEdldC1TZXJ2aWNlIHwgV2hlcmUgeyRfLm5hbWUgLWVxICRTZXJ2aWNlTmFtZX0pLlN0YXR1cyAtZXEgIlJ1bm5pbmciKSkKICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgIHRyeQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIEdldC1TZXJ2aWNlICRTZXJ2aWNlTmFtZSAtRXJyb3JBY3Rpb24gU3RvcHwgV2hlcmUgeyRfLlN0YXR1cyAtZXEgJ1N0b3BwZWQnfSB8IFN0YXJ0LVNlcnZpY2UgLUVycm9yQWN0aW9uIFN0b3AgCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLXMgNwoKICAgICAgICAgICAgICAgICAgICBpZigoR2V0LVNlcnZpY2UgLUVycm9yQWN0aW9uIFN0b3B8IFdoZXJlIHskXy5uYW1lIC1lcSAkU2VydmljZU5hbWV9KS5TdGF0dXMgLWVxICJSdW5uaW5nIikKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLUhvc3QgLUZvcmVncm91bmRDb2xvciA4ICJgdCAkU2VydmljZURpc3BsYXlOYW1lIFNlcnZpY2Ugc3RhcnRlZCIKICAgICAgICAgICAgICAgICAgICAgICAgJElzQ29udGludWVkID0gJHRydWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGdsb2JhbDpDb2RlID0gMQogICAgICAgICAgICAgICAgICAgICAgICAkZ2xvYmFsOkVycm9yTWVzc2FnZUFycmF5Kz0gIiQoJFNlcnZpY2VEaXNwbGF5TmFtZSkgU2VydmljZSBjb3VsZCBub3QgYmUgc3RhcnRlZCIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRnbG9iYWw6Q29kZSA9IDIKICAgICAgICAgICAgICAgICAgICAkZ2xvYmFsOkVycm9yTWVzc2FnZUFycmF5Kz0gIkVycm9yIHdoaWxlIFN0YXJ0aW5nICQoJFNlcnZpY2VEaXNwbGF5TmFtZSkgU2VydmljOiAkXy5leGNlcHRpb24ubWVzc2FnZSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLUhvc3QgLUZvcmVncm91bmRDb2xvciA4ICJgdCAkU2VydmljZURpc3BsYXlOYW1lIFNlcnZpY2UgaXMgcnVubmluZyIKICAgICAgICAgICAgICAgICRJc0NvbnRpbnVlZCA9ICR0cnVlCiAgICAgICAgICAgIH0gCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRnbG9iYWw6Q29kZSA9IDEKICAgICAgICAgICAgJGdsb2JhbDpFcnJvck1lc3NhZ2VBcnJheSs9ICIkKCRTZXJ2aWNlRGlzcGxheU5hbWUpIFNlcnZpY2UgTm90IEZvdW5kIgogICAgICAgIH0KICAgIH0KICAgIGNhdGNoCiAgICB7CiAgICAgICAgJGdsb2JhbDpDb2RlID0gMgogICAgICAgICRnbG9iYWw6RXJyb3JNZXNzYWdlQXJyYXkrPSAiRXJyb3Igd2hpbGUgU3RhcnRpbmcgJCgkU2VydmljZURpc3BsYXlOYW1lKSBTZXJ2aWNlOiAkXy5leGNlcHRpb24ubWVzc2FnZSIKICAgIH0KCiAgICByZXR1cm4gJElzQ29udGludWVkCn0KCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIy0tLS0tLVZlcmlmeSBBenVyZSBNb2R1bGUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpGdW5jdGlvbiBWZXJpZnlNb2R1bGUoW1N0cmluZ10gJE1vZHVsZU5hbWUpCnsKICAgICRJc0NvbnRpbnVlZCA9ICRmYWxzZQoKICAgIFdyaXRlLUhvc3QgIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0iCiAgICBXcml0ZS1Ib3N0ICJWZXJpZnlpbmcgTW9kdWxlIDogJE1vZHVsZU5hbWUiCiAgICBXcml0ZS1Ib3N0ICIgICAgIiAKCiAgICBpZiAoR2V0LU1vZHVsZSAtRXJyb3JBY3Rpb24gU3RvcCB8IFdoZXJlLU9iamVjdCB7JF8uTmFtZSAtZXEgJE1vZHVsZU5hbWV9KSAKICAgIHsKICAgICAgICB3cml0ZS1ob3N0IC1Gb3JlZ3JvdW5kQ29sb3IgOCAiYHQgJE1vZHVsZU5hbWUgZXhpc3QiIAogICAgICAgICRJc0NvbnRpbnVlZCA9ICR0cnVlCiAgICB9IAogICAgZWxzZSAKICAgIHsKICAgICAgICAjIElmIG1vZHVsZSBpcyBub3QgaW1wb3J0ZWQsIGJ1dCBhdmFpbGFibGUgb24gZGlzayB0aGVuIGltcG9ydAogICAgICAgIGlmIChHZXQtTW9kdWxlIC1MaXN0QXZhaWxhYmxlIC1FcnJvckFjdGlvbiBTdG9wfCBXaGVyZS1PYmplY3QgeyRfLk5hbWUgLWVxICRNb2R1bGVOYW1lfSkgCiAgICAgICAgewoJCQl0cnkKICAgICAgICAgICAgewoJCQkJSW1wb3J0LU1vZHVsZSAkTW9kdWxlTmFtZSAtRXJyb3JBY3Rpb24gU3RvcCAjLVZlcmJvc2UKCgkJCQl3cml0ZS1ob3N0IC1Gb3JlZ3JvdW5kQ29sb3IgOCAiYHQgJE1vZHVsZU5hbWUgZXhpc3QiIAoJCQkJJElzQ29udGludWVkID0gJHRydWUKCQkJfQoJCQljYXRjaAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkZ2xvYmFsOkNvZGUgPSAyCiAgICAgICAgICAgICAgICAkZ2xvYmFsOkVycm9yTWVzc2FnZUFycmF5Kz0gIkVycm9yIHdoaWxlIGltcG9ydGluZyBNb2R1bGUgJCgkTW9kdWxlTmFtZSk6ICRfLmV4Y2VwdGlvbi5tZXNzYWdlIgoJCQl9CiAgICAgICAgfSAKICAgIH0KCiAgICByZXR1cm4gJElzQ29udGludWVkCn0KCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMtLS0tLS1DaGVjayBJZiBhbnkgU3luYyBpcyBydW5uaW5nIC0tLS0tLS0tLS0tLS0tLS0tLS0tCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCkZ1bmN0aW9uIGNoZWNrLUFEU3luY0Nvbm5lY3RvclJ1blN0YXR1cwp7CiAgICAkSXNDb250aW51ZWQgPSAkZmFsc2UKCiAgICBXcml0ZS1Ib3N0ICItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIgogICAgV3JpdGUtSG9zdCAiQ2hlY2tpbmcgZm9yIEFjdGl2ZSBTZXNzaW9uIgogICAgV3JpdGUtSG9zdCAiICAgICIgCgogICAgaWYoR2V0LUFEU3luY0Nvbm5lY3RvclJ1blN0YXR1cykKICAgIHsKICAgICAgICAkZ2xvYmFsOkNvZGUgPSAxCiAgICAgICAgJGdsb2JhbDpFcnJvck1lc3NhZ2VBcnJheSs9ICJTeW5jIGVuZ2luZSBpcyBCdXN5IgogICAgfQogICAgZWxzZQogICAgewogICAgICAgIHdyaXRlLWhvc3QgLUZvcmVncm91bmRDb2xvciA4ICJgdCBTeW5jIGVuZ2luZSBpcyBmcmVlIgogICAgICAgICRJc0NvbnRpbnVlZD0gJHRydWUKICAgIH0KCiAgICByZXR1cm4gJElzQ29udGludWVkCn0KCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIy0tLS0tLUxvZ2luIHRvIEF6dXJlIEFjY291bnQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKRnVuY3Rpb24gTG9naW4tQXp1cmVBY2NvdW50IAp7CiAgICAkSXNDb250aW51ZWQgPSAkZmFsc2UKCiAgICBXcml0ZS1Ib3N0ICItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIgogICAgV3JpdGUtSG9zdCAiQ2hlY2tpbmcgQXp1cmUgQWNjb3VudCIKICAgIFdyaXRlLUhvc3QgIiAgICAiIAoKICAgICRwYXNzd29yZCA9ICRQYXNzIHwgQ29udmVydFRvLVNlY3VyZVN0cmluZyAtYXNQbGFpblRleHQgLUZvcmNlCiAgICAkVXNlckNyZWRlbnRpYWwgPSBOZXctT2JqZWN0IFN5c3RlbS5NYW5hZ2VtZW50LkF1dG9tYXRpb24uUFNDcmVkZW50aWFsKCR1c2VybmFtZSwkcGFzc3dvcmQpCgogICAgdHJ5CiAgICB7CiAgICAgICAgaWYoQ29ubmVjdC1BenVyZUFEIC1DcmVkZW50aWFsICRVc2VyQ3JlZGVudGlhbCAtRXJyb3JBY3Rpb24gU3RvcCkKICAgICAgICB7CiAgICAgICAgICAgICB3cml0ZS1ob3N0IC1Gb3JlZ3JvdW5kQ29sb3IgOCAiQXp1cmUgTG9naW4gU3VjZXNzZnVsbCIKICAgICAgICAgICAgICRJc0NvbnRpbnVlZD0gJHRydWUKICAgICAgICB9CiAgICB9CiAgICBjYXRjaAogICAgewogICAgICAgICRnbG9iYWw6Q29kZSA9IDIKICAgICAgICAkZ2xvYmFsOkVycm9yTWVzc2FnZUFycmF5Kz0gIkVycm9yIHdoaWxlIEF6dXJlIExvZ2luOiAkXy5leGNlcHRpb24ubWVzc2FnZSIKICAgIH0KCiAgICByZXR1cm4gJElzQ29udGludWVkCn0KCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMtLS0tLS1HZXQgQ29tcGFueSBJbmZvcm1hdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpGdW5jdGlvbiBHZXQtQ29tcGFueUluZm9ybWF0aW9uCnsKICAgIFdyaXRlLUhvc3QgIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0iCiAgICBXcml0ZS1Ib3N0ICJDaGVja2luZyBDb21wYW55IEluZm9ybWF0aW9uIgogICAgV3JpdGUtSG9zdCAiICAgICIgCgogICAgJHBhc3N3b3JkID0gJFBhc3MgfCBDb252ZXJ0VG8tU2VjdXJlU3RyaW5nIC1hc1BsYWluVGV4dCAtRm9yY2UKICAgICRVc2VyQ3JlZGVudGlhbCA9IE5ldy1PYmplY3QgU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5QU0NyZWRlbnRpYWwoJHVzZXJuYW1lLCRwYXNzd29yZCkKCiAgICB0cnkKICAgIHsKICAgICAgICBDb25uZWN0LU1zb2xTZXJ2aWNlIC1DcmVkZW50aWFsICRVc2VyQ3JlZGVudGlhbAoKICAgICAgICBHZXQtTXNvbENvbXBhbnlJbmZvcm1hdGlvbiB8IFNlbGVjdC1PYmplY3QgRGlzcGxheU5hbWUsIERpclN5bmNTZXJ2aWNlQWNjb3VudCwgTGFzdFBhc3N3b3JkU3luY1RpbWUsIExhc3REaXJTeW5jVGltZSB8Rm9yRWFjaC1PYmplY3QgewogICAgICAgICAgICAKICAgICAgICAgICAgI3dyaXRlLWhvc3QgLUZvcmVncm91bmRDb2xvciA4ICJOYW1lIDogJCgkXy5EaXNwbGF5TmFtZSkiIAogICAgICAgICAgICAjd3JpdGUtaG9zdCAtRm9yZWdyb3VuZENvbG9yIDggIkRpciBTeW5jU2VydmljZSBBY2NvdW50IDogJCgkXy5EaXJTeW5jU2VydmljZUFjY291bnQpIgogICAgICAgICAgICAjd3JpdGUtaG9zdCAtRm9yZWdyb3VuZENvbG9yIDggIkxhc3QgUGFzc3dvcmQgc3luYyA6ICQoJF8uTGFzdFBhc3N3b3JkU3luY1RpbWUpIiAKICAgICAgICAgICAgI3dyaXRlLWhvc3QgLUZvcmVncm91bmRDb2xvciA4ICJMYXN0IGRpciBzeW5jIDogJCgkXy5MYXN0RGlyU3luY1RpbWUpIgogICAgICAgICAgICAKICAgICAgICAgICAgJENvbXBueUluZm9ybWF0aW9uT2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ05hbWUnIC1WYWx1ZSAkKCRfLkRpc3BsYXlOYW1lKQogICAgICAgICAgICAkQ29tcG55SW5mb3JtYXRpb25PYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSAnRGlyIFN5bmNTZXJ2aWNlIEFjY291bnQnIC1WYWx1ZSAkKCRfLkRpclN5bmNTZXJ2aWNlQWNjb3VudCkgCiAgICAgICAgICAgICRDb21wbnlJbmZvcm1hdGlvbk9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lICdMYXN0IFBhc3N3b3JkIHN5bmMnIC1WYWx1ZSAkKCRfLkxhc3RQYXNzd29yZFN5bmNUaW1lKSAKICAgICAgICAgICAgJENvbXBueUluZm9ybWF0aW9uT2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ0xhc3QgZGlyIHN5bmMnIC1WYWx1ZSAkKCRfLkxhc3REaXJTeW5jVGltZSkgCiAgICAgICAgICAgIAogICAgICAgICAgICAkZ2xvYmFsOlN1Y2Nlc3NNZXNzYWdlQXJyYXkgKz0gIk5hbWU6ICQoJF8uRGlzcGxheU5hbWUpIgogICAgICAgICAgICAkZ2xvYmFsOlN1Y2Nlc3NNZXNzYWdlQXJyYXkgKz0gIkRpciBTeW5jU2VydmljZSBBY2NvdW50OiAkKCRfLkRpclN5bmNTZXJ2aWNlQWNjb3VudCkiIAogICAgICAgICAgICAkZ2xvYmFsOlN1Y2Nlc3NNZXNzYWdlQXJyYXkgKz0gIkxhc3QgUGFzc3dvcmQgc3luYzogJCgkXy5MYXN0UGFzc3dvcmRTeW5jVGltZSkiIAogICAgICAgICAgICAkZ2xvYmFsOlN1Y2Nlc3NNZXNzYWdlQXJyYXkgKz0gIkxhc3QgZGlyIHN5bmM6ICQoJF8uTGFzdERpclN5bmNUaW1lKSIgCiAgICAgICAgfQoKICAgICAgICAjd3JpdGUtaG9zdCAtRm9yZWdyb3VuZENvbG9yIDEwICJOZXh0IHN5bmMiCgogICAgICAgICRzY2hkbCA9IEdldC1BRFN5bmNTY2hlZHVsZXIKICAgICAgICAkQ29tcG55SW5mb3JtYXRpb25PYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSAnQWxsb3dlZFN5bmNDeWNsZUludGVydmFsJyAtVmFsdWUgJCgkc2NoZGwuQWxsb3dlZFN5bmNDeWNsZUludGVydmFsKQogICAgICAgICRDb21wbnlJbmZvcm1hdGlvbk9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lICdDdXJyZW50bHlFZmZlY3RpdmVTeW5jQ3ljbGVJbnRlcnZhbCcgLVZhbHVlICQoJHNjaGRsLkN1cnJlbnRseUVmZmVjdGl2ZVN5bmNDeWNsZUludGVydmFsKQogICAgICAgICRDb21wbnlJbmZvcm1hdGlvbk9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lICdDdXN0b21pemVkU3luY0N5Y2xlSW50ZXJ2YWwnIC1WYWx1ZSAkKCRzY2hkbC5DdXN0b21pemVkU3luY0N5Y2xlSW50ZXJ2YWwpCiAgICAgICAgJENvbXBueUluZm9ybWF0aW9uT2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ05leHRTeW5jQ3ljbGVQb2xpY3lUeXBlJyAtVmFsdWUgJCgkc2NoZGwuTmV4dFN5bmNDeWNsZVBvbGljeVR5cGUpCiAgICAgICAgJENvbXBueUluZm9ybWF0aW9uT2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ05leHRTeW5jQ3ljbGVTdGFydFRpbWVJblVUQycgLVZhbHVlICQoJHNjaGRsLk5leHRTeW5jQ3ljbGVTdGFydFRpbWVJblVUQykKICAgICAgICAkQ29tcG55SW5mb3JtYXRpb25PYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSAnUHVyZ2VSdW5IaXN0b3J5SW50ZXJ2YWwnIC1WYWx1ZSAkKCRzY2hkbC5QdXJnZVJ1bkhpc3RvcnlJbnRlcnZhbCkKICAgICAgICAkQ29tcG55SW5mb3JtYXRpb25PYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSAnU3luY0N5Y2xlRW5hYmxlZCcgLVZhbHVlICQoJHNjaGRsLlN5bmNDeWNsZUVuYWJsZWQpCiAgICAgICAgJENvbXBueUluZm9ybWF0aW9uT2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ01haW50ZW5hbmNlRW5hYmxlZCcgLVZhbHVlICQoJHNjaGRsLk1haW50ZW5hbmNlRW5hYmxlZCkKICAgICAgICAkQ29tcG55SW5mb3JtYXRpb25PYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSAnU3RhZ2luZ01vZGVFbmFibGVkJyAtVmFsdWUgJCgkc2NoZGwuU3RhZ2luZ01vZGVFbmFibGVkKQogICAgICAgICRDb21wbnlJbmZvcm1hdGlvbk9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lICdTY2hlZHVsZXJTdXNwZW5kZWQnIC1WYWx1ZSAkKCRzY2hkbC5TY2hlZHVsZXJTdXNwZW5kZWQpCiAgICAgICAgJENvbXBueUluZm9ybWF0aW9uT2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ1N5bmNDeWNsZUluUHJvZ3Jlc3MnIC1WYWx1ZSAkKCRzY2hkbC5TeW5jQ3ljbGVJblByb2dyZXNzKQoKICAgICAgICAkZ2xvYmFsOlN1Y2Nlc3NNZXNzYWdlQXJyYXkgKz0gIkFsbG93ZWRTeW5jQ3ljbGVJbnRlcnZhbDogJCgkc2NoZGwuQWxsb3dlZFN5bmNDeWNsZUludGVydmFsKSIKICAgICAgICAkZ2xvYmFsOlN1Y2Nlc3NNZXNzYWdlQXJyYXkgKz0gIkN1cnJlbnRseUVmZmVjdGl2ZVN5bmNDeWNsZUludGVydmFsOiAkKCRzY2hkbC5DdXJyZW50bHlFZmZlY3RpdmVTeW5jQ3ljbGVJbnRlcnZhbCkiCiAgICAgICAgJGdsb2JhbDpTdWNjZXNzTWVzc2FnZUFycmF5ICs9ICJDdXN0b21pemVkU3luY0N5Y2xlSW50ZXJ2YWw6ICQoJHNjaGRsLkN1c3RvbWl6ZWRTeW5jQ3ljbGVJbnRlcnZhbCkiCiAgICAgICAgJGdsb2JhbDpTdWNjZXNzTWVzc2FnZUFycmF5ICs9ICJOZXh0U3luY0N5Y2xlUG9saWN5VHlwZTogJCgkc2NoZGwuTmV4dFN5bmNDeWNsZVBvbGljeVR5cGUpIgogICAgICAgICRnbG9iYWw6U3VjY2Vzc01lc3NhZ2VBcnJheSArPSAiTmV4dFN5bmNDeWNsZVN0YXJ0VGltZUluVVRDOiAkKCRzY2hkbC5OZXh0U3luY0N5Y2xlU3RhcnRUaW1lSW5VVEMpIgogICAgICAgICRnbG9iYWw6U3VjY2Vzc01lc3NhZ2VBcnJheSArPSAiUHVyZ2VSdW5IaXN0b3J5SW50ZXJ2YWw6ICQoJHNjaGRsLlB1cmdlUnVuSGlzdG9yeUludGVydmFsKSIKICAgICAgICAkZ2xvYmFsOlN1Y2Nlc3NNZXNzYWdlQXJyYXkgKz0gIlN5bmNDeWNsZUVuYWJsZWQ6ICQoJHNjaGRsLlN5bmNDeWNsZUVuYWJsZWQpIgogICAgICAgICRnbG9iYWw6U3VjY2Vzc01lc3NhZ2VBcnJheSArPSAiTWFpbnRlbmFuY2VFbmFibGVkOiAkKCRzY2hkbC5NYWludGVuYW5jZUVuYWJsZWQpIgogICAgICAgICRnbG9iYWw6U3VjY2Vzc01lc3NhZ2VBcnJheSArPSAiU3RhZ2luZ01vZGVFbmFibGVkOiAkKCRzY2hkbC5TdGFnaW5nTW9kZUVuYWJsZWQpIgogICAgICAgICRnbG9iYWw6U3VjY2Vzc01lc3NhZ2VBcnJheSArPSAiU2NoZWR1bGVyU3VzcGVuZGVkOiAkKCRzY2hkbC5TY2hlZHVsZXJTdXNwZW5kZWQpIgogICAgICAgICRnbG9iYWw6U3VjY2Vzc01lc3NhZ2VBcnJheSArPSAiU3luY0N5Y2xlSW5Qcm9ncmVzczogJCgkc2NoZGwuU3luY0N5Y2xlSW5Qcm9ncmVzcykiCgoKICAgICAgICAjU3RhcnQtU2xlZXAgLXMgMTAKCiAgICAgICAgJE91SW5mbyA9IEdldC1NU09sVXNlciAtQUxMIHwgU2VsZWN0LU9iamVjdCBVc2VyUHJpbmNpcGFsTmFtZSwgTGFzdERpclN5bmNUaW1lCiAgICAgICAgJENvbXBueUluZm9ybWF0aW9uT2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ1VzZXJQcmluY2lwYWxOYW1lJyAtVmFsdWUgJCgkT3VJbmZvLlVzZXJQcmluY2lwYWxOYW1lKQogICAgICAgICRDb21wbnlJbmZvcm1hdGlvbk9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lICdMYXN0RGlyU3luY1RpbWUnIC1WYWx1ZSAkKCRPdUluZm8uTGFzdERpclN5bmNUaW1lKQoKICAgICAgICAkZ2xvYmFsOlN1Y2Nlc3NNZXNzYWdlQXJyYXkgKz0gIlVzZXJQcmluY2lwYWxOYW1lOiAkKCRPdUluZm8uVXNlclByaW5jaXBhbE5hbWUpIgogICAgICAgICRnbG9iYWw6U3VjY2Vzc01lc3NhZ2VBcnJheSArPSAiTGFzdERpclN5bmNUaW1lOiAkKCRPdUluZm8uTGFzdERpclN5bmNUaW1lKSIKICAgIH0KICAgIGNhdGNoCiAgICB7CiAgICAgICAgJGdsb2JhbDpDb2RlID0gMgogICAgICAgICRnbG9iYWw6RXJyb3JNZXNzYWdlQXJyYXkrPSAiRXJyb3Igd2hpbGUgZ2V0dGluZyBDb21wYW55IEluZm9ybWF0aW9uOiAkXy5leGNlcHRpb24ubWVzc2FnZSIKICAgIH0KCn0KCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIy0tLS0tLVN5bmMgQUQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKRnVuY3Rpb24gU3luYy1BRCAKewogICAgJElzQ29udGludWVkID0gJGZhbHNlCgogICAgV3JpdGUtSG9zdCAiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSIKICAgIFdyaXRlLUhvc3QgIlN5bmNpbmcgQWN0aXZlIERpcmVjdG9yeS4uICgkU3luY1R5cGUpIgogICAgV3JpdGUtSG9zdCAiICAgICIgCiAgICAKICAgIHRyeQogICAgewogICAgICAgIGlmKCRTeW5jVHlwZSAtZXEgIkRlbHRhU3luYyIpCiAgICAgICAgewogICAgICAgICAgICBTdGFydC1BRFN5bmNTeW5jQ3ljbGUgLVBvbGljeVR5cGUgZGVsdGEKICAgICAgICAgICAgV3JpdGUtSG9zdCAtRm9yZWdyb3VuZENvbG9yIDggImB0IFN5bmMgc3RydGVkIFN1Y2Vzc2Z1bGx5IgogICAgICAgICAgICAkSXNDb250aW51ZWQgPSAkdHJ1ZQogICAgICAgIH0KICAgICAgICBlbHNlaWYoJFN5bmNUeXBlIC1lcSAiRnVsbFN5bmMiKQogICAgICAgIHsKICAgICAgICAgICAgU3RhcnQtQURTeW5jU3luY0N5Y2xlIC1Qb2xpY3lUeXBlIGluaXRpYWwKICAgICAgICAgICAgV3JpdGUtSG9zdCAtRm9yZWdyb3VuZENvbG9yIDggImB0IFN5bmMgc3RydGVkIFN1Y2Vzc2Z1bGx5IgogICAgICAgICAgICAkSXNDb250aW51ZWQgPSAkdHJ1ZQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkZ2xvYmFsOkNvZGUgPSAxCiAgICAgICAgICAgICRnbG9iYWw6RXJyb3JNZXNzYWdlQXJyYXkrPSAiU3luYyB0eXBlIE5vdCBGb3VuZCBpdCBzaG91bGQgYmUgKCdGdWxsU3luYycgb3IgJ0RlbHRhU3luYycpIgoKICAgICAgICAgICAgI1dyaXRlLUhvc3QgLUZvcmVncm91bmRDb2xvciAxMCAiYHQgU3luYyB0eXBlIE5vdCBGb3VuZCBpdCBzaG91bGQgYmUgKCdGdWxsU3luYycgb3IgJ0RlbHRhU3luYycpIgogICAgICAgIH0KICAgIH0KICAgIGNhdGNoCiAgICB7CiAgICAgICAgJGdsb2JhbDpDb2RlID0gMgogICAgICAgICRnbG9iYWw6RXJyb3JNZXNzYWdlQXJyYXkrPSAiRXJyb3Igd2hpbGUgU3luY2luZyBBY3RpdmUgRGlyZWN0b3J5OiAkXy5leGNlcHRpb24ubWVzc2FnZSIKCiAgICAgICAgI1dyaXRlLVdhcm5pbmcgIkVycm9yIHdoaWxlIEF6dXJlIExvZ2luIiM6ICRfLmV4Y2VwdGlvbi5tZXNzYWdlIgogICAgfQoKICAgIHJldHVybiAkSXNDb250aW51ZWQKfQoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjLS0tLS0tQ2hlY2sgU2VydmljZSBTdGF0dXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpGdW5jdGlvbiBDaGVja1NlcnZpY2VTdGF0dXMoW1N0cmluZ10gJFNlcnZpY2VOYW1lKQp7CiAgICBXcml0ZS1Ib3N0ICIiCgogICAgaWYoR2V0LVNlcnZpY2UgfCBXaGVyZSB7JF8ubmFtZSAtZXEgJFNlcnZpY2VOYW1lfSkKICAgIHsKICAgICAgICAjLS0tLS1TcG9vbGVyIENoZWNrLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBHZXQtV21pT2JqZWN0IFdpbjMyX1NlcnZpY2UgLUNvbXB1dGVyTmFtZSAufCBXaGVyZS1PYmplY3QgeyRfLk5hbWUgLWVxICRTZXJ2aWNlTmFtZSAgLWFuZCAgJF8uU3RhdGUgLWVxICdydW5uaW5nJ318Zm9yZWFjaCB7CiAgICAgICAgICAgICN3cml0ZS1ob3N0ICJTdGF0ZTogIiAkXy5TdGF0ZQogICAgICAgICAgICAjd3JpdGUtaG9zdCAiU3RhdHVzOiAiICRfLlN0YXR1cwogICAgICAgICAgICAKICAgICAgICAgICAgaWYoJF8uU3RhdGUgLWVxICJSdW5uaW5nIikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYoJF8uU3RhdHVzIC1lcSAiRGVncmFkZWQiKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRnbG9iYWw6Q29kZSA9IDMKICAgICAgICAgICAgICAgICAgICAkZ2xvYmFsOkVycm9yTWVzc2FnZUFycmF5Kz0gIiQoJFNlcnZpY2VOYW1lKSBTZXJ2aWNlIGlzIG5vdCByZXNwb25kaW5nIgoKICAgICAgICAgICAgICAgICAgICAjV3JpdGUtV2FybmluZyAiJFNlcnZpY2VOYW1lIFNlcnZpY2UgaXMgbm90IHJlc3BvbmRpbmciCiAgICAgICAgICAgICAgICAgICAgZXhpdAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgICMtLS0tLVJlZ2lzdG9yeSBDaGVjay0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgR2V0LVNlcnZpY2UgLU5hbWUgJFNlcnZpY2VOYW1lIHwgU2VsZWN0LU9iamVjdCAtUHJvcGVydHkgKiB8Zm9yZWFjaCB7CiAgICAgICAgICAgICN3cml0ZS1ob3N0ICJTdGF0dXM6ICIgJF8uU3RhdHVzCiAgICAgICAgICAgICN3cml0ZS1ob3N0ICJSZXF1aXJlZFNlcnZpY2VzOiAiICRfLlNlcnZpY2VzRGVwZW5kZWRPbgoKICAgICAgICAgICAgSUYgKFtzdHJpbmddOjpJc051bGxPckVtcHR5KCRfLlNlcnZpY2VzRGVwZW5kZWRPbikpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRnbG9iYWw6Q29kZSA9IDMKICAgICAgICAgICAgICAgICRnbG9iYWw6RXJyb3JNZXNzYWdlQXJyYXkrPSAiJCgkU2VydmljZU5hbWUpIFNlcnZpY2UgaXMgbm90IHJlc3BvbmRpbmciCgogICAgICAgICAgICAgICAgI1dyaXRlLVdhcm5pbmcgIiRTZXJ2aWNlTmFtZSBTZXJ2aWNlIGlzIG5vdCByZXNwb25kaW5nIgogICAgICAgICAgICAgICAgZXhpdAogICAgICAgICAgICB9IAogICAgICAgIH0gICAgICAgCiAgICAgICAgIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkZ2xvYmFsOkNvZGUgPSAzCiAgICAgICAgJGdsb2JhbDpFcnJvck1lc3NhZ2VBcnJheSs9ICIkKCRTZXJ2aWNlTmFtZSkgU2VydmljZSBpcyBub3QgcmVzcG9uZGluZyIKCiAgICAgICAgI1dyaXRlLVdhcm5pbmcgIiRTZXJ2aWNlTmFtZSBTZXJ2aWNlIGlzIG5vdCByZXNwb25kaW5nIgogICAgICAgIGV4aXQKICAgIH0KCn0KCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMtLS0tLS1KU09OIGZvciBQUzIgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmZ1bmN0aW9uIEVzY2FwZS1KU09OU3RyaW5nKCRzdHIpCnsKCWlmICgkc3RyIC1lcSAkbnVsbCkgCiAgICB7CiAgICAgICAgcmV0dXJuICIiCiAgICB9CgoJJHN0ciA9ICRzdHIuVG9TdHJpbmcoKS5SZXBsYWNlKCciJywnXCInKS5SZXBsYWNlKCdcJywnXFwnKS5SZXBsYWNlKCJgbiIsJ1xuJykuUmVwbGFjZSgiYHIiLCdccicpLlJlcGxhY2UoImB0IiwnXHQnKQoKCXJldHVybiAkc3RyOwp9CgoKZnVuY3Rpb24gQ29udmVydFRvLUpTT05QUzIoJG1heERlcHRoID0gNCwkZm9yY2VBcnJheSA9ICRmYWxzZSkgCnsKCWJlZ2luIHsKCQkkZGF0YSA9IEAoKQoJfQoJcHJvY2Vzc3sKCQkkZGF0YSArPSAkXwoJfQoJCgllbmR7CgkKCQlpZiAoJGRhdGEubGVuZ3RoIC1lcSAxIC1hbmQgJGZvcmNlQXJyYXkgLWVxICRmYWxzZSkgewoJCQkkdmFsdWUgPSAkZGF0YVswXQoJCX0gZWxzZSB7CQoJCQkkdmFsdWUgPSAkZGF0YQoJCX0KCgkJaWYgKCR2YWx1ZSAtZXEgJG51bGwpIHsKCQkJcmV0dXJuICJudWxsIgoJCX0KCgkJCgoJCSRkYXRhVHlwZSA9ICR2YWx1ZS5HZXRUeXBlKCkuTmFtZQoJCQoJCXN3aXRjaCAtcmVnZXggKCRkYXRhVHlwZSkgewoJICAgICAgICAgICAgJ1N0cmluZycgIHsKCQkJCQlyZXR1cm4gICJgInswfWAiIiAtZiAoRXNjYXBlLUpTT05TdHJpbmcgJHZhbHVlICkKCQkJCX0KCgkgICAgICAgICAgICAnKFN5c3RlbVwuKT9EYXRlVGltZScgIHtyZXR1cm4gICJgInswOnl5eXktTU0tZGR9VHswOkhIOm1tOnNzfWAiIiAtZiAkdmFsdWV9CgoJICAgICAgICAgICAgJ0ludDMyfERvdWJsZScge3JldHVybiAgIiR2YWx1ZSJ9CgoJCQkJJ0Jvb2xlYW4nIHtyZXR1cm4gICIkdmFsdWUiLlRvTG93ZXIoKX0KCgkgICAgICAgICAgICAnKFN5c3RlbVwuKT9PYmplY3RcW1xdJyB7ICMgYXJyYXkKCQkJCQkKCQkJCQlpZiAoJG1heERlcHRoIC1sZSAwKXtyZXR1cm4gImAiJHZhbHVlYCIifQoJCQkJCQoJCQkJCSRqc29uUmVzdWx0ID0gJycKCQkJCQlmb3JlYWNoKCRlbGVtIGluICR2YWx1ZSl7CgkJCQkJCSNpZiAoJGVsZW0gLWVxICRudWxsKSB7Y29udGludWV9CgkJCQkJCWlmICgkanNvblJlc3VsdC5MZW5ndGggLWd0IDApIHskanNvblJlc3VsdCArPScsICd9CQkJCQoJCQkJCQkkanNvblJlc3VsdCArPSAoJGVsZW0gfCBDb252ZXJ0VG8tSlNPTlBTMiAtbWF4RGVwdGggKCRtYXhEZXB0aCAtMSkpCgkJCQkJfQoJCQkJCXJldHVybiAiWyIgKyAkanNvblJlc3VsdCArICJdIgoJICAgICAgICAgICAgfQoKCQkJCScoU3lzdGVtXC4pP0hhc2h0YWJsZScgeyAjIGhhc2h0YWJsZQoJCQkJCSRqc29uUmVzdWx0ID0gJycKCQkJCQlmb3JlYWNoKCRrZXkgaW4gJHZhbHVlLktleXMpewoJCQkJCQlpZiAoJGpzb25SZXN1bHQuTGVuZ3RoIC1ndCAwKSB7JGpzb25SZXN1bHQgKz0nLCAnfQoJCQkJCQkkanNvblJlc3VsdCArPSAKQCIKCSJ7MH0iOiB7MX0KIkAgLWYgJGtleSAsICgkdmFsdWVbJGtleV0gfCBDb252ZXJ0VG8tSlNPTlBTMiAtbWF4RGVwdGggKCRtYXhEZXB0aCAtMSkgKQoJCQkJCX0KCQkJCQlyZXR1cm4gInsiICsgJGpzb25SZXN1bHQgKyAifSIKCQkJCX0KCgkgICAgICAgICAgICBkZWZhdWx0IHsgI29iamVjdAoJCQkJCWlmICgkbWF4RGVwdGggLWxlIDApe3JldHVybiAgImAiezB9YCIiIC1mIChFc2NhcGUtSlNPTlN0cmluZyAkdmFsdWUpfQoJCQkJCQoJCQkJCXJldHVybiAieyIgKwoJCQkJCQkoKCR2YWx1ZSB8IEdldC1NZW1iZXIgLU1lbWJlclR5cGUgKnByb3BlcnR5IHwgJSB7IApAIgoJInswfSI6IHsxfQoiQCAtZiAkXy5OYW1lICwgKCR2YWx1ZS4oJF8uTmFtZSkgfCBDb252ZXJ0VG8tSlNPTlBTMiAtbWF4RGVwdGggKCRtYXhEZXB0aCAtMSkgKQkJCQoJCQkJCQoJCQkJCX0pIC1qb2luICcsICcpICsgIn0iCgkgICAgCQl9CgkJfQoJfQp9CgoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjLS0tLS0tU2V0IFJlc3VsdCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpmdW5jdGlvbiBTZXRSZXN1bHQgCnsKICAgICRSZXN1bHRPYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSAnQ29kZScgLVZhbHVlICRnbG9iYWw6Q29kZQoKICAgIGlmKCRnbG9iYWw6Q29kZSAtZXEgMCkKICAgIHsKICAgICAgICBpZigkU3luY1R5cGUgLW5lICJOb25lIikKICAgICAgICB7CiAgICAgICAgICAgICRzdWNjZXNzU3RyaW5nID0gIlN1Y2Nlc3M6ICIgKyAiU3luYyBjb21wbGV0ZWQgU3VjZXNzZnVsbHkiCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRzdWNjZXNzU3RyaW5nID0gIlN1Y2Nlc3M6ICIgKyAiY29tcGxldGVkIFN1Y2Vzc2Z1bGx5IgogICAgICAgIH0KCgogICAgICAgICRSZXN1bHRPYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSAnU3RhdHVzJyAtVmFsdWUgInN1Y2Nlc3MiCiAgICAgICAgJFJlc3VsdE9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lICdyZXN1bHQnIC1WYWx1ZSAkc3VjY2Vzc1N0cmluZwogICAgICAgIAoKICAgICAgICBpZigkU3luY1R5cGUgLWVxICJOb25lIikKICAgICAgICB7CiAgICAgICAgICAgICRSZXN1bHRPYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSAnc3Rkb3V0JyAtVmFsdWUgJGdsb2JhbDpTdWNjZXNzTWVzc2FnZUFycmF5CgogICAgICAgICAgICAkT3V0cHV0T2JqZWN0ID0gTmV3LU9iamVjdCAtVHlwZU5hbWUgcHNvYmplY3QKICAgICAgICAgICAgJE91dHB1dE9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lICdDb21wbnlJbmZvcm1hdGlvbicgLVZhbHVlICQoJENvbXBueUluZm9ybWF0aW9uT2JqZWN0KQogICAgICAgICAgICAkUmVzdWx0T2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ2RhdGFPYmplY3QnIC1WYWx1ZSAkT3V0cHV0T2JqZWN0CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRSZXN1bHRPYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSAnc3Rkb3V0JyAtVmFsdWUgJFN1Y2Nlc3NPYmplY3QKCiAgICAgICAgICAgICRPdXRwdXRPYmplY3QgPSBOZXctT2JqZWN0IC1UeXBlTmFtZSBwc29iamVjdAogICAgICAgICAgICAkT3V0cHV0T2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ1NlcnZpY2VzJyAtVmFsdWUgJCgkU3VjY2Vzc09iamVjdCkKICAgICAgICAgICAgJFJlc3VsdE9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lICdkYXRhT2JqZWN0JyAtVmFsdWUgJE91dHB1dE9iamVjdAogICAgICAgIH0KCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJFJlc3VsdE9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lICdTdGF0dXMnIC1WYWx1ZSAiZmFpbCIKCiAgICAgICAgJEVycm9yT2JqZWN0QXJheT0gQCgpCiAgICAgICAgJGVycm9yQ291bnQ9IDAKICAgICAgICAkZXJyb3JTdHJpbmcgPSAiRXJyb3I6ICIKCiAgICAgICAgZm9yZWFjaCgkRXJyb3JNZXNzYWdlIGluICRnbG9iYWw6RXJyb3JNZXNzYWdlQXJyYXkpCiAgICAgICAgewogICAgICAgICAgICAkZXJyb3JTdHJpbmcgKz0gJEVycm9yTWVzc2FnZSArICIsICIKICAgICAgICAgICAgCiAgICAgICAgICAgICRFcnJPYmplY3QgPSBOZXctT2JqZWN0IC1UeXBlTmFtZSBwc29iamVjdAogICAgICAgICAgICAkRXJyT2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ2lkJyAtVmFsdWUgJGVycm9yQ291bnQKICAgICAgICAgICAgJEVyck9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lICd0aXRsZScgLVZhbHVlICRFcnJvck1lc3NhZ2UKICAgICAgICAgICAgJEVyck9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lICdkZXRhaWwnIC1WYWx1ZSAkRXJyb3JNZXNzYWdlCgogICAgICAgICAgICAkRXJyb3JPYmplY3RBcmF5ICs9ICRFcnJPYmplY3QKCiAgICAgICAgICAgICRlcnJvckNvdW50ID0gJGVycm9yQ291bnQgKzEKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgJFJlc3VsdE9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lICdyZXN1bHQnIC1WYWx1ZSAkZXJyb3JTdHJpbmcKICAgICAgICAkUmVzdWx0T2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ3N0ZG91dCcgLVZhbHVlICRnbG9iYWw6RXJyb3JNZXNzYWdlQXJyYXkKICAgICAgICAkUmVzdWx0T2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ3N0ZGVycicgLVZhbHVlICRFcnJvck9iamVjdEFyYXkKICAgIH0KfQoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjLS0tLS0tRGlzcGxheSBSZXN1bHQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpmdW5jdGlvbiBEaXNwbGF5UmVzdWx0IAp7CgogICAgaWYoJFBTVmVyc2lvblRhYmxlLlBTVmVyc2lvbi5NYWpvciAtZ3QgMikKICAgIHsKICAgICAgICAkSlNPTlJlc3VsdD0gJFJlc3VsdE9iamVjdHxDb252ZXJ0VG8tSnNvbgogICAgICAgICRKU09OUmVzdWx0CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJEpTT05SZXN1bHQ9ICRSZXN1bHRPYmplY3R8Q29udmVydFRvLUpTT05QUzIKICAgICAgICAkSlNPTlJlc3VsdAogICAgfQp9CgoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjLS0tLS0tRXhlY3V0ZSBGdW5jdGlvbnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCmNscwoKaWYoQ2hlY2stUHJlQ29uZGl0aW9uKQp7CiAgICBpZigkU3luY1R5cGUuTGVuZ3RoIC1sZSAwKQogICAgewogICAgICAgICRnbG9iYWw6Q29kZSA9IDEKICAgICAgICAkZ2xvYmFsOkVycm9yTWVzc2FnZUFycmF5Kz0gIlN5bmMgVHlwZSBpcyBub3QgcHJvdmlkZWQiCiAgICB9CiAgICBpZigkUGFzcy5MZW5ndGggLWxlIDApCiAgICB7CiAgICAgICAgJGdsb2JhbDpDb2RlID0gMQogICAgICAgICRnbG9iYWw6RXJyb3JNZXNzYWdlQXJyYXkrPSAiUGFzc3dvcmQgaXMgbm90IHByb3ZpZGVkIgogICAgfQogICAgaWYoJHVzZXJuYW1lLkxlbmd0aCAtbGUgMCkKICAgIHsKICAgICAgICAkZ2xvYmFsOkNvZGUgPSAxCiAgICAgICAgJGdsb2JhbDpFcnJvck1lc3NhZ2VBcnJheSs9ICJVc2VyTmFtZSBpcyBub3QgcHJvdmlkZWQiCiAgICB9CiAgIAoKICAgIGlmKCRnbG9iYWw6Q29kZSAtZXEgMCkKICAgIHsKCiAgICAgICAgJFByb2NlZWQgPSAkZmFsc2UKCiAgICAgICAgaWYoVmVyaWZ5LUF6dXJlLVNlcnZpY2UpCiAgICAgICAgewogICAgICAgICAgICAkUHJvY2VlZCA9ICR0cnVlCiAgICAgICAgfQoKICAgICAgICBpZigkUHJvY2VlZCAtZXEgJHRydWUpCiAgICAgICAgewogICAgICAgICAgICAkUHJvY2VlZCA9ICRmYWxzZQoKICAgICAgICAgICAgaWYoVmVyaWZ5TW9kdWxlIC1Nb2R1bGVOYW1lICdBenVyZUFEJykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYoVmVyaWZ5TW9kdWxlIC1Nb2R1bGVOYW1lICdNU09ubGluZScpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFByb2NlZWQgPSAkdHJ1ZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZigkUHJvY2VlZCAtZXEgJHRydWUpCiAgICAgICAgewogICAgICAgICAgICBpZihjaGVjay1BRFN5bmNDb25uZWN0b3JSdW5TdGF0dXMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmKExvZ2luLUF6dXJlQWNjb3VudCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB3cml0ZS1ob3N0IC1Gb3JlZ3JvdW5kQ29sb3IgOCAiYHQgQXp1cmUgTG9naW4gU3VjZXNzZnVsbCIKCiAgICAgICAgICAgICAgICAgICAgaWYoJFN5bmNUeXBlIC1lcSAiTm9uZSIpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBHZXQtQ29tcGFueUluZm9ybWF0aW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN5bmMtQUQgCgogICAgICAgICAgICAgICAgICAgICAgICAkU3luY0RvbmU9ICR0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlKCRTeW5jRG9uZSkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtSG9zdCAiYHQgU3luY2luZywgUGxlYXNlIFdhaXQuLiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1zIDIwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU3luY0RvbmU9IEdldC1BRFN5bmNDb25uZWN0b3JSdW5TdGF0dXMKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLXMgMjAKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICRTdWNjZXNzT2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ1Jlc3VsdCcgLVZhbHVlICJTeW5jIGNvbXBsZXRlZCBTdWNlc3NmdWxseSIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGdsb2JhbDpDb2RlID0gMQogICAgICAgICAgICAgICAgICAgICRnbG9iYWw6RXJyb3JNZXNzYWdlQXJyYXkrPSAiQXp1cmUgTG9naW4gRmFpbCIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCgogICAgU2V0UmVzdWx0CiAgICBEaXNwbGF5UmVzdWx0IAp9CmVsc2UKewogICAgU2V0UmVzdWx0CiAgICBEaXNwbGF5UmVzdWx0Cn0K","jsonSchema":{"type":"object","properties":{"username":{"type":"string","title":"User Name","minLength":1},"Pass":{"type":"string","title":"Password","minLength":1},"SyncType":{"type":"string","title":"Sync Type","enum": ["None", "DeltaSync", "FullSync"]}},"required":["username","Pass","SyncType"],"additionalProperties": false},"uiSchema":{"username":{"ui:autofocus":true,"classNames":"col-sm-12"},"Pass":{"ui:autofocus":true,"classNames":"col-sm-12"},"SyncType":{"ui:autofocus":true,"classNames":"col-sm-12"},"ui:order":["username", "Pass", "SyncType"]},"isHDScript":false}
