{"id":"1218fddb-81fc-11e9-8163-00155d130b89","partnerId":"00000000-0000-0000-0000-000000000000","category":["HD Automation"],"description":"Change DNS Configuration Task","engine":"powershell","engineMaxVersion":5,"expectedExecutionTimeSec":300,"failureMessage":"Executed with errors","successMessage":"Successfully Executed","internal":false,"name":"Change DNS Configuration Task","tags":["Windows 7","Windows 10"],"sequence":true,"content":"JEdsb2JhbDpIYXNoRGF0YSA9IEAoKQ0KJFNUREVyciA9IEAoKQ0KJEdsb2JhbDpPdXRwdXRPYmogPSBAKCkNCg0KJEdsb2JhbDpTVERfRXJyb3IgPSBAKCkNCiRQcmltYXJ5X0ROUyA9ICcnDQokU2Vjb25kcnlfRE5TID0gJycNCg0KDQojJG5ldHdvcmtOYW1lICA9ICJMb2NhbCBBcmVhIENvbm5lY3Rpb24gMyINCiMkRE5TX1NlcnZlciA9ICI4LjguOC40Ig0KIyRQcm90b2NvbF9JUFY0X0lQVjYgPSAnSVBWNCcNCg0KDQokZG5zU2VydmVycyAgID0gKCIkRE5TX1NlcnZlciIpDQokZG5zU2VydmVycyA9ICRkbnNTZXJ2ZXJzLnNwbGl0KCcsJykNCg0KaWYoJGRuc1NlcnZlcnNbMF0gLW5lICRudWxsIC1vciAkZG5zU2VydmVyc1swXSAtZXEgIiIpew0KICAgJFByaW1hcnlfRE5TID0gJCgkZG5zU2VydmVyc1swXSkNCn0NCmlmKCRkbnNTZXJ2ZXJzWzFdIC1uZSAkbnVsbCAtb3IgJGRuc1NlcnZlcnNbMV0gLWVxICIiKXsNCiAgICRTZWNvbmRyeV9ETlMgPSAkKCRkbnNTZXJ2ZXJzWzFdKQ0KfQ0KJGRuc1NlcnZlcnMgICA9ICgiJFByaW1hcnlfRE5TIiwiJFNlY29uZHJ5X0ROUyIpDQoNCiRkbnNTZXJ2ZXJzID0gJGRuc1NlcnZlcnMgfCA/IHskX30NCg0KIyRpcF9hZGRyZXNzICAgPSAnMTAuMC4wLjEnDQojJHN1Ym5ldE1hc2sgICA9ICcyNTUuMC4wLjAnDQojJGdhdGV3YXkgICAgICA9ICcxMC4wLjAuMicNCiRHbG9iYWw6U1REX0Vycm9yID0gJG51bGwNCg0KJEdsb2JhbDpGaW5hbEROUzEgPSBAKCkNCmNscw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIyMjIyNDaGVjayBQcmVDb25kaXRpb24jIyMjIyMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQokaG9zdFZlclNpb25NYWpvciA9ICgkUFNWZXJzaW9uVGFibGUuUFNWZXJzaW9uLk1ham9yKS5Ub1N0cmluZygpDQokaG9zdFZlclNpb25NaW5vciA9ICgkUFNWZXJzaW9uVGFibGUuUFNWZXJzaW9uLk1pbm9yKS5Ub1N0cmluZygpDQokaG9zdFZlcnNpb24gPSAkaG9zdFZlclNpb25NYWpvciArJy4nKyAkaG9zdFZlclNpb25NaW5vciANCiANCiRvc1ZlcnNpb25NYWpvciA9IChbU3lzdGVtLkVudmlyb25tZW50XTo6T1NWZXJzaW9uLlZlcnNpb24ubWFqb3IpLlRvU3RyaW5nKCkNCiRvc1ZlcnNpb25NaW5vciA9IChbU3lzdGVtLkVudmlyb25tZW50XTo6T1NWZXJzaW9uLlZlcnNpb24ubWlub3IpLlRvU3RyaW5nKCkNCiRvc1ZlcnNpb24gPSAkb3NWZXJzaW9uTWFqb3IgKycuJysgJG9zVmVyc2lvbk1pbm9yDQogDQpbYm9vbGVhbl0kaXNQc1ZlcnNpb25PayA9IChbdmVyc2lvbl0kaG9zdFZlcnNpb24gLWdlIFt2ZXJzaW9uXScyLjAnKQ0KW2Jvb2xlYW5dJGlzT1NWZXJzaW9uT2sgPSAoW3ZlcnNpb25dJG9zVmVyc2lvbiAtZ2UgW3ZlcnNpb25dJzYuMCcpDQogICAgICANCiNXcml0ZS1Ib3N0ICJQb3dlcnNoZWxsIFZlcnNpb24gOiAkKCRob3N0VmVyc2lvbikiDQppZigtbm90ICRpc1BzVmVyc2lvbk9rKXsNCiAgIA0KICBXcml0ZS1XYXJuaW5nICJQb3dlclNoZWxsIHZlcnNpb24gYmVsb3cgMi4wIGlzIG5vdCBzdXBwb3J0ZWQiDQogIHJldHVybiANCiANCn0NCiANCiNXcml0ZS1Ib3N0ICJPUyBOYW1lIDogJCgoR2V0LVdNSU9iamVjdCB3aW4zMl9vcGVyYXRpbmdzeXN0ZW0pLk5hbWUuVG9TdHJpbmcoKS5TcGxpdCgifCIpWzBdKSIgIA0KaWYoLW5vdCAkaXNPU1ZlcnNpb25Payl7DQogDQogICBXcml0ZS1XYXJuaW5nICJQb3dlclNoZWxsIFNjcmlwdCBzdXBwb3J0cyBXaW5kb3cgNywgV2luZG93IDIwMDhSMiBhbmQgaGlnaGVyIHZlcnNpb24gb3BlcmF0aW5nIHN5c3RlbSINCiAgIHJldHVybiANCiANCn0NCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyBDcmVhdGUgU1REZXJyIGRhdGENCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQpmdW5jdGlvbiBHZXRfc3RkZXJyDQp7DQpwYXJhbSgkVGl0bGUsJGRldGFpbHMpDQokaW5mbyA9IEAoKQ0KJElEID0gMA0KDQogJGRldGFpbHMgfCAlew0KICAgICRpbmZvICs9IG5ldy1vYmplY3QgcHNvYmplY3QgLVByb3BlcnR5IEB7DQogICAgImlkIiA9ICRJRA0KICAgICJ0aXRsZSIgPSAkVGl0bGUNCiAgICAiZGV0YWlsIiA9ICRfDQogICAgfQ0KICAgICRJRCsrDQogICAgfQ0KDQpyZXR1cm4gJGluZm8NCn0NCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCmZ1bmN0aW9uIEZvcm1hdFN0cmluZyB7DQogICAgcGFyYW0oDQogICAgICAgIFtTdHJpbmddICRTdHJpbmcpDQogICAgIyByZW1vdmVkOiAjLXJlcGxhY2UgJy8nLCAnXC8nIGANCiAgICAjIFRoaXMgaXMgcmV0dXJuZWQgDQogICAgJFN0cmluZyAtcmVwbGFjZSAnXFwnLCAnXFwnIC1yZXBsYWNlICdcbicsICdcbicgYA0KICAgICAgICAtcmVwbGFjZSAnXHUwMDA4JywgJ1xiJyAtcmVwbGFjZSAnXHUwMDBDJywgJ1xmJyAtcmVwbGFjZSAnXHInLCAnXHInIGANCiAgICAgICAgLXJlcGxhY2UgJ1x0JywgJ1x0JyAtcmVwbGFjZSAnIicsICdcIicNCn0NCg0KZnVuY3Rpb24gR2V0TnVtYmVyT3JTdHJpbmcgew0KICAgIHBhcmFtKA0KICAgICAgICAkSW5wdXRPYmplY3QpDQogICAgaWYgKCRJbnB1dE9iamVjdCAtaXMgW1N5c3RlbS5CeXRlXSAtb3IgJElucHV0T2JqZWN0IC1pcyBbU3lzdGVtLkludDMyXSAtb3IgYA0KICAgICAgICAoJGVudjpQUk9DRVNTT1JfQVJDSElURUNUVVJFIC1pbWF0Y2ggJ14oPzphbWQ2NHxpYTY0KSQnIC1hbmQgJElucHV0T2JqZWN0IC1pcyBbU3lzdGVtLkludDY0XSkgLW9yIGANCiAgICAgICAgJElucHV0T2JqZWN0IC1pcyBbU3lzdGVtLkRlY2ltYWxdIC1vciAkSW5wdXRPYmplY3QgLWlzIFtTeXN0ZW0uRG91YmxlXSAtb3IgYA0KICAgICAgICAkSW5wdXRPYmplY3QgLWlzIFtTeXN0ZW0uU2luZ2xlXSAtb3IgJElucHV0T2JqZWN0IC1pcyBbbG9uZ10gLW9yIGANCiAgICAgICAgKCRTY3JpcHQ6Q29lcmNlTnVtYmVyU3RyaW5ncyAtYW5kICRJbnB1dE9iamVjdCAtbWF0Y2ggJFNjcmlwdDpOdW1iZXJSZWdleCkpIHsNCiAgICAgICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiR290IGEgbnVtYmVyIGFzIGVuZCB2YWx1ZS4iDQogICAgICAgICIkSW5wdXRPYmplY3QiDQogICAgfQ0KICAgIGVsc2Ugew0KICAgICAgICBXcml0ZS1WZXJib3NlIC1NZXNzYWdlICJHb3QgYSBzdHJpbmcgYXMgZW5kIHZhbHVlLiINCiAgICAgICAgIiIiJChGb3JtYXRTdHJpbmcgLVN0cmluZyAkSW5wdXRPYmplY3QpIiIiDQogICAgfQ0KfQ0KDQpmdW5jdGlvbiBDb252ZXJ0VG9Kc29uSW50ZXJuYWwgew0KICAgIHBhcmFtKA0KICAgICAgICAkSW5wdXRPYmplY3QsICMgbm8gdHlwZSBmb3IgYSByZWFzb24NCiAgICAgICAgW0ludDMyXSAkV2hpdGVTcGFjZVBhZCA9IDApDQogICAgW1N0cmluZ10gJEpzb24gPSAiIg0KICAgICRLZXlzID0gQCgpDQogICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiV2hpdGVTcGFjZVBhZDogJFdoaXRlU3BhY2VQYWQuIg0KICAgIGlmICgkbnVsbCAtZXEgJElucHV0T2JqZWN0KSB7DQogICAgICAgIFdyaXRlLVZlcmJvc2UgLU1lc3NhZ2UgIkdvdCAnbnVsbCcgaW4gYCRJbnB1dE9iamVjdCBpbiBpbm5lciBmdW5jdGlvbiINCiAgICAgICAgJG51bGwNCiAgICB9DQogICAgZWxzZWlmICgkSW5wdXRPYmplY3QgLWlzIFtCb29sXSAtYW5kICRJbnB1dE9iamVjdCAtZXEgJHRydWUpIHsNCiAgICAgICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiR290ICd0cnVlJyBpbiBgJElucHV0T2JqZWN0IGluIGlubmVyIGZ1bmN0aW9uIg0KICAgICAgICAkdHJ1ZQ0KICAgIH0NCiAgICBlbHNlaWYgKCRJbnB1dE9iamVjdCAtaXMgW0Jvb2xdIC1hbmQgJElucHV0T2JqZWN0IC1lcSAkZmFsc2UpIHsNCiAgICAgICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiR290ICdmYWxzZScgaW4gYCRJbnB1dE9iamVjdCBpbiBpbm5lciBmdW5jdGlvbiINCiAgICAgICAgJGZhbHNlDQogICAgfQ0KICAgIGVsc2VpZiAoJElucHV0T2JqZWN0IC1pcyBbSGFzaFRhYmxlXSkgew0KICAgICAgICAkS2V5cyA9IEAoJElucHV0T2JqZWN0LktleXMpDQogICAgICAgIFdyaXRlLVZlcmJvc2UgLU1lc3NhZ2UgIklucHV0IG9iamVjdCBpcyBhIGhhc2ggdGFibGUgKGtleXM6ICQoJEtleXMgLWpvaW4gJywgJykpLiINCiAgICB9DQogICAgZWxzZWlmICgkSW5wdXRPYmplY3QuR2V0VHlwZSgpLkZ1bGxOYW1lIC1lcSAiU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5QU0N1c3RvbU9iamVjdCIpIHsNCiAgICAgICAgJEtleXMgPSBAKEdldC1NZW1iZXIgLUlucHV0T2JqZWN0ICRJbnB1dE9iamVjdCAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgfA0KICAgICAgICAgICAgU2VsZWN0LU9iamVjdCAtRXhwYW5kUHJvcGVydHkgTmFtZSkNCiAgICAgICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiSW5wdXQgb2JqZWN0IGlzIGEgY3VzdG9tIFBvd2VyU2hlbGwgb2JqZWN0IChwcm9wZXJ0aWVzOiAkKCRLZXlzIC1qb2luICcsICcpKS4iDQogICAgfQ0KICAgIGVsc2VpZiAoJElucHV0T2JqZWN0LkdldFR5cGUoKS5OYW1lIC1tYXRjaCAnXFtcXXxBcnJheScpIHsNCiAgICAgICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiSW5wdXQgb2JqZWN0IGFwcGVhcnMgdG8gYmUgb2YgYSBjb2xsZWN0aW9uL2FycmF5IHR5cGUuIg0KICAgICAgICBXcml0ZS1WZXJib3NlIC1NZXNzYWdlICJCdWlsZGluZyBKU09OIGZvciBhcnJheSBpbnB1dCBvYmplY3QuIg0KICAgICAgICAjJEpzb24gKz0gIiAiICogKCg0ICogKCRXaGl0ZVNwYWNlUGFkIC8gNCkpICsgNCkgKyAiW2BuIiArICgoJElucHV0T2JqZWN0IHwgRm9yRWFjaC1PYmplY3Qgew0KICAgICAgICAkSnNvbiArPSAiW2BuIiArICgoJElucHV0T2JqZWN0IHwgRm9yRWFjaC1PYmplY3Qgew0KICAgICAgICAgICAgaWYgKCRudWxsIC1lcSAkXykgew0KICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgLU1lc3NhZ2UgIkdvdCBudWxsIGluc2lkZSBhcnJheS4iDQogICAgICAgICAgICAgICAgIiAiICogKCg0ICogKCRXaGl0ZVNwYWNlUGFkIC8gNCkpICsgNCkgKyAibnVsbCINCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2VpZiAoJF8gLWlzIFtCb29sXSAtYW5kICRfIC1lcSAkdHJ1ZSkgew0KICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgLU1lc3NhZ2UgIkdvdCAndHJ1ZScgaW5zaWRlIGFycmF5LiINCiAgICAgICAgICAgICAgICAiICIgKiAoKDQgKiAoJFdoaXRlU3BhY2VQYWQgLyA0KSkgKyA0KSArICJ0cnVlIg0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZWlmICgkXyAtaXMgW0Jvb2xdIC1hbmQgJF8gLWVxICRmYWxzZSkgew0KICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgLU1lc3NhZ2UgIkdvdCAnZmFsc2UnIGluc2lkZSBhcnJheS4iDQogICAgICAgICAgICAgICAgIiAiICogKCg0ICogKCRXaGl0ZVNwYWNlUGFkIC8gNCkpICsgNCkgKyAiZmFsc2UiDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlaWYgKCRfIC1pcyBbSGFzaFRhYmxlXSAtb3IgJF8uR2V0VHlwZSgpLkZ1bGxOYW1lIC1lcSAiU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5QU0N1c3RvbU9iamVjdCIgLW9yICRfLkdldFR5cGUoKS5OYW1lIC1tYXRjaCAnXFtcXXxBcnJheScpIHsNCiAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlIC1NZXNzYWdlICJGb3VuZCBhcnJheSwgaGFzaCB0YWJsZSBvciBjdXN0b20gUG93ZXJTaGVsbCBvYmplY3QgaW5zaWRlIGFycmF5LiINCiAgICAgICAgICAgICAgICAiICIgKiAoKDQgKiAoJFdoaXRlU3BhY2VQYWQgLyA0KSkgKyA0KSArIChDb252ZXJ0VG9Kc29uSW50ZXJuYWwgLUlucHV0T2JqZWN0ICRfIC1XaGl0ZVNwYWNlUGFkICgkV2hpdGVTcGFjZVBhZCArIDQpKSAtcmVwbGFjZSAnXHMqLFxzKiQnICMtcmVwbGFjZSAnXCB7NH1dJywgJ10nDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlIC1NZXNzYWdlICJHb3QgYSBudW1iZXIgb3Igc3RyaW5nIGluc2lkZSBhcnJheS4iDQogICAgICAgICAgICAgICAgJFRlbXBKc29uU3RyaW5nID0gR2V0TnVtYmVyT3JTdHJpbmcgLUlucHV0T2JqZWN0ICRfDQogICAgICAgICAgICAgICAgIiAiICogKCg0ICogKCRXaGl0ZVNwYWNlUGFkIC8gNCkpICsgNCkgKyAkVGVtcEpzb25TdHJpbmcNCiAgICAgICAgICAgIH0NCiAgICAgICAgI30pIC1qb2luICIsYG4iKSArICJgbl0sYG4iDQogICAgICAgIH0pIC1qb2luICIsYG4iKSArICJgbiQoIiAiICogKDQgKiAoJFdoaXRlU3BhY2VQYWQgLyA0KSkpXSxgbiINCiAgICB9DQogICAgZWxzZSB7DQogICAgICAgIFdyaXRlLVZlcmJvc2UgLU1lc3NhZ2UgIklucHV0IG9iamVjdCBpcyBhIHNpbmdsZSBlbGVtZW50ICh0cmVhdGVkIGFzIHN0cmluZy9udW1iZXIpLiINCiAgICAgICAgR2V0TnVtYmVyT3JTdHJpbmcgLUlucHV0T2JqZWN0ICRJbnB1dE9iamVjdA0KICAgIH0NCiAgICBpZiAoJEtleXMuQ291bnQpIHsNCiAgICAgICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiQnVpbGRpbmcgSlNPTiBmb3IgaGFzaCB0YWJsZSBvciBjdXN0b20gUG93ZXJTaGVsbCBvYmplY3QuIg0KICAgICAgICAkSnNvbiArPSAie2BuIg0KICAgICAgICBmb3JlYWNoICgkS2V5IGluICRLZXlzKSB7DQogICAgICAgICAgICAjIC1pcyBbUFNDdXN0b21PYmplY3RdKSB7ICMgdGhpcyB3YXMgYnVnZ3kgd2l0aCBjYWxjdWxhdGVkIHByb3BlcnRpZXMsIHRoZSB2YWx1ZSB3YXMgdGhvdWdodCB0byBiZSBQU0N1c3RvbU9iamVjdA0KICAgICAgICAgICAgaWYgKCRudWxsIC1lcSAkSW5wdXRPYmplY3QuJEtleSkgew0KICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgLU1lc3NhZ2UgIkdvdCBudWxsIGFzIGAkSW5wdXRPYmplY3QuYCRLZXkgaW4gaW5uZXIgaGFzaCBvciBQUyBvYmplY3QuIg0KICAgICAgICAgICAgICAgICRKc29uICs9ICIgIiAqICgoNCAqICgkV2hpdGVTcGFjZVBhZCAvIDQpKSArIDQpICsgIiIiJEtleSIiOiBudWxsLGBuIg0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZWlmICgkSW5wdXRPYmplY3QuJEtleSAtaXMgW0Jvb2xdIC1hbmQgJElucHV0T2JqZWN0LiRLZXkgLWVxICR0cnVlKSB7DQogICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiR290ICd0cnVlJyBpbiBgJElucHV0T2JqZWN0LmAkS2V5IGluIGlubmVyIGhhc2ggb3IgUFMgb2JqZWN0LiINCiAgICAgICAgICAgICAgICAkSnNvbiArPSAiICIgKiAoKDQgKiAoJFdoaXRlU3BhY2VQYWQgLyA0KSkgKyA0KSArICIiIiRLZXkiIjogdHJ1ZSxgbiIgICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlaWYgKCRJbnB1dE9iamVjdC4kS2V5IC1pcyBbQm9vbF0gLWFuZCAkSW5wdXRPYmplY3QuJEtleSAtZXEgJGZhbHNlKSB7DQogICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiR290ICdmYWxzZScgaW4gYCRJbnB1dE9iamVjdC5gJEtleSBpbiBpbm5lciBoYXNoIG9yIFBTIG9iamVjdC4iDQogICAgICAgICAgICAgICAgJEpzb24gKz0gIiAiICogKCg0ICogKCRXaGl0ZVNwYWNlUGFkIC8gNCkpICsgNCkgKyAiIiIkS2V5IiI6IGZhbHNlLGBuIg0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZWlmICgkSW5wdXRPYmplY3QuJEtleSAtaXMgW0hhc2hUYWJsZV0gLW9yICRJbnB1dE9iamVjdC4kS2V5LkdldFR5cGUoKS5GdWxsTmFtZSAtZXEgIlN5c3RlbS5NYW5hZ2VtZW50LkF1dG9tYXRpb24uUFNDdXN0b21PYmplY3QiKSB7DQogICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiSW5wdXQgb2JqZWN0J3MgdmFsdWUgZm9yIGtleSAnJEtleScgaXMgYSBoYXNoIHRhYmxlIG9yIGN1c3RvbSBQb3dlclNoZWxsIG9iamVjdC4iDQogICAgICAgICAgICAgICAgJEpzb24gKz0gIiAiICogKCRXaGl0ZVNwYWNlUGFkICsgNCkgKyAiIiIkS2V5IiI6YG4kKCIgIiAqICgkV2hpdGVTcGFjZVBhZCArIDQpKSINCiAgICAgICAgICAgICAgICAkSnNvbiArPSBDb252ZXJ0VG9Kc29uSW50ZXJuYWwgLUlucHV0T2JqZWN0ICRJbnB1dE9iamVjdC4kS2V5IC1XaGl0ZVNwYWNlUGFkICgkV2hpdGVTcGFjZVBhZCArIDQpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlaWYgKCRJbnB1dE9iamVjdC4kS2V5LkdldFR5cGUoKS5OYW1lIC1tYXRjaCAnXFtcXXxBcnJheScpIHsNCiAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlIC1NZXNzYWdlICJJbnB1dCBvYmplY3QncyB2YWx1ZSBmb3Iga2V5ICckS2V5JyBoYXMgYSB0eXBlIHRoYXQgYXBwZWFycyB0byBiZSBhIGNvbGxlY3Rpb24vYXJyYXkuIg0KICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgLU1lc3NhZ2UgIkJ1aWxkaW5nIEpTT04gZm9yICR7S2V5fSdzIGFycmF5IHZhbHVlLiINCiAgICAgICAgICAgICAgICAkSnNvbiArPSAiICIgKiAoJFdoaXRlU3BhY2VQYWQgKyA0KSArICIiIiRLZXkiIjpgbiQoIiAiICogKCg0ICogKCRXaGl0ZVNwYWNlUGFkIC8gNCkpICsgNCkpW2BuIiArICgoJElucHV0T2JqZWN0LiRLZXkgfCBGb3JFYWNoLU9iamVjdCB7DQogICAgICAgICAgICAgICAgICAgICNXcml0ZS1WZXJib3NlICJUeXBlIGluc2lkZSBhcnJheSBpbnNpZGUgYXJyYXkvaGFzaC9QU09iamVjdDogJCgkXy5HZXRUeXBlKCkuRnVsbE5hbWUpIg0KICAgICAgICAgICAgICAgICAgICBpZiAoJG51bGwgLWVxICRfKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlIC1NZXNzYWdlICJHb3QgbnVsbCBpbnNpZGUgYXJyYXkgaW5zaWRlIGluc2lkZSBhcnJheS4iDQogICAgICAgICAgICAgICAgICAgICAgICAiICIgKiAoKDQgKiAoJFdoaXRlU3BhY2VQYWQgLyA0KSkgKyA4KSArICJudWxsIg0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoJF8gLWlzIFtCb29sXSAtYW5kICRfIC1lcSAkdHJ1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiR290ICd0cnVlJyBpbnNpZGUgYXJyYXkgaW5zaWRlIGluc2lkZSBhcnJheS4iDQogICAgICAgICAgICAgICAgICAgICAgICAiICIgKiAoKDQgKiAoJFdoaXRlU3BhY2VQYWQgLyA0KSkgKyA4KSArICJ0cnVlIg0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoJF8gLWlzIFtCb29sXSAtYW5kICRfIC1lcSAkZmFsc2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgLU1lc3NhZ2UgIkdvdCAnZmFsc2UnIGluc2lkZSBhcnJheSBpbnNpZGUgaW5zaWRlIGFycmF5LiINCiAgICAgICAgICAgICAgICAgICAgICAgICIgIiAqICgoNCAqICgkV2hpdGVTcGFjZVBhZCAvIDQpKSArIDgpICsgImZhbHNlIg0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoJF8gLWlzIFtIYXNoVGFibGVdIC1vciAkXy5HZXRUeXBlKCkuRnVsbE5hbWUgLWVxICJTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLlBTQ3VzdG9tT2JqZWN0IiBgDQogICAgICAgICAgICAgICAgICAgICAgICAtb3IgJF8uR2V0VHlwZSgpLk5hbWUgLW1hdGNoICdcW1xdfEFycmF5Jykgew0KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiRm91bmQgYXJyYXksIGhhc2ggdGFibGUgb3IgY3VzdG9tIFBvd2VyU2hlbGwgb2JqZWN0IGluc2lkZSBpbnNpZGUgYXJyYXkuIg0KICAgICAgICAgICAgICAgICAgICAgICAgIiAiICogKCg0ICogKCRXaGl0ZVNwYWNlUGFkIC8gNCkpICsgOCkgKyAoQ29udmVydFRvSnNvbkludGVybmFsIC1JbnB1dE9iamVjdCAkXyAtV2hpdGVTcGFjZVBhZCAoJFdoaXRlU3BhY2VQYWQgKyA4KSkgLXJlcGxhY2UgJ1xzKixccyokJw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiR290IGEgc3RyaW5nIG9yIG51bWJlciBpbnNpZGUgaW5zaWRlIGFycmF5LiINCiAgICAgICAgICAgICAgICAgICAgICAgICRUZW1wSnNvblN0cmluZyA9IEdldE51bWJlck9yU3RyaW5nIC1JbnB1dE9iamVjdCAkXw0KICAgICAgICAgICAgICAgICAgICAgICAgIiAiICogKCg0ICogKCRXaGl0ZVNwYWNlUGFkIC8gNCkpICsgOCkgKyAkVGVtcEpzb25TdHJpbmcNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pIC1qb2luICIsYG4iKSArICJgbiQoIiAiICogKDQgKiAoJFdoaXRlU3BhY2VQYWQgLyA0KSArIDQgKSldLGBuIg0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiR290IGEgc3RyaW5nIGluc2lkZSBpbnNpZGUgaGFzaHRhYmxlIG9yIFBTT2JqZWN0LiINCiAgICAgICAgICAgICAgICAjICdcXCg/IVsiL2JmbnJ0XXx1WzAtOWEtZl17NH0pJw0KICAgICAgICAgICAgICAgICRUZW1wSnNvblN0cmluZyA9IEdldE51bWJlck9yU3RyaW5nIC1JbnB1dE9iamVjdCAkSW5wdXRPYmplY3QuJEtleQ0KICAgICAgICAgICAgICAgICRKc29uICs9ICIgIiAqICgoNCAqICgkV2hpdGVTcGFjZVBhZCAvIDQpKSArIDQpICsgIiIiJEtleSIiOiAkVGVtcEpzb25TdHJpbmcsYG4iDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgJEpzb24gPSAkSnNvbiAtcmVwbGFjZSAnXHMqLCQnICMgcmVtb3ZlIHRyYWlsaW5nIGNvbW1hIHRoYXQnbGwgYnJlYWsgc3ludGF4DQogICAgICAgICRKc29uICs9ICJgbiIgKyAiICIgKiAkV2hpdGVTcGFjZVBhZCArICJ9LGBuIg0KICAgIH0NCiAgICAkSnNvbg0KfQ0KDQpmdW5jdGlvbiBDb252ZXJ0VG8tSnNvbjIgew0KICAgIFtDbWRsZXRCaW5kaW5nKCldDQogICAgI1tPdXRwdXRUeXBlKFtWb2lkXSwgW0Jvb2xdLCBbU3RyaW5nXSldDQogICAgcGFyYW0oDQogICAgICAgIFtBbGxvd051bGwoKV0NCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsDQogICAgICAgICAgICAgICAgICAgVmFsdWVGcm9tUGlwZWxpbmU9JHRydWUsDQogICAgICAgICAgICAgICAgICAgVmFsdWVGcm9tUGlwZWxpbmVCeVByb3BlcnR5TmFtZT0kdHJ1ZSldDQogICAgICAgICRJbnB1dE9iamVjdCwNCiAgICAgICAgW1N3aXRjaF0gJENvbXByZXNzLA0KICAgICAgICBbU3dpdGNoXSAkQ29lcmNlTnVtYmVyU3RyaW5ncyA9ICRmYWxzZSkNCiAgICBiZWdpbnsNCiAgICAgICAgJEpzb25PdXRwdXQgPSAiIg0KICAgICAgICAkQ29sbGVjdGlvbiA9IEAoKQ0KICAgICAgICAjIE5vdCBvcHRpbWFsLCBidXQgdGhlIGVhc2llc3Qgbm93Lg0KICAgICAgICBbQm9vbF0gJFNjcmlwdDpDb2VyY2VOdW1iZXJTdHJpbmdzID0gJENvZXJjZU51bWJlclN0cmluZ3MNCiAgICAgICAgW1N0cmluZ10gJFNjcmlwdDpOdW1iZXJSZWdleCA9ICdeLT9cZCsoPzooPzpcLlxkKyk/KD86ZVsrXC1dP1xkKyk/KT8kJw0KICAgICAgICAjJFNjcmlwdDpOdW1iZXJBbmRWYWx1ZVJlZ2V4ID0gJ14tP1xkKyg/Oig/OlwuXGQrKT8oPzplWytcLV0/XGQrKT8pPyR8Xig/OnRydWV8ZmFsc2V8bnVsbCkkJw0KICAgIH0NCiAgICBwcm9jZXNzIHsNCiAgICAgICAgIyBIYWNraW5nIG9uIHBpcGVsaW5lIHN1cHBvcnQgLi4uDQogICAgICAgIGlmICgkXykgew0KICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiQWRkaW5nIG9iamVjdCB0byBgJENvbGxlY3Rpb24uIFR5cGUgb2Ygb2JqZWN0OiAkKCRfLkdldFR5cGUoKS5GdWxsTmFtZSkuIg0KICAgICAgICAgICAgJENvbGxlY3Rpb24gKz0gJF8NCiAgICAgICAgfQ0KICAgIH0NCiAgICBlbmQgew0KICAgICAgICBpZiAoJENvbGxlY3Rpb24uQ291bnQpIHsNCiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgLU1lc3NhZ2UgIkNvbGxlY3Rpb24gY291bnQ6ICQoJENvbGxlY3Rpb24uQ291bnQpLCB0eXBlIG9mIGZpcnN0IG9iamVjdDogJCgkQ29sbGVjdGlvblswXS5HZXRUeXBlKCkuRnVsbE5hbWUpLiINCiAgICAgICAgICAgICRKc29uT3V0cHV0ID0gQ29udmVydFRvSnNvbkludGVybmFsIC1JbnB1dE9iamVjdCAoJENvbGxlY3Rpb24gfCBGb3JFYWNoLU9iamVjdCB7ICRfIH0pDQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAkSnNvbk91dHB1dCA9IENvbnZlcnRUb0pzb25JbnRlcm5hbCAtSW5wdXRPYmplY3QgJElucHV0T2JqZWN0DQogICAgICAgIH0NCiAgICAgICAgaWYgKCRudWxsIC1lcSAkSnNvbk91dHB1dCkgew0KICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiUmV0dXJuaW5nIGAkbnVsbC4iDQogICAgICAgICAgICByZXR1cm4gJG51bGwgIyBiZWNvbWVzIGFuIGVtcHR5IHN0cmluZyA6Lw0KICAgICAgICB9DQogICAgICAgIGVsc2VpZiAoJEpzb25PdXRwdXQgLWlzIFtCb29sXSAtYW5kICRKc29uT3V0cHV0IC1lcSAkdHJ1ZSkgew0KICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAtTWVzc2FnZSAiUmV0dXJuaW5nIGAkdHJ1ZS4iDQogICAgICAgICAgICBbQm9vbF0gJHRydWUgIyBkb2Vzbid0IHByZXNlcnZlIGJvb2wgdHlwZSA6LyBidXQgd29ya3MgZm9yIGNvbXBhcmlzb25zIGFnYWluc3QgJHRydWUNCiAgICAgICAgfQ0KICAgICAgICBlbHNlaWYgKCRKc29uT3V0cHV0LWlzIFtCb29sXSAtYW5kICRKc29uT3V0cHV0IC1lcSAkZmFsc2UpIHsNCiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgLU1lc3NhZ2UgIlJldHVybmluZyBgJGZhbHNlLiINCiAgICAgICAgICAgIFtCb29sXSAkZmFsc2UgIyBkb2Vzbid0IHByZXNlcnZlIGJvb2wgdHlwZSA6LyBidXQgd29ya3MgZm9yIGNvbXBhcmlzb25zIGFnYWluc3QgJGZhbHNlDQogICAgICAgIH0NCiAgICAgICAgZWxzZWlmICgkQ29tcHJlc3MpIHsNCiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgLU1lc3NhZ2UgIkNvbXByZXNzIHNwZWNpZmllZC4iDQogICAgICAgICAgICAoDQogICAgICAgICAgICAgICAgKCRKc29uT3V0cHV0IC1zcGxpdCAiXG4iIHwgV2hlcmUtT2JqZWN0IHsgJF8gLW1hdGNoICdcUycgfSkgLWpvaW4gImBuIiBgDQogICAgICAgICAgICAgICAgICAgIC1yZXBsYWNlICdeXHMqfFxzKixccyokJyAtcmVwbGFjZSAnXCAqXF1cICokJywgJ10nDQogICAgICAgICAgICApIC1yZXBsYWNlICggIyB0aGVzZSBuZXh0IGxpbmVzIGNvbXByZXNzIC4uLg0KICAgICAgICAgICAgICAgICcoP20pXlxzKigiKD86XFwifFteIl0pKyIpOiAoKD86Iig/OlxcInxbXiJdKSsiKXwoPzpudWxsfHRydWV8ZmFsc2V8KD86JyArIGANCiAgICAgICAgICAgICAgICAgICAgJFNjcmlwdDpOdW1iZXJSZWdleC5UcmltKCdeJCcpICsgYA0KICAgICAgICAgICAgICAgICAgICAnKSkpXHMqKD88Q29tbWE+LCk/XHMqJCcpLCAiYCR7MX06YCR7Mn1gJHtDb21tYX1gbiIgYA0KICAgICAgICAgICAgICAtcmVwbGFjZSAnKD9tKV5ccyp8XHMqXHp8W1xyXG5dKycNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICgkSnNvbk91dHB1dCAtc3BsaXQgIlxuIiB8IFdoZXJlLU9iamVjdCB7ICRfIC1tYXRjaCAnXFMnIH0pIC1qb2luICJgbiIgYA0KICAgICAgICAgICAgICAgIC1yZXBsYWNlICdeXHMqfFxzKixccyokJyAtcmVwbGFjZSAnXCAqXF1cICokJywgJ10nDQogICAgICAgIH0NCiAgICB9DQp9DQoNCmZ1bmN0aW9uIENvbnZlcnRUby1Kc29uMjAoW29iamVjdF0gJGl0ZW0pew0KICAgIGFkZC10eXBlIC1hc3NlbWJseSBzeXN0ZW0ud2ViLmV4dGVuc2lvbnMNCiAgICAkcHNfanM9bmV3LW9iamVjdCBzeXN0ZW0ud2ViLnNjcmlwdC5zZXJpYWxpemF0aW9uLmphdmFzY3JpcHRTZXJpYWxpemVyDQogICAgcmV0dXJuICRwc19qcy5TZXJpYWxpemUoJGl0ZW0pDQp9DQoNCmZ1bmN0aW9uIENvbnZlcnRGcm9tLUpzb24yMChbb2JqZWN0XSAkaXRlbSl7IA0KICAgIGFkZC10eXBlIC1hc3NlbWJseSBzeXN0ZW0ud2ViLmV4dGVuc2lvbnMNCiAgICAkcHNfanM9bmV3LW9iamVjdCBzeXN0ZW0ud2ViLnNjcmlwdC5zZXJpYWxpemF0aW9uLmphdmFzY3JpcHRTZXJpYWxpemVyDQoNCiAgICAjVGhlIGNvbW1hIG9wZXJhdG9yIGlzIHRoZSBhcnJheSBjb25zdHJ1Y3Rpb24gb3BlcmF0b3IgaW4gUG93ZXJTaGVsbA0KICAgIHJldHVybiAsJHBzX2pzLkRlc2VyaWFsaXplT2JqZWN0KCRpdGVtKQ0KfQ0KDQoNCmZ1bmN0aW9uIEhhc2hUYWJsZV9BcnJheV9KU09Oew0KUGFyYW0oJEhlYWRpbmdVbmRlcl9kYXRhT2JqZWN0X0FycmF5LCRBcnJheSwkdGFza05hbWUsJHN0YXR1cywkQ29kZSwkc3Rkb3V0LCRzdGRlcnIsJG9iamVjdHMsJHJlc3VsdCkNCg0KIyMjV3JpdGUtSG9zdCAoJHN0ZGVyciAtZXEgJG51bGwpDQoNCiAgICBpZigkc3RkZXJyIC1lcSAkbnVsbCAtYW5kICRIZWFkaW5nVW5kZXJfZGF0YU9iamVjdF9BcnJheSAtbmUgJG51bGwpew0KICAgICAgICAjIyNXcml0ZS1Ib3N0ICdOT3N0cmVycm9yIC1hbmQgWUVTSGVhZGluZ1VuZGVyX2RhdGFPYmplY3RfQXJyYXknDQogICAgJGdsb2JhbDpheGEgPSBDb252ZXJ0VG8tSnNvbjIgLUlucHV0T2JqZWN0IEB7dGFza05hbWUgPSAiJHRhc2tOYW1lIjtzdGF0dXMgPSAiJHN0YXR1cyI7Q29kZSA9ICIkQ29kZSI7c3Rkb3V0ID0gQCgkc3Rkb3V0KTtvYmplY3RzID0gIiRvYmplY3RzIjtyZXN1bHQgPSAiJHJlc3VsdCINCiAgICBkYXRhT2JqZWN0ID0gQHsiJEhlYWRpbmdVbmRlcl9kYXRhT2JqZWN0X0FycmF5IiA9IEAoJEFycmF5KX0NCiAgICB9DQogICAgfQ0KICAgIA0KDQogICAgaWYoJHN0ZGVyciAtbmUgJG51bGwgLWFuZCAkSGVhZGluZ1VuZGVyX2RhdGFPYmplY3RfQXJyYXkgLWVxICRudWxsKXsNCiAgICAgICAgIyMjV3JpdGUtSG9zdCAnWUVTc3RyZXJyb3IgLWFuZCBOT0hlYWRpbmdVbmRlcl9kYXRhT2JqZWN0X0FycmF5Jw0KICAgICRnbG9iYWw6YXhhID0gQ29udmVydFRvLUpzb24yIC1JbnB1dE9iamVjdCBAe3Rhc2tOYW1lID0gIiR0YXNrTmFtZSI7c3RhdHVzID0gIiRzdGF0dXMiO0NvZGUgPSAiJENvZGUiO3N0ZG91dCA9IEAoJHN0ZG91dCk7cmVzdWx0ID0gIiRyZXN1bHQiDQogICAgICAgIHN0ZGVyciA9IEAoJHN0ZGVycikNCiAgICB9DQogICAgfQ0KDQoNCiAgICBpZigkc3RkZXJyIC1uZSAkbnVsbCAtYW5kICRIZWFkaW5nVW5kZXJfZGF0YU9iamVjdF9BcnJheSAtbmUgJG51bGwpew0KICAgICAgICAjIyNXcml0ZS1Ib3N0ICdZRVNzdHJlcnJvciAtYW5kIFlFU0hlYWRpbmdVbmRlcl9kYXRhT2JqZWN0X0FycmF5Jw0KICAgICRnbG9iYWw6YXhhID0gQ29udmVydFRvLUpzb24yIC1JbnB1dE9iamVjdCBAe3Rhc2tOYW1lID0gIiR0YXNrTmFtZSI7c3RhdHVzID0gIiRzdGF0dXMiO0NvZGUgPSAiJENvZGUiO3N0ZG91dCA9IEAoJHN0ZG91dCk7cmVzdWx0ID0gIiRyZXN1bHQiDQogICAgICAgIHN0ZGVyciA9IEAoJHN0ZGVycikNCiAgICAgICAgZGF0YU9iamVjdCA9IEB7IiRIZWFkaW5nVW5kZXJfZGF0YU9iamVjdF9BcnJheSIgPSBAKCRBcnJheSl9DQogICAgfQ0KICAgIH0gICAgDQoNCiMkQmFja1RPSGFzVGFibGUgPSBDb252ZXJ0RnJvbS1Kc29uMjAgJGF4YQ0KIyRCYWNrVE9IYXNUYWJsZQ0KIyRzdGF0dXMNCiRnbG9iYWw6YXhhIA0KfQ0KDQoNCmZ1bmN0aW9uIENoZWNrQW55b2ZVbnJlYWNoew0KJFByaW1UZXN0ID0gJEdsb2JhbDpQUm9jZWVkX0RhdGEgfCA/IHskXy5QcmltX1NlY29uZCAtZXEgJ1ByaW0nfSB8IHNlbGVjdCAqIA0KJFNlY29uZFRlc3QgPSAkR2xvYmFsOlBSb2NlZWRfRGF0YSB8ID8geyRfLlByaW1fU2Vjb25kIC1lcSAnU2Vjb25kJ30gfCBzZWxlY3QgKiANCg0KaWYoJFByaW1UZXN0LidQcm9jZXNzIGZvciBETlMgU2V0dGluZyBDaGFuZ2VzJyAtZXEgJ05vJyAtYW5kICRTZWNvbmRUZXN0LidQcm9jZXNzIGZvciBETlMgU2V0dGluZyBDaGFuZ2VzJyAtZXEgJ05vJykNCnsNCiRHbG9iYWw6U1REX0Vycm9yID0gIlByaW1hcnkgKCQoJFByaW1UZXN0LidBZGRyZXNzJykpIGFuZCBTZWNvbmRhcnkgJCgkU2Vjb25kVGVzdC4nQWRkcmVzcycpIEROUyBBZGRyZXNzIGFyZSBub3QgUmVhY2hhYmxlIiANCg0KcmV0dXJuICRmYWxzZQ0KICAgIA0KfWVsc2V7DQogICAgaWYoJFByaW1UZXN0LidQcm9jZXNzIGZvciBETlMgU2V0dGluZyBDaGFuZ2VzJyAtZXEgJ05vJyl7DQoNCiRHbG9iYWw6U1REX0Vycm9yID0gIlByaW1hcnkgRE5TIEFkZHJlc3MgJCgkUHJpbVRlc3QuJ0FkZHJlc3MnKSBpcyBub3QgUmVhY2hhYmxlIiANCg0KICAgIHJldHVybiAkZmFsc2UNCiAgICB9DQogICAgaWYoJFNlY29uZFRlc3QuJ1Byb2Nlc3MgZm9yIEROUyBTZXR0aW5nIENoYW5nZXMnIC1lcSAnTm8nKXsNCg0KICAgICRHbG9iYWw6U1REX0Vycm9yID0gIlNlY29uZGFyeSBETlMgQWRkcmVzcyAkKCRTZWNvbmRUZXN0LidBZGRyZXNzJykgaXMgbm90IFJlYWNoYWJsZSIgDQogICAgcmV0dXJuICRmYWxzZQ0KICAgIH0NCnJldHVybiAkVHJ1ZSAgICANCn19DQoNCg0KI1dyaXRlLUhvc3QgImBuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIg0KI1dyaXRlLUhvc3QgJ1ZhbGlkYXRpbmcgdGhlIE5ldHdvcmsgQWRhcHRlciBleGlzdGFuY2UnDQojV3JpdGUtSG9zdCAiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIGBuIg0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIFByb2Nlc3MgZm9yIFNldHRpbmcgQ2hhbmdlcyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCmZ1bmN0aW9uIFByb2Nlc3NfRm9yX0NoYW5nZV9TZXR0aW5nDQp7DQpwYXJhbSgkbmV0d29ya05hbWUpDQoNCiAgICAgICAgIyMjIyMjIyMgR2V0IEFkYXB0ZXIgU2V0dGluZ3MNCiAgICAgICAgJGFkYXB0ZXIgPSBHd21pIHdpbjMyX25ldHdvcmthZGFwdGVyIHwgd2hlcmUgeyRfLk5ldENvbm5lY3Rpb25JRCAtZXEgJG5ldHdvcmtOYW1lfQ0KDQogICAgICAgICMjIyMjIyMjIEdldCBBZGFwdGVyIFNldHRpbmdzICAgIA0KICAgICAgICAkYWRhcHRlclNldHRpbmdzID0gR2V0LVdtaU9iamVjdCB3aW4zMl9uZXR3b3JrQWRhcHRlckNvbmZpZ3VyYXRpb24gfCB3aGVyZSB7JF8uaW5kZXggLWVxICRhZGFwdGVyLmluZGV4fQ0KICAgICAgICANCiAgICAgICAgIyMjIyMjIyMjIEdldCBUYXJnZXQgQWRhcHRlciBETlMgY29uZmlnDQogICAgICAgICRnbG9iYWw6Q3VycmVudF9BZGFwdGVyX0NvbmZpZyA9IEdldF9DdXJyZW50X0FkYXB0ZXJfSW5mbyAtYWRhcHRlclNldHRpbmdzICRhZGFwdGVyU2V0dGluZ3MNCg0KICAgICAgICAkU2VjID0gJEdsb2JhbDpGaW5hbEROUyB8ID8geyRfLlByaW1fU2Vjb25kIC1lcSAnU2Vjb25kJ30gfCAlIHskXy5BZGRyZXNzfQ0KICAgICAgICAkUHJpbSA9ICRHbG9iYWw6RmluYWxETlMgfCA/IHskXy5QcmltX1NlY29uZCAtZXEgJ1ByaW0nfSB8ICUgeyRfLkFkZHJlc3N9DQogICAgICAgICRQcmltX0N1cnJlbnRfY29uZmlnID0gJGdsb2JhbDpDdXJyZW50X0FkYXB0ZXJfQ29uZmlnLkROU1NlcnZlcnMuc3BsaXQoJywnKVswXQ0KICAgICAgICAkU2VjX0N1cnJlbnRfY29uZmlnID0gJGdsb2JhbDpDdXJyZW50X0FkYXB0ZXJfQ29uZmlnLkROU1NlcnZlcnMuc3BsaXQoJywnKVsxXQ0KDQogICAgICAgICRkbnNTZXJ2ZXJzID0gUHJvY2Vzc0ZvckNoYW5nZXMgLVByaW1hcnlfRE5TICRQcmltIC1TZWNvbmRyeV9ETlMgJFNlYyAtUHJpbWFyeV9ETlNfQ3VycmVudF9Db25maWcgJFByaW1fQ3VycmVudF9jb25maWcgLVNlY29uZHJ5X0ROU19DdXJyZW50X0NvbmZpZyAkU2VjX0N1cnJlbnRfY29uZmlnDQogICAgICAgIA0KICAgICAgICBpZigkU2VjIC1uZSAkbnVsbCAtYW5kICRwcmltIC1lcSAkbnVsbCl7DQogICAgICAgICNXcml0ZS1Ib3N0ICJwcm9jZXNzIGZvciBjaGFuZ2VzIDogJCgkU2VjKSINCiAgICAgICAgfQ0KICAgICAgICBpZigkcHJpbSAtbmUgJG51bGwgLWFuZCAkU2VjIC1lcSAkbnVsbCl7DQogICAgICAgICNXcml0ZS1Ib3N0ICJwcm9jZXNzIGZvciBjaGFuZ2VzIDogJCgkcHJpbSkiDQogICAgICAgIH0NCiAgICAgICAgaWYoJFNlYyAtbmUgJG51bGwgLWFuZCAkcHJpbSAtbmUgJG51bGwpeyAgICAgICAgDQogICAgICAgICNXcml0ZS1Ib3N0ICJwcm9jZXNzIGZvciBjaGFuZ2VzIDogJCgkcHJpbSwkU2VjKSINCiAgICAgICAgfSAgICAgICAgICAgICAgICANCiAgICAgICAgI1dyaXRlLUhvc3QgImBuQXR0ZW1wIHRvIGNoYW5nZSBETlMgY29uZmlndXJhdGlvbi4uIiAtRm9yZWdyb3VuZENvbG9yIHllbGxvdw0KICAgICAgICAgICAgICAgDQogICAgICAgICRTcGVjaWZpZWRfU2V0dGluZyA9ICdETlMgU2VydmVyX0FkZHJlc3MgQ2hhbmdlcycNCiAgICAgICAgJGRuc0NoYW5nZV9SZXR1cm5WYWx1ZSA9ICgkYWRhcHRlclNldHRpbmdzLlNldEROU1NlcnZlclNlYXJjaE9yZGVyKCRkbnNTZXJ2ZXJzKSkuUmV0dXJuVmFsdWUNCiAgICAgICAgI3NsZWVwIDINCiAgICAgICAkUmV0dXJuX0luZm8gPSBDaGVja19SZXR1cm5WYWx1ZSAtUmV0dXJuX1ZhbHVlICRkbnNDaGFuZ2VfUmV0dXJuVmFsdWUgLVNwZWNpZmllZF9TZXR0aW5nICRTcGVjaWZpZWRfU2V0dGluZw0KICAgICAgIA0KICAgICAgIGlmKCRkbnNDaGFuZ2VfUmV0dXJuVmFsdWUgLWVxIDAgLW9yICRkbnNDaGFuZ2VfUmV0dXJuVmFsdWUgLWVxIDEpDQogICAgICAgew0KICAgICAgICAgICRETlNJUHMgPSAoJGRuc1NlcnZlcnMpIC1qb2luICcsJw0KICAgICAgICAgICNXcml0ZS1Ib3N0ICJETlMgaXMgc3VjY2Vzc2Z1bGx5IGNoYW5nZWRgbiIgLUZvcmVncm91bmRDb2xvciBHcmVlbg0KDQoNCiAgICAgICNXcml0ZS1Ib3N0ICJgbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIg0KICAgICAgI1dyaXRlLUhvc3QgIlBvc3QgQ2hhbmdlcyBvZiBOZXR3b3JrIEFkYXB0ZXI6ICgkKCRuZXR3b3JrTmFtZSkpIg0KICAgICAgI1dyaXRlLUhvc3QgIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjYG4iDQogICAgDQogICAgJGFkYXB0ZXJTZXR0aW5ncyA9IEdldC1XbWlPYmplY3Qgd2luMzJfbmV0d29ya0FkYXB0ZXJDb25maWd1cmF0aW9uIHwgd2hlcmUgeyRfLmluZGV4IC1lcSAkYWRhcHRlci5pbmRleH0gIA0KICAgICRnbG9iYWw6Q3VycmVudF9BZGFwdGVyX0NvbmZpZzEgPSBHZXRfQ3VycmVudF9BZGFwdGVyX0luZm8gLWFkYXB0ZXJTZXR0aW5ncyAkYWRhcHRlclNldHRpbmdzDQogICAgI1dyaXRlLUhvc3QgIklQQWRkcmVzcyAgICAgOiAkKCRnbG9iYWw6Q3VycmVudF9BZGFwdGVyX0NvbmZpZzEuSVBBZGRyZXNzKSINCiAgICAjV3JpdGUtSG9zdCAiU3VibmV0TWFzayAgICA6ICQoJGdsb2JhbDpDdXJyZW50X0FkYXB0ZXJfQ29uZmlnMS5TdWJuZXRNYXNrKSINCiAgICAjV3JpdGUtSG9zdCAiR2F0ZXdheSAgICAgICA6ICQoJGdsb2JhbDpDdXJyZW50X0FkYXB0ZXJfQ29uZmlnMS5HYXRld2F5KSIgDQogICAgI1dyaXRlLUhvc3QgIklzREhDUEVuYWJsZWQgOiAkKCRnbG9iYWw6Q3VycmVudF9BZGFwdGVyX0NvbmZpZzEuSXNESENQRW5hYmxlZCkiIA0KICAgICNXcml0ZS1Ib3N0ICJETlNTZXJ2ZXJzICAgIDogJCgkZ2xvYmFsOkN1cnJlbnRfQWRhcHRlcl9Db25maWcxLkROU1NlcnZlcnMpIiAgICAgICAgICAgDQogICAgDQogICAgJGdsb2JhbDpDdXJyZW50X0FkYXB0ZXJfQ29uZmlnMSAgICAgICAgICANCiAgICAgICB9DQoNCn0NCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KZnVuY3Rpb24gUHJvY2Vzc0ZvckNoYW5nZXN7DQpwYXJhbSgkUHJpbWFyeV9ETlMsJFNlY29uZHJ5X0ROUywkUHJpbWFyeV9ETlNfQ3VycmVudF9Db25maWcsJFNlY29uZHJ5X0ROU19DdXJyZW50X0NvbmZpZykNCg0KICAjV3JpdGUtSG9zdCAiYG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyINCiAgI1dyaXRlLUhvc3QgIkNoYW5nZXMgaW4gUHJvZ3Jlc3Mgb2YgTmV0d29ya19BZGFwdGVyIFNldHRpbmciDQogICNXcml0ZS1Ib3N0ICIjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI2BuIg0KICANCiMkUHJpbWFyeV9ETlMgICA9ICc4LjguNC40Jw0KIyRTZWNvbmRyeV9ETlMgID0gJzguOC44LjgnDQoNCg0KIyRQcmltYXJ5X0ROU19DdXJyZW50X0NvbmZpZyAgPSAkbnVsbA0KIyRTZWNvbmRyeV9ETlNfQ3VycmVudF9Db25maWcgID0gJzguOC44LjgnDQoNCg0KaWYoJFByaW1hcnlfRE5TIC1uZSAkbnVsbCAtYW5kICRTZWNvbmRyeV9ETlMgLW5lICRudWxsKQ0Kew0KICAgJEROU0NvbmZpZyA9IEAoIiRQcmltYXJ5X0ROUyIsIiRTZWNvbmRyeV9ETlMiKSAgDQogICAgICAgIA0KfQ0KDQoNCmlmKCRQcmltYXJ5X0ROUyAtbmUgJG51bGwgLWFuZCAkU2Vjb25kcnlfRE5TIC1lcSAkbnVsbCkNCnsNCiAgICBpZigkU2Vjb25kcnlfRE5TX0N1cnJlbnRfQ29uZmlnIC1uZSAkbnVsbCkNCiAgICB7DQogICAgICAgICRETlNDb25maWcgPSBAKCIkUHJpbWFyeV9ETlMiLCIkU2Vjb25kcnlfRE5TX0N1cnJlbnRfQ29uZmlnIikNCiAgICB9DQoNCiAgICBpZigkU2Vjb25kcnlfRE5TX0N1cnJlbnRfQ29uZmlnIC1lcSAkbnVsbCkNCiAgICB7DQogICAgICAgICRETlNDb25maWcgPSBAKCIkUHJpbWFyeV9ETlMiKQ0KICAgIH0NCiAgICAgICAgDQp9DQoNCmlmKCRQcmltYXJ5X0ROUyAtZXEgJG51bGwgLWFuZCAkU2Vjb25kcnlfRE5TIC1uZSAkbnVsbCkNCnsNCiAgICBpZigkUHJpbWFyeV9ETlNfQ3VycmVudF9Db25maWcgLW5lICRudWxsKQ0KICAgIHsNCiAgICAgICAgJEROU0NvbmZpZyA9IEAoIiRQcmltYXJ5X0ROU19DdXJyZW50X0NvbmZpZyIsIiRTZWNvbmRyeV9ETlMiKQ0KICAgIH0NCg0KICAgIGlmKCRQcmltYXJ5X0ROU19DdXJyZW50X0NvbmZpZyAtZXEgJG51bGwpDQogICAgew0KICAgICAgICAjJEROU0NvbmZpZyA9IEAoJG51bGwsIiRTZWNvbmRyeV9ETlMiKQ0KICAgICAgICAjV3JpdGUtSG9zdCAiTm8gUHJpbWFyeSBmb3VuZCBoZW5jZSBWYWxpZCBTZWNvbmRyeSBhZGRyZXNzIGdvaW5nIHRvIHNldCBhcyBQcmltYXJ5IEFkZHJlc3MgJFNlY29uZHJ5X0ROUyIgICAgICAgICAgDQogICAgICAgICRETlNDb25maWcgPSBAKCIkU2Vjb25kcnlfRE5TIikNCiAgICAgICAgDQogICAgfSAgICANCn0NCg0KcmV0dXJuICRETlNDb25maWcNCg0KfQ0KDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMgVmFsaWRhdGUgdGhlIEFkYXB0ZXIgU2V0dGluZyBDaGFuZ2VzICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KZnVuY3Rpb24gQ2hlY2tfUmV0dXJuVmFsdWUNCnsgcGFyYW0oJFJldHVybl9WYWx1ZSwkU3BlY2lmaWVkX1NldHRpbmcpDQoNCg0KICAgICMjV3JpdGUtSG9zdCAiJFNwZWNpZmllZF9TZXR0aW5nIFN0YXR1cyINCg0KICAgIHN3aXRjaCAoJFJldHVybl9WYWx1ZSkgDQogICAgew0KICAgICAgICAtMSB7ICcnfQ0KICAgICAgICAwICB7J1N1Y2Nlc3NmdWwgY29tcGxldGlvbiwgbm8gcmVib290IHJlcXVpcmVkJzsgYnJlYWt9DQogICAgICAgIDEgIHsnU3VjY2Vzc2Z1bCBjb21wbGV0aW9uLCByZWJvb3QgcmVxdWlyZWQnOyBicmVha30NCiAgICAgICAgNjQgeyAnTWV0aG9kIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBwbGF0Zm9ybSc7IGJyZWFrfQ0KICAgICAgICA2NSB7ICdVbmtub3duIGZhaWx1cmUnOyBicmVha30NCiAgICAgICAgNjYgeyAnSW52YWxpZCBzdWJuZXQgbWFzayc7IGJyZWFrfQ0KICAgICAgICA2NyB7ICdBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBwcm9jZXNzaW5nIGFuIEluc3RhbmNlIHRoYXQgd2FzIHJldHVybmVkJzsgYnJlYWt9DQogICAgICAgIDY4IHsgJ0ludmFsaWQgaW5wdXQgcGFyYW1ldGVyJzsgYnJlYWt9DQogICAgICAgIDY5IHsgJ01vcmUgdGhhbiA1IGdhdGV3YXlzIHNwZWNpZmllZCc7IGJyZWFrfQ0KICAgICAgICA3MCB7ICdJbnZhbGlkIElQIGFkZHJlc3MnOyBicmVha30NCiAgICAgICAgNzEgeyAnSW52YWxpZCBnYXRld2F5IElQIGFkZHJlc3MnOyBicmVha30NCiAgICAgICAgNzIgeyAnQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgYWNjZXNzaW5nIHRoZSBSZWdpc3RyeSBmb3IgdGhlIHJlcXVlc3RlZCBpbmZvcm1hdGlvbic7IGJyZWFrfQ0KICAgICAgICA3MyB7ICdJbnZhbGlkIGRvbWFpbiBuYW1lJzsgYnJlYWt9DQogICAgICAgIDc0IHsgJ0ludmFsaWQgaG9zdCBuYW1lJzsgYnJlYWt9DQogICAgICAgIDc1IHsgJ05vIHByaW1hcnkvc2Vjb25kYXJ5IFdJTlMgc2VydmVyIGRlZmluZWQnOyBicmVha30NCiAgICAgICAgNzYgeyAnSW52YWxpZCBmaWxlJzsgYnJlYWt9DQogICAgICAgIDc3IHsgJ0ludmFsaWQgc3lzdGVtIHBhdGgnOyBicmVha30NCiAgICAgICAgNzggeyAnRmlsZSBjb3B5IGZhaWxlZCc7IGJyZWFrfQ0KICAgICAgICA3OSB7ICdJbnZhbGlkIHNlY3VyaXR5IHBhcmFtZXRlcic7IGJyZWFrfQ0KICAgICAgICA4MCB7ICdVbmFibGUgdG8gY29uZmlndXJlIFRDUC9JUCBzZXJ2aWNlJzsgYnJlYWt9DQogICAgICAgIDgxIHsgJ1VuYWJsZSB0byBjb25maWd1cmUgREhDUCBzZXJ2aWNlJzsgYnJlYWt9DQogICAgICAgIDgyIHsgJ1VuYWJsZSB0byByZW5ldyBESENQIGxlYXNlJzsgYnJlYWt9DQogICAgICAgIDgzIHsgJ1VuYWJsZSB0byByZWxlYXNlIERIQ1AgbGVhc2UnOyBicmVha30NCiAgICAgICAgODQgeyAnSVAgbm90IGVuYWJsZWQgb24gYWRhcHRlcic7IGJyZWFrfQ0KICAgICAgICA4NSB7ICdJUFggbm90IGVuYWJsZWQgb24gYWRhcHRlcic7IGJyZWFrfQ0KICAgICAgICA4NiB7ICdGcmFtZS9uZXR3b3JrIG51bWJlciBib3VuZHMgZXJyb3InOyBicmVha30NCiAgICAgICAgODcgeyAnSW52YWxpZCBmcmFtZSB0eXBlJzsgYnJlYWt9DQogICAgICAgIDg4IHsgJ0ludmFsaWQgbmV0d29yayBudW1iZXInOyBicmVha30NCiAgICAgICAgODkgeyAnRHVwbGljYXRlIG5ldHdvcmsgbnVtYmVyJzsgYnJlYWt9DQogICAgICAgIDkwIHsgJ1BhcmFtZXRlciBvdXQgb2YgYm91bmRzJzsgYnJlYWt9DQogICAgICAgIDkxIHsgJ0FjY2VzcyBkZW5pZWQnOyBicmVha30NCiAgICAgICAgOTIgeyAnT3V0IG9mIG1lbW9yeSc7IGJyZWFrfQ0KICAgICAgICA5MyB7ICdBbHJlYWR5IGV4aXN0cyc7IGJyZWFrfQ0KICAgICAgICA5NCB7ICdQYXRoLCBmaWxlIG9yIG9iamVjdCBub3QgZm91bmQnOyBicmVha30NCiAgICAgICAgOTUgeyAnVW5hYmxlIHRvIG5vdGlmeSBzZXJ2aWNlJzsgYnJlYWt9DQogICAgICAgIDk2IHsgJ1VuYWJsZSB0byBub3RpZnkgRE5TIHNlcnZpY2UnOyBicmVha30NCiAgICAgICAgOTcgeyAnSW50ZXJmYWNlIG5vdCBjb25maWd1cmFibGUnOyBicmVha30NCiAgICAgICAgOTggeyAnTm90IGFsbCBESENQIGxlYXNlcyBjb3VsZCBiZSByZWxlYXNlZC9yZW5ld2VkJzsgYnJlYWt9DQogICAgICAgIDEwMCB7ICdESENQIG5vdCBlbmFibGVkIG9uIGFkYXB0ZXInOyBicmVha30NCiAgICAgICAgMjE0Nzc4Njc4OCB7ICJXcml0ZSBsb2NrIG5vdCBlbmFibGVkIjsgYnJlYWt9DQogICAgICAgIDIxNDc3NDk4OTEgeyAiTXVzdCBiZSBydW4gd2l0aCBhZG1pbiBwcml2aWxlZ2VzIjsgYnJlYWt9DQogICAgICAgIGRlZmF1bHQgeyAiRmFpbGQgd2l0aCBlcnJvciBjb2RlICQoJFJldHVybl9WYWx1ZSkiOyBicmVha30NCiAgICB9DQoNCn0NCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIFZhbGlkYXRlIEROUyBBZGRyZXNzIGZvcm1hdCBhbmQgcHJvdmlkZWQgUHJvdG9jb2wgbWF0Y2ggIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgIA0KZnVuY3Rpb24gQ2hlY2tfRE5TSVBfRm9ybWF0X1Byb3RvY29sDQp7DQogIHBhcmFtKCRQcmltYXJ5X0ROUywkc2Vjb25kYXJ5X2RucywkUHJvdG9jb2wpDQoNCmlmKCRQcmltYXJ5X0ROUyAtbmUgJG51bGwpew0KJFByaW1hcnlfRE5TID0gIiRQcmltYXJ5X0ROU3xQcmltIg0KfQ0KaWYoJHNlY29uZGFyeV9kbnMgLW5lICRudWxsKXsNCiRzZWNvbmRhcnlfZG5zID0gIiRzZWNvbmRhcnlfZG5zfFNlY29uZCINCn0NCg0KICAgIGlmKCRQcmltYXJ5X0ROUyAtbmUgJG51bGwgLWFuZCAkc2Vjb25kYXJ5X2RucyAtbmUgJG51bGwpew0KICAgICRkbnNTZXJ2ZXJzICAgPSAoIiRQcmltYXJ5X0ROUyIsIiRzZWNvbmRhcnlfZG5zIikNCiAgICB9DQogICAgaWYoJFByaW1hcnlfRE5TIC1uZSAkbnVsbCAtYW5kICRzZWNvbmRhcnlfZG5zIC1lcSAkbnVsbCl7DQogICAgJGRuc1NlcnZlcnMgICA9ICgiJFByaW1hcnlfRE5TIikNCiAgICB9DQogICAgaWYoJFByaW1hcnlfRE5TIC1lcSAkbnVsbCAtYW5kICRzZWNvbmRhcnlfZG5zIC1uZSAkbnVsbCl7DQogICAgJGRuc1NlcnZlcnMgICA9ICgiJHNlY29uZGFyeV9kbnMiKQ0KICAgIH0NCg0KIyNXcml0ZS1Ib3N0ICRkbnNTZXJ2ZXJzDQogICAgICANCiAgICAkdGVzdEFkZHJlc3NlcyA9ICRkbnNTZXJ2ZXJzDQogICAgJFByb3RvY29sID0gIiRQcm90b2NvbCINCg0KDQpmdW5jdGlvbiBUZXN0LUlzVmFsaWRJUHY2QWRkcmVzcyANCnsNCiAgICBwYXJhbSgNCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsSGVscE1lc3NhZ2U9J0VudGVyIElQdjYgYWRkcmVzcyB0byB2ZXJpZnknKV0gW3N0cmluZ10gJElQKQ0KICAgICRJUHY0UmVnZXggPSAnKCgoMjVbMC01XXwyWzAtNF1bMC05XXxbMC0xXT9bMC05XXsxLDJ9KVwuKXszfSgyNVswLTVdfDJbMC00XVswLTldfFswLTFdP1swLTldezEsMn0pKScNCiAgICAkRyA9ICdbYS1mXGRdezEsNH0nDQogICAgIyBJbiBhIGNhc2Ugc2Vuc2l0aXZlIHJlZ2V4LCB1c2U6DQogICAgIyRHID0gJ1tBLUZhLWZcZF17MSw0fScNCiAgICAkVGFpbCA9IEAoIjoiLA0KICAgICAgICAiKDooJEcpP3wkSVB2NFJlZ2V4KSIsDQogICAgICAgICI6KCRJUHY0UmVnZXh8JEcoOiRHKT98KSIsDQogICAgICAgICIoOiRJUHY0UmVnZXh8OiRHKDokSVB2NFJlZ2V4fCg6JEcpezAsMn0pfDopIiwNCiAgICAgICAgIigoOiRHKXswLDJ9KDokSVB2NFJlZ2V4fCg6JEcpezEsMn0pfDopIiwNCiAgICAgICAgIigoOiRHKXswLDN9KDokSVB2NFJlZ2V4fCg6JEcpezEsMn0pfDopIiwNCiAgICAgICAgIigoOiRHKXswLDR9KDokSVB2NFJlZ2V4fCg6JEcpezEsMn0pfDopIikNCiAgICBbc3RyaW5nXSAkSVB2NlJlZ2V4U3RyaW5nID0gJEcNCiAgICAkVGFpbCB8IGZvcmVhY2ggeyAkSVB2NlJlZ2V4U3RyaW5nID0gIiR7R306KCRJUHY2UmVnZXhTdHJpbmd8JF8pIiB9DQogICAgJElQdjZSZWdleFN0cmluZyA9ICI6KDokRyl7MCw1fSgoOiRHKXsxLDJ9fDokSVB2NFJlZ2V4KXwkSVB2NlJlZ2V4U3RyaW5nIg0KICAgICRJUHY2UmVnZXhTdHJpbmcgPSAkSVB2NlJlZ2V4U3RyaW5nIC1yZXBsYWNlICdcKCcgLCAnKD86JyAjIG1ha2UgYWxsIGdyb3VwcyBub24tY2FwdHVyaW5nDQogICAgW3JlZ2V4XSAkSVB2NlJlZ2V4ID0gJElQdjZSZWdleFN0cmluZw0KICAgIGlmICgkSVAgLWltYXRjaCAiXiRJUHY2UmVnZXgkIikgew0KICAgICAgICAkdHJ1ZQ0KICAgIH0gZWxzZSB7DQogICAgICAgICRmYWxzZQ0KICAgIH0NCn0NCg0KRnVuY3Rpb24gVGVzdC1JUHY0QWRkcmVzcygkaXBBZGRyZXNzKSB7DQogaWYoJHRlc3RBZGRyZXNzIC1tYXRjaCAiXGIoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVxiIikgew0KICAkYWRkcmVzc1ZhbGlkID0gJHRydWUNCiB9IGVsc2Ugew0KICAkYWRkcmVzc1ZhbGlkID0gJGZhbHNlDQogfQ0KIHJldHVybiAkYWRkcmVzc1ZhbGlkDQp9DQojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jDQoNCiRJUEFkZHJlc3NfUHJvdG9jb2xfRm9ybWF0ID0gQCgpDQojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jDQpmb3JlYWNoKCR0ZXN0QWRkcmVzcyBpbiAkdGVzdEFkZHJlc3Nlcykgew0KJFByaW1fU2Vjb25kID0gKCR0ZXN0QWRkcmVzcy5zcGxpdCgnfCcpKVsxXQ0KJHRlc3RBZGRyZXNzID0gKCR0ZXN0QWRkcmVzcy5zcGxpdCgnfCcpKVswXQ0KDQoNCiBpZigoVGVzdC1JUHY0QWRkcmVzcyAkdGVzdEFkZHJlc3MpKSB7DQogICMjV3JpdGUtSG9zdCAiJHRlc3RBZGRyZXNzIGlzIGEgdmFsaWQgZm9ybWF0dGVkIElQdjQgQWRkcmVzcyIgLWZvcmVncm91bmRDb2xvciBHcmVlbg0KDQogICAgICAgICAgICBpZigkUHJvdG9jb2wgLW5vdG1hdGNoICdJUHY0JykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgJG1hdGNocyA9ICdOb3QgbWF0Y2hlZCcNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmKCRQcm90b2NvbCAtbWF0Y2ggJ0lQdjQnKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAkbWF0Y2hzID0gJ01hdGNoZWQnDQogICAgICAgICAgICB9ICAgICAgICAgICAgDQogICAgICAgICAgICAgJElQQWRkcmVzc19Qcm90b2NvbF9Gb3JtYXQgKz0gTmV3LU9iamVjdCBwc29iamVjdCAtUHJvcGVydHkgQHsNCiAgICAgICAgICAgICAiSVBBZGRyZXNzIiAgICA9ICR0ZXN0QWRkcmVzcw0KICAgICAgICAgICAgICJQcm92aWRlZCBQcm90b2NvbCIgICAgID0gIiRQcm90b2NvbCINCiAgICAgICAgICAgICAiUHJvdG9jb2wgRGV0ZWN0ZWQiICAgICA9ICJJUHY0Ig0KICAgICAgICAgICAgICJWYWxpZCBGb3JtYXQiID0gIllFUyINCiAgICAgICAgICAgICBQcmltX1NlY29uZCAgICA9ICIkUHJpbV9TZWNvbmQiDQogICAgICAgICAgICAgIlByb3RvY29sX0lQIE1hdGNoIiA9ICIkbWF0Y2hzIn0NCiAgICAgICAgICAgICANCiAgDQogfSBlbHNlIHsNCiAgICAgICAgDQogICAgICAgIGlmKCR0ZXN0QWRkcmVzcyAtbWF0Y2ggJzonKQ0KICAgICAgICAgew0KICAgICAgICAgICAgaWYoIChUZXN0LUlzVmFsaWRJUHY2QWRkcmVzcyAkdGVzdEFkZHJlc3MpKSB7DQogICAgICAgICAgICAjI1dyaXRlLUhvc3QgIiR0ZXN0QWRkcmVzcyBpcyBhIHZhbGlkIGZvcm1hdHRlZCBJUHY2IEFkZHJlc3MiIC1mb3JlZ3JvdW5kQ29sb3IgR3JlZW4NCg0KICAgICAgICAgICAgaWYoJFByb3RvY29sIC1ub3RtYXRjaCAnSVB2NicpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICRtYXRjaHMgPSAnTm90IG1hdGNoZWQnDQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZigkUHJvdG9jb2wgLW1hdGNoICdJUHY2JykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgJG1hdGNocyA9ICdNYXRjaGVkJw0KICAgICAgICAgICAgfSAgICAgICAgICAgIA0KICAgICAgICAgICAgICRJUEFkZHJlc3NfUHJvdG9jb2xfRm9ybWF0ICs9IE5ldy1PYmplY3QgcHNvYmplY3QgLVByb3BlcnR5IEB7DQogICAgICAgICAgICAgIklQQWRkcmVzcyIgICAgPSAkdGVzdEFkZHJlc3MNCiAgICAgICAgICAgICAiUHJvdmlkZWQgUHJvdG9jb2wiICAgICA9ICIkUHJvdG9jb2wiDQogICAgICAgICAgICAgIlByb3RvY29sIERldGVjdGVkIiAgICAgPSAiSVB2NiINCiAgICAgICAgICAgICAiVmFsaWQgRm9ybWF0IiA9ICJZRVMiDQogICAgICAgICAgICAgUHJpbV9TZWNvbmQgICAgPSAiJFByaW1fU2Vjb25kIg0KICAgICAgICAgICAgICJQcm90b2NvbF9JUCBNYXRjaCIgPSAiJG1hdGNocyJ9DQogICAgICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICAjI1dyaXRlLUhvc3QgIiR0ZXN0QWRkcmVzcyBpcyBub3QgYSB2YWxpZCBmb3JtYXR0ZWQgSVBWNiBBZGRyZXNzIiAtZm9yZWdyb3VuZENvbG9yIFJlZA0KDQogICAgICAgICAgICBpZigkUHJvdG9jb2wgLW5vdG1hdGNoICdJUHY2JykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgJG1hdGNocyA9ICdOb3QgbWF0Y2hlZCcNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmKCRQcm90b2NvbCAtbWF0Y2ggJ0lQdjYnKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAkbWF0Y2hzID0gJ01hdGNoZWQnDQogICAgICAgICAgICB9ICAgICAgICAgICAgDQogICAgICAgICAgICAgJElQQWRkcmVzc19Qcm90b2NvbF9Gb3JtYXQgKz0gTmV3LU9iamVjdCBwc29iamVjdCAtUHJvcGVydHkgQHsNCiAgICAgICAgICAgICAiSVBBZGRyZXNzIiAgICA9ICR0ZXN0QWRkcmVzcw0KICAgICAgICAgICAgICJQcm92aWRlZCBQcm90b2NvbCIgICAgID0gIiRQcm90b2NvbCINCiAgICAgICAgICAgICAiUHJvdG9jb2wgRGV0ZWN0ZWQiICAgICA9ICJJUHY2Ig0KICAgICAgICAgICAgICJWYWxpZCBGb3JtYXQiID0gIk5vIg0KICAgICAgICAgICAgIFByaW1fU2Vjb25kICAgID0gIiRQcmltX1NlY29uZCINCiAgICAgICAgICAgICAiUHJvdG9jb2xfSVAgTWF0Y2giID0gIiRtYXRjaHMifQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgaWYoJHRlc3RBZGRyZXNzIC1ub3RtYXRjaCAnOicpDQogICAgICAgIHsgIA0KICAgICAgICAjI1dyaXRlLUhvc3QgIiR0ZXN0QWRkcmVzcyBpcyBub3QgYSB2YWxpZCBmb3JtYXR0ZWQgSVB2NCBBZGRyZXNzIiAtZm9yZWdyb3VuZENvbG9yIFJlZA0KDQogICAgICAgICAgICBpZigkUHJvdG9jb2wgLW5vdG1hdGNoICdJUHY0JykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgJG1hdGNocyA9ICdOb3QgbWF0Y2hlZCcNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmKCRQcm90b2NvbCAtbWF0Y2ggJ0lQdjQnKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAkbWF0Y2hzID0gJ01hdGNoZWQnDQogICAgICAgICAgICB9ICAgICAgICAgICAgDQogICAgICAgICAgICAgJElQQWRkcmVzc19Qcm90b2NvbF9Gb3JtYXQgKz0gTmV3LU9iamVjdCBwc29iamVjdCAtUHJvcGVydHkgQHsNCiAgICAgICAgICAgICAiSVBBZGRyZXNzIiAgICA9ICR0ZXN0QWRkcmVzcw0KICAgICAgICAgICAgICJQcm92aWRlZCBQcm90b2NvbCIgICAgID0gIiRQcm90b2NvbCINCiAgICAgICAgICAgICAiUHJvdG9jb2wgRGV0ZWN0ZWQiICAgICA9ICJJUHY0Ig0KICAgICAgICAgICAgICJWYWxpZCBGb3JtYXQiID0gIk5vIg0KICAgICAgICAgICAgIFByaW1fU2Vjb25kICAgID0gIiRQcmltX1NlY29uZCINCiAgICAgICAgICAgICAiUHJvdG9jb2xfSVAgTWF0Y2giID0gIiRtYXRjaHMifQ0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KJGdsb2JhbDphYSA9ICRJUEFkZHJlc3NfUHJvdG9jb2xfRm9ybWF0IHwgc2VsZWN0IElQQWRkcmVzcywnUHJvdmlkZWQgUHJvdG9jb2wnLCdQcm90b2NvbCBEZXRlY3RlZCcsJ1Byb3RvY29sX0lQIE1hdGNoJywnVmFsaWQgRm9ybWF0JyxQcmltX1NlY29uZA0KDQokUHJvdG9jb2xfTWF0Y2hlZF9WYWxpZF9Gb3JtYXRhMCA9ICRnbG9iYWw6YWEgfCA/IHskXy4nVmFsaWQgRm9ybWF0JyAtZXEgJ1llcycgLWFuZCAkXy4nUHJvdG9jb2xfSVAgTWF0Y2gnIC1lcSAnTWF0Y2hlZCcgLWFuZCAkXy5JUEFkZHJlc3MgLW5lICcnfQ0KJEluVmFsaWRfRm9ybWF0ID0gJGdsb2JhbDphYSB8ID8geyRfLidWYWxpZCBGb3JtYXQnIC1lcSAnTm8nIC1hbmQgJF8uSVBBZGRyZXNzIC1uZSAnJ30gDQokUHJvdG9jb2xfSVBfTWF0Y2ggPSAkZ2xvYmFsOmFhIHwgPyB7JF8uJ1Byb3RvY29sX0lQIE1hdGNoJyAtZXEgJ05vdCBtYXRjaGVkJyAtYW5kICRfLklQQWRkcmVzcyAtbmUgJyd9DQoNCmlmKCRJblZhbGlkX0Zvcm1hdCAtbmUgJG51bGwpew0KDQoNCmlmKCAoJEluVmFsaWRfRm9ybWF0IHwgJSB7JF8uUHJpbV9TZWNvbmR9KSAtY29udGFpbnMgJ1ByaW0nKQ0Kew0KICBpZigoJEluVmFsaWRfRm9ybWF0KS5HZXRUeXBlKCkuQmFzZVR5cGUubmFtZSAtZXEgJ0FycmF5JykNCiAgIHsNCiAgICAjV3JpdGUtSG9zdCAiSW52YWxpZCBmb3JtYXQgb2YgUHJpbWFyeSBETlMgQWRkcmVzcyA6ICQoKCRJblZhbGlkX0Zvcm1hdCB8ICUgeyRfLklQQWRkcmVzc30pWzBdKS4gfCBFeHBlY3RlZCBmb3JtYXQgaXM6IDE5Mi4xNjguMTI5LjEsIDE5Mi4xNjguMTI5LjI1NCINCiAgICAkR2xvYmFsOlNURF9FcnJvciArPSBAKCJJbnZhbGlkIGZvcm1hdCBvZiBQcmltYXJ5IEROUyBBZGRyZXNzIDogJCgoJEluVmFsaWRfRm9ybWF0IHwgJSB7JF8uSVBBZGRyZXNzfSlbMF0pLiB8IEV4cGVjdGVkIGZvcm1hdCBpczogMTkyLjE2OC4xMjkuMSwgMTkyLjE2OC4xMjkuMjU0IikNCg0KICAgIH1lbHNlew0KICAgICNXcml0ZS1Ib3N0ICJJbnZhbGlkIGZvcm1hdCBvZiBQcmltYXJ5IEROUyBBZGRyZXNzIDogJCgkSW5WYWxpZF9Gb3JtYXQuSVBBZGRyZXNzKS4gfCBFeHBlY3RlZCBmb3JtYXQgaXM6IDE5Mi4xNjguMTI5LjEsIDE5Mi4xNjguMTI5LjI1NCIgICAgDQogICAgJEdsb2JhbDpTVERfRXJyb3IgKz0gQCgiSW52YWxpZCBmb3JtYXQgb2YgUHJpbWFyeSBETlMgQWRkcmVzcyA6ICQoJEluVmFsaWRfRm9ybWF0LklQQWRkcmVzcykuIHwgRXhwZWN0ZWQgZm9ybWF0IGlzOiAxOTIuMTY4LjEyOS4xLCAxOTIuMTY4LjEyOS4yNTQiKQ0KDQoNCiAgICB9DQoNCiRTVERFcnIgPSBHZXRfc3RkZXJyIC1UaXRsZSAnSW52YWxpZCBETlMgQWRkcmVzcyBGb3JtYXQnIC1kZXRhaWxzICRHbG9iYWw6U1REX0Vycm9yDQokR2xvYmFsOkhhc2hEYXRhID0gSGFzaFRhYmxlX0FycmF5X0pTT04gLXRhc2tOYW1lICdDaGFuZ2UgRE5TIENvbmZpZ3VyYXRpb24gdGFzaycgLXN0YXR1cyAnRmFpbGVkJyAtQ29kZSAnMScgLXN0ZG91dCAnVW5hYmxlIHRvIHByb2Nlc3MgZnVydGhlciwgRHVlIHRvIEludmFsaWQgRE5TIEFkZHJlc3MnIC1yZXN1bHQgJ0Vycm9yOiBVbmFibGUgdG8gcGVyZm9ybSBhY3Rpb24nIC1zdGRlcnIgJFNUREVycg0KDQp9DQoNCmlmKCgkSW5WYWxpZF9Gb3JtYXQgfCAlIHskXy5QcmltX1NlY29uZH0pIC1jb250YWlucyAnU2Vjb25kJykNCnsNCiAgaWYoKCRJblZhbGlkX0Zvcm1hdCkuR2V0VHlwZSgpLkJhc2VUeXBlLm5hbWUgLWVxICdBcnJheScpDQogICB7DQogICAgI1dyaXRlLUhvc3QgIkludmFsaWQgZm9ybWF0IG9mIFNlY29uZGFyeSBETlMgQWRkcmVzcyA6ICQoKCRJblZhbGlkX0Zvcm1hdCB8ICUgeyRfLklQQWRkcmVzc30pWzFdKS4gfCBFeHBlY3RlZCBmb3JtYXQgaXM6IDE5Mi4xNjguMTI5LjEsIDE5Mi4xNjguMTI5LjI1NCINCiAgICAkR2xvYmFsOlNURF9FcnJvciArPSBAKCJJbnZhbGlkIGZvcm1hdCBvZiBTZWNvbmRhcnkgRE5TIEFkZHJlc3MgOiAkKCgkSW5WYWxpZF9Gb3JtYXQgfCAlIHskXy5JUEFkZHJlc3N9KVsxXSkuIHwgRXhwZWN0ZWQgZm9ybWF0IGlzOiAxOTIuMTY4LjEyOS4xLCAxOTIuMTY4LjEyOS4yNTQiKQ0KDQoNCg0KICAgfQ0KICAgZWxzZXsNCiAgICAjV3JpdGUtSG9zdCAiSW52YWxpZCBmb3JtYXQgb2YgU2Vjb25kYXJ5IEROUyBBZGRyZXNzIDogJCgkSW5WYWxpZF9Gb3JtYXQuSVBBZGRyZXNzKS4gfCBFeHBlY3RlZCBmb3JtYXQgaXM6IDE5Mi4xNjguMTI5LjEsIDE5Mi4xNjguMTI5LjI1NCINCiAgICAkR2xvYmFsOlNURF9FcnJvciArPSBAKCJJbnZhbGlkIGZvcm1hdCBvZiBTZWNvbmRhcnkgRE5TIEFkZHJlc3MgOiAkKCRJblZhbGlkX0Zvcm1hdC5JUEFkZHJlc3MpLiB8IEV4cGVjdGVkIGZvcm1hdCBpczogMTkyLjE2OC4xMjkuMSwgMTkyLjE2OC4xMjkuMjU0IikNCg0KDQp9DQoNCg0KfQ0KJFNUREVyciA9IEdldF9zdGRlcnIgLVRpdGxlICdJbnZhbGlkIEROUyBBZGRyZXNzIEZvcm1hdCcgLWRldGFpbHMgJEdsb2JhbDpTVERfRXJyb3INCiRHbG9iYWw6SGFzaERhdGEgPSBIYXNoVGFibGVfQXJyYXlfSlNPTiAtdGFza05hbWUgJ0NoYW5nZSBETlMgQ29uZmlndXJhdGlvbiB0YXNrJyAtc3RhdHVzICdGYWlsZWQnIC1Db2RlICcxJyAtc3Rkb3V0ICdVbmFibGUgdG8gcHJvY2VzcyBmdXJ0aGVyLCBEdWUgdG8gSW52YWxpZCBETlMgQWRkcmVzcycgLXJlc3VsdCAnRXJyb3I6IFVuYWJsZSB0byBwZXJmb3JtIGFjdGlvbicgLXN0ZGVyciAkU1RERXJyDQokR2xvYmFsOkhhc2hEYXRhDQpyZXR1cm4NCn0NCg0KDQppZigkUHJvdG9jb2xfSVBfTWF0Y2ggLW5lICRudWxsKXsNCg0KDQppZiggKCRQcm90b2NvbF9JUF9NYXRjaCB8ICUgeyRfLlByaW1fU2Vjb25kfSkgLWNvbnRhaW5zICdQcmltJyl7DQoNCiAgICAjV3JpdGUtSG9zdCAgIlByaW1hcnk6IHByb3RvY29sIHZlcnNpb24gZG9lcyBub3QgbWF0Y2ggYWRkcmVzcyBmb3JtYXQuIEV4OiBTdWJtaXR0ZWQgYW4gSVB2NCBQcmltYXJ5IGFkZHJlc3Mgd2l0aCBJUHY2IHByb3RvY29sIHNlbGVjdGVkIg0KDQokR2xvYmFsOlNURF9FcnJvciArPSBAKCJQcm90b2NvbCB2ZXJzaW9uIGRvZXMgbm90IG1hdGNoIGFkZHJlc3MgZm9ybWF0LiBFeDogU3VibWl0dGVkIGFuIElQdjQgUHJpbWFyeSBhZGRyZXNzIHdpdGggSVB2NiBwcm90b2NvbCBzZWxlY3RlZCIpDQoNCiB9DQoNCmlmKCgkUHJvdG9jb2xfSVBfTWF0Y2ggfCAlIHskXy5QcmltX1NlY29uZH0pIC1jb250YWlucyAnU2Vjb25kJyl7DQojV3JpdGUtSG9zdCAgIlNlY29uZDogcHJvdG9jb2wgdmVyc2lvbiBkb2VzIG5vdCBtYXRjaCBhZGRyZXNzIGZvcm1hdC4gRXg6IFN1Ym1pdHRlZCBhbiBJUHY0IFNlY29uZGFyeSBhZGRyZXNzIHdpdGggSVB2NiBwcm90b2NvbCBzZWxlY3RlZCINCg0KJEdsb2JhbDpTVERfRXJyb3IgKz0gQCgiUHJvdG9jb2wgdmVyc2lvbiBkb2VzIG5vdCBtYXRjaCBhZGRyZXNzIGZvcm1hdC4gRXg6IFN1Ym1pdHRlZCBhbiBJUHY0IFNlY29uZGFyeSBhZGRyZXNzIHdpdGggSVB2NiBwcm90b2NvbCBzZWxlY3RlZCIpDQoNCiB9DQoNCg0KJFNUREVyciA9IEdldF9zdGRlcnIgLVRpdGxlICdETlMgU2VydmVyIFByb3RvY29sIG1pc21hdGNoJyAtZGV0YWlscyAkR2xvYmFsOlNURF9FcnJvcg0KJEdsb2JhbDpIYXNoRGF0YSA9IEhhc2hUYWJsZV9BcnJheV9KU09OIC10YXNrTmFtZSAnQ2hhbmdlIEROUyBDb25maWd1cmF0aW9uIHRhc2snIC1zdGF0dXMgJ0ZhaWxlZCcgLUNvZGUgJzEnIC1zdGRvdXQgJ1VuYWJsZSB0byBwcm9jZXNzIGZ1cnRoZXIsIER1ZSB0byBETlMgQWRkcmVzcyBwcm90b2NvbCBtaXNtYXRjaCcgLXJlc3VsdCAnRXJyb3I6IFVuYWJsZSB0byBwZXJmb3JtIGFjdGlvbicgLXN0ZGVyciAkU1RERXJyDQoNCiRHbG9iYWw6SGFzaERhdGENCiByZXR1cm4NCn0NCg0KDQoNCmZ1bmN0aW9uIEluVmFsaWRfRm9ybWF0DQp7DQpwYXJhbSgkSW5WYWxpZF9Gb3JtYXQsJFByaW1hcnlfRE5TLCRTZWNvbmRhcnlfRE5TKQ0KICAgIA0KICAgIGlmKCRJblZhbGlkX0Zvcm1hdCAtbmUgJG51bGwpDQogICAgew0KICAgICAgICBpZigoJEluVmFsaWRfRm9ybWF0KS5HZXRUeXBlKCkuQmFzZVR5cGUubmFtZSAtZXEgJ0FycmF5JykNCiAgICAgICAgeyAgIGlmKCRJblZhbGlkX0Zvcm1hdC5JUEFkZHJlc3MgLW5lICIiKXsgDQogICAgICAgICAgICAgI1dyaXRlLUhvc3QgIkludmFsaWQgZm9ybWF0IG9mIEROUyBBZGRyZXNzIChQcmltYXJ5IDogJCgiJFByaW1hcnlfRE5TIikgYW5kIChTZWNvbmRhcnkgOiAkKCIkU2Vjb25kYXJ5X0ROUyIpLiAgRXhwZWN0ZWQgZm9ybWF0IGlzOiAxOTIuMTY4LjEyOS4xLCAxOTIuMTY4LjEyOS4yNTQgYG4iIC1Gb3JlZ3JvdW5kQ29sb3IgUmVkDQoNCiAgICAgICAgICAgICRHbG9iYWw6U1REX0Vycm9yID0gIkludmFsaWQgZm9ybWF0IG9mIEROUyBBZGRyZXNzIChQcmltYXJ5IDogJCgiJFByaW1hcnlfRE5TIikgYW5kIChTZWNvbmRhcnkgOiAkKCIkU2Vjb25kYXJ5X0ROUyIpLiAgRXhwZWN0ZWQgZm9ybWF0IGlzOiAxOTIuMTY4LjEyOS4xLCAxOTIuMTY4LjEyOS4yNTQiDQoNCiAgICAgICAgICAgICB9DQogICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmKCgkSW5WYWxpZF9Gb3JtYXQpLkdldFR5cGUoKS5CYXNlVHlwZS5uYW1lIC1lcSAnT2JqZWN0JykNCiAgICAgICAgICAgeyAgDQogICAgICAgICAgICAgIGlmKCRJblZhbGlkX0Zvcm1hdC5JUEFkZHJlc3MgLW5lICIiKXsgIA0KICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgJHByaW0gPSAkSW5WYWxpZF9Gb3JtYXQgfCA/IHskXy5QcmltX1NlY29uZCAtZXEgJ1ByaW0nfSB8ICUgeyRfLklQQWRkcmVzc30NCiAgICAgICAgICAgICAgJFNlYyA9ICRnbG9iYWw6YWEgfCA/IHskXy5QcmltX1NlY29uZCAtZXEgJ1NlY29uZCd9IHwgJSB7JF8uSVBBZGRyZXNzfQ0KICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZigkU2VjIC1uZSAkbnVsbCAtYW5kICRwcmltIC1lcSAkbnVsbCl7DQogICAgICAgICAgICAgICAgJFByaW1fU2VjYyA9ICAiU2Vjb25kYXJ5In0NCiAgICAgICAgICAgICAgICBpZigkcHJpbSAtbmUgJG51bGwgLWFuZCAkU2VjIC1lcSAkbnVsbCl7DQogICAgICAgICAgICAgICAgJFByaW1fU2VjYyA9ICAiUHJpbWFyeSJ9DQogICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICNXcml0ZS1Ib3N0ICJJbnZhbGlkIGZvcm1hdCBvZiAkUHJpbV9TZWNjIEROUyBBZGRyZXNzIDogJCgkSW5WYWxpZF9Gb3JtYXQuSVBBZGRyZXNzKS4gfCBFeHBlY3RlZCBmb3JtYXQgaXM6IDE5Mi4xNjguMTI5LjEsIDE5Mi4xNjguMTI5LjI1NCBgbiIgLUZvcmVncm91bmRDb2xvciBSZWQNCiAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICRHbG9iYWw6U1REX0Vycm9yID0gIkludmFsaWQgZm9ybWF0IG9mICRQcmltX1NlY2MgRE5TIEFkZHJlc3MgOiAkKCRJblZhbGlkX0Zvcm1hdC5JUEFkZHJlc3MpLiB8IEV4cGVjdGVkIGZvcm1hdCBpczogMTkyLjE2OC4xMjkuMSwgMTkyLjE2OC4xMjkuMjU0Ig0KDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgfQ0KICAgICB9DQogfQ0KIA0KaWYoJFByb3RvY29sX01hdGNoZWRfVmFsaWRfRm9ybWF0YTAgLW5lICRudWxsKQ0Kew0KICAgIGlmKCAoJFByb3RvY29sX01hdGNoZWRfVmFsaWRfRm9ybWF0YTApLkdldFR5cGUoKS5CYXNlVHlwZS5uYW1lIC1lcSAnT2JqZWN0JykNCiAgICB7DQoNCiAgICAgICAkMXN0X1BoYXNlX1Jlc3VsdCA9ICRQcm90b2NvbF9NYXRjaGVkX1ZhbGlkX0Zvcm1hdGEwDQoNCiAgICAgICBpZigkMXN0X1BoYXNlX1Jlc3VsdC5QcmltX1NlY29uZCAtZXEgJ1ByaW0nKQ0KICAgICAgIHsNCiAgICAgICAgICANCiAgICAgICAgICAgSW5WYWxpZF9Gb3JtYXQgLUluVmFsaWRfRm9ybWF0ICRJblZhbGlkX0Zvcm1hdCAtUHJpbWFyeV9ETlMgJFByaW1hcnlfRE5TIA0KICAgICAgICAgICAjV3JpdGUtSG9zdCAiUHJvY2VzcyBmb3IgUmVhY2hpYmxpdHkgdGVzdCBhZ2FpbnN0IFByaW1hcnkgRE5TIEFkZHJlc3M6ICQoJFByb3RvY29sX01hdGNoZWRfVmFsaWRfRm9ybWF0YTAuSVBBZGRyZXNzKWBuIiAtRm9yZWdyb3VuZENvbG9yIFllbGxvdw0KDQogICAgICAgICAgICRHbG9iYWw6RmluYWxETlMxID0gQ2hlY2tfRE5TX1NlcnZlcl9SZWFjaGFiaWxpdHkgLVByaW1hcnlfRE5TICRQcmltYXJ5X0ROUw0KDQogICAgICAgICAgIGlmKCEoQ2hlY2tBbnlvZlVucmVhY2gpKQ0KICAgICAgICAgICB7DQogICAgICAgICAgICRTVERFcnIgPSBHZXRfc3RkZXJyIC1UaXRsZSAnVW5hYmxlIHRvIHByb2Nlc3MgZnVydGhlcicgLWRldGFpbHMgJEdsb2JhbDpTVERfRXJyb3INCiAgICAgICAgICAgJEdsb2JhbDpIYXNoRGF0YSA9IEhhc2hUYWJsZV9BcnJheV9KU09OIC10YXNrTmFtZSAnQ2hhbmdlIEROUyBDb25maWd1cmF0aW9uIHRhc2snIC1zdGF0dXMgJ0ZhaWxlZCcgLUNvZGUgJzEnIC1zdGRvdXQgJ1VuYWJsZSB0byBwcm9jZXNzIGZ1cnRoZXIsIER1ZSB0byBETlMgQWRkcmVzcyB1bnJlYWNoYWJsZSBpc3N1ZScgLXJlc3VsdCAnRXJyb3I6IFVuYWJsZSB0byBwZXJmb3JtIGFjdGlvbicgLXN0ZGVyciAkU1RERXJyDQogICAgICAgICAgICRHbG9iYWw6SGFzaERhdGENCiAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYoISRHbG9iYWw6RmluYWxETlMxKXsNCiAgICAgICAgICAgJFNUREVyciA9IEdldF9zdGRlcnIgLVRpdGxlICdVbmFibGUgdG8gcHJvY2VzcyBmdXJ0aGVyJyAtZGV0YWlscyAkR2xvYmFsOlNURF9FcnJvcg0KICAgICAgICAgICAkR2xvYmFsOkhhc2hEYXRhID0gSGFzaFRhYmxlX0FycmF5X0pTT04gLXRhc2tOYW1lICdDaGFuZ2UgRE5TIENvbmZpZ3VyYXRpb24gdGFzaycgLXN0YXR1cyAnRmFpbGVkJyAtQ29kZSAnMScgLXN0ZG91dCAnVW5hYmxlIHRvIHByb2Nlc3MgZnVydGhlciwgRHVlIHRvIEROUyBBZGRyZXNzIHVucmVhY2hhYmxlIGlzc3VlJyAtcmVzdWx0ICdFcnJvcjogVW5hYmxlIHRvIHBlcmZvcm0gYWN0aW9uJyAtc3RkZXJyICRTVERFcnINCiAgICAgICAgICAgJEdsb2JhbDpIYXNoRGF0YQ0KICAgICAgICAgICAgICAgICAgIHJldHVybiA7DQogICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZigkR2xvYmFsOkZpbmFsRE5TMSAtZXEgJG51bGwpeyANCg0KICAgICAgICAgICAkU1RERXJyID0gR2V0X3N0ZGVyciAtVGl0bGUgJ1VuYWJsZSB0byBwcm9jZXNzIGZ1cnRoZXInIC1kZXRhaWxzICRHbG9iYWw6U1REX0Vycm9yDQogICAgICAgICAgICRHbG9iYWw6SGFzaERhdGEgPSBIYXNoVGFibGVfQXJyYXlfSlNPTiAtdGFza05hbWUgJ0NoYW5nZSBETlMgQ29uZmlndXJhdGlvbiB0YXNrJyAtc3RhdHVzICdGYWlsZWQnIC1Db2RlICcxJyAtc3Rkb3V0ICdVbmFibGUgdG8gcHJvY2VzcyBmdXJ0aGVyLCBEdWUgdG8gRE5TIEFkZHJlc3MgdW5yZWFjaGFibGUgaXNzdWUnIC1yZXN1bHQgJ0Vycm9yOiBVbmFibGUgdG8gcGVyZm9ybSBhY3Rpb24nIC1zdGRlcnIgJFNUREVycg0KICAgICAgICAgICAkR2xvYmFsOkhhc2hEYXRhDQogICAgICAgICAgIFJldHVybiA7DQoNCiAgICAgICAgICAgfQ0KICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAkR2xvYmFsOkZpbmFsRE5TID0gJEdsb2JhbDpGaW5hbEROUzENCiAgICAgICAgICAgaWYoKCRHbG9iYWw6UFJvY2VlZF9EYXRhIHwgJSB7JF8uJ1Byb2Nlc3MgZm9yIEROUyBTZXR0aW5nIENoYW5nZXMnfSkgLWNvbnRhaW5zICdOTycpew0KDQogICAgICAgICAgICNXcml0ZS1Ib3N0ICRHbG9iYWw6U1REX0Vycm9yDQogICAgICAgICAgIA0KICAgICAgICAgICAkU1RERXJyID0gR2V0X3N0ZGVyciAtVGl0bGUgJ1VuYWJsZSB0byBwcm9jZXNzIGZ1cnRoZXInIC1kZXRhaWxzICRHbG9iYWw6U1REX0Vycm9yDQogICAgICAgICAgICRHbG9iYWw6SGFzaERhdGEgPSBIYXNoVGFibGVfQXJyYXlfSlNPTiAtdGFza05hbWUgJ0NoYW5nZSBETlMgQ29uZmlndXJhdGlvbiB0YXNrJyAtc3RhdHVzICdGYWlsZWQnIC1Db2RlICcxJyAtc3Rkb3V0ICdVbmFibGUgdG8gcHJvY2VzcyBmdXJ0aGVyLCBEdWUgdG8gRE5TIEFkZHJlc3MgdW5yZWFjaGFibGUgaXNzdWUnIC1yZXN1bHQgJ0Vycm9yOiBVbmFibGUgdG8gcGVyZm9ybSBhY3Rpb24nIC1zdGRlcnIgJFNUREVycg0KDQogICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICBQcm9jZXNzX0Zvcl9DaGFuZ2VfU2V0dGluZyAtbmV0d29ya05hbWUgIiRuZXR3b3JrTmFtZSIgICANCiAgICAgICAgICAgfQ0KICAgICAgICAgICANCiAgICAgICAgICAgfQ0KDQogICAgICAgfQ0KICAgICAgIA0KICAgICAgIGlmKCQxc3RfUGhhc2VfUmVzdWx0LlByaW1fU2Vjb25kIC1lcSAnU2Vjb25kJykNCiAgICAgICB7DQogICAgICAgICAgIEluVmFsaWRfRm9ybWF0IC1JblZhbGlkX0Zvcm1hdCAkSW5WYWxpZF9Gb3JtYXQgLVNlY29uZGFyeV9ETlMgJFNlY29uZGFyeV9ETlMgDQogICAgICAgICAgICNXcml0ZS1Ib3N0ICJgblByb2Nlc3MgZm9yIFJlYWNoaWJsaXR5IHRlc3QgYWdhaW5zdCBTZWNvbmRhcnkgRE5TIEFkZHJlc3M6ICQoJFByb3RvY29sX01hdGNoZWRfVmFsaWRfRm9ybWF0YTAuSVBBZGRyZXNzKWBuIiAtRm9yZWdyb3VuZENvbG9yIFllbGxvdyAgDQogICAgICAgICAgIA0KICAgICAgICAgICAkR2xvYmFsOkZpbmFsRE5TMSA9IENoZWNrX0ROU19TZXJ2ZXJfUmVhY2hhYmlsaXR5ICAtU2Vjb25kYXJ5X0ROUyAkU2Vjb25kYXJ5X0ROUyAgICAgICAgICANCg0KICAgICAgICAgICBpZighIChDaGVja0FueW9mVW5yZWFjaCkpDQogICAgICAgICAgIHsNCiAgICAgICAgICAgJFNUREVyciA9IEdldF9zdGRlcnIgLVRpdGxlICdVbmFibGUgdG8gcHJvY2VzcyBmdXJ0aGVyJyAtZGV0YWlscyAkR2xvYmFsOlNURF9FcnJvcg0KICAgICAgICAgICAkR2xvYmFsOkhhc2hEYXRhID0gSGFzaFRhYmxlX0FycmF5X0pTT04gLXRhc2tOYW1lICdDaGFuZ2UgRE5TIENvbmZpZ3VyYXRpb24gdGFzaycgLXN0YXR1cyAnRmFpbGVkJyAtQ29kZSAnMScgLXN0ZG91dCAnVW5hYmxlIHRvIHByb2Nlc3MgZnVydGhlciwgRHVlIHRvIEROUyBBZGRyZXNzIHVucmVhY2hhYmxlIGlzc3VlJyAtcmVzdWx0ICdFcnJvcjogVW5hYmxlIHRvIHBlcmZvcm0gYWN0aW9uJyAtc3RkZXJyICRTVERFcnINCiAgICAgICAgICAgJEdsb2JhbDpIYXNoRGF0YQ0KICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICBpZighJEdsb2JhbDpGaW5hbEROUzEpew0KDQogICAgICAgICAgICRTVERFcnIgPSBHZXRfc3RkZXJyIC1UaXRsZSAnVW5hYmxlIHRvIHByb2Nlc3MgZnVydGhlcicgLWRldGFpbHMgJEdsb2JhbDpTVERfRXJyb3INCiAgICAgICAgICAgJEdsb2JhbDpIYXNoRGF0YSA9IEhhc2hUYWJsZV9BcnJheV9KU09OIC10YXNrTmFtZSAnQ2hhbmdlIEROUyBDb25maWd1cmF0aW9uIHRhc2snIC1zdGF0dXMgJ0ZhaWxlZCcgLUNvZGUgJzEnIC1zdGRvdXQgJ1VuYWJsZSB0byBwcm9jZXNzIGZ1cnRoZXIsIER1ZSB0byBETlMgQWRkcmVzcyB1bnJlYWNoYWJsZSBpc3N1ZScgLXJlc3VsdCAnRXJyb3I6IFVuYWJsZSB0byBwZXJmb3JtIGFjdGlvbicgLXN0ZGVyciAkU1RERXJyDQogICAgICAgICAgICRHbG9iYWw6SGFzaERhdGEgDQogICAgICAgICAgICAgICByZXR1cm4gOw0KICAgICAgICAgICAgICAgfSAgICAgIA0KDQoNCiAgICAgICAgaWYoJEdsb2JhbDpGaW5hbEROUzEgLWVxICRudWxsKXsgDQoNCiAgICAgICAgICAgJFNUREVyciA9IEdldF9zdGRlcnIgLVRpdGxlICdVbmFibGUgdG8gcHJvY2VzcyBmdXJ0aGVyJyAtZGV0YWlscyAkR2xvYmFsOlNURF9FcnJvcg0KICAgICAgICAgICAkR2xvYmFsOkhhc2hEYXRhID0gSGFzaFRhYmxlX0FycmF5X0pTT04gLXRhc2tOYW1lICdDaGFuZ2UgRE5TIENvbmZpZ3VyYXRpb24gdGFzaycgLXN0YXR1cyAnRmFpbGVkJyAtQ29kZSAnMScgLXN0ZG91dCAnVW5hYmxlIHRvIHByb2Nlc3MgZnVydGhlciwgRHVlIHRvIEROUyBBZGRyZXNzIHVucmVhY2hhYmxlIGlzc3VlJyAtcmVzdWx0ICdFcnJvcjogVW5hYmxlIHRvIHBlcmZvcm0gYWN0aW9uJyAtc3RkZXJyICRTVERFcnINCiAgICAgICAgICAgJEdsb2JhbDpIYXNoRGF0YQ0KICAgICAgICAgICBSZXR1cm4gOyAgDQogICAgICAgfQ0KICAgICAgIGVsc2V7DQogICAgICAgICAgICRHbG9iYWw6RmluYWxETlMgPSAkR2xvYmFsOkZpbmFsRE5TMQ0KICAgICAgICAgICBpZigoJEdsb2JhbDpQUm9jZWVkX0RhdGEgfCAlIHskXy4nUHJvY2VzcyBmb3IgRE5TIFNldHRpbmcgQ2hhbmdlcyd9KSAtY29udGFpbnMgJ05PJyl7DQoNCiAgICAgICAgICAgI1dyaXRlLUhvc3QgJEdsb2JhbDpTVERfRXJyb3INCiAgICAgICAgICAgDQogICAgICAgICAgIA0KICAgICAgICAgICAkU1RERXJyID0gR2V0X3N0ZGVyciAtVGl0bGUgJ1VuYWJsZSB0byBwcm9jZXNzIGZ1cnRoZXInIC1kZXRhaWxzICRHbG9iYWw6U1REX0Vycm9yDQogICAgICAgICAgICRHbG9iYWw6SGFzaERhdGEgPSBIYXNoVGFibGVfQXJyYXlfSlNPTiAtdGFza05hbWUgJ0NoYW5nZSBETlMgQ29uZmlndXJhdGlvbiB0YXNrJyAtc3RhdHVzICdGYWlsZWQnIC1Db2RlICcxJyAtc3Rkb3V0ICdVbmFibGUgdG8gcHJvY2VzcyBmdXJ0aGVyLCBEdWUgdG8gRE5TIEFkZHJlc3MgdW5yZWFjaGFibGUgaXNzdWUnIC1yZXN1bHQgJ0Vycm9yOiBVbmFibGUgdG8gcGVyZm9ybSBhY3Rpb24nIC1zdGRlcnIgJFNUREVycg0KICAgICAgICAgICANCiAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgIFByb2Nlc3NfRm9yX0NoYW5nZV9TZXR0aW5nIC1uZXR3b3JrTmFtZSAiJG5ldHdvcmtOYW1lIiAgIA0KICAgICAgICAgICB9DQoNCiAgICAgICAgICAgfQ0KDQogICAgICAgfSAgICAgICANCg0KDQoNCiAgICAgICANCn0NCiAgICBpZigoJFByb3RvY29sX01hdGNoZWRfVmFsaWRfRm9ybWF0YTApLkdldFR5cGUoKS5CYXNlVHlwZS5uYW1lIC1lcSAnQXJyYXknKQ0KICAgIHsNCiAgICAgICAjJGFhIHwgc2VsZWN0IElQQWRkcmVzcywnUHJvdmlkZWQgUHJvdG9jb2wnLCdQcm90b2NvbCBEZXRlY3RlZCcsJ1Byb3RvY29sX0lQIE1hdGNoJywnVmFsaWQgRm9ybWF0JyB8IGZ0DQogICAgICAgSW5WYWxpZF9Gb3JtYXQgLUluVmFsaWRfRm9ybWF0ICRWYWxpZF9Gb3JtYXQgLVByaW1hcnlfRE5TICRQcmltYXJ5X0ROUyAtU2Vjb25kYXJ5X0ROUyAkU2Vjb25kYXJ5X0ROUw0KICAgICAgICNXcml0ZS1Ib3N0ICJgbkJvdGggRE5TX1NlcnZlciBBZGRyZXNzIGFyZSBpbiB2YWxpZCBmb3JtYXQgYW5kIFByb3RvY29sIGFsc28gbWF0Y2hlZCB8fCBQcmltYXJ5OigkKCRQcm90b2NvbF9NYXRjaGVkX1ZhbGlkX0Zvcm1hdGEwWzBdLklQQWRkcmVzcykpIFNlY29uZGFyeTooJCgkUHJvdG9jb2xfTWF0Y2hlZF9WYWxpZF9Gb3JtYXRhMFsxXS5JUEFkZHJlc3MpKWBuIiAtRm9yZWdyb3VuZENvbG9yIFllbGxvdw0KICAgICAgIA0KDQogICAgICAgI1dyaXRlLUhvc3QgIlByb2Nlc3MgZm9yIGNoZWNraW5nIFJlYWNoaWJsaXR5IGZvciBCb3RoIEROU19TZXJ2ZXIgQWRkcmVzcyA6ICgkKCRQcm90b2NvbF9NYXRjaGVkX1ZhbGlkX0Zvcm1hdGEwWzBdLklQQWRkcmVzcykpIGFuZCAoJCgkUHJvdG9jb2xfTWF0Y2hlZF9WYWxpZF9Gb3JtYXRhMFsxXS5JUEFkZHJlc3MpKSIgLUZvcmVncm91bmRDb2xvciBZZWxsb3cNCiAgICAgICAjV3JpdGUtSG9zdCAiIg0KICAgICAgICRHbG9iYWw6RmluYWxETlMxID0gQ2hlY2tfRE5TX1NlcnZlcl9SZWFjaGFiaWxpdHkgIC1QcmltYXJ5X0ROUyAiJFByaW1hcnlfRE5TIiAtU2Vjb25kYXJ5X0ROUyAiJFNlY29uZGFyeV9ETlMiDQogICAgICAgDQogICAgICAgICAgIGlmKCEgKENoZWNrQW55b2ZVbnJlYWNoKSkNCiAgICAgICAgICAgew0KICAgICAgICAgICAkU1RERXJyID0gR2V0X3N0ZGVyciAtVGl0bGUgJ1VuYWJsZSB0byBwcm9jZXNzIGZ1cnRoZXInIC1kZXRhaWxzICRHbG9iYWw6U1REX0Vycm9yDQogICAgICAgICAgICRHbG9iYWw6SGFzaERhdGEgPSBIYXNoVGFibGVfQXJyYXlfSlNPTiAtdGFza05hbWUgJ0NoYW5nZSBETlMgQ29uZmlndXJhdGlvbiB0YXNrJyAtc3RhdHVzICdGYWlsZWQnIC1Db2RlICcxJyAtc3Rkb3V0ICdVbmFibGUgdG8gcHJvY2VzcyBmdXJ0aGVyLCBEdWUgdG8gRE5TIEFkZHJlc3MgdW5yZWFjaGFibGUgaXNzdWUnIC1yZXN1bHQgJ0Vycm9yOiBVbmFibGUgdG8gcGVyZm9ybSBhY3Rpb24nIC1zdGRlcnIgJFNUREVycg0KICAgICAgICAgICAkR2xvYmFsOkhhc2hEYXRhDQogICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgIH0NCg0KICAgICAgIGlmKCEkR2xvYmFsOkZpbmFsRE5TMSl7DQoNCiAgICAgICAgICAgJFNUREVyciA9IEdldF9zdGRlcnIgLVRpdGxlICdVbmFibGUgdG8gcHJvY2VzcyBmdXJ0aGVyJyAtZGV0YWlscyAkR2xvYmFsOlNURF9FcnJvcg0KICAgICAgICAgICAkR2xvYmFsOkhhc2hEYXRhID0gSGFzaFRhYmxlX0FycmF5X0pTT04gLXRhc2tOYW1lICdDaGFuZ2UgRE5TIENvbmZpZ3VyYXRpb24gdGFzaycgLXN0YXR1cyAnRmFpbGVkJyAtQ29kZSAnMScgLXN0ZG91dCAnVW5hYmxlIHRvIHByb2Nlc3MgZnVydGhlciwgRHVlIHRvIEROUyBBZGRyZXNzIHVucmVhY2hhYmxlIGlzc3VlJyAtcmVzdWx0ICdFcnJvcjogVW5hYmxlIHRvIHBlcmZvcm0gYWN0aW9uJyAtc3RkZXJyICRTVERFcnINCiAgICAgICAgICAgJEdsb2JhbDpIYXNoRGF0YQ0KICAgICAgIHJldHVybiA7DQogICAgICAgfQ0KDQogICAgICAgIGlmKCRHbG9iYWw6RmluYWxETlMxIC1lcSAkbnVsbCl7IA0KICAgICAgICAgICAkU1RERXJyID0gR2V0X3N0ZGVyciAtVGl0bGUgJ1VuYWJsZSB0byBwcm9jZXNzIGZ1cnRoZXInIC1kZXRhaWxzICRHbG9iYWw6U1REX0Vycm9yDQogICAgICAgICAgICRHbG9iYWw6SGFzaERhdGEgPSBIYXNoVGFibGVfQXJyYXlfSlNPTiAtdGFza05hbWUgJ0NoYW5nZSBETlMgQ29uZmlndXJhdGlvbiB0YXNrJyAtc3RhdHVzICdGYWlsZWQnIC1Db2RlICcxJyAtc3Rkb3V0ICdVbmFibGUgdG8gcHJvY2VzcyBmdXJ0aGVyLCBEdWUgdG8gRE5TIEFkZHJlc3MgdW5yZWFjaGFibGUgaXNzdWUnIC1yZXN1bHQgJ0Vycm9yOiBVbmFibGUgdG8gcGVyZm9ybSBhY3Rpb24nIC1zdGRlcnIgJFNUREVycg0KICAgICAgICAgICAkR2xvYmFsOkhhc2hEYXRhDQogICAgICAgICAgIFJldHVybiA7ICANCiAgICAgICB9DQogICAgICAgZWxzZXsNCiAgICAgICAgICAgJEdsb2JhbDpGaW5hbEROUyA9ICRHbG9iYWw6RmluYWxETlMxDQogICAgICAgICAgIGlmKCgkR2xvYmFsOlBSb2NlZWRfRGF0YSB8ICUgeyRfLidQcm9jZXNzIGZvciBETlMgU2V0dGluZyBDaGFuZ2VzJ30pIC1jb250YWlucyAnTk8nKXsNCiAgICAgICAgICAgDQogICAgICAgICAgIA0KICAgICAgICAgICAjV3JpdGUtSG9zdCAkR2xvYmFsOlNURF9FcnJvcg0KICAgICAgICAgICBzbGVlcCAxMDAgIA0KICAgICAgICAgICAkU1RERXJyID0gR2V0X3N0ZGVyciAtVGl0bGUgJ1VuYWJsZSB0byBwcm9jZXNzIGZ1cnRoZXInIC1kZXRhaWxzICRHbG9iYWw6U1REX0Vycm9yDQogICAgICAgICAgICRHbG9iYWw6SGFzaERhdGEgPSBIYXNoVGFibGVfQXJyYXlfSlNPTiAtdGFza05hbWUgJ0NoYW5nZSBETlMgQ29uZmlndXJhdGlvbiB0YXNrJyAtc3RhdHVzICdGYWlsZWQnIC1Db2RlICcxJyAtc3Rkb3V0ICdVbmFibGUgdG8gcHJvY2VzcyBmdXJ0aGVyLCBEdWUgdG8gRE5TIEFkZHJlc3MgdW5yZWFjaGFibGUgaXNzdWUnIC1yZXN1bHQgJ0Vycm9yOiBVbmFibGUgdG8gcGVyZm9ybSBhY3Rpb24nIC1zdGRlcnIgJFNUREVycg0KDQogICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICBQcm9jZXNzX0Zvcl9DaGFuZ2VfU2V0dGluZyAtbmV0d29ya05hbWUgIiRuZXR3b3JrTmFtZSIgICANCiAgICAgICAgICAgfQ0KDQogICAgICAgICAgIH0NCiAgICB9DQoNCn0NCmVsc2V7DQogICAgICAgJFByb3RvY29sX01hdGNoZWRfVmFsaWRfRm9ybWF0YTEgfCBzZWxlY3QgSVBBZGRyZXNzLCdQcm92aWRlZCBQcm90b2NvbCcsJ1Byb3RvY29sIERldGVjdGVkJywnUHJvdG9jb2xfSVAgTWF0Y2gnLCdWYWxpZCBGb3JtYXQnIHwgZnQNCiAgICAgICAjV3JpdGUtSG9zdCAiYG5JbnZhbGlkIEROUyBBZGRyZXNzIGZvcm1hdCBPUiBETlMgQWRkcmVzcyBQcm90b2NvbCBhbmQgUHJvdmlkZWQgUHJvdG9jb2wgZG9lc24ndCBtYXRjaCIgLUZvcmVncm91bmRDb2xvciByZWQNCg0KICAgICAgICRHbG9iYWw6U1REX0Vycm9yID0gIkludmFsaWQgRE5TIEFkZHJlc3MgZm9ybWF0IE9SIEROUyBBZGRyZXNzIFByb3RvY29sIGFuZCBQcm92aWRlZCBQcm90b2NvbCBkb2Vzbid0IG1hdGNoIg0KDQogICAgICAgJFNUREVyciA9IEdldF9zdGRlcnIgLVRpdGxlICdETlMgU2VydmVyIFByb3RvY29sIG1pc21hdGNoJyAtZGV0YWlscyAkR2xvYmFsOlNURF9FcnJvcg0KICAgICAgICRHbG9iYWw6SGFzaERhdGEgPSBIYXNoVGFibGVfQXJyYXlfSlNPTiAtdGFza05hbWUgJ0NoYW5nZSBETlMgQ29uZmlndXJhdGlvbiB0YXNrJyAtc3RhdHVzICdGYWlsZWQnIC1Db2RlICcxJyAtc3Rkb3V0ICdVbmFibGUgdG8gcHJvY2VzcyBmdXJ0aGVyLCBEdWUgdG8gRE5TIEFkZHJlc3MgdW5yZWFjaGFibGUgaXNzdWUnIC1yZXN1bHQgJ0Vycm9yOiBVbmFibGUgdG8gcGVyZm9ybSBhY3Rpb24nIC1zdGRlcnIgJFNUREVycg0KICAgICAgICRHbG9iYWw6SGFzaERhdGEgDQoNCg0KICAgICAgIFJldHVybiAkRmFsc2UNCg0KfQ0KDQp9DQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMgUmVhY2hhYmlsaXR5IHRlc3QgIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgIA0KZnVuY3Rpb24gQ2hlY2tfRE5TX1NlcnZlcl9SZWFjaGFiaWxpdHkNCnsNCiAgIHBhcmFtKCRQcmltYXJ5X0ROUywkc2Vjb25kYXJ5X2RucywkUHJvdG9jb2wpDQoNCiAgICBpZigkR2xvYmFsOlNURF9FcnJvciAtbmUgJG51bGwpew0KICAgICRHbG9iYWw6U1REX0Vycm9yDQogICAgcmV0dXJuICRmYWxzZQ0KICAgIH0NCg0KICAgICAgICAjV3JpdGUtSG9zdCAiIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIg0KICAgICAgICAjV3JpdGUtSG9zdCAiUmVhY2hpYmxpdHkgVmFsYWlkYXRpb24uLi4iDQogICAgICAgICNXcml0ZS1Ib3N0ICIjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMiDQogICAgICAgICNXcml0ZS1Ib3N0ICIiDQogICAgICAgIA0KICAgIGlmKCRQcmltYXJ5X0ROUyAtbmUgJG51bGwgLWFuZCAkc2Vjb25kYXJ5X2RucyAtbmUgJG51bGwpew0KICAgICRkbnNTZXJ2ZXJzICAgPSAoIiRQcmltYXJ5X0ROUyIsIiRzZWNvbmRhcnlfZG5zIikNCiAgICB9DQogICAgaWYoJFByaW1hcnlfRE5TIC1uZSAkbnVsbCAtYW5kICRzZWNvbmRhcnlfZG5zIC1lcSAkbnVsbCl7DQogICAgJGRuc1NlcnZlcnMgICA9ICgiJFByaW1hcnlfRE5TIikNCiAgICB9DQogICAgaWYoJFByaW1hcnlfRE5TIC1lcSAkbnVsbCAtYW5kICRzZWNvbmRhcnlfZG5zIC1uZSAkbnVsbCl7DQogICAgJGRuc1NlcnZlcnMgICA9ICgiJHNlY29uZGFyeV9kbnMiKQ0KICAgIH0NCiAgICANCiAgICAgIA0KICAgICRzZXJ2ZXJzID0gJGRuc1NlcnZlcnMNCg0KICAgICAkcGluZyA9IG5ldy1vYmplY3Qgc3lzdGVtLm5ldC5uZXR3b3JraW5mb3JtYXRpb24ucGluZw0KICAgICAkcGluZ3JldHVybnMgPSBAKCkNCg0KICAgIGZvcmVhY2ggKCRlbnRyeSBpbiAkc2VydmVycykgew0KDQogICAgICAgICRQcmltX1NlY29uZCA9ICgkZW50cnkuc3BsaXQoJ3wnKSlbMV0NCiAgICAgICAgJHRlc3RBZGRyZXNzID0gKCRlbnRyeS5zcGxpdCgnfCcpKVswXQ0KDQogICAgICAkcGluZ3JldHVybnMgKz0gJHBpbmcuc2VuZCgkdGVzdEFkZHJlc3MpIHwgc2VsZWN0IFN0YXR1cyxAe25hbWUgPSAnQWRkcmVzcyc7ZXhwID0geyIkdGVzdEFkZHJlc3MifX0sQHtuYW1lID0gJ1ByaW1fU2Vjb25kJztleHAgPSB7IiRQcmltX1NlY29uZCJ9fQ0KICAgICAgIyRwaW5ncmV0dXJucw0KICAgIH0NCg0KICAgICRTdWNjZXNzX1RvX2NvbnRhY3QgPSAoJHBpbmdyZXR1cm5zIHwgd2hlcmUgeyRfLlN0YXR1cyAtZXEgJ1N1Y2Nlc3MnfSkgfCBzZWxlY3QgU3RhdHVzLEFkZHJlc3MsUHJpbV9TZWNvbmQNCg0KICAgICRGYWlsZWRfVG9fY29udGFjdCA9ICgkcGluZ3JldHVybnMgfCB3aGVyZSB7JF8uU3RhdHVzIC1uZSAnU3VjY2Vzcyd9KSB8IHNlbGVjdCBTdGF0dXMsQWRkcmVzcyxQcmltX1NlY29uZA0KDQogICAgJEdsb2JhbDpQUm9jZWVkX0RhdGEgPSBAKCkNCg0KICAgIGlmKCRTdWNjZXNzX1RvX2NvbnRhY3QgLW5lICRudWxsKQ0KICAgIHsNCiAgICAkR2xvYmFsOlBSb2NlZWRfRGF0YSArPSAkU3VjY2Vzc19Ub19jb250YWN0IHwgc2VsZWN0IEFkZHJlc3MsQHtuYW1lID0gJ1JlYWNoYWJsZSBTdGF0dXMnO2V4cCA9IHsnWUVTJ319LEB7bmFtZSA9ICdQcm9jZXNzIGZvciBETlMgU2V0dGluZyBDaGFuZ2VzJztleHAgPSB7J1lFUyd9fSxQcmltX1NlY29uZA0KICAgIH0NCg0KICAgIGlmKCRGYWlsZWRfVG9fY29udGFjdCAtbmUgJG51bGwpDQogICAgew0KICAgICRHbG9iYWw6UFJvY2VlZF9EYXRhICs9ICRGYWlsZWRfVG9fY29udGFjdCB8IHNlbGVjdCBBZGRyZXNzLEB7bmFtZSA9ICdSZWFjaGFibGUgU3RhdHVzJztleHAgPSB7J05vJ319LEB7bmFtZSA9ICdQcm9jZXNzIGZvciBETlMgU2V0dGluZyBDaGFuZ2VzJztleHAgPSB7J05PJ319LFByaW1fU2Vjb25kDQoNCiAgICB9DQoNCiAgICAkR2xvYmFsOlByb2Nlc3NfRGF0YV9DaGFuZ2VzICAgICA9ICRHbG9iYWw6UFJvY2VlZF9EYXRhIHwgPyB7JF8uJ1Byb2Nlc3MgZm9yIEROUyBTZXR0aW5nIENoYW5nZXMnIC1lcSAnWUVTJ30gfCBzZWxlY3QgQWRkcmVzcyxQcmltX1NlY29uZA0KICAgICRHbG9iYWw6Tk9UX1Byb2Nlc3NfRGF0YV9DaGFuZ2VzID0gJEdsb2JhbDpQUm9jZWVkX0RhdGEgfCA/IHskXy4nUmVhY2hhYmxlIFN0YXR1cycgLWVxICdOTyd9IHwgJSB7JF8uQWRkcmVzc30gfCBzZWxlY3QgQWRkcmVzcyxQcmltX1NlY29uZA0KICAgIA0KDQogICAgDQogICAgaWYoJEdsb2JhbDpQcm9jZXNzX0RhdGFfQ2hhbmdlcyAtbmUgJG51bGwpDQogICAgew0KICAgICAgICBpZigoJEdsb2JhbDpQcm9jZXNzX0RhdGFfQ2hhbmdlcykuR2V0VHlwZSgpLkJhc2VUeXBlLm5hbWUgLWVxICdBcnJheScpDQogICAgICAgIHsgICAgDQogICAgICAgICAgICNXcml0ZS1Ib3N0ICJQcm9jZXNzIGZvciBETlMgQWRkcmVzcyBjaGFuZ2VzIChQcmltYXJ5IDogJCgiJFByaW1hcnlfRE5TIikpIGFuZCAoU2Vjb25kYXJ5IDogJCgiJFNlY29uZGFyeV9ETlMiKSkiIC1Gb3JlZ3JvdW5kQ29sb3IgWWVsbG93DQogICAgICAgICAgICRHbG9iYWw6RE5TX1RPX1Byb2Nlc3MgPSAkZG5zU2VydmVycyAtam9pbiAnLCcNCiAgICAgICAgfQ0KDQogICAgICAgIGlmKCgkR2xvYmFsOlByb2Nlc3NfRGF0YV9DaGFuZ2VzKS5HZXRUeXBlKCkuQmFzZVR5cGUubmFtZSAtZXEgJ09iamVjdCcpDQogICAgICAgIHsgIA0KICAgICAgICAgIGlmKCRHbG9iYWw6UHJvY2Vzc19EYXRhX0NoYW5nZXMuUHJpbV9TZWNvbmQgLWVxICdQcmltJykNCiAgICAgICAgICB7DQogICAgICAgICAgICAkcHJpbTEgPSAoJFByaW1hcnlfRE5TLnNwbGl0KCd8JykpWzBdDQogICAgICAgICAgICNXcml0ZS1Ib3N0ICJQcm9jZXNzIGZvciBETlMgQWRkcmVzcyBjaGFuZ2VzIChQcmltYXJ5IDogJCgiJHByaW0xIikpIiAtRm9yZWdyb3VuZENvbG9yIFllbGxvdw0KICAgICAgICAgICAkR2xvYmFsOkROU19UT19Qcm9jZXNzID0gJFByb2Nlc3NfRGF0YV9DaGFuZ2VzICAgIA0KICAgICAgICAgIH0NCiAgICAgICAgICANCiAgICAgICAgICBpZigkR2xvYmFsOlByb2Nlc3NfRGF0YV9DaGFuZ2VzLlByaW1fU2Vjb25kIC1lcSAnU2Vjb25kJykNCiAgICAgICAgICB7DQogICAgICAgICAgICAgJFNlY29uZDEgPSAoJHNlY29uZGFyeV9kbnMuc3BsaXQoJ3wnKSlbMF0gICAgICAgICANCiAgICAgICAgICAgI1dyaXRlLUhvc3QgIlByb2Nlc3MgZm9yIEROUyBBZGRyZXNzIGNoYW5nZXMgKFNlY29uZGFyeSA6ICQoIiRTZWNvbmQxIikpIiAtRm9yZWdyb3VuZENvbG9yIFllbGxvdw0KICAgICAgICAgICAkR2xvYmFsOkROU19UT19Qcm9jZXNzID0gJFByb2Nlc3NfRGF0YV9DaGFuZ2VzICAgIA0KICAgICAgICAgIH0NCiAgICAgICAgICANCiAgICAgICAgfQ0KICAgIH0NCg0KIA0KIA0KIGlmKCRHbG9iYWw6UHJvY2Vzc19EYXRhX0NoYW5nZXMgLWVxICRudWxsKQ0KIHsNCiAgICAgIA0KICAgICBpZigkU2Vjb25kYXJ5X0ROUyAtbmUgJG51bGwpDQogICAgIHsNCiAgICAgICNXcml0ZS1Ib3N0ICIoU2Vjb25kYXJ5IDogJCgiJFNlY29uZGFyeV9ETlMiKSkgRE5TIHVucmVhY2hhYmxlIiAtRm9yZWdyb3VuZENvbG9yIHJlZA0KICAgICB9DQogICAgIGlmKCRQcmltYXJ5X0ROUyAtbmUgJG51bGwpDQogICAgIHsNCiAgICAgICNXcml0ZS1Ib3N0ICIoUHJpbWFyeSA6ICQoIiRQcmltYXJ5X0ROUyIpKSBETlMgdW5yZWFjaGFibGUiIC1Gb3JlZ3JvdW5kQ29sb3IgcmVkDQogICAgIH0NCiB9DQoNCiAgICAkR2xvYmFsOlByb2Nlc3NfRGF0YV9DaGFuZ2VzDQogICAgDQogICAgI3JldHVybiAkRE5TX1RPX1Byb2Nlc3MNCn0NCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyBHZXQgQ3VycmVudCBBZGFwdGVyIEluZm8gIyMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgIA0KZnVuY3Rpb24gR2V0X0N1cnJlbnRfQWRhcHRlcl9JbmZvDQp7DQpwYXJhbSgkYWRhcHRlclNldHRpbmdzKQ0KDQogICAgZm9yZWFjaCgkTmV0d29yayBpbiAkYWRhcHRlclNldHRpbmdzKQ0KICAgIHsNCiAgICAkQWRhcHRlck5hbWUgPSAkbmV0d29ya05hbWUNCiAgICAkSVBBZGRyZXNzICA9ICROZXR3b3JrLklwQWRkcmVzc1swXQ0KICAgICRTdWJuZXRNYXNrICA9ICROZXR3b3JrLklQU3VibmV0WzBdDQogICAgJERlZmF1bHRHYXRld2F5ID0gJE5ldHdvcmsuRGVmYXVsdElQR2F0ZXdheQ0KICAgICRETlNTZXJ2ZXJzICA9ICROZXR3b3JrLkROU1NlcnZlclNlYXJjaE9yZGVyDQogICAgJElzREhDUEVuYWJsZWQgPSAkZmFsc2UNCiAgICBJZigkbmV0d29yay5ESENQRW5hYmxlZCkgew0KICAgICAkSXNESENQRW5hYmxlZCA9ICR0cnVlDQogICAgfQ0KICAgICRHbG9iYWw6T3V0cHV0T2JqICA9IE5ldy1PYmplY3QgLVR5cGUgUFNPYmplY3QNCiAgICAkR2xvYmFsOk91dHB1dE9iaiB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIEFkYXB0ZXJOYW1lIC1WYWx1ZSAkQWRhcHRlck5hbWUNCiAgICAkR2xvYmFsOk91dHB1dE9iaiB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElQQWRkcmVzcyAtVmFsdWUgJElQQWRkcmVzcw0KICAgICRHbG9iYWw6T3V0cHV0T2JqIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgU3VibmV0TWFzayAtVmFsdWUgJFN1Ym5ldE1hc2sNCiAgICAkR2xvYmFsOk91dHB1dE9iaiB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIEdhdGV3YXkgLVZhbHVlICgkRGVmYXVsdEdhdGV3YXkgLWpvaW4gIiwiKSAgICAgIA0KICAgICRHbG9iYWw6T3V0cHV0T2JqIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSXNESENQRW5hYmxlZCAtVmFsdWUgJElzREhDUEVuYWJsZWQNCiAgICAkR2xvYmFsOk91dHB1dE9iaiB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIEROU1NlcnZlcnMgLVZhbHVlICgkRE5TU2VydmVycyAtam9pbiAiLCIpICAgICANCiAgICAkR2xvYmFsOk91dHB1dE9iag0KDQogICAgJE9iamVjdENvdW50ID0gMQ0KICAgICRHbG9iYWw6SGFzaERhdGEgPSBIYXNoVGFibGVfQXJyYXlfSlNPTiAtSGVhZGluZ1VuZGVyX2RhdGFPYmplY3RfQXJyYXkgIlBvc3QgQ2hhbmdlcyBvZiBOZXR3b3JrIEFkYXB0ZXIgY29uZmlndXJhdGlvbiIgLUFycmF5ICRHbG9iYWw6T3V0cHV0T2JqIC10YXNrTmFtZSAnQ2hhbmdlIEROUyBDb25maWd1cmF0aW9uIHRhc2snIC1zdGF0dXMgJ1N1Y2Nlc3MnIC1Db2RlICcwJyAtc3Rkb3V0ICRHbG9iYWw6T3V0cHV0T2JqIC1vYmplY3RzICIkT2JqZWN0Q291bnQiIC1yZXN1bHQgJ1N1Y2Nlc3M6IEROUyBDb25maWd1cmF0aW9uIGhhcyBjaGFuZ2VkJw0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KICAgICMjIyMjIyMjIyMjIyMjIyBSZS1lbmFibGUgbmV0d29yayBhZGFwdGVyICAgDQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQogICAgIyRuZXR3b3JrQWRhcHRlcl9JbmRleCA9ICRuZXR3b3JrLmluZGV4DQogICAgI0VuYWJsZV9EaXNhYmxlX0FkYXB0ZXIgLW5ldHdvcmtBZGFwdGVyX0luZGV4ICRuZXR3b3JrQWRhcHRlcl9JbmRleA0KDQp9DQoNCn0NCg0KJGFkYXB0ZXIgPSBHd21pIHdpbjMyX25ldHdvcmthZGFwdGVyIHwgd2hlcmUgeyRfLk5ldENvbm5lY3Rpb25JRCAtZXEgJG5ldHdvcmtOYW1lfQ0KaWYoJGFkYXB0ZXIpDQogICAgew0KDQogICAgICAjV3JpdGUtSG9zdCAiRm91bmQgTmV0d29yayBBZGFwdGVyOiAoJCgkbmV0d29ya05hbWUpKSIgLUZvcmVncm91bmRDb2xvciBHcmVlbg0KDQogICAgICAkYWRhcHRlclNldHRpbmdzID0gR2V0LVdtaU9iamVjdCB3aW4zMl9uZXR3b3JrQWRhcHRlckNvbmZpZ3VyYXRpb24gfCB3aGVyZSB7JF8uaW5kZXggLWVxICRhZGFwdGVyLmluZGV4fQ0KDQogICAgICAgIGlmKCRhZGFwdGVyU2V0dGluZ3MuREhDUEVuYWJsZWQgLWVxICRUcnVlKXsNCiAgICAgICAgDQogICAgICNXcml0ZS1Ib3N0ICJgbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMiDQogICAgICNXcml0ZS1Ib3N0ICJESENQIFN0YXR1cyBmb3IgQWRhcHRlciAoJCgkbmV0d29ya05hbWUpKSINCiAgICAgI1dyaXRlLUhvc3QgIiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNgbiINCg0KICAgICAgICAjV3JpdGUtSG9zdCAiYG5gbkRIQ1AgaXMgRW5hYmxlZCwgY2FuJ3QgcGVyZm9ybSBjaGFuZ2VzIGZvciBETlNgbiBgbiIgLUZvcmVncm91bmRDb2xvciBZZWxsb3cNCiAgICAgICAgcmV0dXJuDQogICAgICAgIH0NCg0KDQogICAgICNXcml0ZS1Ib3N0ICJgbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMiDQogICAgICNXcml0ZS1Ib3N0ICJWYWxhaWRhdGlvbi0gTWF0Y2ggRE5TLUFkZHJlc3MgcHJvdG9jb2wgJiBETlMtQWRkcmVzcyBGb3JtYXQiDQogICAgICNXcml0ZS1Ib3N0ICIjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjYG4iDQoNCiAgICAkQ2hlY2tfRm9ybWF0X1Byb3RvY29sID0gQ2hlY2tfRE5TSVBfRm9ybWF0X1Byb3RvY29sIC1QcmltYXJ5X0ROUyAiJFByaW1hcnlfRE5TIiAtU2Vjb25kYXJ5X0ROUyAiJFNlY29uZHJ5X0ROUyIgLVByb3RvY29sICIkUHJvdG9jb2xfSVBWNF9JUFY2Ig0KDQogICAgaWYoISRDaGVja19Gb3JtYXRfUHJvdG9jb2wpew0KICAgICAgcmV0dXJuDQogICAgfQ0KDQogICAgaWYoJEdsb2JhbDpGaW5hbEROUyAtZXEgJG51bGwpew0KICAgICAgcmV0dXJuDQogICAgfQ0KICAgIGVsc2V7ICAgICANCiAgICAgIA0KICAgfQ0KICAgICAgI1dyaXRlLUhvc3QgJyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjJw0KICAgICAgI1dyaXRlLUhvc3QgIk5ldHdvcmsgQWRhcHRlciBTZXR0aW5nIENoYW5nZXMgZm9yIE5ldHdvcmsgQWRhcHRlcjogKCQoJG5ldHdvcmtOYW1lKSkiDQogICAgICAjV3JpdGUtSG9zdCAnIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMnDQoNCiAgICB9DQplbHNlDQp7DQogICNXcml0ZS1Ib3N0ICJOZXR3b3JrIEFkYXB0ZXIgKCgkbmV0d29ya05hbWUpKSBkb2VzIG5vdCBleGlzdCwgSGVuY2UgcmV0cmlldmluZyBhdmFpbGFibGUgTmV0d29yayBBZGFwdGVycy4uLi4uLi4iIC1Gb3JlZ3JvdW5kQ29sb3IgWWVsbG93DQogICNXcml0ZS1Ib3N0ICcnDQoNCiAgI1dyaXRlLUhvc3QgJyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjJw0KICAjV3JpdGUtSG9zdCAiTGlzdCBvZiBhdmFpbGFibGUgTmV0d29yayBBZGFwdGVycyINCiAgI1dyaXRlLUhvc3QgJyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjJw0KJEF2YWlsICA9ICAgZ2V0LXdtaW9iamVjdCB3aW4zMl9uZXR3b3JrYWRhcHRlciB8IHdoZXJlIHskXy5uZXRjb25uZWN0aW9uaWQgLW5lICRudWxsfXwgc2VsZWN0IE5ldENvbm5lY3Rpb25JRCxOYW1lLERlc2NyaXB0aW9uLE5ldEVuYWJsZWQsaW5kZXggfCBTZWxlY3QgTmV0Q29ubmVjdGlvbklELE5hbWUsRGVzY3JpcHRpb24sTmV0RW5hYmxlZCxpbmRleA0KDQoNCiAgJFNUREVyciA9IEdldF9zdGRlcnIgLVRpdGxlICdOZXR3b3JrIEFkYXB0ZXIgbm90IGV4aXN0JyAtZGV0YWlscyAnTmV0d29yayBBZGFwdGVyIG5vdCBleGlzdCxIZW5jZSByZXRyaWV2aW5nIGF2YWlsYWJsZSBOZXR3b3JrIEFkYXB0ZXJzJw0KICAkR2xvYmFsOkhhc2hEYXRhID0gSGFzaFRhYmxlX0FycmF5X0pTT04gLXRhc2tOYW1lICdDaGFuZ2UgRE5TIENvbmZpZ3VyYXRpb24gdGFzaycgLUhlYWRpbmdVbmRlcl9kYXRhT2JqZWN0X0FycmF5ICJBdmFpbGFibGUgTmV0d29yayBBZGFwdGVyIGluZm9ybWF0aW9uIiAtQXJyYXkgJEF2YWlsIC1zdGF0dXMgJ0ZhaWxlZCcgLUNvZGUgJzEnIC1zdGRvdXQgIk5ldHdvcmsgQWRhcHRlciAoJCgkbmV0d29ya05hbWUpKSBkb2VzIG5vdCBleGlzdCwgSGVuY2UgcmV0cmlldmluZyBhdmFpbGFibGUgTmV0d29yayBBZGFwdGVycyIgLXJlc3VsdCAiRXJyb3I6IE5ldHdvcmsgQWRhcHRlciAoJCgkbmV0d29ya05hbWUpKSBkb2VzIG5vdCBleGlzdCIgLXN0ZGVyciAkU1RERXJyDQoNCn0NCg0KJEdsb2JhbDpIYXNoRGF0YQ==",
"jsonSchema":{
  "type":"object",
"properties":{
	"networkName":{
      "type":"string",
      "title":"Enter Network Adapter Name",
      "minLength":1
    },
	"DNS_Server":{
      "type":"string",
      "title":"Enter DNS Server Address -Comma Separated",
      "minLength":1
	},
      "Protocol_IPV4_IPV6": {
        "type": "string",
        "title": "Select Protocol Version",
        "enum": [
          "IPV4",
          "IPV6"
        ]
      }
},	
  "required":[
	"networkName",
	"DNS_Server",	
	"Protocol_IPV4_IPV6"
  ],
  "additionalProperties": false
},
"uiSchema":{
"networkName":{
    "ui:autofocus":true,
    "classNames":"col-sm-12"
  },
"DNS_Server":{
    "ui:autofocus":true,
    "classNames":"col-sm-12"
  },
 "Protocol_IPV4_IPV6":{
    "ui:autofocus":true,
    "classNames":"col-sm-12"
  }, 
  "ui:order":["networkName","DNS_Server","Protocol_IPV4_IPV6"]
},
"isHDScript":true
}