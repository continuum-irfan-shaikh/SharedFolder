{"id":"d09bdd81-914e-11e9-95a5-00155d130b01","partnerId":"00000000-0000-0000-0000-000000000000","category":["Maintenance"],"description":"MS Office Repair","engine":"powershell","engineMaxVersion":5,"expectedExecutionTimeSec":300,"failureMessage":"Executed with errors","successMessage":"Executed Successfully","internal":false,"name":"MS-Office Repair","tags":["Windows 7","Windows 10"],"sequence":true,"content":"CmNscwoKPCMKCkJvb2xlYW4gOiBJc1F1aWNrUmVwYWlyU2VsZWN0ZWQgW1RydWUgLCBEZWZhdWx0XSAvIElzRnVsbFJlcGFpclNlbGVjdGVkIFtGYWxzZV0gCltOb3RlOiAgQ2hlY2sgQm94IGlmIHNlbGVjdGVkLCBwb3dlcnNoZWxsIApzY3JpcHQgd2lsbCBvcHQgdGhlIHF1aWNrIHJlcGFpciBvcHRpb24gIG90aGVyd2lzZSBzY3JpcHQgd2lsbCBnbyBmb3IgZnVsbCByZXBhaXIgb3B0aW9uXQoKIz4KCjwjCgojRHluYW1pYyB2YXJpYWJsZQpbU3RyaW5nXSRSZXBhaXJNU09mZmljZSA9ICJNaWNyb3NvZnQgT2ZmaWNlIFByb2Zlc3Npb25hbCBQbHVzIDIwMTkgLSBlbi11cyIKW2Jvb2xdICRJc1F1aWNrUmVwYWlyU2VsZWN0ZWQgPSAkdHJ1ZQoKW3N0cmluZ10kQWRtaW4gPSAiS3VtYXJnQEluZmluaXRlTG9jYWwub25taWNyb3NvZnQuY29tIgpbc3RyaW5nXSRBZG1pblBhc3MgPSAiSG9uZXlqYWluMTk4MiIKW3N0cmluZ10kVXNlciA9ICJqYW5ldDNASW5maW5pdGVMb2NhbC5vbm1pY3Jvc29mdC5jb20iCgojb3B0aW9uYWwKW2Jvb2xdICREaXNwbGF5UmVwYWlyTW9kYWwgPSAkZmFsc2UKW2Jvb2xdICRTdGFydEFuZFN0b3BQcmludFNwb29sZXIgPSAkZmFsc2UKCiM+CgojU3RhdGljIHZhcmlhYmxlCltib29sXSAkV2FpdEZvckluc3RhbGxUb0ZpbmlzaCA9ICR0cnVlCgpmdW5jdGlvbiBFc2NhcGUtSlNPTlN0cmluZygkc3RyKXsKICAgIGlmICgkc3RyIC1lcSAkbnVsbCkge3JldHVybiAiIn0KICAgICAgICAgJHN0ciA9ICRzdHIuVG9TdHJpbmcoKS5SZXBsYWNlKCciJywnXCInKS5SZXBsYWNlKCdcJywnXFwnKS5SZXBsYWNlKCJgbiIsJ1xuJykuUmVwbGFjZSgiYHIiLCdccicpLlJlcGxhY2UoImB0IiwnXHQnKQogICAgcmV0dXJuICRzdHI7Cn0KCgpmdW5jdGlvbiBDb252ZXJ0VG8tSlNPTlAyKCRtYXhEZXB0aCA9IDEwLCRmb3JjZUFycmF5ID0gJGZhbHNlKSB7CmJlZ2luIHsKJGRhdGEgPSBAKCkKfQpwcm9jZXNzewokZGF0YSArPSAkXwp9CmVuZHsKaWYgKCRkYXRhLmxlbmd0aCAtZXEgMSAtYW5kICRmb3JjZUFycmF5IC1lcSAkZmFsc2UpIHsKJHZhbHVlID0gJGRhdGFbMF0KfSBlbHNlIHsgCiR2YWx1ZSA9ICRkYXRhCn0KCgppZiAoJHZhbHVlIC1lcSAkbnVsbCkgewpyZXR1cm4gIm51bGwiCn0KCgoKCiRkYXRhVHlwZSA9ICR2YWx1ZS5HZXRUeXBlKCkuTmFtZQpzd2l0Y2ggLXJlZ2V4ICgkZGF0YVR5cGUpIHsKICAgICAgICAgICAgJ1N0cmluZycgIHsKcmV0dXJuICAiYCJ7MH1gIiIgLWYgKEVzY2FwZS1KU09OU3RyaW5nICR2YWx1ZSApCn0KICAgICAgICAgICAgJyhTeXN0ZW1cLik/RGF0ZVRpbWUnICB7cmV0dXJuICAiYCJ7MDp5eXl5LU1NLWRkfVR7MDpISDptbTpzc31gIiIgLWYgJHZhbHVlfQogICAgICAgICAgICAnSW50MzJ8RG91YmxlJyB7cmV0dXJuICAiJHZhbHVlIn0KJ0Jvb2xlYW4nIHtyZXR1cm4gICIkdmFsdWUiLlRvTG93ZXIoKX0KICAgICAgICAgICAgJyhTeXN0ZW1cLik/T2JqZWN0XFtcXScgeyAjIGFycmF5CmlmICgkbWF4RGVwdGggLWxlIDApe3JldHVybiAiYCIkdmFsdWVgIiJ9CiRqc29uUmVzdWx0ID0gJycKZm9yZWFjaCgkZWxlbSBpbiAkdmFsdWUpewojaWYgKCRlbGVtIC1lcSAkbnVsbCkge2NvbnRpbnVlfQppZiAoJGpzb25SZXN1bHQuTGVuZ3RoIC1ndCAwKSB7JGpzb25SZXN1bHQgKz0nLCAnfSAKJGpzb25SZXN1bHQgKz0gKCRlbGVtIHwgQ29udmVydFRvLUpTT05QMiAtbWF4RGVwdGggKCRtYXhEZXB0aCAtMSkpCn0KcmV0dXJuICJbIiArICRqc29uUmVzdWx0ICsgIl0iCiAgICAgICAgICAgIH0KJyhTeXN0ZW1cLik/SGFzaHRhYmxlJyB7ICMgaGFzaHRhYmxlCiRqc29uUmVzdWx0ID0gJycKZm9yZWFjaCgka2V5IGluICR2YWx1ZS5LZXlzKXsKaWYgKCRqc29uUmVzdWx0Lkxlbmd0aCAtZ3QgMCkgeyRqc29uUmVzdWx0ICs9JywgJ30KJGpzb25SZXN1bHQgKz0gCkAiCiJ7MH0iOiB7MX0KIkAgLWYgJGtleSAsICgkdmFsdWVbJGtleV0gfCBDb252ZXJ0VG8tSlNPTlAyIC1tYXhEZXB0aCAoJG1heERlcHRoIC0xKSApCn0KcmV0dXJuICJ7IiArICRqc29uUmVzdWx0ICsgIn0iCn0KICAgICAgICAgICAgZGVmYXVsdCB7ICNvYmplY3QKaWYgKCRtYXhEZXB0aCAtbGUgMCl7cmV0dXJuICAiYCJ7MH1gIiIgLWYgKEVzY2FwZS1KU09OU3RyaW5nICR2YWx1ZSl9CnJldHVybiAieyIgKwooKCR2YWx1ZSB8IEdldC1NZW1iZXIgLU1lbWJlclR5cGUgKnByb3BlcnR5IHwgJSB7IApAIgoiezB9IjogezF9CiJAIC1mICRfLk5hbWUgLCAoJHZhbHVlLigkXy5OYW1lKSB8IENvbnZlcnRUby1KU09OUDIgLW1heERlcHRoICgkbWF4RGVwdGggLTEpICkgCn0pIC1qb2luICcsICcpICsgIn0iCiAgICB9Cn0KfQp9CgoKRnVuY3Rpb24gUmVwYWlyTVNPZmZpY2VYbWwgewoKaWYoJERpc3BsYXlSZXBhaXJNb2RhbCl7CkAiCjxDb25maWd1cmF0aW9uIFByb2R1Y3Q9IlByb1BsdXMiPiAgCgogIDwhLS0gIDxEaXNwbGF5IExldmVsPSJub25lIiBDb21wbGV0aW9uTm90aWNlPSJubyIgU3VwcHJlc3NNb2RhbD0ieWVzIiBBY2NlcHRFdWxhPSJ5ZXMiIC8+IC0tPgogICAgPERpc3BsYXkgTGV2ZWw9ImZ1bGwiIENvbXBsZXRpb25Ob3RpY2U9InllcyIgU3VwcHJlc3NNb2RhbD0ibm8iIEFjY2VwdEV1bGE9Im5vIiAvPgogICA8L0NvbmZpZ3VyYXRpb24+CiJACn0KZWxzZXsKCkAiCjxDb25maWd1cmF0aW9uIFByb2R1Y3Q9IlByb1BsdXMiPiAgCgogICAgPERpc3BsYXkgTGV2ZWw9Im5vbmUiIENvbXBsZXRpb25Ob3RpY2U9Im5vIiBTdXBwcmVzc01vZGFsPSJ5ZXMiIEFjY2VwdEV1bGE9InllcyIgLz4gCiAgIDwhLS0gPERpc3BsYXkgTGV2ZWw9ImZ1bGwiIENvbXBsZXRpb25Ob3RpY2U9InllcyIgU3VwcHJlc3NNb2RhbD0ibm8iIEFjY2VwdEV1bGE9Im5vIiAvPiAtLT4KICAgPC9Db25maWd1cmF0aW9uPgoiQAoKfQoKfQoKZnVuY3Rpb24gVG9jaGVja1J1bm5pbmdTdGF0dXNvZldPUkQgCnsKCiRFcnJvckFjdGlvblByZWZlcmVuY2UgPSAnc2lsZW50bHljb250aW51ZScKJERBdGFXaXRob3V0ID0gW1J1bnRpbWUuSW50ZXJvcHNlcnZpY2VzLk1hcnNoYWxdOjpHZXRBY3RpdmVPYmplY3QoJ1dvcmQuQXBwbGljYXRpb24nKQoKICAgIGlmKCREQXRhV2l0aG91dCAtZXEgJG51bGwpCiAgICB7CiAgICAgICAjV3JpdGUtSG9zdCAnTm8gYW55IHJ1bm5pbmcgaW5zdGFuY2UgZm91bmQnCiAgICAgICByZXR1cm4gJHRydWUKICAgIH0KICAgIGVsc2V7CiAgICAgICAgICAgIyBXcml0ZS1Ib3N0ICJTYXZpbmcgYW5kIENsb3Npbmcgb3BlbmVkIGluc3RhbmNlIgogICAgICAgICAgICREQXRhV2l0aG91dC5Eb2N1bWVudHMgfCAlIHsgJF8uU2F2ZWQgPSAkdHJ1ZSA7ICRfLkNsb3NlKCl9IC1FcnJvclZhcmlhYmxlIEFCQwogICAgICAgICAgIAogICAgICAgICAgIGlmKCRBQkMuY291bnQgLWVxIDApCiAgICAgICAgICAgewogICAgICAgICAgICAgIyB3cml0ZS1ob3N0ICdTdWNjZXNzZnVsbHkgU2F2ZWQgYW5kIGNsb3NlZCBpbnN0YW5jZScgLUZvcmVncm91bmRDb2xvciBHcmVlbgogICAgICAgICAgICAgcmV0dXJuICR0cnVlCiAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAjIFdyaXRlLUhvc3QgIlVzZXIgZXJyb3IgOiBbJCgkQUJDKSJdIC1Gb3JlZ3JvdW5kQ29sb3IgUmVkIC1CYWNrZ3JvdW5kQ29sb3IgV2hpdGUgIAogICAgICAgICAgICAgcmV0dXJuICRmYWxzZSAKICAgICAgICAgICB9CiAgICB9Cgp9CkZ1bmN0aW9uIFZlcmlmeUFuZFVwZGF0ZU1vZHVsZShbU3RyaW5nXSAkTW9kdWxlTmFtZSkKewogICAgJElzQ29udGludWVkID0gJGZhbHNlCgogICAgV3JpdGUtSG9zdCAiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSIKICAgIFdyaXRlLUhvc3QgIlZlcmlmeWluZyBNb2R1bGUgOiAkTW9kdWxlTmFtZSIKICAgIFdyaXRlLUhvc3QgIiAgICAiIAoKICAgICMgSWYgbW9kdWxlIGlzIGltcG9ydGVkIHNheSB0aGF0IGFuZCBkbyBub3RoaW5nCiAgICBpZiAoR2V0LU1vZHVsZSB8IFdoZXJlLU9iamVjdCB7JF8uTmFtZSAtZXEgJE1vZHVsZU5hbWV9KSAKICAgIHsKICAgICAgICB3cml0ZS1ob3N0IC1Gb3JlZ3JvdW5kQ29sb3IgOCAiYHQgJE1vZHVsZU5hbWUgaXMgYWxyZWFkeSBpbnN0YWxsZWQiIAogICAgICAgICRJc0NvbnRpbnVlZCA9ICR0cnVlCiAgICB9IAogICAgZWxzZSAKICAgIHsKICAgICAgICAjIElmIG1vZHVsZSBpcyBub3QgaW1wb3J0ZWQsIGJ1dCBhdmFpbGFibGUgb24gZGlzayB0aGVuIGltcG9ydAogICAgICAgIGlmIChHZXQtTW9kdWxlIC1MaXN0QXZhaWxhYmxlIHwgV2hlcmUtT2JqZWN0IHskXy5OYW1lIC1lcSAkTW9kdWxlTmFtZX0pIAogICAgICAgIHsKICAgICAgICAgICAgdHJ5CiAgICAgICAgICB7CiAgICAgICAgICAgIEltcG9ydC1Nb2R1bGUgJE1vZHVsZU5hbWUgLVZlcmJvc2UgLUVycm9yQWN0aW9uIFN0b3AKICAgICAgICAgICAgd3JpdGUtaG9zdCAtRm9yZWdyb3VuZENvbG9yIDggImB0ICRNb2R1bGVOYW1lIGlzIGFscmVhZHkgaW5zdGFsbGVkIiAKICAgICAgICAgICAgJElzQ29udGludWVkID0gJHRydWUKCiAgICAgICAgICB9Y2F0Y2h7CiAgICAgICAgICAgIAogICAgICAgICAgICAgV3JpdGUtSG9zdCAiTWVzc2FnZTogWyQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpIl0gLUZvcmVncm91bmRDb2xvciBSZWQgLUJhY2tncm91bmRDb2xvciBXaGl0ZSAgICAgICAgIAogICAgICAgICAgICAgcmV0dXJuICRmYWxzZQoKICAgICAgICAgIH0KICAgICAgICB9IAogICAgICAgIGVsc2UgCiAgICAgICAgewogICAgICAgICAgICAjIElmIG1vZHVsZSBpcyBub3QgaW1wb3J0ZWQsIG5vdCBhdmFpbGFibGUgb24gZGlzaywgYnV0IGlzIGluIG9ubGluZSBnYWxsZXJ5IHRoZW4gaW5zdGFsbCBhbmQgaW1wb3J0CiAgICAgICAgICAgIGlmIChGaW5kLU1vZHVsZSAtTmFtZSAkTW9kdWxlTmFtZSB8IFdoZXJlLU9iamVjdCB7JF8uTmFtZSAtZXEgJE1vZHVsZU5hbWV9KSAKICAgICAgICAgICAgewogICAgICAgICAgICAgICB0cnl7CgogICAgICAgICAgICAgICAgICAgIHdyaXRlLWhvc3QgIkluc3RhbGxpbmc6ICRNb2R1bGVOYW1lICIKCiAgICAgICAgICAgICAgICAgICAgSW5zdGFsbC1Nb2R1bGUgLU5hbWUgJE1vZHVsZU5hbWUgLUZvcmNlIC1WZXJib3NlIC1TY29wZSBDdXJyZW50VXNlciAtRXJyb3JBY3Rpb24gU3RvcAogICAgICAgICAgICAgICAgICAgIEltcG9ydC1Nb2R1bGUgJE1vZHVsZU5hbWUgLVZlcmJvc2UgLUVycm9yQWN0aW9uIFN0b3AKCiAgICAgICAgICAgICAgICAgICAgd3JpdGUtaG9zdCAtRm9yZWdyb3VuZENvbG9yIDggImB0ICRNb2R1bGVOYW1lIGluc3RhbGxlZCBzdWNlc3NmdWxseSIKICAgICAgICAgICAgICAgICAgICAkSXNDb250aW51ZWQgPSAkdHJ1ZQoKICAgICAgICAgICAgICAgIH1jYXRjaCB7CgogICAgICAgICAgICAgICAgICAgICBXcml0ZS1Ib3N0ICJNZXNzYWdlOiBbJCgkXy5FeGNlcHRpb24uTWVzc2FnZSkiXSAtRm9yZWdyb3VuZENvbG9yIFJlZCAtQmFja2dyb3VuZENvbG9yIFdoaXRlICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkZmFsc2UKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gCiAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICMgSWYgbW9kdWxlIGlzIG5vdCBpbXBvcnRlZCwgbm90IGF2YWlsYWJsZSBhbmQgbm90IGluIG9ubGluZSBnYWxsZXJ5IHRoZW4gYWJvcnQKICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJFcnJvciB3aGlsZSBJbnN0YWxsaW5nIE1vZHVsZSAkTW9kdWxlTmFtZSA6IG5vdCBpbXBvcnRlZCwgbm90IGF2YWlsYWJsZSBhbmQgbm90IGluIG9ubGluZSBnYWxsZXJ5LCBleGl0aW5nLiIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gJElzQ29udGludWVkCn0KCkZ1bmN0aW9uIENoZWNrLU8zNjVQcmVDb25kaXRpb257CgogICAgaWYoKFtzdHJpbmddOjpJc051bGxPckVtcHR5KCRBZG1pbikpIC1hbmQgLW5vdChbc3RyaW5nXTo6SXNOdWxsT3JFbXB0eSgkQWRtaW5QYXNzKSkpCiAgICB7CiAgICAgICAgcmV0dXJuICJFcnJvcjpQbGVhc2UgcHJvdmlkZSBhZG1pbiBsb2dpbiBpZCIgCgogICAgfWVsc2VpZigtbm90KFtzdHJpbmddOjpJc051bGxPckVtcHR5KCRBZG1pbikpIC1hbmQgKFtzdHJpbmddOjpJc051bGxPckVtcHR5KCRBZG1pblBhc3MpKSl7CgogICAgICAgIHJldHVybiAiRXJyb3I6UGxlYXNlIHByb3ZpZGUgYWRtaW4gbG9naW4gcGFzc3dvcmQiIAoKICAgIH1lbHNlaWYoKFtzdHJpbmddOjpJc051bGxPckVtcHR5KCRBZG1pbikpIC1hbmQgKFtzdHJpbmddOjpJc051bGxPckVtcHR5KCRBZG1pblBhc3MpKSl7CgogICAgICAgIHJldHVybiAiRXJyb3I6UGxlYXNlIHByb3ZpZGUgYWRtaW4gbG9naW4gcGFzc3dvcmQiIAogIAogICAgfQoKICAgICRBZG1pblBhc3MgPSAkQWRtaW5QYXNzIHwgQ29udmVydFRvLVNlY3VyZVN0cmluZyAtYXNQbGFpblRleHQgLUZvcmNlCiAgICAkQWRtaW5DcmVkZW50aWFsID0gTmV3LU9iamVjdCBTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLlBTQ3JlZGVudGlhbCgkQWRtaW4sJEFkbWluUGFzcykKICAgICAgICAKICAgICMjIyMjIyBWZXJpZnkgd2hldGhlciBNU29ubGluZSBpcyBpbnN0YWxsZWQgIyMjIyMjIyMgICAKCiAgICBpZihWZXJpZnlBbmRVcGRhdGVNb2R1bGUgLU1vZHVsZU5hbWUgJ01TT25saW5lJyl7ICAgIAogICAgfWVsc2V7IHJldHVybiAiRXJyb3I6TVNPbmxpbmUgZG93bmxvYWQgZmFpbGVkICIgfSAgICAgIAogICAgIAogICAgIyMjIyMjIFZlcmlmeSB3aGV0aGVyIEF6dXJlQUQgaXMgaW5zdGFsbGVkICMjIyMjIyMjIyAgICAKCiAgICBpZihWZXJpZnlBbmRVcGRhdGVNb2R1bGUgLU1vZHVsZU5hbWUgJ0F6dXJlQUQnKXsgICAgCiAgICB9ZWxzZXsgcmV0dXJuICJFcnJvcjpBenVyZUFEIGRvd25sb2FkIGZhaWxlZCIgfQoKICAgICAjIyMjIyBDaGVjayBpZiBkb21haW4gZXhpc3QgIyMjIyMjIyMKCiAgICAkQWRtaW5Eb21haW4gPSAkQWRtaW4uU3BsaXQoJ0AnKVsxXSAgCiAgICAkVXNlckRvbWFpbiA9ICRVc2VyLlNwbGl0KCdAJylbMV0KCiAgICAKICAgICMjIyMjIENoZWNrIGlmIE8zNjUgQWRtaW4gY3JlZGVudGlhbHMgd29yayAjIyMjIyMjIwogICAgIyMjIyMgQ2hlY2sgaWYgdXNlciBleGlzdCAjIyMjIyMjIwogICAKICAgIHRyeXsKICAgICAgICBDb25uZWN0LU1zb2xTZXJ2aWNlIC1DcmVkZW50aWFsICRBZG1pbkNyZWRlbnRpYWwgLUVycm9yQWN0aW9uIFN0b3AKCiAgICAgICAgaWYoJD8pewogICAgCiAgICAgICAgICAgIGlmKFtzdHJpbmddOjpJc051bGxPckVtcHR5KCRVc2VyKSkKICAgICAgICAgICAgeyAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICByZXR1cm4gIkVycm9yOlBsZWFzZSBwcm92aWRlIHVzZXIgbmFtZSIgCiAgICAgICAgICAgIH0gCgogICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICAgICAgJGQgPSBHZXQtTXNvbERvbWFpbiAtRG9tYWluTmFtZSAkVXNlckRvbWFpbiAtRXJyb3JBY3Rpb24gU3RvcAogICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJD8peyAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIkVycm9yOkRvbWFpbiBuYW1lICQoJFVzZXJEb21haW4pIGlzIG5vdCBmb3VuZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9Y2F0Y2h7CgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIkVycm9yOiQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpIgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYoISgkQWRtaW5Eb21haW4gLWVxICRVc2VyRG9tYWluKSl7CgogICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiRXJyb3I6QWRtaW4gRG9tYWluICQoJEFkbWluRG9tYWluKSBtaXNtYXRjaGVkIHdpdGggdXNlciBkb21haW4gJCgkVXNlckRvbWFpbikiCgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIAogICAgICAgICAgIHRyeXsKCiAgICAgICAgICAgICBHZXQtTXNvbFVzZXIgLVVzZXJQcmluY2lwYWxOYW1lICRVc2VyIC1FcnJvckFjdGlvbiBTdG9wCgogICAgICAgICAgICAgICBpZigkPyl7ICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHJldHVybiAiRXJyb3I6VXNlciBub3QgZm91bmQiCiAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgfWNhdGNoewogICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJldHVybiAiRXJyb3I6WyQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpXSIgCiAgICAgICAgICAgfSAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIHJldHVybiAiRXJyb3I6TVMgb25saW5lIHNlcnZpY2UgaXMgbm90IGNvbm5lY3RlZCIKICAgICAgICB9CgogICAgfWNhdGNoIHsKIAogICAgICByZXR1cm4gIkVycm9yOlskKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKV0iCiAgICB9CgogICByZXR1cm4gIlN1Y2Nlc3M6UHJlQ29uZGl0aW9uIGV4ZWN1dGVkIHN1Y2Nlc3NmdWxseSIKfQoKRnVuY3Rpb24gUmVwYWlyLU1TT2ZmaWNlIHsKCltDbWRsZXRCaW5kaW5nKCldClBhcmFtKAogICAgW3N0cmluZ10gJENvbXB1dGVyTmFtZSA9ICRlbnY6Q09NUFVURVJOQU1FLAoKICAgIFtQYXJhbWV0ZXIoKV0KICAgIFtib29sXSAkV2FpdEZvckluc3RhbGxUb0ZpbmlzaCA9ICRUcnVlLAoKICAgIFtQYXJhbWV0ZXIoVmFsdWVGcm9tUGlwZWxpbmVCeVByb3BlcnR5TmFtZT0kdHJ1ZSldCiAgICBbc3RyaW5nXSAkVGFyZ2V0RmlsZVBhdGggPSAkTlVMTAogICAgICAgIAopCgogICAgIFByb2Nlc3N7CiAgICAgICAgCiAgICAgICAgJFN0ZEFyciA9IEAoKQogICAgICAgICRTdGRPdXRBcnIgPSBAKCkKICAgICAgICAkU3RkRXJyQXJyID0gQCgpCiAgICAgICAgJFJlc3VsdCA9ICIiCgogICAgICAgICRPZmZpY2VSZXBhaXJFcnJPYmplY3QgPSBOZXctT2JqZWN0IC1UeXBlTmFtZSBwc29iamVjdAogICAgICAgICRPZmZpY2VSZXBhaXJFcnJPYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBUYXNrTmFtZSAtVmFsdWUgIk1TIG9mZmljZSByZXBhaXIiCiAgICAgICAgJE9mZmljZVJlcGFpckVyck9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFN0YXR1cyAtVmFsdWUgImZhaWwiIAogICAgICAgICRPZmZpY2VSZXBhaXJFcnJPYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBDb2RlIC1WYWx1ZSAxCiAgICAgICAgJE9mZmljZVJlcGFpckVyck9iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIHN0ZGVyciAtVmFsdWUgJG51bGwKICAgICAgICAkT2ZmaWNlUmVwYWlyRXJyT2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUmVzdWx0IC1WYWx1ZSAkbnVsbAogICAgICAgICRPZmZpY2VSZXBhaXJFcnJPYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBzdGRvdXQgLVZhbHVlICRudWxsICAKICAgICAgICAKICAgICAgICAKICAgICAgICAkU3VjY2Vzc0FyciA9IEAoKQogICAgICAgICRTdWNjZXNzT3V0QXJyID0gQCgpICAgICAgICAKICAgICAgICAkU3VjY2Vzc1Jlc3VsdCA9ICIiICAgCgogICAgICAgICRPZmZpY2VSZXBhaXJTdWNjT2JqZWN0ID0gTmV3LU9iamVjdCAtVHlwZU5hbWUgcHNvYmplY3QKICAgICAgICAkT2ZmaWNlUmVwYWlyU3VjY09iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFRhc2tOYW1lIC1WYWx1ZSAiTVMgb2ZmaWNlIHJlcGFpciIKICAgICAgICAkT2ZmaWNlUmVwYWlyU3VjY09iamVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFN0YXR1cyAtVmFsdWUgIlN1Y2Nlc3MiIAogICAgICAgICRPZmZpY2VSZXBhaXJTdWNjT2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgQ29kZSAtVmFsdWUgMAogICAgICAgICRPZmZpY2VSZXBhaXJTdWNjT2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUmVzdWx0IC1WYWx1ZSAkbnVsbAogICAgICAgICRPZmZpY2VSZXBhaXJTdWNjT2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgc3Rkb3V0IC1WYWx1ZSAkbnVsbCAgCiAgICAgICAgJE9mZmljZVJlcGFpclN1Y2NPYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBkYXRhT2JqZWN0IC1WYWx1ZSAkbnVsbCAgCgogICAgICAgICRjdXJyZW50RmlsZU5hbWUgPSBHZXQtQ3VycmVudEZpbGVOYW1lCiAgICAgICAgU2V0LUFsaWFzIC1uYW1lIExJTkVOVU0gLXZhbHVlIEdldC1DdXJyZW50TGluZU51bWJlciAKICAgICAgICAgICAKICAgICAgICBbYm9vbF0gJGlzSW5QaXBlID0gJHRydWUKICAgICAgICBpZiAoKCRQU0NtZGxldC5NeUludm9jYXRpb24uUGlwZWxpbmVMZW5ndGggLWVxIDEpIC1vciBgCiAgICAgICAgICAgICgkUFNDbWRsZXQuTXlJbnZvY2F0aW9uLlBpcGVsaW5lTGVuZ3RoIC1lcSAkUFNDbWRsZXQuTXlJbnZvY2F0aW9uLlBpcGVsaW5lUG9zaXRpb24pKSB7CgogICAgICAgICAgICAkaXNJblBpcGUgPSAkZmFsc2UKICAgICAgICB9CgogICAgICAgICMjIyMjIyMjIyMjICBWZXJpZnkgUG93ZXJzaGVsbCBWZXJzaW9uICMjIyMjIyMjIyMjIyMjCgogICAgICAgICRHZXRQU1ZlcnNpb24gPSAkUFNWZXJzaW9uVGFibGUuUFNWZXJzaW9uIAogICAgICAgICRQU01ham9yID0gJEdldFBTVmVyc2lvbi5NYWpvci5Ub1N0cmluZygpCiAgICAgICAgJFBTTWlub3IgPSAkR2V0UFNWZXJzaW9uLk1pbm9yLlRvU3RyaW5nKCkKICAgICAgICAkUFNWZXJzaW9uID0gJFBTTWFqb3IgKyAnLicgKyAkUFNNaW5vcgoKICAgICAgICAgaWYoW1ZlcnNpb25dJFBTVmVyc2lvbiAtZ3QgW1ZlcnNpb25dIjIuMCIgLW9yIFtWZXJzaW9uXSRQU1ZlcnNpb24gLWVxIFtWZXJzaW9uXSIyLjAiKXsKICAgICAgICAgICAjIFdyaXRlLUhvc3QgIlBTIFZlcnNpb24gOiAkKFtWZXJzaW9uXSRQU1ZlcnNpb24pIiAgICAKICAgICAgICB9ZWxzZSB7ICAgICAgICAKICAgICAgICAgICAjIFdyaXRlLUhvc3QgIkluc3RhbGxlZCBQUyBWZXJzaW9uIDogJChbVmVyc2lvbl0kUFNWZXJzaW9uKSBpcyBub3Qgc3VwcG9ydGVkIgoKICAgICAgICAgICAkU3RkRXJyID0gTmV3LU9iamVjdCBQU09iamVjdCAtUHJvcGVydHkgQHsJCSAgICAgICAKCQkgICAgICAgICAgICAgICAgICBpZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSAgIlBvd2VyU2hlbGwgdmVyc2lvbiBiZWxvdyAyLjAgaXMgbm90IHN1cHBvcnRlZCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsID0gIlBvd2VyU2hlbGwgdmVyc2lvbiBiZWxvdyAyLjAgaXMgbm90IHN1cHBvcnRlZCI7CgogICAgICAgICAgICAgICB9CgogICAgICAgICAgICRTdGRFcnJBcnIgKz0gJFN0ZEVycgogICAgICAgICAgICRTdGRPdXRBcnIgKz0gKCJQb3dlclNoZWxsIHZlcnNpb24gYmVsb3cgMi4wIGlzIG5vdCBzdXBwb3J0ZWQiKQogICAgICAgICAgICRSZXN1bHQgPSAiUG93ZXJTaGVsbCB2ZXJzaW9uIGJlbG93IDIuMCBpcyBub3Qgc3VwcG9ydGVkIgoKICAgICAgICAgICAkT2ZmaWNlUmVwYWlyRXJyT2JqZWN0LnN0ZGVyciA9ICRTdGRFcnJBcnIKICAgICAgICAgICAkT2ZmaWNlUmVwYWlyRXJyT2JqZWN0LlJlc3VsdCA9ICRSZXN1bHQgICAgICAgICAgCiAgICAgICAgICAgJE9mZmljZVJlcGFpckVyck9iamVjdC5zdGRvdXQgPSAkU3RkT3V0QXJyCgogICAgICAgICAgIHJldHVybiAkT2ZmaWNlUmVwYWlyRXJyT2JqZWN0CiAgICAgICAgfQoKICAgICAgICAjIyMjIyMjIyMjIyAgVmVyaWZ5IE9wZXJhdGluZyBTeXN0ZW0gVmVyc2lvbiAjIyMjIyMjIyMjIyMjIwoKICAgICAgICAkR2V0T1NWZXJzaW9uID0gW1ZlcnNpb25dKEdldC1JdGVtUHJvcGVydHkgLVBhdGggIiQoJEVudjpXaW5kaXIpXFN5c3RlbTMyXGhhbC5kbGwiIGAKICAgICAgICAgICAgICAgICAgIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlKS5WZXJzaW9uSW5mby5GaWxlVmVyc2lvbi5TcGxpdCgpWzBdCgogICAgICAgICRPU01ham9yID0gJEdldE9TVmVyc2lvbi5NYWpvci5Ub1N0cmluZygpCiAgICAgICAgJE9TTWlub3IgPSAkR2V0T1NWZXJzaW9uLk1pbm9yLlRvU3RyaW5nKCkKICAgICAgICAkT1NWZXJzaW9uID0gJE9TTWFqb3IgKyAnLicgKyAkT1NNaW5vcgoKICAgICAgICBpZihbVmVyc2lvbl0kT1NWZXJzaW9uIC1ndCBbVmVyc2lvbl0iNi4wIiAtb3IgW1ZlcnNpb25dJE9TVmVyc2lvbiAtZXEgW1ZlcnNpb25dIjYuMCIpeyAgICAgICAgIAogICAgICAgICAgIAogICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgCiAgICAgICAgICAgJFN0ZEVyciA9IE5ldy1PYmplY3QgUFNPYmplY3QgLVByb3BlcnR5IEB7CQkgICAgICAgCgkJICAgICAgICAgICAgICAgICAgaWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlID0gICJQb3dlclNoZWxsIFNjcmlwdCBzdXBwb3J0cyBXaW5kb3cgNywgV2luZG93IDIwMDhSMiBhbmQgaGlnaGVyIHZlcnNpb24gb3BlcmF0aW5nIHN5c3RlbSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsID0gIlBvd2VyU2hlbGwgU2NyaXB0IHN1cHBvcnRzIFdpbmRvdyA3LCBXaW5kb3cgMjAwOFIyIGFuZCBoaWdoZXIgdmVyc2lvbiBvcGVyYXRpbmcgc3lzdGVtIjsKCiAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgJFN0ZEVyckFyciArPSAkU3RkRXJyCiAgICAgICAgICAgJFN0ZE91dEFyciArPSAoIlBvd2VyU2hlbGwgU2NyaXB0IHN1cHBvcnRzIFdpbmRvdyA3LCBXaW5kb3cgMjAwOFIyIGFuZCBoaWdoZXIgdmVyc2lvbiBvcGVyYXRpbmcgc3lzdGVtIikKICAgICAgICAgICAkUmVzdWx0ID0gIlBvd2VyU2hlbGwgU2NyaXB0IHN1cHBvcnRzIFdpbmRvdyA3LCBXaW5kb3cgMjAwOFIyIGFuZCBoaWdoZXIgdmVyc2lvbiBvcGVyYXRpbmcgc3lzdGVtIgoKICAgICAgICAgICAkT2ZmaWNlUmVwYWlyRXJyT2JqZWN0LnN0ZGVyciA9ICRTdGRFcnJBcnIKICAgICAgICAgICAkT2ZmaWNlUmVwYWlyRXJyT2JqZWN0LlJlc3VsdCA9ICRSZXN1bHQgICAgICAgICAgCiAgICAgICAgICAgJE9mZmljZVJlcGFpckVyck9iamVjdC5zdGRvdXQgPSAkU3RkT3V0QXJyCgogICAgICAgICAgIHJldHVybiAkT2ZmaWNlUmVwYWlyRXJyT2JqZWN0CiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICB9CgogICAgICAgICMjIyMjIyMjIyMjICBHZXQgT3BlcmF0aW5nIFN5c3RlbSBBcmNoaXRlY3R1cmUgIyMjIyMjIyMjIyMjIyMKCiAgICAgICAgJE9TQXJjaGl0ZWN0dXJlID0gKEdldC1XbWlPYmplY3QgV2luMzJfT3BlcmF0aW5nU3lzdGVtKS5PU0FyY2hpdGVjdHVyZQogICAgICAgICMgV3JpdGUtSG9zdCAgIk9TIEFyY2hpdGVjdHVyZSA6ICRPU0FyY2hpdGVjdHVyZSIKCiAgICAgICAgJFN1Y2Nlc3NBcnIgKz0gIk9TIEFyY2hpdGVjdHVyZSA6ICRPU0FyY2hpdGVjdHVyZSIKICAgICAgICAkU3VjY2Vzc091dEFyciArPSAiT1MgQXJjaGl0ZWN0dXJlIDogJE9TQXJjaGl0ZWN0dXJlIgoKICAgICAgICAjIyMjIyMjIyMjIyAgR2V0IE9mZmljZSBWZXJzaW9ucyAjIyMjIyMjIyMjIyMjIwoKICAgICAgICAkTVNPZmZpY2VWZXJzaW9uID0gR2V0LU9mZmljZVZlcnNpb24gIAogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIGlmKCRNU09mZmljZVZlcnNpb24gLWVxICROVUxMKXsgICAgICAgICAgICAKICAgICAgICAgICAgICMgV3JpdGUtSG9zdCAiTVMgT2ZmaWNlIGlzIG5vdCBpbnN0YWxsZWQgb24gc3lzdGVtIgogICAgICAgICAgICAgIyByZXR1cm4KCiAgICAgICAgICAgJFN0ZEVyciA9IE5ldy1PYmplY3QgUFNPYmplY3QgLVByb3BlcnR5IEB7CQkgICAgICAgCgkJICAgICAgICAgICAgICAgICAgaWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlID0gICJNUyBPZmZpY2UgaXMgbm90IGluc3RhbGxlZCBvbiBzeXN0ZW0iCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsID0gIk1TIE9mZmljZSBpcyBub3QgaW5zdGFsbGVkIG9uIHN5c3RlbSIKCiAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgJFN0ZEVyckFyciArPSAkU3RkRXJyCiAgICAgICAgICAgJFN0ZE91dEFyciArPSAoIk1TIE9mZmljZSBpcyBub3QgaW5zdGFsbGVkIG9uIHN5c3RlbSIpCiAgICAgICAgICAgJFJlc3VsdCA9ICJNUyBPZmZpY2UgaXMgbm90IGluc3RhbGxlZCBvbiBzeXN0ZW0iCgogICAgICAgICAgICRPZmZpY2VSZXBhaXJFcnJPYmplY3Quc3RkZXJyID0gJFN0ZEVyckFycgogICAgICAgICAgICRPZmZpY2VSZXBhaXJFcnJPYmplY3QuUmVzdWx0ID0gJFJlc3VsdCAgICAgICAgICAKICAgICAgICAgICAkT2ZmaWNlUmVwYWlyRXJyT2JqZWN0LnN0ZG91dCA9ICRTdGRPdXRBcnIKCiAgICAgICAgICAgcmV0dXJuICRPZmZpY2VSZXBhaXJFcnJPYmplY3QKICAgICAgICAgfSAKICAgICAgICAgCiAgICAgICAgICAgICAgICAKICAgICAgICAgJE9mZmljZVZlcnNpb24gPSAkTVNPZmZpY2VWZXJzaW9uLlZlcnNpb24uU3BsaXQoJy4nKQogICAgICAgICAkT01ham9yID0gJE9mZmljZVZlcnNpb25bMF0KICAgICAgICAgJE9NaW5vciA9ICRPZmZpY2VWZXJzaW9uWzFdCiAgICAgICAgICRPVmVyc2lvbiA9ICRPTWFqb3IgKyAnLicgKyAkT01pbm9yCgogICAgICAgICAgICAgICAKICAgICAgICAgaWYoW1ZlcnNpb25dJE9WZXJzaW9uIC1ndCBbVmVyc2lvbl0iMTQuMCIgLW9yIFtWZXJzaW9uXSRPVmVyc2lvbiAtZXEgW1ZlcnNpb25dIjE0LjAiKXsgIAogICAgICAgICAgICAgICAKICAgICAgICAgICAgIyBXcml0ZS1Ib3N0ICJNUyBPZmZpY2UgVmVyc2lvbiA6ICQoW1ZlcnNpb25dJE9WZXJzaW9uKSIgCiAgICAgICAgICAgICRTdWNjZXNzQXJyICs9ICJNUyBPZmZpY2UgVmVyc2lvbiA6ICQoW1ZlcnNpb25dJE9WZXJzaW9uKSIgCiAgICAgICAgICAgICRTdWNjZXNzT3V0QXJyICs9ICJNUyBPZmZpY2UgVmVyc2lvbiA6ICQoW1ZlcnNpb25dJE9WZXJzaW9uKSIKICAgICAgICAgICAgICAgCiAgICAgICAgIH1lbHNlIHsKCiAgICAgICAgICAgIyBXcml0ZS1Ib3N0ICJJbnN0YWxsZWQgTVMgb2ZmaWNlIFZlcnNpb24gOiAkKCRPZmZpY2VWZXJzaW9uKSBpcyBub3Qgc3VwcG9ydGVkIgogICAgICAgICAgICMgcmV0dXJuCgogICAgICAgICAgICRTdGRFcnIgPSBOZXctT2JqZWN0IFBTT2JqZWN0IC1Qcm9wZXJ0eSBAewkJICAgICAgIAoJCSAgICAgICAgICAgICAgICAgIGlkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZSA9ICAiSW5zdGFsbGVkIE1TIG9mZmljZSBWZXJzaW9uIGlzc3VlIgogICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbCA9ICJJbnN0YWxsZWQgTVMgb2ZmaWNlIFZlcnNpb24gOiAkKCRPZmZpY2VWZXJzaW9uKSBpcyBub3Qgc3VwcG9ydGVkIgoKICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAkU3RkRXJyQXJyICs9ICRTdGRFcnIKICAgICAgICAgICAkU3RkT3V0QXJyICs9ICgiSW5zdGFsbGVkIE1TIG9mZmljZSBWZXJzaW9uIDogJCgkT2ZmaWNlVmVyc2lvbikgaXMgbm90IHN1cHBvcnRlZCIpCiAgICAgICAgICAgJFJlc3VsdCA9ICJJbnN0YWxsZWQgTVMgb2ZmaWNlIFZlcnNpb24gOiAkKCRPZmZpY2VWZXJzaW9uKSBpcyBub3Qgc3VwcG9ydGVkIgoKICAgICAgICAgICAkT2ZmaWNlUmVwYWlyRXJyT2JqZWN0LnN0ZGVyciA9ICRTdGRFcnJBcnIKICAgICAgICAgICAkT2ZmaWNlUmVwYWlyRXJyT2JqZWN0LlJlc3VsdCA9ICRSZXN1bHQgICAgICAgICAgCiAgICAgICAgICAgJE9mZmljZVJlcGFpckVyck9iamVjdC5zdGRvdXQgPSAkU3RkT3V0QXJyCgogICAgICAgICAgIHJldHVybiAkT2ZmaWNlUmVwYWlyRXJyT2JqZWN0CgogICAgICAgICB9ICAgICAgCgogICAgICAgICBpZigkTVNPZmZpY2VWZXJzaW9uLkNvdW50IC1ndCAxKSB7ICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICA8IyBXcml0ZS1Ib3N0ICAiICAgICIKICAgICAgICAgICAgIFdyaXRlLUhvc3QgIk11bHRpcGxlIHZlcnNpb25zIG9mIE1TIE9mZmljZSBpcyBpbnN0YWxsZWQgb24gdGhlIHN5c3RlbS4gVW5pbnN0YWxsIGBuIGFsbCB2ZXJzaW9ucyBvZiBvZmZpY2UgYW5kIGluc3RhbGxlZCBkZXNpcmVkIHZlcnNpb24iIAogICAgICAgICAgICAgV3JpdGUtSG9zdCAgIiAgICAiCiAgICAgICAgICAgICBXcml0ZS1Ib3N0ICJMaXN0IG9mIGFsbCBpbnN0YWxsZWQgTVMgT2ZmaWNlIgogICAgICAgICAgICAgV3JpdGUtSG9zdCAiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSIKICAgICAgICAgICAgIFdyaXRlLUhvc3QgIiQoJE1TT2ZmaWNlVmVyc2lvbi5EaXNwbGF5TmFtZSkgICQoJE1TT2ZmaWNlVmVyc2lvbi5WZXJzaW9uKSIKICAgICAgICAgICAgIHJldHVybiAgIz4KCiAgICAgICAgICAgICAkU3RkRXJyID0gTmV3LU9iamVjdCBQU09iamVjdCAtUHJvcGVydHkgQHsJCSAgICAgICAKCQkgICAgICAgICAgICAgICAgICBpZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSAgIk11bHRpcGxlIHZlcnNpb25zIG9mIE1TIE9mZmljZSBpcyBpbnN0YWxsZWQgb24gdGhlIHN5c3RlbS4gVW5pbnN0YWxsIGFsbCB2ZXJzaW9ucyBvZiBvZmZpY2UgYW5kIGluc3RhbGxlZCBkZXNpcmVkIHZlcnNpb24iIAogICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbCA9ICJMaXN0IG9mIGFsbCBpbnN0YWxsZWQgTVMgT2ZmaWNlIgoKICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgJFN0ZEVyckFyciArPSAkU3RkRXJyCiAgICAgICAgICAgICAgICRTdGRPdXRBcnIgKz0gJE1TT2ZmaWNlVmVyc2lvbi5EaXNwbGF5TmFtZQogICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgJFJlc3VsdCA9ICJNdWx0aXBsZSB2ZXJzaW9ucyBvZiBNUyBPZmZpY2UgaXMgaW5zdGFsbGVkIG9uIHRoZSBzeXN0ZW0uIFVuaW5zdGFsbCBhbGwgdmVyc2lvbnMgb2Ygb2ZmaWNlIGFuZCBpbnN0YWxsZWQgZGVzaXJlZCB2ZXJzaW9uIiAKCiAgICAgICAgICAgICAgICRPZmZpY2VSZXBhaXJFcnJPYmplY3Quc3RkZXJyID0gJFN0ZEVyckFycgogICAgICAgICAgICAgICAkT2ZmaWNlUmVwYWlyRXJyT2JqZWN0LlJlc3VsdCA9ICRSZXN1bHQgICAgICAgICAgCiAgICAgICAgICAgICAgICRPZmZpY2VSZXBhaXJFcnJPYmplY3Quc3Rkb3V0ID0gJFN0ZE91dEFycgoKICAgICAgICAgICAgICAgJE9mZmljZVJlcGFpckVyck9iaiA9ICBOZXctT2JqZWN0IHBzb2JqZWN0CiAgICAgICAgICAgICAgICRPZmZpY2VSZXBhaXJFcnJPYmogfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJbnN0YWxsZWRPZmZpY2VzIC1WYWx1ZSAkTVNPZmZpY2VWZXJzaW9uLkRpc3BsYXlOYW1lCgogICAgICAgICAgICAgICAkT2ZmaWNlUmVwYWlyRXJyT2JqZWN0IHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgZGF0YU9iamVjdCAtVmFsdWUgJE9mZmljZVJlcGFpckVyck9iagoKICAgICAgICAgICAgICAgcmV0dXJuICRPZmZpY2VSZXBhaXJFcnJPYmplY3QKCiAgICAgICAgICB9CiAgICAgICAgICAKICAgICAgICAgIGlmKCEoJFJlcGFpck1TT2ZmaWNlIC1lcSAkTVNPZmZpY2VWZXJzaW9uLkRpc3BsYXlOYW1lKSl7CiAgICAgICAgICAgIAogICAgICAgICAgICA8IwogICAgICAgICAgICAgCiAgICAgICAgICAgICBXcml0ZS1Ib3N0ICAiICAgICIKICAgICAgICAgICAgIFdyaXRlLUhvc3QgIlNlbGVjdGVkIE1TIG9mZmljZSBpcyBub3QgZm91bmQiCiAgICAgICAgICAgICBXcml0ZS1Ib3N0ICJMaXN0IG9mIGFsbCBpbnN0YWxsZWQgTVMgT2ZmaWNlIgogICAgICAgICAgICAgV3JpdGUtSG9zdCAiLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSIKICAgICAgICAgICAgIFdyaXRlLUhvc3QgIiQoJE1TT2ZmaWNlVmVyc2lvbi5EaXNwbGF5TmFtZSkiCiAgICAgICAgICAgICAKICAgICAgICAgICAgICM+CgogICAgICAgICAgICAgJFN0ZEVyciA9IE5ldy1PYmplY3QgUFNPYmplY3QgLVByb3BlcnR5IEB7CQkgICAgICAgCgkJICAgICAgICAgICAgICAgICAgaWQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlID0gICJTZWxlY3RlZCBNUyBvZmZpY2UgaXMgbm90IGZvdW5kIgogICAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbCA9ICJMaXN0IG9mIGFsbCBpbnN0YWxsZWQgTVMgT2ZmaWNlIgoKICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgJFN0ZEVyckFyciArPSAkU3RkRXJyCiAgICAgICAgICAgICAgICRTdGRPdXRBcnIgKz0gJE1TT2ZmaWNlVmVyc2lvbi5EaXNwbGF5TmFtZQogICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgJFJlc3VsdCA9ICJTZWxlY3RlZCBNUyBvZmZpY2UgaXMgbm90IGZvdW5kIgoKICAgICAgICAgICAgICAgJE9mZmljZVJlcGFpckVyck9iamVjdC5zdGRlcnIgPSAkU3RkRXJyQXJyCiAgICAgICAgICAgICAgICRPZmZpY2VSZXBhaXJFcnJPYmplY3QuUmVzdWx0ID0gJFJlc3VsdCAgICAgICAgICAKICAgICAgICAgICAgICAgJE9mZmljZVJlcGFpckVyck9iamVjdC5zdGRvdXQgPSAkU3RkT3V0QXJyCgogICAgICAgICAgICAgICAkT2ZmaWNlUmVwYWlyRXJyT2JqID0gIE5ldy1PYmplY3QgcHNvYmplY3QKICAgICAgICAgICAgICAgJE9mZmljZVJlcGFpckVyck9iaiB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIEluc3RhbGxlZE9mZmljZXMgLVZhbHVlICRNU09mZmljZVZlcnNpb24uRGlzcGxheU5hbWUKCiAgICAgICAgICAgICAgICRPZmZpY2VSZXBhaXJFcnJPYmplY3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBkYXRhT2JqZWN0IC1WYWx1ZSAkT2ZmaWNlUmVwYWlyRXJyT2JqCgogICAgICAgICAgICAgICByZXR1cm4gJE9mZmljZVJlcGFpckVyck9iamVjdAoKICAgICAgICAgIH0KCiAgICAgICAgIGlmKCRNU09mZmljZVZlcnNpb24uQ291bnQgLWVxIDEgLWFuZCAkUmVwYWlyTVNPZmZpY2UgLWVxICJNaWNyb3NvZnQgT2ZmaWNlIFByb2Zlc3Npb25hbCBQbHVzIDIwMTAiKSB7ICAKICAgICAgICAgICAgaWYoLW5vdChUb2NoZWNrUnVubmluZ1N0YXR1c29mV09SRCkpewogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgIAogICAgIGlmKCRNU09mZmljZVZlcnNpb24uRGlzcGxheU5hbWUuQ29udGFpbnMoIjM2NSIpKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAkTzM2NVByZUNoZWNrID0gQ2hlY2stTzM2NVByZUNvbmRpdGlvbiAgCgogICAgICAgICAgICAgJE8zNjVQcmVDaGVja0FyciA9ICRPMzY1UHJlQ2hlY2suU3BsaXQoJzonKQoKICAgICAgICAgICAgIGlmKCAkTzM2NVByZUNoZWNrQXJyWzBdIC1lcSAiRXJyb3IiKXsKCiAgICAgICAgICAgICAgICAkU3RkRXJyID0gTmV3LU9iamVjdCBQU09iamVjdCAtUHJvcGVydHkgQHsJCSAgICAgICAKCQkgICAgICAgICAgICAgICAgICBpZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSAgIkVycm9yIG9jY3VyZWQiIDsKICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWwgPSAkTzM2NVByZUNoZWNrQXJyWzBdIDsKCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAkU3RkRXJyQXJyICs9ICRTdGRFcnIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgJFJlc3VsdCA9ICJFcnJvciBvY2N1cmVkIgoKICAgICAgICAgICAgICAgJE9mZmljZVJlcGFpckVyck9iamVjdC5zdGRlcnIgPSAkU3RkRXJyQXJyCiAgICAgICAgICAgICAgICRPZmZpY2VSZXBhaXJFcnJPYmplY3QuUmVzdWx0ID0gJFJlc3VsdCAgICAgICAgICAKICAgICAgICAgICAgICAgJE9mZmljZVJlcGFpckVyck9iamVjdC5zdGRvdXQgPSAkU3RkT3V0QXJyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICByZXR1cm4gJE9mZmljZVJlcGFpckVyck9iamVjdAogICAgICAgICAgICAgfQoKICAgICAgICAgICAgIDwjICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgIGlmKCEkTzM2NVByZUNoZWNrKXsKICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAjPgogICAgICAgICAgfQogICAgICAgICAgCiAgICAgICAgCiAgICAgICAgICAjIyMjIyMjIyMjIyMjIyMjIFJlcGFpciBPZmZpY2UgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICAgICAgICAgICAgIAogICAgICAgICAgIGlmKCEkTVNPZmZpY2VWZXJzaW9uLkNsaWNrVG9SdW4pewogICAgICAgICAgICAgIAogICAgICAgICAgICAgICRJbnN0YWxsYXRpb25UeXBlID0gIk1TSSIKICAgICAgICAgICAgICAkUmVwYWlyVHlwZVN0cmluZyA9ICJSZXBhaXIiCgogICAgICAgICAgICAgICRSZXBhaXJYbWxQYXRoID0gIiRlbnY6UFVCTElDXERvY3VtZW50c1xSZXBhaXJNU09mZmljZVhtbC54bWwiCiAgICAgICAgICAgICAgUmVwYWlyTVNPZmZpY2VYbWwgfCBPdXQtRmlsZSAkUmVwYWlyWG1sUGF0aAoKICAgICAgICAgICAgICAkUmVwYWlyU3RyaW5nID0gJE1TT2ZmaWNlVmVyc2lvbi5Vbmluc3RhbGxTdHJpbmcuU3BsaXQoJy8nKVswXSAgCiAgICAgICAgICAgICAKICAgICAgICAgICAgICAkY21kTGluZSA9ICQoJFJlcGFpclN0cmluZykKICAgICAgICAgICAgICAkY21kU3ViQXJncyA9ICIvcmVwYWlyIFBST1BMVVNSIC9jb25maWcgJFJlcGFpclhtbFBhdGgiIAoKICAgICAgICAgICB9ZWxzZXsgICAgICAgICAgICAgCiAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAkSW5zdGFsbGF0aW9uVHlwZSA9ICJDbGlja1RvUnVuIiAgCiAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAkaW5kZXggPSAkTVNPZmZpY2VWZXJzaW9uLk1vZGlmeVBhdGguTGFzdEluZGV4T2YoJyInKQogICAgICAgICAgICAgICAkUmVwYWlyU3RyaW5nID0gJE1TT2ZmaWNlVmVyc2lvbi5Nb2RpZnlQYXRoLlN1YnN0cmluZygwLCRpbmRleCArIDEpCiAgICAgICAgICAgICAgICRMYW5ndWFnZVN0cmluZyA9ICRNU09mZmljZVZlcnNpb24uTW9kaWZ5UGF0aC5TdWJzdHJpbmcoJGluZGV4ICsgMSkuU3BsaXQoIiAiKVszXQogICAgICAgICAgICAgICAkUGxhdGZvcm1TdHJpbmcgPSAkTVNPZmZpY2VWZXJzaW9uLk1vZGlmeVBhdGguU3Vic3RyaW5nKCRpbmRleCArIDEpLlNwbGl0KCIgIilbMl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgJGNtZExpbmUgPSAkKCRSZXBhaXJTdHJpbmcpCgogICAgICAgICAgICAgICBpZighJElzUXVpY2tSZXBhaXJTZWxlY3RlZCl7CiAgICAgICAgICAgICAgICAgJFJlcGFpclR5cGVTdHJpbmcgPSAiRnVsbFJlcGFpciIKICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgJFJlcGFpclR5cGVTdHJpbmcgPSAiUXVpY2tSZXBhaXIiCiAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICRjbWRTdWJBcmdzID0gInNjZW5hcmlvPVJlcGFpciAkKCRQbGF0Zm9ybVN0cmluZykgJCgkTGFuZ3VhZ2VTdHJpbmcpIFJlcGFpclR5cGU9JCgkUmVwYWlyVHlwZVN0cmluZykgRGlzcGxheUxldmVsPSQoJERpc3BsYXlSZXBhaXJNb2RhbCkiIAogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgIH0gCiAgICAgICAKICAgICAgICAkTVNPZmZpY2VWZXJzaW9uID0gICRNU09mZmljZVZlcnNpb25bMF0KICAgICAgICAkTVNPZmZpY2VOYW1lID0gJE1TT2ZmaWNlVmVyc2lvbi5EaXNwbGF5TmFtZSAgICAgICAgICAgICAgICAKICAgICAgICAgICAgIAogICAgICAgIGlmKCRNU09mZmljZVZlcnNpb24pIHsKICAgICAgICAgICAgaWYoISgkaXNJblBpcGUpKSB7ICAKICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgPCMgV3JpdGUtSG9zdCAiICAiIAogICAgICAgICAgICAgICAgV3JpdGUtSG9zdCAiUGxlYXNlIHdhaXQgd2hpbGUgTVMgT2ZmaWNlIGlzIGJlaW5nIHJlcGFpcmVkLi4uIiAgCiAgICAgICAgICAgICAgICBXcml0ZS1Ib3N0ICJNUyBPZmZpY2UgVmVyc2lvbiA6ICQoJE1TT2ZmaWNlTmFtZSkiCiAgICAgICAgICAgICAgICBXcml0ZS1Ib3N0ICJJbnN0YWxsYXRpb24gVHlwZSA6ICQoJEluc3RhbGxhdGlvblR5cGUpIgogICAgICAgICAgICAgICAgV3JpdGUtSG9zdCAiUmVwYWlyIFR5cGUgOiAkKCRSZXBhaXJUeXBlU3RyaW5nKSIgIz4KCiAgICAgICAgICAgICAgICMgJFN1Y2Nlc3NSZXN1bHQgPSAiUGxlYXNlIHdhaXQgd2hpbGUgTVMgT2ZmaWNlIGlzIGJlaW5nIHJlcGFpcmVkLi4uIiAgCgogICAgICAgICAgICAgICAgJFN1Y2Nlc3NBcnIgKz0gIk1TIE9mZmljZSBWZXJzaW9uIDogJCgkTVNPZmZpY2VOYW1lKSIKICAgICAgICAgICAgICAgICRTdWNjZXNzQXJyICs9ICJJbnN0YWxsYXRpb24gVHlwZSA6ICQoJEluc3RhbGxhdGlvblR5cGUpIgogICAgICAgICAgICAgICAgJFN1Y2Nlc3NBcnIgKz0gIlJlcGFpciBUeXBlIDogJCgkUmVwYWlyVHlwZVN0cmluZykiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAkU3VjY2Vzc091dEFyciArPSAiTVMgT2ZmaWNlIFZlcnNpb24gOiAkKCRNU09mZmljZU5hbWUpIgogICAgICAgICAgICAgICAgJFN1Y2Nlc3NPdXRBcnIgKz0gIkluc3RhbGxhdGlvbiBUeXBlIDogJCgkSW5zdGFsbGF0aW9uVHlwZSkiCiAgICAgICAgICAgICAgICAkU3VjY2Vzc091dEFyciArPSAiUmVwYWlyIFR5cGUgOiAkKCRSZXBhaXJUeXBlU3RyaW5nKSIgCiAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfSAgICAgICAgICAgIAogICAgICAgIH0KICAgICAgIAogICAgICAgICBpZigkU3RhcnRBbmRTdG9wUHJpbnRTcG9vbGVyKXsgIyBzdG9wIFNwb29sZXIgICAgICAgICAgICAKICAgICAgICAgICBTdG9wLVNlcnZpY2UgLU5hbWUgU3Bvb2xlciAtRm9yY2UKICAgICAgICAgfQogICAgICAgICAgCiAgICAgICAgIFN0YXJ0UHJvY2VzcyAtZXhlY0ZpbGVQYXRoICRjbWRMaW5lIC1leGVjUGFyYW1zICRjbWRTdWJBcmdzIC1XYWl0Rm9yRXhpdCAkdHJ1ZSAgCiAgICAgICAgIAogICAgICAgICBpZigkU3RhcnRBbmRTdG9wUHJpbnRTcG9vbGVyKXsgIyBzdGFydCBTcG9vbGVyCiAgICAgICAgICAgU3RhcnQtU2VydmljZSAtTmFtZSBTcG9vbGVyIAogICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgIAogICAgICAgIGlmKCRNU09mZmljZVZlcnNpb24peyAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgIGlmICghKCRpc0luUGlwZSkpIHsgCiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgIGlmKCRSZXBhaXJUeXBlU3RyaW5nIC1lcSAiRnVsbFJlcGFpciIgKXsKCiAgICAgICAgICAgICAgICAjIFdyaXRlLUhvc3QgIlBsZWFzZSBzdGF5IG9ubGluZSB3aGlsZSBvZmZpY2UgZG93bmxvYWRzIGFuZCBpbnN0YWxsICIKICAgICAgICAgICAgICAgICRTdWNjZXNzUmVzdWx0ID0gIlBsZWFzZSBzdGF5IG9ubGluZSB3aGlsZSBvZmZpY2UgZG93bmxvYWRzIGFuZCBpbnN0YWxsICIKCiAgICAgICAgICAgICAgIH1lbHNlewoKICAgICAgICAgICAgICAgICMgV3JpdGUtSG9zdCAiTVMgT2ZmaWNlIGhhcyBiZWVuIHJlcGFpcmVkIHN1Y2Nlc3NmdWxseSIKICAgICAgICAgICAgICAgICAkU3VjY2Vzc1Jlc3VsdCA9ICJNUyBPZmZpY2UgaGFzIGJlZW4gcmVwYWlyZWQgc3VjY2Vzc2Z1bGx5IgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgICAKICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIGlmICgkaXNJblBpcGUpIHsKICAgICAgICAgICAgJHJlc3VsdHMgPSBuZXctb2JqZWN0IFBTT2JqZWN0W10gMDsKICAgICAgICAgICAgJFJlc3VsdCA9IE5ldy1PYmplY3QgLVR5cGVOYW1lIFBTT2JqZWN0IAogICAgICAgICAgICBBZGQtTWVtYmVyIC1JbnB1dE9iamVjdCAkUmVzdWx0IC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSAiVGFyZ2V0RmlsZVBhdGgiIC1WYWx1ZSAkVGFyZ2V0RmlsZVBhdGgKICAgICAgICAgICAgJFJlc3VsdAogICAgICAgIH0KCiAgICAgICAgJFN1Y2Nlc3NBcnIgPSBAKCkKICAgICAgICAkU3VjY2Vzc091dEFyciA9IEAoKSAgICAgICAgCiAgICAgICAgJFN1Y2Nlc3NSZXN1bHQgPSAiIiAgIAoKICAgICAgICAkT2ZmaWNlUmVwYWlyU3VjY09iaiA9ICBOZXctT2JqZWN0IHBzb2JqZWN0CiAgICAgICAgJE9mZmljZVJlcGFpclN1Y2NPYmogfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBNc09mZmljZVJlcGFpciAtVmFsdWUgJFN1Y2Nlc3NBcnIKICAgICAgIAogICAgICAgICRPZmZpY2VSZXBhaXJTdWNjT2JqZWN0LlJlc3VsdCA9ICRTdWNjZXNzUmVzdWx0CiAgICAgICAgJE9mZmljZVJlcGFpclN1Y2NPYmplY3Quc3Rkb3V0ID0gJFN1Y2Nlc3NPdXRBcnIKICAgICAgICAkT2ZmaWNlUmVwYWlyU3VjY09iamVjdC5kYXRhT2JqZWN0ID0gJE9mZmljZVJlcGFpclN1Y2NPYmogIAoKICAgICAgICByZXR1cm4gJE9mZmljZVJlcGFpclN1Y2NPYmplY3QKCiAgICB9Cn0KCkZ1bmN0aW9uIEdldC1PZmZpY2VWZXJzaW9uICB7CgogICAgICBbT3V0cHV0VHlwZSgnU3lzdGVtLlNvZnR3YXJlLkludmVudG9yeScpXQogICAgICBbQ21kbGV0YmluZGluZygpXSAKCiAgUGFyYW0oIAoKICAgICkgICAgICAgICAKCiAgQmVnaW4geyAKICAgIAogICAgW1N0cmluZ10kQ29tcHV0ZXJuYW1lPSRlbnY6Q09NUFVURVJOQU1FCiAgICAgICAgICAKICAgICRpbnN0YWxsS2V5cyA9ICdTT0ZUV0FSRVxNaWNyb3NvZnRcV2luZG93c1xDdXJyZW50VmVyc2lvblxVbmluc3RhbGwnLAogICAgICAgICAgICAgICAgICAgJ1NPRlRXQVJFXFdvdzY0MzJOb2RlXE1pY3Jvc29mdFxXaW5kb3dzXEN1cnJlbnRWZXJzaW9uXFVuaW5zdGFsbCcKICAgICAgICAgICAgICAgICAgICAgICAKICAgICRkZWZhdWx0RGlzcGxheVNldCA9ICdEaXNwbGF5TmFtZScsJ1ZlcnNpb24nLCdDb21wdXRlck5hbWUnLCdDbGllbnRDdWx0dXJlJwoKICAgICRkZWZhdWx0RGlzcGxheVByb3BlcnR5U2V0ID0gTmV3LU9iamVjdCBTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLlBTUHJvcGVydHlTZXQoJ0RlZmF1bHREaXNwbGF5UHJvcGVydHlTZXQnLFtzdHJpbmdbXV0kZGVmYXVsdERpc3BsYXlTZXQpCiAgICAkUFNTdGFuZGFyZE1lbWJlcnMgPSBbU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5QU01lbWJlckluZm9bXV1AKCRkZWZhdWx0RGlzcGxheVByb3BlcnR5U2V0KQogIAogIH0KCiAgUHJvY2VzcyAgeyAgIAogIAogICAgICRhcnJheSA9IEAoKQogICAgICRNU2V4Y2VwdGlvbkxpc3QgPSAibXVpIiwidmlzaW8iLCJwcm9qZWN0IiwicHJvb2ZpbmciLCJ2aXN1YWwiLCJTaGFyZWQiLCJBY2Nlc3MiLCJFeGNlbCIsIlBvd2VyUG9pbnQiLCJQdWJsaXNoZXIiYAogICAgICAgICAgICAgICAgICAgICAgICAsIk91dGxvb2siLCJQcm9vZiIsIkNvbXBvbmVudHMiOyAgCiAgICAgICAgICAgCiAgICAgICBJZiAgKFRlc3QtQ29ubmVjdGlvbiAtQ29tcHV0ZXJOYW1lICAkQ29tcHV0ZXJuYW1lIC1Db3VudCAgMSAtUXVpZXQpIHsKICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIEZvckVhY2goJFBhdGggaW4gJGluc3RhbGxLZXlzKSB7IAoKICAgICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAgIkNoZWNraW5nIFBhdGg6ICRQYXRoIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgVHJ5ICB7ICRyZWc9W21pY3Jvc29mdC53aW4zMi5yZWdpc3RyeWtleV06Ok9wZW5SZW1vdGVCYXNlS2V5KCdMb2NhbE1hY2hpbmUnLCRDb21wdXRlcm5hbWUgKX0KICAgICAgICAgICAgICAgICAgQ2F0Y2ggIHsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICRfICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICBUcnkgIHsgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgJHJlZ2tleT0kcmVnLk9wZW5TdWJLZXkoJFBhdGgpICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAkc3Via2V5cz0kcmVna2V5LkdldFN1YktleU5hbWVzKCkgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgIEZvckVhY2ggKCRrZXkgaW4gJHN1YmtleXMpeyAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIktleTogJEtleSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzS2V5PSRQYXRoKyJcXCIrJGtleSAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUcnkgeyAgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpc1N1YktleT0kcmVnLk9wZW5TdWJLZXkoJHRoaXNLZXkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICREaXNwbGF5TmFtZSA9ICAkdGhpc1N1YktleS5nZXRWYWx1ZSgiRGlzcGxheU5hbWUiKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSWYgKCREaXNwbGF5TmFtZSAgLUFORCAkRGlzcGxheU5hbWUgIC1ub3RtYXRjaCAnXlVwZGF0ZSAgZm9yfHJvbGx1cHxeU2VjdXJpdHkgVXBkYXRlfF5TZXJ2aWNlIFBhY2t8XkhvdEZpeCcpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkRGF0ZSA9ICR0aGlzU3ViS2V5LkdldFZhbHVlKCdJbnN0YWxsRGF0ZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRQdWJsaXNoZXIgPSAgVHJ5IHsgJHRoaXNTdWJLZXkuR2V0VmFsdWUoJ1B1Ymxpc2hlcicpLlRyaW0oKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2F0Y2ggeyAkdGhpc1N1YktleS5HZXRWYWx1ZSgnUHVibGlzaGVyJyl9IAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRWZXJzaW9uID0gVHJ5IHsgJHRoaXNTdWJLZXkuR2V0VmFsdWUoJ0Rpc3BsYXlWZXJzaW9uJykuVHJpbUVuZCgoW2NoYXJbXV0oMzIsMCkpKX0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhdGNoIHsgJHRoaXNTdWJLZXkuR2V0VmFsdWUoJ0Rpc3BsYXlWZXJzaW9uJyl9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFVuaW5zdGFsbFN0cmluZyA9ICBUcnkgeyR0aGlzU3ViS2V5LkdldFZhbHVlKCdVbmluc3RhbGxTdHJpbmcnKS5UcmltKCl9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXRjaCB7JHRoaXNTdWJLZXkuR2V0VmFsdWUoJ1VuaW5zdGFsbFN0cmluZycpfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRJbnN0YWxsTG9jYXRpb24gPSAgVHJ5IHskdGhpc1N1YktleS5HZXRWYWx1ZSgnSW5zdGFsbExvY2F0aW9uJykuVHJpbSgpfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2F0Y2ggeyR0aGlzU3ViS2V5LkdldFZhbHVlKCdJbnN0YWxsTG9jYXRpb24nKX0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkSW5zdGFsbFNvdXJjZSA9ICBUcnkgeyR0aGlzU3ViS2V5LkdldFZhbHVlKCdJbnN0YWxsU291cmNlJykuVHJpbSgpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2F0Y2ggeyR0aGlzU3ViS2V5LkdldFZhbHVlKCdJbnN0YWxsU291cmNlJyl9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJE1vZGlmeVBhdGggPSAgVHJ5IHskdGhpc1N1YktleS5HZXRWYWx1ZSgnTW9kaWZ5UGF0aCcpLlRyaW0oKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhdGNoIHskdGhpc1N1YktleS5HZXRWYWx1ZSgnTW9kaWZ5UGF0aCcpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkVmVyc2lvbkNvdW50ID0gMCAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkRGlzcGxheU5hbWUuVG9VcHBlcigpLkNvbnRhaW5zKCJNSUNST1NPRlQgT0ZGSUNFIikpe2NvbnRpbnVlfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJERpc3BsYXlOYW1lLlRvVXBwZXIoKS5Db250YWlucygiTUlDUk9TT0ZUIE9GRklDRSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaXNPZmZpY2VQcmltYXJ5UHJvZHVjdCA9ICRUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCgkZXhjZXB0aW9uIGluICRNU2V4Y2VwdGlvbkxpc3QpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJERpc3BsYXlOYW1lLlRvTG93ZXIoKS5Db250YWlucygkZXhjZXB0aW9uLlRvTG93ZXIoKSkpewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaXNPZmZpY2VQcmltYXJ5UHJvZHVjdCA9ICRmYWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJGlzT2ZmaWNlUHJpbWFyeVByb2R1Y3Qpe2NvbnRpbnVlfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2xpY2tUb1J1bkNvbXBvbmVudCA9ICRmYWxzZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEoJFVuaW5zdGFsbFN0cmluZy5Db250YWlucygiT2ZmaWNlQ2xpY2tUb1J1biIpIC1vciAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRVbmluc3RhbGxTdHJpbmcuQ29udGFpbnMoInNldHVwIikpKXtjb250aW51ZX0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2xpY2tUb1J1bkNvbXBvbmVudCA9ICRmYWxzZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkVW5pbnN0YWxsU3RyaW5nLkNvbnRhaW5zKCJPZmZpY2VDbGlja1RvUnVuIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2xpY2tUb1J1bkNvbXBvbmVudCA9ICR0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFZlcnNpb25Db3VudCArPSAxCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJE9iamVjdCA9IFtwc2N1c3RvbW9iamVjdF1AewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb21wdXRlcm5hbWUgPSAkQ29tcHV0ZXJuYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlzcGxheU5hbWUgPSAkRGlzcGxheU5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZXJzaW9uICA9ICRWZXJzaW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHVibGlzaGVyID0gJFB1Ymxpc2hlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVuaW5zdGFsbFN0cmluZyA9ICRVbmluc3RhbGxTdHJpbmcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluc3RhbGxMb2NhdGlvbiA9ICRJbnN0YWxsTG9jYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbnN0YWxsU291cmNlICA9ICRJbnN0YWxsU291cmNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2xpY2tUb1J1biA9ICRjbGlja1RvUnVuQ29tcG9uZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9kaWZ5UGF0aCA9ICRNb2RpZnlQYXRoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ291bnQgPSAkVmVyc2lvbkNvdW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJE9iamVjdC5wc3R5cGVuYW1lcy5pbnNlcnQoMCwnU3lzdGVtLlNvZnR3YXJlLkludmVudG9yeScpICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvYmplY3QgfCBBZGQtTWVtYmVyIE1lbWJlclNldCBQU1N0YW5kYXJkTWVtYmVycyAkUFNTdGFuZGFyZE1lbWJlcnMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRhcnJheSArPSAkT2JqZWN0IAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSMgRW5kIERpc3BsYXkgaWYKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAjIEVuZCBEaXNwbGF5IHRyeQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhdGNoIHsgIFdyaXRlLVdhcm5pbmcgIiRLZXkgOiAkXyIgfSAgIAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAjRW5kIHN1YmtleSBmb3JlYWNoIAoKICAgICAgICAgICAgICAgICAgICAgICB9ICMgdHJ5IERyaWxsIGRvd24gaW50byB0aGUgVW5pbnN0YWxsIGtleSB1c2luZyB0aGUgT3BlblN1YktleSBNZXRob2QgCiAgICAgICAgICAgICAgICAgICAgICAgQ2F0Y2ggIHt9ICAgCgogICAgICAgICAgICAgICAgJHJlZy5DbG9zZSgpIAoKICAgICAgICAgICAgIH0gIyBFbmQgcGF0aHMgZm9yZWFjaCAgICAgICAgICAgICAgICAgCgogICAgICAgICB9ICMgZW5kIHRlc3QgY29ubmVjdGlvbiBpZiAgICAgICAgIAogICAgICAgICBFbHNlICB7IFdyaXRlLUVycm9yICAiJCgkQ29tcHV0ZXJuYW1lKTogdW5hYmxlIHRvIHJlYWNoIHJlbW90ZSBzeXN0ZW0hIiB9CgogICAgIHJldHVybiAkYXJyYXkgCgogICB9ICMgZW5kIHByb2Nlc3MgCgp9CgpGdW5jdGlvbiBTdGFydFByb2Nlc3MgewoJUGFyYW0KCSgKICAgICAgICBbUGFyYW1ldGVyKCldCgkJW1N0cmluZ10kZXhlY0ZpbGVQYXRoLAoKICAgICAgICBbUGFyYW1ldGVyKCldCiAgICAgICAgW1N0cmluZ10kZXhlY1BhcmFtcywKCiAgICAgICAgW1BhcmFtZXRlcigpXQogICAgICAgIFtib29sXSRXYWl0Rm9yRXhpdCA9ICRmYWxzZSwKCiAgICAgICAgW1BhcmFtZXRlcigpXQogICAgICAgIFtzdHJpbmddJExvZ0ZpbGVQYXRoCgkpCiAgICAKICAgICRjdXJyZW50RmlsZU5hbWUgPSBHZXQtQ3VycmVudEZpbGVOYW1lCiAgICBTZXQtQWxpYXMgLW5hbWUgTElORU5VTSAtdmFsdWUgR2V0LUN1cnJlbnRMaW5lTnVtYmVyIAogICAgJHRpbWVvdXRTZWNvbmRzID0gMjcwMDAwMAogICAgVHJ5CiAgICB7CiAgICAgICAgJHN0YXJ0RXhlID0gbmV3LW9iamVjdCBTeXN0ZW0uRGlhZ25vc3RpY3MuUHJvY2Vzc1N0YXJ0SW5mbwogICAgICAgICRzdGFydEV4ZS5GaWxlTmFtZSA9ICRleGVjRmlsZVBhdGgKICAgICAgICAkc3RhcnRFeGUuQXJndW1lbnRzID0gJGV4ZWNQYXJhbXMKICAgICAgICAkc3RhcnRFeGUuQ3JlYXRlTm9XaW5kb3cgPSAkZmFsc2UKICAgICAgICAkc3RhcnRFeGUuVXNlU2hlbGxFeGVjdXRlID0gJGZhbHNlCgogICAgICAgICRleGVjU3RhdGVtZW50ID0gW1N5c3RlbS5EaWFnbm9zdGljcy5Qcm9jZXNzXTo6U3RhcnQoJHN0YXJ0RXhlKSAKCiAgICAgICAgCiAgICAgICAgaWYgKCRXYWl0Rm9yRXhpdCkgewogICAgICAgICAgJGV4ZWNTdGF0ZW1lbnQuV2FpdEZvckV4aXQoJHRpbWVvdXRTZWNvbmRzKQogICAgICAgIH0KICAgICAgICAgICAgICAgCiAgICB9CiAgICBDYXRjaAogICAgewogICAgICAgIFdyaXRlLUhvc3QgJF8uRXhjZXB0aW9uLk1lc3NhZ2UgICAgICAgCiAgICB9Cn0KCkZ1bmN0aW9uIElzRG90U291cmNlZCgpIHsKICBbQ21kbGV0QmluZGluZyhTdXBwb3J0c1Nob3VsZFByb2Nlc3M9JHRydWUpXQogIHBhcmFtKAogICAgW1BhcmFtZXRlcihWYWx1ZUZyb21QaXBlbGluZUJ5UHJvcGVydHlOYW1lPSR0cnVlKV0KICAgIFtzdHJpbmddJEludm9jYXRpb25MaW5lID0gIiIKICApCiAgJGNtZExpbmUgPSAkSW52b2NhdGlvbkxpbmUuVHJpbSgpCiAgRG8gewogICAgJGNtZExpbmUgPSAkY21kTGluZS5SZXBsYWNlKCIgIiwgIiIpCiAgfSB3aGlsZSgkY21kTGluZS5Db250YWlucygiICIpKQoKICAkZG90U291cmNlZCA9ICRmYWxzZQogIGlmICgkY21kTGluZSAtbWF0Y2ggJ15cLlxcJykgewogICAgICRkb3RTb3VyY2VkID0gJGZhbHNlCiAgfSBlbHNlIHsKICAgICAkZG90U291cmNlZCA9ICgkY21kTGluZSAtbWF0Y2ggJ15cLicpCiAgfQoKICByZXR1cm4gJGRvdFNvdXJjZWQKfQoKZnVuY3Rpb24gR2V0LUN1cnJlbnRMaW5lTnVtYmVyIHsKICAgICRNeUludm9jYXRpb24uU2NyaXB0TGluZU51bWJlcgp9CgpmdW5jdGlvbiBHZXQtQ3VycmVudEZpbGVOYW1lewogICAgJE15SW52b2NhdGlvbi5TY3JpcHROYW1lLlN1YnN0cmluZygkTXlJbnZvY2F0aW9uLlNjcmlwdE5hbWUuTGFzdEluZGV4T2YoIlwiKSsxKQp9CgokZG90U291cmNlZCA9IElzRG90U291cmNlZCAtSW52b2NhdGlvbkxpbmUgJE15SW52b2NhdGlvbi5MaW5lCgppZiAoISgkZG90U291cmNlZCkpIHsKCiAgCiAgaWYoJFBTVmVyc2lvblRhYmxlLlBTVmVyc2lvbi5NYWpvciAtZXEgMil7CgogICAgICAgICAkciA9IFJlcGFpci1NU09mZmljZSAtQ29tcHV0ZXJOYW1lICRDb21wdXRlck5hbWUgIC1XYWl0Rm9ySW5zdGFsbFRvRmluaXNoICRXYWl0Rm9ySW5zdGFsbFRvRmluaXNoIC1UYXJnZXRGaWxlUGF0aCAkVGFyZ2V0RmlsZVBhdGggCiAgICAgICAgICRyIHwgIENvbnZlcnRUby1KU09OUDIKCiAgICB9ZWxzZXsKCiAgICAgICAkciA9IFJlcGFpci1NU09mZmljZSAtQ29tcHV0ZXJOYW1lICRDb21wdXRlck5hbWUgIC1XYWl0Rm9ySW5zdGFsbFRvRmluaXNoICRXYWl0Rm9ySW5zdGFsbFRvRmluaXNoIC1UYXJnZXRGaWxlUGF0aCAkVGFyZ2V0RmlsZVBhdGggCiAgICAgICAkciB8ICBDb252ZXJ0VG8tSnNvbiAtRGVwdGggMTAKCiAgICB9Cn0KCg==","jsonSchema":{"type":"object","properties":{"RepairMSOffice":{"type":"string","title":"Enter MS Office to be repaired","minLength":1},"IsQuickRepairSelected":{"type":"boolean","title":"Select quick repair","minLength":1},"Admin":{"type":"string","title":"Enter admin ID","minLength":1},"AdminPass":{"type":"string","title":"Enter admin password","minLength":1},"User":{"type":"string","title":"Enter user ID","minLength":1},"DisplayRepairModal":{"type":"boolean","title":"Select display repair modal","minLength":1},"StartAndStopPrintSpooler":{"type":"boolean","title":"Select start and stop spooler service","minLength":1}},"required":["RepairMSOffice"],"additionalProperties": false},"uiSchema":{"RepairMSOffice":{"ui:autofocus":true,"classNames":"col-sm-12"},"IsQuickRepairSelected":{"ui:autofocus":true,"classNames":"col-sm-12"},"Admin":{"ui:autofocus":true,"classNames":"col-sm-12"},"AdminPass":{"ui:autofocus":true,"classNames":"col-sm-12"},"User":{"ui:autofocus":true,"classNames":"col-sm-12"},"DisplayRepairModal":{"ui:autofocus":true,"classNames":"col-sm-12"},"StartAndStopPrintSpooler":{"ui:autofocus":true,"classNames":"col-sm-12"},"ui:order":["RepairMSOffice", "IsQuickRepairSelected", "Admin", "AdminPass", "User", "DisplayRepairModal" ,"StartAndStopPrintSpooler" ]},"isHDScript":false}
