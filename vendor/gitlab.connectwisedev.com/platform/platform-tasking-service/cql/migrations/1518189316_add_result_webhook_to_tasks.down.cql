//
// ATTENTION!!! DO NOT EDIT THIS FILE. IT IS CREATED FOLLOWING SCHEMA MIGRATION STRATEGY
//

DROP MATERIALIZED VIEW IF EXISTS tasks_by_runtime;

ALTER TABLE tasks DROP result_webhook;

CREATE MATERIALIZED VIEW IF NOT EXISTS tasks_by_runtime AS
    SELECT *
    FROM tasks
    WHERE run_time_unix IS NOT NULL AND partner_id IS NOT NULL AND id IS NOT NULL AND managed_endpoint_id IS NOT NULL AND external_task IS NOT NULL
    PRIMARY KEY (run_time_unix, id, partner_id, managed_endpoint_id, external_task);
